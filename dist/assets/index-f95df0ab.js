var IR=Object.defineProperty;var AR=(t,e,n)=>e in t?IR(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var PR=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var We=(t,e,n)=>(AR(t,typeof e!="symbol"?e+"":e,n),n);var jW=PR((XW,fy)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var y0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function uf(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function dC(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var fC={exports:{}},Ng={},pC={exports:{}},lt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cf=Symbol.for("react.element"),kR=Symbol.for("react.portal"),RR=Symbol.for("react.fragment"),MR=Symbol.for("react.strict_mode"),OR=Symbol.for("react.profiler"),DR=Symbol.for("react.provider"),NR=Symbol.for("react.context"),LR=Symbol.for("react.forward_ref"),FR=Symbol.for("react.suspense"),BR=Symbol.for("react.memo"),UR=Symbol.for("react.lazy"),KS=Symbol.iterator;function zR(t){return t===null||typeof t!="object"?null:(t=KS&&t[KS]||t["@@iterator"],typeof t=="function"?t:null)}var mC={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},gC=Object.assign,yC={};function eh(t,e,n){this.props=t,this.context=e,this.refs=yC,this.updater=n||mC}eh.prototype.isReactComponent={};eh.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};eh.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function vC(){}vC.prototype=eh.prototype;function qx(t,e,n){this.props=t,this.context=e,this.refs=yC,this.updater=n||mC}var Yx=qx.prototype=new vC;Yx.constructor=qx;gC(Yx,eh.prototype);Yx.isPureReactComponent=!0;var ZS=Array.isArray,xC=Object.prototype.hasOwnProperty,Qx={current:null},wC={key:!0,ref:!0,__self:!0,__source:!0};function _C(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)xC.call(e,r)&&!wC.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var c=Array(a),h=0;h<a;h++)c[h]=arguments[h+2];i.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:cf,type:t,key:s,ref:o,props:i,_owner:Qx.current}}function $R(t,e){return{$$typeof:cf,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Kx(t){return typeof t=="object"&&t!==null&&t.$$typeof===cf}function HR(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var JS=/\/+/g;function v0(t,e){return typeof t=="object"&&t!==null&&t.key!=null?HR(""+t.key):e.toString(36)}function hm(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case cf:case kR:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+v0(o,0):r,ZS(i)?(n="",t!=null&&(n=t.replace(JS,"$&/")+"/"),hm(i,e,n,"",function(h){return h})):i!=null&&(Kx(i)&&(i=$R(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(JS,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",ZS(t))for(var a=0;a<t.length;a++){s=t[a];var c=r+v0(s,a);o+=hm(s,e,n,c,i)}else if(c=zR(t),typeof c=="function")for(t=c.call(t),a=0;!(s=t.next()).done;)s=s.value,c=r+v0(s,a++),o+=hm(s,e,n,c,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function cp(t,e,n){if(t==null)return t;var r=[],i=0;return hm(t,r,"","",function(s){return e.call(n,s,i++)}),r}function GR(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Wr={current:null},dm={transition:null},WR={ReactCurrentDispatcher:Wr,ReactCurrentBatchConfig:dm,ReactCurrentOwner:Qx};lt.Children={map:cp,forEach:function(t,e,n){cp(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return cp(t,function(){e++}),e},toArray:function(t){return cp(t,function(e){return e})||[]},only:function(t){if(!Kx(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};lt.Component=eh;lt.Fragment=RR;lt.Profiler=OR;lt.PureComponent=qx;lt.StrictMode=MR;lt.Suspense=FR;lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=WR;lt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=gC({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Qx.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)xC.call(e,c)&&!wC.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var h=0;h<c;h++)a[h]=arguments[h+2];r.children=a}return{$$typeof:cf,type:t.type,key:i,ref:s,props:r,_owner:o}};lt.createContext=function(t){return t={$$typeof:NR,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:DR,_context:t},t.Consumer=t};lt.createElement=_C;lt.createFactory=function(t){var e=_C.bind(null,t);return e.type=t,e};lt.createRef=function(){return{current:null}};lt.forwardRef=function(t){return{$$typeof:LR,render:t}};lt.isValidElement=Kx;lt.lazy=function(t){return{$$typeof:UR,_payload:{_status:-1,_result:t},_init:GR}};lt.memo=function(t,e){return{$$typeof:BR,type:t,compare:e===void 0?null:e}};lt.startTransition=function(t){var e=dm.transition;dm.transition={};try{t()}finally{dm.transition=e}};lt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};lt.useCallback=function(t,e){return Wr.current.useCallback(t,e)};lt.useContext=function(t){return Wr.current.useContext(t)};lt.useDebugValue=function(){};lt.useDeferredValue=function(t){return Wr.current.useDeferredValue(t)};lt.useEffect=function(t,e){return Wr.current.useEffect(t,e)};lt.useId=function(){return Wr.current.useId()};lt.useImperativeHandle=function(t,e,n){return Wr.current.useImperativeHandle(t,e,n)};lt.useInsertionEffect=function(t,e){return Wr.current.useInsertionEffect(t,e)};lt.useLayoutEffect=function(t,e){return Wr.current.useLayoutEffect(t,e)};lt.useMemo=function(t,e){return Wr.current.useMemo(t,e)};lt.useReducer=function(t,e,n){return Wr.current.useReducer(t,e,n)};lt.useRef=function(t){return Wr.current.useRef(t)};lt.useState=function(t){return Wr.current.useState(t)};lt.useSyncExternalStore=function(t,e,n){return Wr.current.useSyncExternalStore(t,e,n)};lt.useTransition=function(){return Wr.current.useTransition()};lt.version="18.2.0";pC.exports=lt;var pe=pC.exports;const rt=uf(pe);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jR=pe,VR=Symbol.for("react.element"),XR=Symbol.for("react.fragment"),qR=Object.prototype.hasOwnProperty,YR=jR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,QR={key:!0,ref:!0,__self:!0,__source:!0};function SC(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)qR.call(e,r)&&!QR.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:VR,type:t,key:s,ref:o,props:i,_owner:YR.current}}Ng.Fragment=XR;Ng.jsx=SC;Ng.jsxs=SC;fC.exports=Ng;var Re=fC.exports,Xv={},bC={exports:{}},Ri={},EC={exports:{}},TC={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,Q){var L=$.length;$.push(Q);e:for(;0<L;){var te=L-1>>>1,Z=$[te];if(0<i(Z,Q))$[te]=Q,$[L]=Z,L=te;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var Q=$[0],L=$.pop();if(L!==Q){$[0]=L;e:for(var te=0,Z=$.length,Ie=Z>>>1;te<Ie;){var ge=2*(te+1)-1,je=$[ge],Ve=ge+1,Be=$[Ve];if(0>i(je,L))Ve<Z&&0>i(Be,je)?($[te]=Be,$[Ve]=L,te=Ve):($[te]=je,$[ge]=L,te=ge);else if(Ve<Z&&0>i(Be,L))$[te]=Be,$[Ve]=L,te=Ve;else break e}}return Q}function i($,Q){var L=$.sortIndex-Q.sortIndex;return L!==0?L:$.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],h=[],d=1,m=null,f=3,y=!1,v=!1,S=!1,C=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w($){for(var Q=n(h);Q!==null;){if(Q.callback===null)r(h);else if(Q.startTime<=$)r(h),Q.sortIndex=Q.expirationTime,e(c,Q);else break;Q=n(h)}}function I($){if(S=!1,w($),!v)if(n(c)!==null)v=!0,ue(P);else{var Q=n(h);Q!==null&&K(I,Q.startTime-$)}}function P($,Q){v=!1,S&&(S=!1,_(D),D=-1),y=!0;var L=f;try{for(w(Q),m=n(c);m!==null&&(!(m.expirationTime>Q)||$&&!F());){var te=m.callback;if(typeof te=="function"){m.callback=null,f=m.priorityLevel;var Z=te(m.expirationTime<=Q);Q=t.unstable_now(),typeof Z=="function"?m.callback=Z:m===n(c)&&r(c),w(Q)}else r(c);m=n(c)}if(m!==null)var Ie=!0;else{var ge=n(h);ge!==null&&K(I,ge.startTime-Q),Ie=!1}return Ie}finally{m=null,f=L,y=!1}}var N=!1,O=null,D=-1,V=5,G=-1;function F(){return!(t.unstable_now()-G<V)}function q(){if(O!==null){var $=t.unstable_now();G=$;var Q=!0;try{Q=O(!0,$)}finally{Q?W():(N=!1,O=null)}}else N=!1}var W;if(typeof b=="function")W=function(){b(q)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,se=H.port2;H.port1.onmessage=q,W=function(){se.postMessage(null)}}else W=function(){C(q,0)};function ue($){O=$,N||(N=!0,W())}function K($,Q){D=C(function(){$(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){v||y||(v=!0,ue(P))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function($){switch(f){case 1:case 2:case 3:var Q=3;break;default:Q=f}var L=f;f=Q;try{return $()}finally{f=L}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,Q){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var L=f;f=$;try{return Q()}finally{f=L}},t.unstable_scheduleCallback=function($,Q,L){var te=t.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?te+L:te):L=te,$){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=L+Z,$={id:d++,callback:Q,priorityLevel:$,startTime:L,expirationTime:Z,sortIndex:-1},L>te?($.sortIndex=L,e(h,$),n(c)===null&&$===n(h)&&(S?(_(D),D=-1):S=!0,K(I,L-te))):($.sortIndex=Z,e(c,$),v||y||(v=!0,ue(P))),$},t.unstable_shouldYield=F,t.unstable_wrapCallback=function($){var Q=f;return function(){var L=f;f=Q;try{return $.apply(this,arguments)}finally{f=L}}}})(TC);EC.exports=TC;var KR=EC.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CC=pe,ki=KR;function he(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var IC=new Set,Pd={};function pu(t,e){Dc(t,e),Dc(t+"Capture",e)}function Dc(t,e){for(Pd[t]=e,t=0;t<e.length;t++)IC.add(e[t])}var ra=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qv=Object.prototype.hasOwnProperty,ZR=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,eb={},tb={};function JR(t){return qv.call(tb,t)?!0:qv.call(eb,t)?!1:ZR.test(t)?tb[t]=!0:(eb[t]=!0,!1)}function eM(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function tM(t,e,n,r){if(e===null||typeof e>"u"||eM(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function jr(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var gr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){gr[t]=new jr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];gr[e]=new jr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){gr[t]=new jr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){gr[t]=new jr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){gr[t]=new jr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){gr[t]=new jr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){gr[t]=new jr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){gr[t]=new jr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){gr[t]=new jr(t,5,!1,t.toLowerCase(),null,!1,!1)});var Zx=/[\-:]([a-z])/g;function Jx(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Zx,Jx);gr[e]=new jr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Zx,Jx);gr[e]=new jr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Zx,Jx);gr[e]=new jr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){gr[t]=new jr(t,1,!1,t.toLowerCase(),null,!1,!1)});gr.xlinkHref=new jr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){gr[t]=new jr(t,1,!1,t.toLowerCase(),null,!0,!0)});function ew(t,e,n,r){var i=gr.hasOwnProperty(e)?gr[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(tM(e,n,i,r)&&(n=null),r||i===null?JR(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var la=CC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,hp=Symbol.for("react.element"),tc=Symbol.for("react.portal"),nc=Symbol.for("react.fragment"),tw=Symbol.for("react.strict_mode"),Yv=Symbol.for("react.profiler"),AC=Symbol.for("react.provider"),PC=Symbol.for("react.context"),nw=Symbol.for("react.forward_ref"),Qv=Symbol.for("react.suspense"),Kv=Symbol.for("react.suspense_list"),rw=Symbol.for("react.memo"),Oa=Symbol.for("react.lazy"),kC=Symbol.for("react.offscreen"),nb=Symbol.iterator;function Ph(t){return t===null||typeof t!="object"?null:(t=nb&&t[nb]||t["@@iterator"],typeof t=="function"?t:null)}var hn=Object.assign,x0;function Yh(t){if(x0===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);x0=e&&e[1]||""}return`
`+x0+t}var w0=!1;function _0(t,e){if(!t||w0)return"";w0=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var c=`
`+i[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{w0=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Yh(t):""}function nM(t){switch(t.tag){case 5:return Yh(t.type);case 16:return Yh("Lazy");case 13:return Yh("Suspense");case 19:return Yh("SuspenseList");case 0:case 2:case 15:return t=_0(t.type,!1),t;case 11:return t=_0(t.type.render,!1),t;case 1:return t=_0(t.type,!0),t;default:return""}}function Zv(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case nc:return"Fragment";case tc:return"Portal";case Yv:return"Profiler";case tw:return"StrictMode";case Qv:return"Suspense";case Kv:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case PC:return(t.displayName||"Context")+".Consumer";case AC:return(t._context.displayName||"Context")+".Provider";case nw:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case rw:return e=t.displayName||null,e!==null?e:Zv(t.type)||"Memo";case Oa:e=t._payload,t=t._init;try{return Zv(t(e))}catch{}}return null}function rM(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Zv(e);case 8:return e===tw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function rl(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function RC(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function iM(t){var e=RC(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function dp(t){t._valueTracker||(t._valueTracker=iM(t))}function MC(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=RC(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Mm(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Jv(t,e){var n=e.checked;return hn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function rb(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=rl(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function OC(t,e){e=e.checked,e!=null&&ew(t,"checked",e,!1)}function e1(t,e){OC(t,e);var n=rl(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?t1(t,e.type,n):e.hasOwnProperty("defaultValue")&&t1(t,e.type,rl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ib(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function t1(t,e,n){(e!=="number"||Mm(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Qh=Array.isArray;function yc(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+rl(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function n1(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(he(91));return hn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function sb(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(he(92));if(Qh(n)){if(1<n.length)throw Error(he(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:rl(n)}}function DC(t,e){var n=rl(e.value),r=rl(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function ob(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function NC(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function r1(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?NC(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var fp,LC=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(fp=fp||document.createElement("div"),fp.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=fp.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function kd(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ud={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sM=["Webkit","ms","Moz","O"];Object.keys(ud).forEach(function(t){sM.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ud[e]=ud[t]})});function FC(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ud.hasOwnProperty(t)&&ud[t]?(""+e).trim():e+"px"}function BC(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=FC(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var oM=hn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function i1(t,e){if(e){if(oM[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(he(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(he(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(he(61))}if(e.style!=null&&typeof e.style!="object")throw Error(he(62))}}function s1(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var o1=null;function iw(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var a1=null,vc=null,xc=null;function ab(t){if(t=ff(t)){if(typeof a1!="function")throw Error(he(280));var e=t.stateNode;e&&(e=zg(e),a1(t.stateNode,t.type,e))}}function UC(t){vc?xc?xc.push(t):xc=[t]:vc=t}function zC(){if(vc){var t=vc,e=xc;if(xc=vc=null,ab(t),e)for(t=0;t<e.length;t++)ab(e[t])}}function $C(t,e){return t(e)}function HC(){}var S0=!1;function GC(t,e,n){if(S0)return t(e,n);S0=!0;try{return $C(t,e,n)}finally{S0=!1,(vc!==null||xc!==null)&&(HC(),zC())}}function Rd(t,e){var n=t.stateNode;if(n===null)return null;var r=zg(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(he(231,e,typeof n));return n}var l1=!1;if(ra)try{var kh={};Object.defineProperty(kh,"passive",{get:function(){l1=!0}}),window.addEventListener("test",kh,kh),window.removeEventListener("test",kh,kh)}catch{l1=!1}function aM(t,e,n,r,i,s,o,a,c){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(d){this.onError(d)}}var cd=!1,Om=null,Dm=!1,u1=null,lM={onError:function(t){cd=!0,Om=t}};function uM(t,e,n,r,i,s,o,a,c){cd=!1,Om=null,aM.apply(lM,arguments)}function cM(t,e,n,r,i,s,o,a,c){if(uM.apply(this,arguments),cd){if(cd){var h=Om;cd=!1,Om=null}else throw Error(he(198));Dm||(Dm=!0,u1=h)}}function mu(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function WC(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function lb(t){if(mu(t)!==t)throw Error(he(188))}function hM(t){var e=t.alternate;if(!e){if(e=mu(t),e===null)throw Error(he(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return lb(i),t;if(s===r)return lb(i),e;s=s.sibling}throw Error(he(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(he(189))}}if(n.alternate!==r)throw Error(he(190))}if(n.tag!==3)throw Error(he(188));return n.stateNode.current===n?t:e}function jC(t){return t=hM(t),t!==null?VC(t):null}function VC(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=VC(t);if(e!==null)return e;t=t.sibling}return null}var XC=ki.unstable_scheduleCallback,ub=ki.unstable_cancelCallback,dM=ki.unstable_shouldYield,fM=ki.unstable_requestPaint,_n=ki.unstable_now,pM=ki.unstable_getCurrentPriorityLevel,sw=ki.unstable_ImmediatePriority,qC=ki.unstable_UserBlockingPriority,Nm=ki.unstable_NormalPriority,mM=ki.unstable_LowPriority,YC=ki.unstable_IdlePriority,Lg=null,bo=null;function gM(t){if(bo&&typeof bo.onCommitFiberRoot=="function")try{bo.onCommitFiberRoot(Lg,t,void 0,(t.current.flags&128)===128)}catch{}}var Ps=Math.clz32?Math.clz32:xM,yM=Math.log,vM=Math.LN2;function xM(t){return t>>>=0,t===0?32:31-(yM(t)/vM|0)|0}var pp=64,mp=4194304;function Kh(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Lm(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Kh(a):(s&=o,s!==0&&(r=Kh(s)))}else o=n&~i,o!==0?r=Kh(o):s!==0&&(r=Kh(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ps(e),i=1<<n,r|=t[n],e&=~i;return r}function wM(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _M(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Ps(s),a=1<<o,c=i[o];c===-1?(!(a&n)||a&r)&&(i[o]=wM(a,e)):c<=e&&(t.expiredLanes|=a),s&=~a}}function c1(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function QC(){var t=pp;return pp<<=1,!(pp&4194240)&&(pp=64),t}function b0(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function hf(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ps(e),t[e]=n}function SM(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Ps(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function ow(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ps(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Rt=0;function KC(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ZC,aw,JC,eI,tI,h1=!1,gp=[],Xa=null,qa=null,Ya=null,Md=new Map,Od=new Map,Ba=[],bM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function cb(t,e){switch(t){case"focusin":case"focusout":Xa=null;break;case"dragenter":case"dragleave":qa=null;break;case"mouseover":case"mouseout":Ya=null;break;case"pointerover":case"pointerout":Md.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Od.delete(e.pointerId)}}function Rh(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=ff(e),e!==null&&aw(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function EM(t,e,n,r,i){switch(e){case"focusin":return Xa=Rh(Xa,t,e,n,r,i),!0;case"dragenter":return qa=Rh(qa,t,e,n,r,i),!0;case"mouseover":return Ya=Rh(Ya,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Md.set(s,Rh(Md.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Od.set(s,Rh(Od.get(s)||null,t,e,n,r,i)),!0}return!1}function nI(t){var e=Vl(t.target);if(e!==null){var n=mu(e);if(n!==null){if(e=n.tag,e===13){if(e=WC(n),e!==null){t.blockedOn=e,tI(t.priority,function(){JC(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function fm(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=d1(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);o1=r,n.target.dispatchEvent(r),o1=null}else return e=ff(n),e!==null&&aw(e),t.blockedOn=n,!1;e.shift()}return!0}function hb(t,e,n){fm(t)&&n.delete(e)}function TM(){h1=!1,Xa!==null&&fm(Xa)&&(Xa=null),qa!==null&&fm(qa)&&(qa=null),Ya!==null&&fm(Ya)&&(Ya=null),Md.forEach(hb),Od.forEach(hb)}function Mh(t,e){t.blockedOn===e&&(t.blockedOn=null,h1||(h1=!0,ki.unstable_scheduleCallback(ki.unstable_NormalPriority,TM)))}function Dd(t){function e(i){return Mh(i,t)}if(0<gp.length){Mh(gp[0],t);for(var n=1;n<gp.length;n++){var r=gp[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Xa!==null&&Mh(Xa,t),qa!==null&&Mh(qa,t),Ya!==null&&Mh(Ya,t),Md.forEach(e),Od.forEach(e),n=0;n<Ba.length;n++)r=Ba[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ba.length&&(n=Ba[0],n.blockedOn===null);)nI(n),n.blockedOn===null&&Ba.shift()}var wc=la.ReactCurrentBatchConfig,Fm=!0;function CM(t,e,n,r){var i=Rt,s=wc.transition;wc.transition=null;try{Rt=1,lw(t,e,n,r)}finally{Rt=i,wc.transition=s}}function IM(t,e,n,r){var i=Rt,s=wc.transition;wc.transition=null;try{Rt=4,lw(t,e,n,r)}finally{Rt=i,wc.transition=s}}function lw(t,e,n,r){if(Fm){var i=d1(t,e,n,r);if(i===null)O0(t,e,r,Bm,n),cb(t,r);else if(EM(i,t,e,n,r))r.stopPropagation();else if(cb(t,r),e&4&&-1<bM.indexOf(t)){for(;i!==null;){var s=ff(i);if(s!==null&&ZC(s),s=d1(t,e,n,r),s===null&&O0(t,e,r,Bm,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else O0(t,e,r,null,n)}}var Bm=null;function d1(t,e,n,r){if(Bm=null,t=iw(r),t=Vl(t),t!==null)if(e=mu(t),e===null)t=null;else if(n=e.tag,n===13){if(t=WC(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Bm=t,null}function rI(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(pM()){case sw:return 1;case qC:return 4;case Nm:case mM:return 16;case YC:return 536870912;default:return 16}default:return 16}}var Ha=null,uw=null,pm=null;function iI(){if(pm)return pm;var t,e=uw,n=e.length,r,i="value"in Ha?Ha.value:Ha.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return pm=i.slice(t,1<r?1-r:void 0)}function mm(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function yp(){return!0}function db(){return!1}function Mi(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?yp:db,this.isPropagationStopped=db,this}return hn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=yp)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=yp)},persist:function(){},isPersistent:yp}),e}var th={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cw=Mi(th),df=hn({},th,{view:0,detail:0}),AM=Mi(df),E0,T0,Oh,Fg=hn({},df,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hw,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Oh&&(Oh&&t.type==="mousemove"?(E0=t.screenX-Oh.screenX,T0=t.screenY-Oh.screenY):T0=E0=0,Oh=t),E0)},movementY:function(t){return"movementY"in t?t.movementY:T0}}),fb=Mi(Fg),PM=hn({},Fg,{dataTransfer:0}),kM=Mi(PM),RM=hn({},df,{relatedTarget:0}),C0=Mi(RM),MM=hn({},th,{animationName:0,elapsedTime:0,pseudoElement:0}),OM=Mi(MM),DM=hn({},th,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),NM=Mi(DM),LM=hn({},th,{data:0}),pb=Mi(LM),FM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},BM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},UM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zM(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=UM[t])?!!e[t]:!1}function hw(){return zM}var $M=hn({},df,{key:function(t){if(t.key){var e=FM[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=mm(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?BM[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hw,charCode:function(t){return t.type==="keypress"?mm(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?mm(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),HM=Mi($M),GM=hn({},Fg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mb=Mi(GM),WM=hn({},df,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hw}),jM=Mi(WM),VM=hn({},th,{propertyName:0,elapsedTime:0,pseudoElement:0}),XM=Mi(VM),qM=hn({},Fg,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),YM=Mi(qM),QM=[9,13,27,32],dw=ra&&"CompositionEvent"in window,hd=null;ra&&"documentMode"in document&&(hd=document.documentMode);var KM=ra&&"TextEvent"in window&&!hd,sI=ra&&(!dw||hd&&8<hd&&11>=hd),gb=String.fromCharCode(32),yb=!1;function oI(t,e){switch(t){case"keyup":return QM.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function aI(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var rc=!1;function ZM(t,e){switch(t){case"compositionend":return aI(e);case"keypress":return e.which!==32?null:(yb=!0,gb);case"textInput":return t=e.data,t===gb&&yb?null:t;default:return null}}function JM(t,e){if(rc)return t==="compositionend"||!dw&&oI(t,e)?(t=iI(),pm=uw=Ha=null,rc=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return sI&&e.locale!=="ko"?null:e.data;default:return null}}var eO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vb(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!eO[t.type]:e==="textarea"}function lI(t,e,n,r){UC(r),e=Um(e,"onChange"),0<e.length&&(n=new cw("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var dd=null,Nd=null;function tO(t){xI(t,0)}function Bg(t){var e=oc(t);if(MC(e))return t}function nO(t,e){if(t==="change")return e}var uI=!1;if(ra){var I0;if(ra){var A0="oninput"in document;if(!A0){var xb=document.createElement("div");xb.setAttribute("oninput","return;"),A0=typeof xb.oninput=="function"}I0=A0}else I0=!1;uI=I0&&(!document.documentMode||9<document.documentMode)}function wb(){dd&&(dd.detachEvent("onpropertychange",cI),Nd=dd=null)}function cI(t){if(t.propertyName==="value"&&Bg(Nd)){var e=[];lI(e,Nd,t,iw(t)),GC(tO,e)}}function rO(t,e,n){t==="focusin"?(wb(),dd=e,Nd=n,dd.attachEvent("onpropertychange",cI)):t==="focusout"&&wb()}function iO(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Bg(Nd)}function sO(t,e){if(t==="click")return Bg(e)}function oO(t,e){if(t==="input"||t==="change")return Bg(e)}function aO(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ds=typeof Object.is=="function"?Object.is:aO;function Ld(t,e){if(Ds(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!qv.call(e,i)||!Ds(t[i],e[i]))return!1}return!0}function _b(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Sb(t,e){var n=_b(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=_b(n)}}function hI(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?hI(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function dI(){for(var t=window,e=Mm();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Mm(t.document)}return e}function fw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function lO(t){var e=dI(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&hI(n.ownerDocument.documentElement,n)){if(r!==null&&fw(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Sb(n,s);var o=Sb(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var uO=ra&&"documentMode"in document&&11>=document.documentMode,ic=null,f1=null,fd=null,p1=!1;function bb(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;p1||ic==null||ic!==Mm(r)||(r=ic,"selectionStart"in r&&fw(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),fd&&Ld(fd,r)||(fd=r,r=Um(f1,"onSelect"),0<r.length&&(e=new cw("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ic)))}function vp(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var sc={animationend:vp("Animation","AnimationEnd"),animationiteration:vp("Animation","AnimationIteration"),animationstart:vp("Animation","AnimationStart"),transitionend:vp("Transition","TransitionEnd")},P0={},fI={};ra&&(fI=document.createElement("div").style,"AnimationEvent"in window||(delete sc.animationend.animation,delete sc.animationiteration.animation,delete sc.animationstart.animation),"TransitionEvent"in window||delete sc.transitionend.transition);function Ug(t){if(P0[t])return P0[t];if(!sc[t])return t;var e=sc[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in fI)return P0[t]=e[n];return t}var pI=Ug("animationend"),mI=Ug("animationiteration"),gI=Ug("animationstart"),yI=Ug("transitionend"),vI=new Map,Eb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hl(t,e){vI.set(t,e),pu(e,[t])}for(var k0=0;k0<Eb.length;k0++){var R0=Eb[k0],cO=R0.toLowerCase(),hO=R0[0].toUpperCase()+R0.slice(1);hl(cO,"on"+hO)}hl(pI,"onAnimationEnd");hl(mI,"onAnimationIteration");hl(gI,"onAnimationStart");hl("dblclick","onDoubleClick");hl("focusin","onFocus");hl("focusout","onBlur");hl(yI,"onTransitionEnd");Dc("onMouseEnter",["mouseout","mouseover"]);Dc("onMouseLeave",["mouseout","mouseover"]);Dc("onPointerEnter",["pointerout","pointerover"]);Dc("onPointerLeave",["pointerout","pointerover"]);pu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));pu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));pu("onBeforeInput",["compositionend","keypress","textInput","paste"]);pu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));pu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));pu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dO=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zh));function Tb(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,cM(r,e,void 0,t),t.currentTarget=null}function xI(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,h=a.currentTarget;if(a=a.listener,c!==s&&i.isPropagationStopped())break e;Tb(i,a,h),s=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,h=a.currentTarget,a=a.listener,c!==s&&i.isPropagationStopped())break e;Tb(i,a,h),s=c}}}if(Dm)throw t=u1,Dm=!1,u1=null,t}function Wt(t,e){var n=e[x1];n===void 0&&(n=e[x1]=new Set);var r=t+"__bubble";n.has(r)||(wI(e,t,2,!1),n.add(r))}function M0(t,e,n){var r=0;e&&(r|=4),wI(n,t,r,e)}var xp="_reactListening"+Math.random().toString(36).slice(2);function Fd(t){if(!t[xp]){t[xp]=!0,IC.forEach(function(n){n!=="selectionchange"&&(dO.has(n)||M0(n,!1,t),M0(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[xp]||(e[xp]=!0,M0("selectionchange",!1,e))}}function wI(t,e,n,r){switch(rI(e)){case 1:var i=CM;break;case 4:i=IM;break;default:i=lw}n=i.bind(null,e,n,t),i=void 0,!l1||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function O0(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Vl(a),o===null)return;if(c=o.tag,c===5||c===6){r=s=o;continue e}a=a.parentNode}}r=r.return}GC(function(){var h=s,d=iw(n),m=[];e:{var f=vI.get(t);if(f!==void 0){var y=cw,v=t;switch(t){case"keypress":if(mm(n)===0)break e;case"keydown":case"keyup":y=HM;break;case"focusin":v="focus",y=C0;break;case"focusout":v="blur",y=C0;break;case"beforeblur":case"afterblur":y=C0;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=fb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=kM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=jM;break;case pI:case mI:case gI:y=OM;break;case yI:y=XM;break;case"scroll":y=AM;break;case"wheel":y=YM;break;case"copy":case"cut":case"paste":y=NM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=mb}var S=(e&4)!==0,C=!S&&t==="scroll",_=S?f!==null?f+"Capture":null:f;S=[];for(var b=h,w;b!==null;){w=b;var I=w.stateNode;if(w.tag===5&&I!==null&&(w=I,_!==null&&(I=Rd(b,_),I!=null&&S.push(Bd(b,I,w)))),C)break;b=b.return}0<S.length&&(f=new y(f,v,null,n,d),m.push({event:f,listeners:S}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",f&&n!==o1&&(v=n.relatedTarget||n.fromElement)&&(Vl(v)||v[ia]))break e;if((y||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,y?(v=n.relatedTarget||n.toElement,y=h,v=v?Vl(v):null,v!==null&&(C=mu(v),v!==C||v.tag!==5&&v.tag!==6)&&(v=null)):(y=null,v=h),y!==v)){if(S=fb,I="onMouseLeave",_="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(S=mb,I="onPointerLeave",_="onPointerEnter",b="pointer"),C=y==null?f:oc(y),w=v==null?f:oc(v),f=new S(I,b+"leave",y,n,d),f.target=C,f.relatedTarget=w,I=null,Vl(d)===h&&(S=new S(_,b+"enter",v,n,d),S.target=w,S.relatedTarget=C,I=S),C=I,y&&v)t:{for(S=y,_=v,b=0,w=S;w;w=Bu(w))b++;for(w=0,I=_;I;I=Bu(I))w++;for(;0<b-w;)S=Bu(S),b--;for(;0<w-b;)_=Bu(_),w--;for(;b--;){if(S===_||_!==null&&S===_.alternate)break t;S=Bu(S),_=Bu(_)}S=null}else S=null;y!==null&&Cb(m,f,y,S,!1),v!==null&&C!==null&&Cb(m,C,v,S,!0)}}e:{if(f=h?oc(h):window,y=f.nodeName&&f.nodeName.toLowerCase(),y==="select"||y==="input"&&f.type==="file")var P=nO;else if(vb(f))if(uI)P=oO;else{P=iO;var N=rO}else(y=f.nodeName)&&y.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(P=sO);if(P&&(P=P(t,h))){lI(m,P,n,d);break e}N&&N(t,f,h),t==="focusout"&&(N=f._wrapperState)&&N.controlled&&f.type==="number"&&t1(f,"number",f.value)}switch(N=h?oc(h):window,t){case"focusin":(vb(N)||N.contentEditable==="true")&&(ic=N,f1=h,fd=null);break;case"focusout":fd=f1=ic=null;break;case"mousedown":p1=!0;break;case"contextmenu":case"mouseup":case"dragend":p1=!1,bb(m,n,d);break;case"selectionchange":if(uO)break;case"keydown":case"keyup":bb(m,n,d)}var O;if(dw)e:{switch(t){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else rc?oI(t,n)&&(D="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(D="onCompositionStart");D&&(sI&&n.locale!=="ko"&&(rc||D!=="onCompositionStart"?D==="onCompositionEnd"&&rc&&(O=iI()):(Ha=d,uw="value"in Ha?Ha.value:Ha.textContent,rc=!0)),N=Um(h,D),0<N.length&&(D=new pb(D,t,null,n,d),m.push({event:D,listeners:N}),O?D.data=O:(O=aI(n),O!==null&&(D.data=O)))),(O=KM?ZM(t,n):JM(t,n))&&(h=Um(h,"onBeforeInput"),0<h.length&&(d=new pb("onBeforeInput","beforeinput",null,n,d),m.push({event:d,listeners:h}),d.data=O))}xI(m,e)})}function Bd(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Um(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Rd(t,n),s!=null&&r.unshift(Bd(t,s,i)),s=Rd(t,e),s!=null&&r.push(Bd(t,s,i))),t=t.return}return r}function Bu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Cb(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,h=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&h!==null&&(a=h,i?(c=Rd(n,s),c!=null&&o.unshift(Bd(n,c,a))):i||(c=Rd(n,s),c!=null&&o.push(Bd(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var fO=/\r\n?/g,pO=/\u0000|\uFFFD/g;function Ib(t){return(typeof t=="string"?t:""+t).replace(fO,`
`).replace(pO,"")}function wp(t,e,n){if(e=Ib(e),Ib(t)!==e&&n)throw Error(he(425))}function zm(){}var m1=null,g1=null;function y1(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var v1=typeof setTimeout=="function"?setTimeout:void 0,mO=typeof clearTimeout=="function"?clearTimeout:void 0,Ab=typeof Promise=="function"?Promise:void 0,gO=typeof queueMicrotask=="function"?queueMicrotask:typeof Ab<"u"?function(t){return Ab.resolve(null).then(t).catch(yO)}:v1;function yO(t){setTimeout(function(){throw t})}function D0(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Dd(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Dd(e)}function Qa(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Pb(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var nh=Math.random().toString(36).slice(2),_o="__reactFiber$"+nh,Ud="__reactProps$"+nh,ia="__reactContainer$"+nh,x1="__reactEvents$"+nh,vO="__reactListeners$"+nh,xO="__reactHandles$"+nh;function Vl(t){var e=t[_o];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ia]||n[_o]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Pb(t);t!==null;){if(n=t[_o])return n;t=Pb(t)}return e}t=n,n=t.parentNode}return null}function ff(t){return t=t[_o]||t[ia],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function oc(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(he(33))}function zg(t){return t[Ud]||null}var w1=[],ac=-1;function dl(t){return{current:t}}function qt(t){0>ac||(t.current=w1[ac],w1[ac]=null,ac--)}function zt(t,e){ac++,w1[ac]=t.current,t.current=e}var il={},Or=dl(il),oi=dl(!1),su=il;function Nc(t,e){var n=t.type.contextTypes;if(!n)return il;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function ai(t){return t=t.childContextTypes,t!=null}function $m(){qt(oi),qt(Or)}function kb(t,e,n){if(Or.current!==il)throw Error(he(168));zt(Or,e),zt(oi,n)}function _I(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(he(108,rM(t)||"Unknown",i));return hn({},n,r)}function Hm(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||il,su=Or.current,zt(Or,t),zt(oi,oi.current),!0}function Rb(t,e,n){var r=t.stateNode;if(!r)throw Error(he(169));n?(t=_I(t,e,su),r.__reactInternalMemoizedMergedChildContext=t,qt(oi),qt(Or),zt(Or,t)):qt(oi),zt(oi,n)}var Vo=null,$g=!1,N0=!1;function SI(t){Vo===null?Vo=[t]:Vo.push(t)}function wO(t){$g=!0,SI(t)}function fl(){if(!N0&&Vo!==null){N0=!0;var t=0,e=Rt;try{var n=Vo;for(Rt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Vo=null,$g=!1}catch(i){throw Vo!==null&&(Vo=Vo.slice(t+1)),XC(sw,fl),i}finally{Rt=e,N0=!1}}return null}var lc=[],uc=0,Gm=null,Wm=0,Qi=[],Ki=0,ou=null,qo=1,Yo="";function Nl(t,e){lc[uc++]=Wm,lc[uc++]=Gm,Gm=t,Wm=e}function bI(t,e,n){Qi[Ki++]=qo,Qi[Ki++]=Yo,Qi[Ki++]=ou,ou=t;var r=qo;t=Yo;var i=32-Ps(r)-1;r&=~(1<<i),n+=1;var s=32-Ps(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,qo=1<<32-Ps(e)+i|n<<i|r,Yo=s+t}else qo=1<<s|n<<i|r,Yo=t}function pw(t){t.return!==null&&(Nl(t,1),bI(t,1,0))}function mw(t){for(;t===Gm;)Gm=lc[--uc],lc[uc]=null,Wm=lc[--uc],lc[uc]=null;for(;t===ou;)ou=Qi[--Ki],Qi[Ki]=null,Yo=Qi[--Ki],Qi[Ki]=null,qo=Qi[--Ki],Qi[Ki]=null}var Ii=null,Ti=null,Kt=!1,bs=null;function EI(t,e){var n=ts(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Mb(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ii=t,Ti=Qa(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ii=t,Ti=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ou!==null?{id:qo,overflow:Yo}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ts(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ii=t,Ti=null,!0):!1;default:return!1}}function _1(t){return(t.mode&1)!==0&&(t.flags&128)===0}function S1(t){if(Kt){var e=Ti;if(e){var n=e;if(!Mb(t,e)){if(_1(t))throw Error(he(418));e=Qa(n.nextSibling);var r=Ii;e&&Mb(t,e)?EI(r,n):(t.flags=t.flags&-4097|2,Kt=!1,Ii=t)}}else{if(_1(t))throw Error(he(418));t.flags=t.flags&-4097|2,Kt=!1,Ii=t}}}function Ob(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ii=t}function _p(t){if(t!==Ii)return!1;if(!Kt)return Ob(t),Kt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!y1(t.type,t.memoizedProps)),e&&(e=Ti)){if(_1(t))throw TI(),Error(he(418));for(;e;)EI(t,e),e=Qa(e.nextSibling)}if(Ob(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(he(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ti=Qa(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ti=null}}else Ti=Ii?Qa(t.stateNode.nextSibling):null;return!0}function TI(){for(var t=Ti;t;)t=Qa(t.nextSibling)}function Lc(){Ti=Ii=null,Kt=!1}function gw(t){bs===null?bs=[t]:bs.push(t)}var _O=la.ReactCurrentBatchConfig;function xs(t,e){if(t&&t.defaultProps){e=hn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var jm=dl(null),Vm=null,cc=null,yw=null;function vw(){yw=cc=Vm=null}function xw(t){var e=jm.current;qt(jm),t._currentValue=e}function b1(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function _c(t,e){Vm=t,yw=cc=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ii=!0),t.firstContext=null)}function os(t){var e=t._currentValue;if(yw!==t)if(t={context:t,memoizedValue:e,next:null},cc===null){if(Vm===null)throw Error(he(308));cc=t,Vm.dependencies={lanes:0,firstContext:t}}else cc=cc.next=t;return e}var Xl=null;function ww(t){Xl===null?Xl=[t]:Xl.push(t)}function CI(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,ww(e)):(n.next=i.next,i.next=n),e.interleaved=n,sa(t,r)}function sa(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Da=!1;function _w(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function II(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Zo(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ka(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,gt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,sa(t,n)}return i=r.interleaved,i===null?(e.next=e,ww(r)):(e.next=i.next,i.next=e),r.interleaved=e,sa(t,n)}function gm(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ow(t,n)}}function Db(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Xm(t,e,n,r){var i=t.updateQueue;Da=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var c=a,h=c.next;c.next=null,o===null?s=h:o.next=h,o=c;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=h:a.next=h,d.lastBaseUpdate=c))}if(s!==null){var m=i.baseState;o=0,d=h=c=null,a=s;do{var f=a.lane,y=a.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=t,S=a;switch(f=e,y=n,S.tag){case 1:if(v=S.payload,typeof v=="function"){m=v.call(y,m,f);break e}m=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=S.payload,f=typeof v=="function"?v.call(y,m,f):v,f==null)break e;m=hn({},m,f);break e;case 2:Da=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else y={eventTime:y,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(h=d=y,c=m):d=d.next=y,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(1);if(d===null&&(c=m),i.baseState=c,i.firstBaseUpdate=h,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);lu|=o,t.lanes=o,t.memoizedState=m}}function Nb(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(he(191,i));i.call(r)}}}var AI=new CC.Component().refs;function E1(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:hn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Hg={isMounted:function(t){return(t=t._reactInternals)?mu(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Gr(),i=Ja(t),s=Zo(r,i);s.payload=e,n!=null&&(s.callback=n),e=Ka(t,s,i),e!==null&&(ks(e,t,i,r),gm(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Gr(),i=Ja(t),s=Zo(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Ka(t,s,i),e!==null&&(ks(e,t,i,r),gm(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Gr(),r=Ja(t),i=Zo(n,r);i.tag=2,e!=null&&(i.callback=e),e=Ka(t,i,r),e!==null&&(ks(e,t,r,n),gm(e,t,r))}};function Lb(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Ld(n,r)||!Ld(i,s):!0}function PI(t,e,n){var r=!1,i=il,s=e.contextType;return typeof s=="object"&&s!==null?s=os(s):(i=ai(e)?su:Or.current,r=e.contextTypes,s=(r=r!=null)?Nc(t,i):il),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Hg,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Fb(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Hg.enqueueReplaceState(e,e.state,null)}function T1(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=AI,_w(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=os(s):(s=ai(e)?su:Or.current,i.context=Nc(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(E1(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Hg.enqueueReplaceState(i,i.state,null),Xm(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Dh(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(he(309));var r=n.stateNode}if(!r)throw Error(he(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===AI&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(he(284));if(!n._owner)throw Error(he(290,t))}return t}function Sp(t,e){throw t=Object.prototype.toString.call(e),Error(he(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Bb(t){var e=t._init;return e(t._payload)}function kI(t){function e(_,b){if(t){var w=_.deletions;w===null?(_.deletions=[b],_.flags|=16):w.push(b)}}function n(_,b){if(!t)return null;for(;b!==null;)e(_,b),b=b.sibling;return null}function r(_,b){for(_=new Map;b!==null;)b.key!==null?_.set(b.key,b):_.set(b.index,b),b=b.sibling;return _}function i(_,b){return _=el(_,b),_.index=0,_.sibling=null,_}function s(_,b,w){return _.index=w,t?(w=_.alternate,w!==null?(w=w.index,w<b?(_.flags|=2,b):w):(_.flags|=2,b)):(_.flags|=1048576,b)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function a(_,b,w,I){return b===null||b.tag!==6?(b=H0(w,_.mode,I),b.return=_,b):(b=i(b,w),b.return=_,b)}function c(_,b,w,I){var P=w.type;return P===nc?d(_,b,w.props.children,I,w.key):b!==null&&(b.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Oa&&Bb(P)===b.type)?(I=i(b,w.props),I.ref=Dh(_,b,w),I.return=_,I):(I=Sm(w.type,w.key,w.props,null,_.mode,I),I.ref=Dh(_,b,w),I.return=_,I)}function h(_,b,w,I){return b===null||b.tag!==4||b.stateNode.containerInfo!==w.containerInfo||b.stateNode.implementation!==w.implementation?(b=G0(w,_.mode,I),b.return=_,b):(b=i(b,w.children||[]),b.return=_,b)}function d(_,b,w,I,P){return b===null||b.tag!==7?(b=Zl(w,_.mode,I,P),b.return=_,b):(b=i(b,w),b.return=_,b)}function m(_,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return b=H0(""+b,_.mode,w),b.return=_,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case hp:return w=Sm(b.type,b.key,b.props,null,_.mode,w),w.ref=Dh(_,null,b),w.return=_,w;case tc:return b=G0(b,_.mode,w),b.return=_,b;case Oa:var I=b._init;return m(_,I(b._payload),w)}if(Qh(b)||Ph(b))return b=Zl(b,_.mode,w,null),b.return=_,b;Sp(_,b)}return null}function f(_,b,w,I){var P=b!==null?b.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return P!==null?null:a(_,b,""+w,I);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case hp:return w.key===P?c(_,b,w,I):null;case tc:return w.key===P?h(_,b,w,I):null;case Oa:return P=w._init,f(_,b,P(w._payload),I)}if(Qh(w)||Ph(w))return P!==null?null:d(_,b,w,I,null);Sp(_,w)}return null}function y(_,b,w,I,P){if(typeof I=="string"&&I!==""||typeof I=="number")return _=_.get(w)||null,a(b,_,""+I,P);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case hp:return _=_.get(I.key===null?w:I.key)||null,c(b,_,I,P);case tc:return _=_.get(I.key===null?w:I.key)||null,h(b,_,I,P);case Oa:var N=I._init;return y(_,b,w,N(I._payload),P)}if(Qh(I)||Ph(I))return _=_.get(w)||null,d(b,_,I,P,null);Sp(b,I)}return null}function v(_,b,w,I){for(var P=null,N=null,O=b,D=b=0,V=null;O!==null&&D<w.length;D++){O.index>D?(V=O,O=null):V=O.sibling;var G=f(_,O,w[D],I);if(G===null){O===null&&(O=V);break}t&&O&&G.alternate===null&&e(_,O),b=s(G,b,D),N===null?P=G:N.sibling=G,N=G,O=V}if(D===w.length)return n(_,O),Kt&&Nl(_,D),P;if(O===null){for(;D<w.length;D++)O=m(_,w[D],I),O!==null&&(b=s(O,b,D),N===null?P=O:N.sibling=O,N=O);return Kt&&Nl(_,D),P}for(O=r(_,O);D<w.length;D++)V=y(O,_,D,w[D],I),V!==null&&(t&&V.alternate!==null&&O.delete(V.key===null?D:V.key),b=s(V,b,D),N===null?P=V:N.sibling=V,N=V);return t&&O.forEach(function(F){return e(_,F)}),Kt&&Nl(_,D),P}function S(_,b,w,I){var P=Ph(w);if(typeof P!="function")throw Error(he(150));if(w=P.call(w),w==null)throw Error(he(151));for(var N=P=null,O=b,D=b=0,V=null,G=w.next();O!==null&&!G.done;D++,G=w.next()){O.index>D?(V=O,O=null):V=O.sibling;var F=f(_,O,G.value,I);if(F===null){O===null&&(O=V);break}t&&O&&F.alternate===null&&e(_,O),b=s(F,b,D),N===null?P=F:N.sibling=F,N=F,O=V}if(G.done)return n(_,O),Kt&&Nl(_,D),P;if(O===null){for(;!G.done;D++,G=w.next())G=m(_,G.value,I),G!==null&&(b=s(G,b,D),N===null?P=G:N.sibling=G,N=G);return Kt&&Nl(_,D),P}for(O=r(_,O);!G.done;D++,G=w.next())G=y(O,_,D,G.value,I),G!==null&&(t&&G.alternate!==null&&O.delete(G.key===null?D:G.key),b=s(G,b,D),N===null?P=G:N.sibling=G,N=G);return t&&O.forEach(function(q){return e(_,q)}),Kt&&Nl(_,D),P}function C(_,b,w,I){if(typeof w=="object"&&w!==null&&w.type===nc&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case hp:e:{for(var P=w.key,N=b;N!==null;){if(N.key===P){if(P=w.type,P===nc){if(N.tag===7){n(_,N.sibling),b=i(N,w.props.children),b.return=_,_=b;break e}}else if(N.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Oa&&Bb(P)===N.type){n(_,N.sibling),b=i(N,w.props),b.ref=Dh(_,N,w),b.return=_,_=b;break e}n(_,N);break}else e(_,N);N=N.sibling}w.type===nc?(b=Zl(w.props.children,_.mode,I,w.key),b.return=_,_=b):(I=Sm(w.type,w.key,w.props,null,_.mode,I),I.ref=Dh(_,b,w),I.return=_,_=I)}return o(_);case tc:e:{for(N=w.key;b!==null;){if(b.key===N)if(b.tag===4&&b.stateNode.containerInfo===w.containerInfo&&b.stateNode.implementation===w.implementation){n(_,b.sibling),b=i(b,w.children||[]),b.return=_,_=b;break e}else{n(_,b);break}else e(_,b);b=b.sibling}b=G0(w,_.mode,I),b.return=_,_=b}return o(_);case Oa:return N=w._init,C(_,b,N(w._payload),I)}if(Qh(w))return v(_,b,w,I);if(Ph(w))return S(_,b,w,I);Sp(_,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,b!==null&&b.tag===6?(n(_,b.sibling),b=i(b,w),b.return=_,_=b):(n(_,b),b=H0(w,_.mode,I),b.return=_,_=b),o(_)):n(_,b)}return C}var Fc=kI(!0),RI=kI(!1),pf={},Eo=dl(pf),zd=dl(pf),$d=dl(pf);function ql(t){if(t===pf)throw Error(he(174));return t}function Sw(t,e){switch(zt($d,e),zt(zd,t),zt(Eo,pf),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:r1(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=r1(e,t)}qt(Eo),zt(Eo,e)}function Bc(){qt(Eo),qt(zd),qt($d)}function MI(t){ql($d.current);var e=ql(Eo.current),n=r1(e,t.type);e!==n&&(zt(zd,t),zt(Eo,n))}function bw(t){zd.current===t&&(qt(Eo),qt(zd))}var ln=dl(0);function qm(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var L0=[];function Ew(){for(var t=0;t<L0.length;t++)L0[t]._workInProgressVersionPrimary=null;L0.length=0}var ym=la.ReactCurrentDispatcher,F0=la.ReactCurrentBatchConfig,au=0,cn=null,$n=null,Kn=null,Ym=!1,pd=!1,Hd=0,SO=0;function Tr(){throw Error(he(321))}function Tw(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ds(t[n],e[n]))return!1;return!0}function Cw(t,e,n,r,i,s){if(au=s,cn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ym.current=t===null||t.memoizedState===null?CO:IO,t=n(r,i),pd){s=0;do{if(pd=!1,Hd=0,25<=s)throw Error(he(301));s+=1,Kn=$n=null,e.updateQueue=null,ym.current=AO,t=n(r,i)}while(pd)}if(ym.current=Qm,e=$n!==null&&$n.next!==null,au=0,Kn=$n=cn=null,Ym=!1,e)throw Error(he(300));return t}function Iw(){var t=Hd!==0;return Hd=0,t}function vo(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Kn===null?cn.memoizedState=Kn=t:Kn=Kn.next=t,Kn}function as(){if($n===null){var t=cn.alternate;t=t!==null?t.memoizedState:null}else t=$n.next;var e=Kn===null?cn.memoizedState:Kn.next;if(e!==null)Kn=e,$n=t;else{if(t===null)throw Error(he(310));$n=t,t={memoizedState:$n.memoizedState,baseState:$n.baseState,baseQueue:$n.baseQueue,queue:$n.queue,next:null},Kn===null?cn.memoizedState=Kn=t:Kn=Kn.next=t}return Kn}function Gd(t,e){return typeof e=="function"?e(t):e}function B0(t){var e=as(),n=e.queue;if(n===null)throw Error(he(311));n.lastRenderedReducer=t;var r=$n,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,c=null,h=s;do{var d=h.lane;if((au&d)===d)c!==null&&(c=c.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var m={lane:d,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};c===null?(a=c=m,o=r):c=c.next=m,cn.lanes|=d,lu|=d}h=h.next}while(h!==null&&h!==s);c===null?o=r:c.next=a,Ds(r,e.memoizedState)||(ii=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,cn.lanes|=s,lu|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function U0(t){var e=as(),n=e.queue;if(n===null)throw Error(he(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Ds(s,e.memoizedState)||(ii=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function OI(){}function DI(t,e){var n=cn,r=as(),i=e(),s=!Ds(r.memoizedState,i);if(s&&(r.memoizedState=i,ii=!0),r=r.queue,Aw(FI.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Kn!==null&&Kn.memoizedState.tag&1){if(n.flags|=2048,Wd(9,LI.bind(null,n,r,i,e),void 0,null),tr===null)throw Error(he(349));au&30||NI(n,e,i)}return i}function NI(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=cn.updateQueue,e===null?(e={lastEffect:null,stores:null},cn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function LI(t,e,n,r){e.value=n,e.getSnapshot=r,BI(e)&&UI(t)}function FI(t,e,n){return n(function(){BI(e)&&UI(t)})}function BI(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ds(t,n)}catch{return!0}}function UI(t){var e=sa(t,1);e!==null&&ks(e,t,1,-1)}function Ub(t){var e=vo();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Gd,lastRenderedState:t},e.queue=t,t=t.dispatch=TO.bind(null,cn,t),[e.memoizedState,t]}function Wd(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=cn.updateQueue,e===null?(e={lastEffect:null,stores:null},cn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function zI(){return as().memoizedState}function vm(t,e,n,r){var i=vo();cn.flags|=t,i.memoizedState=Wd(1|e,n,void 0,r===void 0?null:r)}function Gg(t,e,n,r){var i=as();r=r===void 0?null:r;var s=void 0;if($n!==null){var o=$n.memoizedState;if(s=o.destroy,r!==null&&Tw(r,o.deps)){i.memoizedState=Wd(e,n,s,r);return}}cn.flags|=t,i.memoizedState=Wd(1|e,n,s,r)}function zb(t,e){return vm(8390656,8,t,e)}function Aw(t,e){return Gg(2048,8,t,e)}function $I(t,e){return Gg(4,2,t,e)}function HI(t,e){return Gg(4,4,t,e)}function GI(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function WI(t,e,n){return n=n!=null?n.concat([t]):null,Gg(4,4,GI.bind(null,e,t),n)}function Pw(){}function jI(t,e){var n=as();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Tw(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function VI(t,e){var n=as();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Tw(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function XI(t,e,n){return au&21?(Ds(n,e)||(n=QC(),cn.lanes|=n,lu|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ii=!0),t.memoizedState=n)}function bO(t,e){var n=Rt;Rt=n!==0&&4>n?n:4,t(!0);var r=F0.transition;F0.transition={};try{t(!1),e()}finally{Rt=n,F0.transition=r}}function qI(){return as().memoizedState}function EO(t,e,n){var r=Ja(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},YI(t))QI(e,n);else if(n=CI(t,e,n,r),n!==null){var i=Gr();ks(n,t,r,i),KI(n,e,r)}}function TO(t,e,n){var r=Ja(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(YI(t))QI(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Ds(a,o)){var c=e.interleaved;c===null?(i.next=i,ww(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=CI(t,e,i,r),n!==null&&(i=Gr(),ks(n,t,r,i),KI(n,e,r))}}function YI(t){var e=t.alternate;return t===cn||e!==null&&e===cn}function QI(t,e){pd=Ym=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function KI(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ow(t,n)}}var Qm={readContext:os,useCallback:Tr,useContext:Tr,useEffect:Tr,useImperativeHandle:Tr,useInsertionEffect:Tr,useLayoutEffect:Tr,useMemo:Tr,useReducer:Tr,useRef:Tr,useState:Tr,useDebugValue:Tr,useDeferredValue:Tr,useTransition:Tr,useMutableSource:Tr,useSyncExternalStore:Tr,useId:Tr,unstable_isNewReconciler:!1},CO={readContext:os,useCallback:function(t,e){return vo().memoizedState=[t,e===void 0?null:e],t},useContext:os,useEffect:zb,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,vm(4194308,4,GI.bind(null,e,t),n)},useLayoutEffect:function(t,e){return vm(4194308,4,t,e)},useInsertionEffect:function(t,e){return vm(4,2,t,e)},useMemo:function(t,e){var n=vo();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=vo();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=EO.bind(null,cn,t),[r.memoizedState,t]},useRef:function(t){var e=vo();return t={current:t},e.memoizedState=t},useState:Ub,useDebugValue:Pw,useDeferredValue:function(t){return vo().memoizedState=t},useTransition:function(){var t=Ub(!1),e=t[0];return t=bO.bind(null,t[1]),vo().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=cn,i=vo();if(Kt){if(n===void 0)throw Error(he(407));n=n()}else{if(n=e(),tr===null)throw Error(he(349));au&30||NI(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,zb(FI.bind(null,r,s,t),[t]),r.flags|=2048,Wd(9,LI.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=vo(),e=tr.identifierPrefix;if(Kt){var n=Yo,r=qo;n=(r&~(1<<32-Ps(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Hd++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=SO++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},IO={readContext:os,useCallback:jI,useContext:os,useEffect:Aw,useImperativeHandle:WI,useInsertionEffect:$I,useLayoutEffect:HI,useMemo:VI,useReducer:B0,useRef:zI,useState:function(){return B0(Gd)},useDebugValue:Pw,useDeferredValue:function(t){var e=as();return XI(e,$n.memoizedState,t)},useTransition:function(){var t=B0(Gd)[0],e=as().memoizedState;return[t,e]},useMutableSource:OI,useSyncExternalStore:DI,useId:qI,unstable_isNewReconciler:!1},AO={readContext:os,useCallback:jI,useContext:os,useEffect:Aw,useImperativeHandle:WI,useInsertionEffect:$I,useLayoutEffect:HI,useMemo:VI,useReducer:U0,useRef:zI,useState:function(){return U0(Gd)},useDebugValue:Pw,useDeferredValue:function(t){var e=as();return $n===null?e.memoizedState=t:XI(e,$n.memoizedState,t)},useTransition:function(){var t=U0(Gd)[0],e=as().memoizedState;return[t,e]},useMutableSource:OI,useSyncExternalStore:DI,useId:qI,unstable_isNewReconciler:!1};function Uc(t,e){try{var n="",r=e;do n+=nM(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function z0(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function C1(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var PO=typeof WeakMap=="function"?WeakMap:Map;function ZI(t,e,n){n=Zo(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Zm||(Zm=!0,L1=r),C1(t,e)},n}function JI(t,e,n){n=Zo(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){C1(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){C1(t,e),typeof r!="function"&&(Za===null?Za=new Set([this]):Za.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function $b(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new PO;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=GO.bind(null,t,e,n),e.then(t,t))}function Hb(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Gb(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Zo(-1,1),e.tag=2,Ka(n,e,1))),n.lanes|=1),t)}var kO=la.ReactCurrentOwner,ii=!1;function Hr(t,e,n,r){e.child=t===null?RI(e,null,n,r):Fc(e,t.child,n,r)}function Wb(t,e,n,r,i){n=n.render;var s=e.ref;return _c(e,i),r=Cw(t,e,n,r,s,i),n=Iw(),t!==null&&!ii?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,oa(t,e,i)):(Kt&&n&&pw(e),e.flags|=1,Hr(t,e,r,i),e.child)}function jb(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Fw(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,eA(t,e,s,r,i)):(t=Sm(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ld,n(o,r)&&t.ref===e.ref)return oa(t,e,i)}return e.flags|=1,t=el(s,r),t.ref=e.ref,t.return=e,e.child=t}function eA(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Ld(s,r)&&t.ref===e.ref)if(ii=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(ii=!0);else return e.lanes=t.lanes,oa(t,e,i)}return I1(t,e,n,r,i)}function tA(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},zt(dc,bi),bi|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,zt(dc,bi),bi|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,zt(dc,bi),bi|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,zt(dc,bi),bi|=r;return Hr(t,e,i,n),e.child}function nA(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function I1(t,e,n,r,i){var s=ai(n)?su:Or.current;return s=Nc(e,s),_c(e,i),n=Cw(t,e,n,r,s,i),r=Iw(),t!==null&&!ii?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,oa(t,e,i)):(Kt&&r&&pw(e),e.flags|=1,Hr(t,e,n,i),e.child)}function Vb(t,e,n,r,i){if(ai(n)){var s=!0;Hm(e)}else s=!1;if(_c(e,i),e.stateNode===null)xm(t,e),PI(e,n,r),T1(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=os(h):(h=ai(n)?su:Or.current,h=Nc(e,h));var d=n.getDerivedStateFromProps,m=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==h)&&Fb(e,o,r,h),Da=!1;var f=e.memoizedState;o.state=f,Xm(e,r,o,i),c=e.memoizedState,a!==r||f!==c||oi.current||Da?(typeof d=="function"&&(E1(e,n,d,r),c=e.memoizedState),(a=Da||Lb(e,n,a,r,f,c,h))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=h,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,II(t,e),a=e.memoizedProps,h=e.type===e.elementType?a:xs(e.type,a),o.props=h,m=e.pendingProps,f=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=os(c):(c=ai(n)?su:Or.current,c=Nc(e,c));var y=n.getDerivedStateFromProps;(d=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==m||f!==c)&&Fb(e,o,r,c),Da=!1,f=e.memoizedState,o.state=f,Xm(e,r,o,i);var v=e.memoizedState;a!==m||f!==v||oi.current||Da?(typeof y=="function"&&(E1(e,n,y,r),v=e.memoizedState),(h=Da||Lb(e,n,h,r,f,v,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=c,r=h):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return A1(t,e,n,r,s,i)}function A1(t,e,n,r,i,s){nA(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Rb(e,n,!1),oa(t,e,s);r=e.stateNode,kO.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Fc(e,t.child,null,s),e.child=Fc(e,null,a,s)):Hr(t,e,a,s),e.memoizedState=r.state,i&&Rb(e,n,!0),e.child}function rA(t){var e=t.stateNode;e.pendingContext?kb(t,e.pendingContext,e.pendingContext!==e.context):e.context&&kb(t,e.context,!1),Sw(t,e.containerInfo)}function Xb(t,e,n,r,i){return Lc(),gw(i),e.flags|=256,Hr(t,e,n,r),e.child}var P1={dehydrated:null,treeContext:null,retryLane:0};function k1(t){return{baseLanes:t,cachePool:null,transitions:null}}function iA(t,e,n){var r=e.pendingProps,i=ln.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),zt(ln,i&1),t===null)return S1(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Vg(o,r,0,null),t=Zl(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=k1(n),e.memoizedState=P1,t):kw(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return RO(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=el(i,c),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=el(a,s):(s=Zl(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?k1(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=P1,r}return s=t.child,t=s.sibling,r=el(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function kw(t,e){return e=Vg({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function bp(t,e,n,r){return r!==null&&gw(r),Fc(e,t.child,null,n),t=kw(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function RO(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=z0(Error(he(422))),bp(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Vg({mode:"visible",children:r.children},i,0,null),s=Zl(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Fc(e,t.child,null,o),e.child.memoizedState=k1(o),e.memoizedState=P1,s);if(!(e.mode&1))return bp(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(he(419)),r=z0(s,r,void 0),bp(t,e,o,r)}if(a=(o&t.childLanes)!==0,ii||a){if(r=tr,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,sa(t,i),ks(r,t,i,-1))}return Lw(),r=z0(Error(he(421))),bp(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=WO.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Ti=Qa(i.nextSibling),Ii=e,Kt=!0,bs=null,t!==null&&(Qi[Ki++]=qo,Qi[Ki++]=Yo,Qi[Ki++]=ou,qo=t.id,Yo=t.overflow,ou=e),e=kw(e,r.children),e.flags|=4096,e)}function qb(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),b1(t.return,e,n)}function $0(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function sA(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Hr(t,e,r.children,n),r=ln.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&qb(t,n,e);else if(t.tag===19)qb(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(zt(ln,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&qm(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),$0(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&qm(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}$0(e,!0,n,null,s);break;case"together":$0(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function xm(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function oa(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),lu|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(he(153));if(e.child!==null){for(t=e.child,n=el(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=el(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function MO(t,e,n){switch(e.tag){case 3:rA(e),Lc();break;case 5:MI(e);break;case 1:ai(e.type)&&Hm(e);break;case 4:Sw(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;zt(jm,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(zt(ln,ln.current&1),e.flags|=128,null):n&e.child.childLanes?iA(t,e,n):(zt(ln,ln.current&1),t=oa(t,e,n),t!==null?t.sibling:null);zt(ln,ln.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return sA(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),zt(ln,ln.current),r)break;return null;case 22:case 23:return e.lanes=0,tA(t,e,n)}return oa(t,e,n)}var oA,R1,aA,lA;oA=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};R1=function(){};aA=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ql(Eo.current);var s=null;switch(n){case"input":i=Jv(t,i),r=Jv(t,r),s=[];break;case"select":i=hn({},i,{value:void 0}),r=hn({},r,{value:void 0}),s=[];break;case"textarea":i=n1(t,i),r=n1(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=zm)}i1(n,r);var o;n=null;for(h in i)if(!r.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var a=i[h];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Pd.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var c=r[h];if(a=i!=null?i[h]:void 0,r.hasOwnProperty(h)&&c!==a&&(c!=null||a!=null))if(h==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(h,n)),n=c;else h==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(s=s||[]).push(h,c)):h==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(h,""+c):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Pd.hasOwnProperty(h)?(c!=null&&h==="onScroll"&&Wt("scroll",t),s||a===c||(s=[])):(s=s||[]).push(h,c))}n&&(s=s||[]).push("style",n);var h=s;(e.updateQueue=h)&&(e.flags|=4)}};lA=function(t,e,n,r){n!==r&&(e.flags|=4)};function Nh(t,e){if(!Kt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Cr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function OO(t,e,n){var r=e.pendingProps;switch(mw(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Cr(e),null;case 1:return ai(e.type)&&$m(),Cr(e),null;case 3:return r=e.stateNode,Bc(),qt(oi),qt(Or),Ew(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(_p(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,bs!==null&&(U1(bs),bs=null))),R1(t,e),Cr(e),null;case 5:bw(e);var i=ql($d.current);if(n=e.type,t!==null&&e.stateNode!=null)aA(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(he(166));return Cr(e),null}if(t=ql(Eo.current),_p(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[_o]=e,r[Ud]=s,t=(e.mode&1)!==0,n){case"dialog":Wt("cancel",r),Wt("close",r);break;case"iframe":case"object":case"embed":Wt("load",r);break;case"video":case"audio":for(i=0;i<Zh.length;i++)Wt(Zh[i],r);break;case"source":Wt("error",r);break;case"img":case"image":case"link":Wt("error",r),Wt("load",r);break;case"details":Wt("toggle",r);break;case"input":rb(r,s),Wt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Wt("invalid",r);break;case"textarea":sb(r,s),Wt("invalid",r)}i1(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&wp(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&wp(r.textContent,a,t),i=["children",""+a]):Pd.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Wt("scroll",r)}switch(n){case"input":dp(r),ib(r,s,!0);break;case"textarea":dp(r),ob(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=zm)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=NC(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[_o]=e,t[Ud]=r,oA(t,e,!1,!1),e.stateNode=t;e:{switch(o=s1(n,r),n){case"dialog":Wt("cancel",t),Wt("close",t),i=r;break;case"iframe":case"object":case"embed":Wt("load",t),i=r;break;case"video":case"audio":for(i=0;i<Zh.length;i++)Wt(Zh[i],t);i=r;break;case"source":Wt("error",t),i=r;break;case"img":case"image":case"link":Wt("error",t),Wt("load",t),i=r;break;case"details":Wt("toggle",t),i=r;break;case"input":rb(t,r),i=Jv(t,r),Wt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=hn({},r,{value:void 0}),Wt("invalid",t);break;case"textarea":sb(t,r),i=n1(t,r),Wt("invalid",t);break;default:i=r}i1(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var c=a[s];s==="style"?BC(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&LC(t,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&kd(t,c):typeof c=="number"&&kd(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Pd.hasOwnProperty(s)?c!=null&&s==="onScroll"&&Wt("scroll",t):c!=null&&ew(t,s,c,o))}switch(n){case"input":dp(t),ib(t,r,!1);break;case"textarea":dp(t),ob(t);break;case"option":r.value!=null&&t.setAttribute("value",""+rl(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?yc(t,!!r.multiple,s,!1):r.defaultValue!=null&&yc(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=zm)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Cr(e),null;case 6:if(t&&e.stateNode!=null)lA(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(he(166));if(n=ql($d.current),ql(Eo.current),_p(e)){if(r=e.stateNode,n=e.memoizedProps,r[_o]=e,(s=r.nodeValue!==n)&&(t=Ii,t!==null))switch(t.tag){case 3:wp(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&wp(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[_o]=e,e.stateNode=r}return Cr(e),null;case 13:if(qt(ln),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Kt&&Ti!==null&&e.mode&1&&!(e.flags&128))TI(),Lc(),e.flags|=98560,s=!1;else if(s=_p(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(he(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(he(317));s[_o]=e}else Lc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Cr(e),s=!1}else bs!==null&&(U1(bs),bs=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ln.current&1?Gn===0&&(Gn=3):Lw())),e.updateQueue!==null&&(e.flags|=4),Cr(e),null);case 4:return Bc(),R1(t,e),t===null&&Fd(e.stateNode.containerInfo),Cr(e),null;case 10:return xw(e.type._context),Cr(e),null;case 17:return ai(e.type)&&$m(),Cr(e),null;case 19:if(qt(ln),s=e.memoizedState,s===null)return Cr(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Nh(s,!1);else{if(Gn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=qm(t),o!==null){for(e.flags|=128,Nh(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return zt(ln,ln.current&1|2),e.child}t=t.sibling}s.tail!==null&&_n()>zc&&(e.flags|=128,r=!0,Nh(s,!1),e.lanes=4194304)}else{if(!r)if(t=qm(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Nh(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Kt)return Cr(e),null}else 2*_n()-s.renderingStartTime>zc&&n!==1073741824&&(e.flags|=128,r=!0,Nh(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=_n(),e.sibling=null,n=ln.current,zt(ln,r?n&1|2:n&1),e):(Cr(e),null);case 22:case 23:return Nw(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?bi&1073741824&&(Cr(e),e.subtreeFlags&6&&(e.flags|=8192)):Cr(e),null;case 24:return null;case 25:return null}throw Error(he(156,e.tag))}function DO(t,e){switch(mw(e),e.tag){case 1:return ai(e.type)&&$m(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Bc(),qt(oi),qt(Or),Ew(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return bw(e),null;case 13:if(qt(ln),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(he(340));Lc()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return qt(ln),null;case 4:return Bc(),null;case 10:return xw(e.type._context),null;case 22:case 23:return Nw(),null;case 24:return null;default:return null}}var Ep=!1,Pr=!1,NO=typeof WeakSet=="function"?WeakSet:Set,Ce=null;function hc(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){pn(t,e,r)}else n.current=null}function M1(t,e,n){try{n()}catch(r){pn(t,e,r)}}var Yb=!1;function LO(t,e){if(m1=Fm,t=dI(),fw(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,h=0,d=0,m=t,f=null;t:for(;;){for(var y;m!==n||i!==0&&m.nodeType!==3||(a=o+i),m!==s||r!==0&&m.nodeType!==3||(c=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(y=m.firstChild)!==null;)f=m,m=y;for(;;){if(m===t)break t;if(f===n&&++h===i&&(a=o),f===s&&++d===r&&(c=o),(y=m.nextSibling)!==null)break;m=f,f=m.parentNode}m=y}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(g1={focusedElem:t,selectionRange:n},Fm=!1,Ce=e;Ce!==null;)if(e=Ce,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ce=t;else for(;Ce!==null;){e=Ce;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var S=v.memoizedProps,C=v.memoizedState,_=e.stateNode,b=_.getSnapshotBeforeUpdate(e.elementType===e.type?S:xs(e.type,S),C);_.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(he(163))}}catch(I){pn(e,e.return,I)}if(t=e.sibling,t!==null){t.return=e.return,Ce=t;break}Ce=e.return}return v=Yb,Yb=!1,v}function md(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&M1(e,n,s)}i=i.next}while(i!==r)}}function Wg(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function O1(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function uA(t){var e=t.alternate;e!==null&&(t.alternate=null,uA(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[_o],delete e[Ud],delete e[x1],delete e[vO],delete e[xO])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function cA(t){return t.tag===5||t.tag===3||t.tag===4}function Qb(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||cA(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function D1(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=zm));else if(r!==4&&(t=t.child,t!==null))for(D1(t,e,n),t=t.sibling;t!==null;)D1(t,e,n),t=t.sibling}function N1(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(N1(t,e,n),t=t.sibling;t!==null;)N1(t,e,n),t=t.sibling}var cr=null,_s=!1;function Pa(t,e,n){for(n=n.child;n!==null;)hA(t,e,n),n=n.sibling}function hA(t,e,n){if(bo&&typeof bo.onCommitFiberUnmount=="function")try{bo.onCommitFiberUnmount(Lg,n)}catch{}switch(n.tag){case 5:Pr||hc(n,e);case 6:var r=cr,i=_s;cr=null,Pa(t,e,n),cr=r,_s=i,cr!==null&&(_s?(t=cr,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):cr.removeChild(n.stateNode));break;case 18:cr!==null&&(_s?(t=cr,n=n.stateNode,t.nodeType===8?D0(t.parentNode,n):t.nodeType===1&&D0(t,n),Dd(t)):D0(cr,n.stateNode));break;case 4:r=cr,i=_s,cr=n.stateNode.containerInfo,_s=!0,Pa(t,e,n),cr=r,_s=i;break;case 0:case 11:case 14:case 15:if(!Pr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&M1(n,e,o),i=i.next}while(i!==r)}Pa(t,e,n);break;case 1:if(!Pr&&(hc(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){pn(n,e,a)}Pa(t,e,n);break;case 21:Pa(t,e,n);break;case 22:n.mode&1?(Pr=(r=Pr)||n.memoizedState!==null,Pa(t,e,n),Pr=r):Pa(t,e,n);break;default:Pa(t,e,n)}}function Kb(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new NO),e.forEach(function(r){var i=jO.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function hs(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:cr=a.stateNode,_s=!1;break e;case 3:cr=a.stateNode.containerInfo,_s=!0;break e;case 4:cr=a.stateNode.containerInfo,_s=!0;break e}a=a.return}if(cr===null)throw Error(he(160));hA(s,o,i),cr=null,_s=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(h){pn(i,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)dA(e,t),e=e.sibling}function dA(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(hs(e,t),ho(t),r&4){try{md(3,t,t.return),Wg(3,t)}catch(S){pn(t,t.return,S)}try{md(5,t,t.return)}catch(S){pn(t,t.return,S)}}break;case 1:hs(e,t),ho(t),r&512&&n!==null&&hc(n,n.return);break;case 5:if(hs(e,t),ho(t),r&512&&n!==null&&hc(n,n.return),t.flags&32){var i=t.stateNode;try{kd(i,"")}catch(S){pn(t,t.return,S)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&OC(i,s),s1(a,o);var h=s1(a,s);for(o=0;o<c.length;o+=2){var d=c[o],m=c[o+1];d==="style"?BC(i,m):d==="dangerouslySetInnerHTML"?LC(i,m):d==="children"?kd(i,m):ew(i,d,m,h)}switch(a){case"input":e1(i,s);break;case"textarea":DC(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var y=s.value;y!=null?yc(i,!!s.multiple,y,!1):f!==!!s.multiple&&(s.defaultValue!=null?yc(i,!!s.multiple,s.defaultValue,!0):yc(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ud]=s}catch(S){pn(t,t.return,S)}}break;case 6:if(hs(e,t),ho(t),r&4){if(t.stateNode===null)throw Error(he(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(S){pn(t,t.return,S)}}break;case 3:if(hs(e,t),ho(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Dd(e.containerInfo)}catch(S){pn(t,t.return,S)}break;case 4:hs(e,t),ho(t);break;case 13:hs(e,t),ho(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Ow=_n())),r&4&&Kb(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Pr=(h=Pr)||d,hs(e,t),Pr=h):hs(e,t),ho(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!d&&t.mode&1)for(Ce=t,d=t.child;d!==null;){for(m=Ce=d;Ce!==null;){switch(f=Ce,y=f.child,f.tag){case 0:case 11:case 14:case 15:md(4,f,f.return);break;case 1:hc(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(S){pn(r,n,S)}}break;case 5:hc(f,f.return);break;case 22:if(f.memoizedState!==null){Jb(m);continue}}y!==null?(y.return=f,Ce=y):Jb(m)}d=d.sibling}e:for(d=null,m=t;;){if(m.tag===5){if(d===null){d=m;try{i=m.stateNode,h?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=m.stateNode,c=m.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=FC("display",o))}catch(S){pn(t,t.return,S)}}}else if(m.tag===6){if(d===null)try{m.stateNode.nodeValue=h?"":m.memoizedProps}catch(S){pn(t,t.return,S)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;d===m&&(d=null),m=m.return}d===m&&(d=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:hs(e,t),ho(t),r&4&&Kb(t);break;case 21:break;default:hs(e,t),ho(t)}}function ho(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(cA(n)){var r=n;break e}n=n.return}throw Error(he(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(kd(i,""),r.flags&=-33);var s=Qb(t);N1(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Qb(t);D1(t,a,o);break;default:throw Error(he(161))}}catch(c){pn(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function FO(t,e,n){Ce=t,fA(t)}function fA(t,e,n){for(var r=(t.mode&1)!==0;Ce!==null;){var i=Ce,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Ep;if(!o){var a=i.alternate,c=a!==null&&a.memoizedState!==null||Pr;a=Ep;var h=Pr;if(Ep=o,(Pr=c)&&!h)for(Ce=i;Ce!==null;)o=Ce,c=o.child,o.tag===22&&o.memoizedState!==null?eE(i):c!==null?(c.return=o,Ce=c):eE(i);for(;s!==null;)Ce=s,fA(s),s=s.sibling;Ce=i,Ep=a,Pr=h}Zb(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Ce=s):Zb(t)}}function Zb(t){for(;Ce!==null;){var e=Ce;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Pr||Wg(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Pr)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:xs(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Nb(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Nb(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var d=h.memoizedState;if(d!==null){var m=d.dehydrated;m!==null&&Dd(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(he(163))}Pr||e.flags&512&&O1(e)}catch(f){pn(e,e.return,f)}}if(e===t){Ce=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ce=n;break}Ce=e.return}}function Jb(t){for(;Ce!==null;){var e=Ce;if(e===t){Ce=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ce=n;break}Ce=e.return}}function eE(t){for(;Ce!==null;){var e=Ce;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Wg(4,e)}catch(c){pn(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){pn(e,i,c)}}var s=e.return;try{O1(e)}catch(c){pn(e,s,c)}break;case 5:var o=e.return;try{O1(e)}catch(c){pn(e,o,c)}}}catch(c){pn(e,e.return,c)}if(e===t){Ce=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ce=a;break}Ce=e.return}}var BO=Math.ceil,Km=la.ReactCurrentDispatcher,Rw=la.ReactCurrentOwner,ss=la.ReactCurrentBatchConfig,gt=0,tr=null,Pn=null,pr=0,bi=0,dc=dl(0),Gn=0,jd=null,lu=0,jg=0,Mw=0,gd=null,ri=null,Ow=0,zc=1/0,jo=null,Zm=!1,L1=null,Za=null,Tp=!1,Ga=null,Jm=0,yd=0,F1=null,wm=-1,_m=0;function Gr(){return gt&6?_n():wm!==-1?wm:wm=_n()}function Ja(t){return t.mode&1?gt&2&&pr!==0?pr&-pr:_O.transition!==null?(_m===0&&(_m=QC()),_m):(t=Rt,t!==0||(t=window.event,t=t===void 0?16:rI(t.type)),t):1}function ks(t,e,n,r){if(50<yd)throw yd=0,F1=null,Error(he(185));hf(t,n,r),(!(gt&2)||t!==tr)&&(t===tr&&(!(gt&2)&&(jg|=n),Gn===4&&Ua(t,pr)),li(t,r),n===1&&gt===0&&!(e.mode&1)&&(zc=_n()+500,$g&&fl()))}function li(t,e){var n=t.callbackNode;_M(t,e);var r=Lm(t,t===tr?pr:0);if(r===0)n!==null&&ub(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&ub(n),e===1)t.tag===0?wO(tE.bind(null,t)):SI(tE.bind(null,t)),gO(function(){!(gt&6)&&fl()}),n=null;else{switch(KC(r)){case 1:n=sw;break;case 4:n=qC;break;case 16:n=Nm;break;case 536870912:n=YC;break;default:n=Nm}n=_A(n,pA.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function pA(t,e){if(wm=-1,_m=0,gt&6)throw Error(he(327));var n=t.callbackNode;if(Sc()&&t.callbackNode!==n)return null;var r=Lm(t,t===tr?pr:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=eg(t,r);else{e=r;var i=gt;gt|=2;var s=gA();(tr!==t||pr!==e)&&(jo=null,zc=_n()+500,Kl(t,e));do try{$O();break}catch(a){mA(t,a)}while(1);vw(),Km.current=s,gt=i,Pn!==null?e=0:(tr=null,pr=0,e=Gn)}if(e!==0){if(e===2&&(i=c1(t),i!==0&&(r=i,e=B1(t,i))),e===1)throw n=jd,Kl(t,0),Ua(t,r),li(t,_n()),n;if(e===6)Ua(t,r);else{if(i=t.current.alternate,!(r&30)&&!UO(i)&&(e=eg(t,r),e===2&&(s=c1(t),s!==0&&(r=s,e=B1(t,s))),e===1))throw n=jd,Kl(t,0),Ua(t,r),li(t,_n()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(he(345));case 2:Ll(t,ri,jo);break;case 3:if(Ua(t,r),(r&130023424)===r&&(e=Ow+500-_n(),10<e)){if(Lm(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Gr(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=v1(Ll.bind(null,t,ri,jo),e);break}Ll(t,ri,jo);break;case 4:if(Ua(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Ps(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=_n()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*BO(r/1960))-r,10<r){t.timeoutHandle=v1(Ll.bind(null,t,ri,jo),r);break}Ll(t,ri,jo);break;case 5:Ll(t,ri,jo);break;default:throw Error(he(329))}}}return li(t,_n()),t.callbackNode===n?pA.bind(null,t):null}function B1(t,e){var n=gd;return t.current.memoizedState.isDehydrated&&(Kl(t,e).flags|=256),t=eg(t,e),t!==2&&(e=ri,ri=n,e!==null&&U1(e)),t}function U1(t){ri===null?ri=t:ri.push.apply(ri,t)}function UO(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Ds(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ua(t,e){for(e&=~Mw,e&=~jg,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ps(e),r=1<<n;t[n]=-1,e&=~r}}function tE(t){if(gt&6)throw Error(he(327));Sc();var e=Lm(t,0);if(!(e&1))return li(t,_n()),null;var n=eg(t,e);if(t.tag!==0&&n===2){var r=c1(t);r!==0&&(e=r,n=B1(t,r))}if(n===1)throw n=jd,Kl(t,0),Ua(t,e),li(t,_n()),n;if(n===6)throw Error(he(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ll(t,ri,jo),li(t,_n()),null}function Dw(t,e){var n=gt;gt|=1;try{return t(e)}finally{gt=n,gt===0&&(zc=_n()+500,$g&&fl())}}function uu(t){Ga!==null&&Ga.tag===0&&!(gt&6)&&Sc();var e=gt;gt|=1;var n=ss.transition,r=Rt;try{if(ss.transition=null,Rt=1,t)return t()}finally{Rt=r,ss.transition=n,gt=e,!(gt&6)&&fl()}}function Nw(){bi=dc.current,qt(dc)}function Kl(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,mO(n)),Pn!==null)for(n=Pn.return;n!==null;){var r=n;switch(mw(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&$m();break;case 3:Bc(),qt(oi),qt(Or),Ew();break;case 5:bw(r);break;case 4:Bc();break;case 13:qt(ln);break;case 19:qt(ln);break;case 10:xw(r.type._context);break;case 22:case 23:Nw()}n=n.return}if(tr=t,Pn=t=el(t.current,null),pr=bi=e,Gn=0,jd=null,Mw=jg=lu=0,ri=gd=null,Xl!==null){for(e=0;e<Xl.length;e++)if(n=Xl[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Xl=null}return t}function mA(t,e){do{var n=Pn;try{if(vw(),ym.current=Qm,Ym){for(var r=cn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Ym=!1}if(au=0,Kn=$n=cn=null,pd=!1,Hd=0,Rw.current=null,n===null||n.return===null){Gn=1,jd=e,Pn=null;break}e:{var s=t,o=n.return,a=n,c=e;if(e=pr,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var h=c,d=a,m=d.tag;if(!(d.mode&1)&&(m===0||m===11||m===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var y=Hb(o);if(y!==null){y.flags&=-257,Gb(y,o,a,s,e),y.mode&1&&$b(s,h,e),e=y,c=h;var v=e.updateQueue;if(v===null){var S=new Set;S.add(c),e.updateQueue=S}else v.add(c);break e}else{if(!(e&1)){$b(s,h,e),Lw();break e}c=Error(he(426))}}else if(Kt&&a.mode&1){var C=Hb(o);if(C!==null){!(C.flags&65536)&&(C.flags|=256),Gb(C,o,a,s,e),gw(Uc(c,a));break e}}s=c=Uc(c,a),Gn!==4&&(Gn=2),gd===null?gd=[s]:gd.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var _=ZI(s,c,e);Db(s,_);break e;case 1:a=c;var b=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof b.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Za===null||!Za.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var I=JI(s,a,e);Db(s,I);break e}}s=s.return}while(s!==null)}vA(n)}catch(P){e=P,Pn===n&&n!==null&&(Pn=n=n.return);continue}break}while(1)}function gA(){var t=Km.current;return Km.current=Qm,t===null?Qm:t}function Lw(){(Gn===0||Gn===3||Gn===2)&&(Gn=4),tr===null||!(lu&268435455)&&!(jg&268435455)||Ua(tr,pr)}function eg(t,e){var n=gt;gt|=2;var r=gA();(tr!==t||pr!==e)&&(jo=null,Kl(t,e));do try{zO();break}catch(i){mA(t,i)}while(1);if(vw(),gt=n,Km.current=r,Pn!==null)throw Error(he(261));return tr=null,pr=0,Gn}function zO(){for(;Pn!==null;)yA(Pn)}function $O(){for(;Pn!==null&&!dM();)yA(Pn)}function yA(t){var e=wA(t.alternate,t,bi);t.memoizedProps=t.pendingProps,e===null?vA(t):Pn=e,Rw.current=null}function vA(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=DO(n,e),n!==null){n.flags&=32767,Pn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Gn=6,Pn=null;return}}else if(n=OO(n,e,bi),n!==null){Pn=n;return}if(e=e.sibling,e!==null){Pn=e;return}Pn=e=t}while(e!==null);Gn===0&&(Gn=5)}function Ll(t,e,n){var r=Rt,i=ss.transition;try{ss.transition=null,Rt=1,HO(t,e,n,r)}finally{ss.transition=i,Rt=r}return null}function HO(t,e,n,r){do Sc();while(Ga!==null);if(gt&6)throw Error(he(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(he(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(SM(t,s),t===tr&&(Pn=tr=null,pr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Tp||(Tp=!0,_A(Nm,function(){return Sc(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=ss.transition,ss.transition=null;var o=Rt;Rt=1;var a=gt;gt|=4,Rw.current=null,LO(t,n),dA(n,t),lO(g1),Fm=!!m1,g1=m1=null,t.current=n,FO(n),fM(),gt=a,Rt=o,ss.transition=s}else t.current=n;if(Tp&&(Tp=!1,Ga=t,Jm=i),s=t.pendingLanes,s===0&&(Za=null),gM(n.stateNode),li(t,_n()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Zm)throw Zm=!1,t=L1,L1=null,t;return Jm&1&&t.tag!==0&&Sc(),s=t.pendingLanes,s&1?t===F1?yd++:(yd=0,F1=t):yd=0,fl(),null}function Sc(){if(Ga!==null){var t=KC(Jm),e=ss.transition,n=Rt;try{if(ss.transition=null,Rt=16>t?16:t,Ga===null)var r=!1;else{if(t=Ga,Ga=null,Jm=0,gt&6)throw Error(he(331));var i=gt;for(gt|=4,Ce=t.current;Ce!==null;){var s=Ce,o=s.child;if(Ce.flags&16){var a=s.deletions;if(a!==null){for(var c=0;c<a.length;c++){var h=a[c];for(Ce=h;Ce!==null;){var d=Ce;switch(d.tag){case 0:case 11:case 15:md(8,d,s)}var m=d.child;if(m!==null)m.return=d,Ce=m;else for(;Ce!==null;){d=Ce;var f=d.sibling,y=d.return;if(uA(d),d===h){Ce=null;break}if(f!==null){f.return=y,Ce=f;break}Ce=y}}}var v=s.alternate;if(v!==null){var S=v.child;if(S!==null){v.child=null;do{var C=S.sibling;S.sibling=null,S=C}while(S!==null)}}Ce=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Ce=o;else e:for(;Ce!==null;){if(s=Ce,s.flags&2048)switch(s.tag){case 0:case 11:case 15:md(9,s,s.return)}var _=s.sibling;if(_!==null){_.return=s.return,Ce=_;break e}Ce=s.return}}var b=t.current;for(Ce=b;Ce!==null;){o=Ce;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,Ce=w;else e:for(o=b;Ce!==null;){if(a=Ce,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Wg(9,a)}}catch(P){pn(a,a.return,P)}if(a===o){Ce=null;break e}var I=a.sibling;if(I!==null){I.return=a.return,Ce=I;break e}Ce=a.return}}if(gt=i,fl(),bo&&typeof bo.onPostCommitFiberRoot=="function")try{bo.onPostCommitFiberRoot(Lg,t)}catch{}r=!0}return r}finally{Rt=n,ss.transition=e}}return!1}function nE(t,e,n){e=Uc(n,e),e=ZI(t,e,1),t=Ka(t,e,1),e=Gr(),t!==null&&(hf(t,1,e),li(t,e))}function pn(t,e,n){if(t.tag===3)nE(t,t,n);else for(;e!==null;){if(e.tag===3){nE(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Za===null||!Za.has(r))){t=Uc(n,t),t=JI(e,t,1),e=Ka(e,t,1),t=Gr(),e!==null&&(hf(e,1,t),li(e,t));break}}e=e.return}}function GO(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Gr(),t.pingedLanes|=t.suspendedLanes&n,tr===t&&(pr&n)===n&&(Gn===4||Gn===3&&(pr&130023424)===pr&&500>_n()-Ow?Kl(t,0):Mw|=n),li(t,e)}function xA(t,e){e===0&&(t.mode&1?(e=mp,mp<<=1,!(mp&130023424)&&(mp=4194304)):e=1);var n=Gr();t=sa(t,e),t!==null&&(hf(t,e,n),li(t,n))}function WO(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),xA(t,n)}function jO(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(he(314))}r!==null&&r.delete(e),xA(t,n)}var wA;wA=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||oi.current)ii=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ii=!1,MO(t,e,n);ii=!!(t.flags&131072)}else ii=!1,Kt&&e.flags&1048576&&bI(e,Wm,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;xm(t,e),t=e.pendingProps;var i=Nc(e,Or.current);_c(e,n),i=Cw(null,e,r,t,i,n);var s=Iw();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ai(r)?(s=!0,Hm(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,_w(e),i.updater=Hg,e.stateNode=i,i._reactInternals=e,T1(e,r,t,n),e=A1(null,e,r,!0,s,n)):(e.tag=0,Kt&&s&&pw(e),Hr(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(xm(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=XO(r),t=xs(r,t),i){case 0:e=I1(null,e,r,t,n);break e;case 1:e=Vb(null,e,r,t,n);break e;case 11:e=Wb(null,e,r,t,n);break e;case 14:e=jb(null,e,r,xs(r.type,t),n);break e}throw Error(he(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:xs(r,i),I1(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:xs(r,i),Vb(t,e,r,i,n);case 3:e:{if(rA(e),t===null)throw Error(he(387));r=e.pendingProps,s=e.memoizedState,i=s.element,II(t,e),Xm(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Uc(Error(he(423)),e),e=Xb(t,e,r,n,i);break e}else if(r!==i){i=Uc(Error(he(424)),e),e=Xb(t,e,r,n,i);break e}else for(Ti=Qa(e.stateNode.containerInfo.firstChild),Ii=e,Kt=!0,bs=null,n=RI(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Lc(),r===i){e=oa(t,e,n);break e}Hr(t,e,r,n)}e=e.child}return e;case 5:return MI(e),t===null&&S1(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,y1(r,i)?o=null:s!==null&&y1(r,s)&&(e.flags|=32),nA(t,e),Hr(t,e,o,n),e.child;case 6:return t===null&&S1(e),null;case 13:return iA(t,e,n);case 4:return Sw(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Fc(e,null,r,n):Hr(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:xs(r,i),Wb(t,e,r,i,n);case 7:return Hr(t,e,e.pendingProps,n),e.child;case 8:return Hr(t,e,e.pendingProps.children,n),e.child;case 12:return Hr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,zt(jm,r._currentValue),r._currentValue=o,s!==null)if(Ds(s.value,o)){if(s.children===i.children&&!oi.current){e=oa(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=Zo(-1,n&-n),c.tag=2;var h=s.updateQueue;if(h!==null){h=h.shared;var d=h.pending;d===null?c.next=c:(c.next=d.next,d.next=c),h.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),b1(s.return,n,e),a.lanes|=n;break}c=c.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(he(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),b1(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Hr(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,_c(e,n),i=os(i),r=r(i),e.flags|=1,Hr(t,e,r,n),e.child;case 14:return r=e.type,i=xs(r,e.pendingProps),i=xs(r.type,i),jb(t,e,r,i,n);case 15:return eA(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:xs(r,i),xm(t,e),e.tag=1,ai(r)?(t=!0,Hm(e)):t=!1,_c(e,n),PI(e,r,i),T1(e,r,i,n),A1(null,e,r,!0,t,n);case 19:return sA(t,e,n);case 22:return tA(t,e,n)}throw Error(he(156,e.tag))};function _A(t,e){return XC(t,e)}function VO(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ts(t,e,n,r){return new VO(t,e,n,r)}function Fw(t){return t=t.prototype,!(!t||!t.isReactComponent)}function XO(t){if(typeof t=="function")return Fw(t)?1:0;if(t!=null){if(t=t.$$typeof,t===nw)return 11;if(t===rw)return 14}return 2}function el(t,e){var n=t.alternate;return n===null?(n=ts(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Sm(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Fw(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case nc:return Zl(n.children,i,s,e);case tw:o=8,i|=8;break;case Yv:return t=ts(12,n,e,i|2),t.elementType=Yv,t.lanes=s,t;case Qv:return t=ts(13,n,e,i),t.elementType=Qv,t.lanes=s,t;case Kv:return t=ts(19,n,e,i),t.elementType=Kv,t.lanes=s,t;case kC:return Vg(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case AC:o=10;break e;case PC:o=9;break e;case nw:o=11;break e;case rw:o=14;break e;case Oa:o=16,r=null;break e}throw Error(he(130,t==null?t:typeof t,""))}return e=ts(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Zl(t,e,n,r){return t=ts(7,t,r,e),t.lanes=n,t}function Vg(t,e,n,r){return t=ts(22,t,r,e),t.elementType=kC,t.lanes=n,t.stateNode={isHidden:!1},t}function H0(t,e,n){return t=ts(6,t,null,e),t.lanes=n,t}function G0(t,e,n){return e=ts(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function qO(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=b0(0),this.expirationTimes=b0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=b0(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bw(t,e,n,r,i,s,o,a,c){return t=new qO(t,e,n,a,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=ts(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},_w(s),t}function YO(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:tc,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function SA(t){if(!t)return il;t=t._reactInternals;e:{if(mu(t)!==t||t.tag!==1)throw Error(he(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ai(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(he(171))}if(t.tag===1){var n=t.type;if(ai(n))return _I(t,n,e)}return e}function bA(t,e,n,r,i,s,o,a,c){return t=Bw(n,r,!0,t,i,s,o,a,c),t.context=SA(null),n=t.current,r=Gr(),i=Ja(n),s=Zo(r,i),s.callback=e??null,Ka(n,s,i),t.current.lanes=i,hf(t,i,r),li(t,r),t}function Xg(t,e,n,r){var i=e.current,s=Gr(),o=Ja(i);return n=SA(n),e.context===null?e.context=n:e.pendingContext=n,e=Zo(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ka(i,e,o),t!==null&&(ks(t,i,o,s),gm(t,i,o)),o}function tg(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function rE(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Uw(t,e){rE(t,e),(t=t.alternate)&&rE(t,e)}function QO(){return null}var EA=typeof reportError=="function"?reportError:function(t){console.error(t)};function zw(t){this._internalRoot=t}qg.prototype.render=zw.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(he(409));Xg(t,e,null,null)};qg.prototype.unmount=zw.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;uu(function(){Xg(null,t,null,null)}),e[ia]=null}};function qg(t){this._internalRoot=t}qg.prototype.unstable_scheduleHydration=function(t){if(t){var e=eI();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ba.length&&e!==0&&e<Ba[n].priority;n++);Ba.splice(n,0,t),n===0&&nI(t)}};function $w(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Yg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function iE(){}function KO(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var h=tg(o);s.call(h)}}var o=bA(e,r,t,0,null,!1,!1,"",iE);return t._reactRootContainer=o,t[ia]=o.current,Fd(t.nodeType===8?t.parentNode:t),uu(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var h=tg(c);a.call(h)}}var c=Bw(t,0,!1,null,null,!1,!1,"",iE);return t._reactRootContainer=c,t[ia]=c.current,Fd(t.nodeType===8?t.parentNode:t),uu(function(){Xg(e,c,n,r)}),c}function Qg(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var c=tg(o);a.call(c)}}Xg(e,o,t,i)}else o=KO(n,e,t,i,r);return tg(o)}ZC=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Kh(e.pendingLanes);n!==0&&(ow(e,n|1),li(e,_n()),!(gt&6)&&(zc=_n()+500,fl()))}break;case 13:uu(function(){var r=sa(t,1);if(r!==null){var i=Gr();ks(r,t,1,i)}}),Uw(t,1)}};aw=function(t){if(t.tag===13){var e=sa(t,134217728);if(e!==null){var n=Gr();ks(e,t,134217728,n)}Uw(t,134217728)}};JC=function(t){if(t.tag===13){var e=Ja(t),n=sa(t,e);if(n!==null){var r=Gr();ks(n,t,e,r)}Uw(t,e)}};eI=function(){return Rt};tI=function(t,e){var n=Rt;try{return Rt=t,e()}finally{Rt=n}};a1=function(t,e,n){switch(e){case"input":if(e1(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=zg(r);if(!i)throw Error(he(90));MC(r),e1(r,i)}}}break;case"textarea":DC(t,n);break;case"select":e=n.value,e!=null&&yc(t,!!n.multiple,e,!1)}};$C=Dw;HC=uu;var ZO={usingClientEntryPoint:!1,Events:[ff,oc,zg,UC,zC,Dw]},Lh={findFiberByHostInstance:Vl,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},JO={bundleType:Lh.bundleType,version:Lh.version,rendererPackageName:Lh.rendererPackageName,rendererConfig:Lh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:la.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=jC(t),t===null?null:t.stateNode},findFiberByHostInstance:Lh.findFiberByHostInstance||QO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cp.isDisabled&&Cp.supportsFiber)try{Lg=Cp.inject(JO),bo=Cp}catch{}}Ri.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZO;Ri.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$w(e))throw Error(he(200));return YO(t,e,null,n)};Ri.createRoot=function(t,e){if(!$w(t))throw Error(he(299));var n=!1,r="",i=EA;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Bw(t,1,!1,null,null,n,!1,r,i),t[ia]=e.current,Fd(t.nodeType===8?t.parentNode:t),new zw(e)};Ri.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(he(188)):(t=Object.keys(t).join(","),Error(he(268,t)));return t=jC(e),t=t===null?null:t.stateNode,t};Ri.flushSync=function(t){return uu(t)};Ri.hydrate=function(t,e,n){if(!Yg(e))throw Error(he(200));return Qg(null,t,e,!0,n)};Ri.hydrateRoot=function(t,e,n){if(!$w(t))throw Error(he(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=EA;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=bA(e,null,t,1,n??null,i,!1,s,o),t[ia]=e.current,Fd(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new qg(e)};Ri.render=function(t,e,n){if(!Yg(e))throw Error(he(200));return Qg(null,t,e,!1,n)};Ri.unmountComponentAtNode=function(t){if(!Yg(t))throw Error(he(40));return t._reactRootContainer?(uu(function(){Qg(null,null,t,!1,function(){t._reactRootContainer=null,t[ia]=null})}),!0):!1};Ri.unstable_batchedUpdates=Dw;Ri.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Yg(n))throw Error(he(200));if(t==null||t._reactInternals===void 0)throw Error(he(38));return Qg(t,e,n,!1,r)};Ri.version="18.2.0-next-9e3b772b8-20220608";function TA(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(TA)}catch(t){console.error(t)}}TA(),bC.exports=Ri;var CA=bC.exports;const IA=uf(CA);var sE=CA;Xv.createRoot=sE.createRoot,Xv.hydrateRoot=sE.hydrateRoot;var gu=(t=>(t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2",t))(gu||{}),AA=(t=>(t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS",t))(AA||{}),z1=(t=>(t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL",t))(z1||{}),Ue=(t=>(t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR",t))(Ue||{}),Cs=(t=>(t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN",t))(Cs||{}),me=(t=>(t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL",t))(me||{}),bc=(t=>(t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t))(bc||{}),Fe=(t=>(t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT",t))(Fe||{}),$1=(t=>(t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT",t))($1||{}),ns=(t=>(t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR",t))(ns||{}),Jo=(t=>(t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",t))(Jo||{}),Io=(t=>(t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL",t))(Io||{}),Bs=(t=>(t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",t))(Bs||{}),xo=(t=>(t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT",t))(xo||{}),Hw=(t=>(t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL",t))(Hw||{}),rs=(t=>(t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp",t))(rs||{}),Un=(t=>(t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR",t))(Un||{}),An=(t=>(t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH",t))(An||{}),To=(t=>(t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",t))(To||{});const eD={createCanvas:(t,e)=>{const n=document.createElement("canvas");return n.width=t,n.height=e,n},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(t,e)=>fetch(t,e),parseXML:t=>new DOMParser().parseFromString(t,"text/xml")},Se={ADAPTER:eD,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var W0=/iPhone/i,oE=/iPod/i,aE=/iPad/i,lE=/\biOS-universal(?:.+)Mac\b/i,j0=/\bAndroid(?:.+)Mobile\b/i,uE=/Android/i,Uu=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Ip=/Silk/i,$o=/Windows Phone/i,cE=/\bWindows(?:.+)ARM\b/i,hE=/BlackBerry/i,dE=/BB10/i,fE=/Opera Mini/i,pE=/\b(CriOS|Chrome)(?:.+)Mobile/i,mE=/Mobile(?:.+)Firefox\b/i,gE=function(t){return typeof t<"u"&&t.platform==="MacIntel"&&typeof t.maxTouchPoints=="number"&&t.maxTouchPoints>1&&typeof MSStream>"u"};function tD(t){return function(e){return e.test(t)}}function yE(t){var e={userAgent:"",platform:"",maxTouchPoints:0};!t&&typeof navigator<"u"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof t=="string"?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0});var n=e.userAgent,r=n.split("[FBAN");typeof r[1]<"u"&&(n=r[0]),r=n.split("Twitter"),typeof r[1]<"u"&&(n=r[0]);var i=tD(n),s={apple:{phone:i(W0)&&!i($o),ipod:i(oE),tablet:!i(W0)&&(i(aE)||gE(e))&&!i($o),universal:i(lE),device:(i(W0)||i(oE)||i(aE)||i(lE)||gE(e))&&!i($o)},amazon:{phone:i(Uu),tablet:!i(Uu)&&i(Ip),device:i(Uu)||i(Ip)},android:{phone:!i($o)&&i(Uu)||!i($o)&&i(j0),tablet:!i($o)&&!i(Uu)&&!i(j0)&&(i(Ip)||i(uE)),device:!i($o)&&(i(Uu)||i(Ip)||i(j0)||i(uE))||i(/\bokhttp\b/i)},windows:{phone:i($o),tablet:i(cE),device:i($o)||i(cE)},other:{blackberry:i(hE),blackberry10:i(dE),opera:i(fE),firefox:i(mE),chrome:i(pE),device:i(hE)||i(dE)||i(fE)||i(mE)||i(pE)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}const nD=yE.default??yE,Qo=nD(globalThis.navigator);Se.RETINA_PREFIX=/@([0-9\.]+)x/;Se.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var PA={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(c,h,d){this.fn=c,this.context=h,this.once=d||!1}function s(c,h,d,m,f){if(typeof d!="function")throw new TypeError("The listener must be a function");var y=new i(d,m||c,f),v=n?n+h:h;return c._events[v]?c._events[v].fn?c._events[v]=[c._events[v],y]:c._events[v].push(y):(c._events[v]=y,c._eventsCount++),c}function o(c,h){--c._eventsCount===0?c._events=new r:delete c._events[h]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var h=[],d,m;if(this._eventsCount===0)return h;for(m in d=this._events)e.call(d,m)&&h.push(n?m.slice(1):m);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(d)):h},a.prototype.listeners=function(h){var d=n?n+h:h,m=this._events[d];if(!m)return[];if(m.fn)return[m.fn];for(var f=0,y=m.length,v=new Array(y);f<y;f++)v[f]=m[f].fn;return v},a.prototype.listenerCount=function(h){var d=n?n+h:h,m=this._events[d];return m?m.fn?1:m.length:0},a.prototype.emit=function(h,d,m,f,y,v){var S=n?n+h:h;if(!this._events[S])return!1;var C=this._events[S],_=arguments.length,b,w;if(C.fn){switch(C.once&&this.removeListener(h,C.fn,void 0,!0),_){case 1:return C.fn.call(C.context),!0;case 2:return C.fn.call(C.context,d),!0;case 3:return C.fn.call(C.context,d,m),!0;case 4:return C.fn.call(C.context,d,m,f),!0;case 5:return C.fn.call(C.context,d,m,f,y),!0;case 6:return C.fn.call(C.context,d,m,f,y,v),!0}for(w=1,b=new Array(_-1);w<_;w++)b[w-1]=arguments[w];C.fn.apply(C.context,b)}else{var I=C.length,P;for(w=0;w<I;w++)switch(C[w].once&&this.removeListener(h,C[w].fn,void 0,!0),_){case 1:C[w].fn.call(C[w].context);break;case 2:C[w].fn.call(C[w].context,d);break;case 3:C[w].fn.call(C[w].context,d,m);break;case 4:C[w].fn.call(C[w].context,d,m,f);break;default:if(!b)for(P=1,b=new Array(_-1);P<_;P++)b[P-1]=arguments[P];C[w].fn.apply(C[w].context,b)}}return!0},a.prototype.on=function(h,d,m){return s(this,h,d,m,!1)},a.prototype.once=function(h,d,m){return s(this,h,d,m,!0)},a.prototype.removeListener=function(h,d,m,f){var y=n?n+h:h;if(!this._events[y])return this;if(!d)return o(this,y),this;var v=this._events[y];if(v.fn)v.fn===d&&(!f||v.once)&&(!m||v.context===m)&&o(this,y);else{for(var S=0,C=[],_=v.length;S<_;S++)(v[S].fn!==d||f&&!v[S].once||m&&v[S].context!==m)&&C.push(v[S]);C.length?this._events[y]=C.length===1?C[0]:C:o(this,y)}return this},a.prototype.removeAllListeners=function(h){var d;return h?(d=n?n+h:h,this._events[d]&&o(this,d)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(PA);var rD=PA.exports;const mf=uf(rD);var Gw={exports:{}};Gw.exports=Kg;Gw.exports.default=Kg;function Kg(t,e,n){n=n||2;var r=e&&e.length,i=r?e[0]*n:t.length,s=kA(t,0,i,n,!0),o=[];if(!s||s.next===s.prev)return o;var a,c,h,d,m,f,y;if(r&&(s=lD(t,e,s,n)),t.length>80*n){a=h=t[0],c=d=t[1];for(var v=n;v<i;v+=n)m=t[v],f=t[v+1],m<a&&(a=m),f<c&&(c=f),m>h&&(h=m),f>d&&(d=f);y=Math.max(h-a,d-c),y=y!==0?32767/y:0}return Vd(s,o,n,a,c,y,0),o}function kA(t,e,n,r,i){var s,o;if(i===W1(t,e,n,r)>0)for(s=e;s<n;s+=r)o=vE(s,t[s],t[s+1],o);else for(s=n-r;s>=e;s-=r)o=vE(s,t[s],t[s+1],o);return o&&Zg(o,o.next)&&(qd(o),o=o.next),o}function cu(t,e){if(!t)return t;e||(e=t);var n=t,r;do if(r=!1,!n.steiner&&(Zg(n,n.next)||un(n.prev,n,n.next)===0)){if(qd(n),n=e=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==e);return e}function Vd(t,e,n,r,i,s,o){if(t){!o&&s&&fD(t,r,i,s);for(var a=t,c,h;t.prev!==t.next;){if(c=t.prev,h=t.next,s?sD(t,r,i,s):iD(t)){e.push(c.i/n|0),e.push(t.i/n|0),e.push(h.i/n|0),qd(t),t=h.next,a=h.next;continue}if(t=h,t===a){o?o===1?(t=oD(cu(t),e,n),Vd(t,e,n,r,i,s,2)):o===2&&aD(t,e,n,r,i,s):Vd(cu(t),e,n,r,i,s,1);break}}}}function iD(t){var e=t.prev,n=t,r=t.next;if(un(e,n,r)>=0)return!1;for(var i=e.x,s=n.x,o=r.x,a=e.y,c=n.y,h=r.y,d=i<s?i<o?i:o:s<o?s:o,m=a<c?a<h?a:h:c<h?c:h,f=i>s?i>o?i:o:s>o?s:o,y=a>c?a>h?a:h:c>h?c:h,v=r.next;v!==e;){if(v.x>=d&&v.x<=f&&v.y>=m&&v.y<=y&&fc(i,a,s,c,o,h,v.x,v.y)&&un(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function sD(t,e,n,r){var i=t.prev,s=t,o=t.next;if(un(i,s,o)>=0)return!1;for(var a=i.x,c=s.x,h=o.x,d=i.y,m=s.y,f=o.y,y=a<c?a<h?a:h:c<h?c:h,v=d<m?d<f?d:f:m<f?m:f,S=a>c?a>h?a:h:c>h?c:h,C=d>m?d>f?d:f:m>f?m:f,_=H1(y,v,e,n,r),b=H1(S,C,e,n,r),w=t.prevZ,I=t.nextZ;w&&w.z>=_&&I&&I.z<=b;){if(w.x>=y&&w.x<=S&&w.y>=v&&w.y<=C&&w!==i&&w!==o&&fc(a,d,c,m,h,f,w.x,w.y)&&un(w.prev,w,w.next)>=0||(w=w.prevZ,I.x>=y&&I.x<=S&&I.y>=v&&I.y<=C&&I!==i&&I!==o&&fc(a,d,c,m,h,f,I.x,I.y)&&un(I.prev,I,I.next)>=0))return!1;I=I.nextZ}for(;w&&w.z>=_;){if(w.x>=y&&w.x<=S&&w.y>=v&&w.y<=C&&w!==i&&w!==o&&fc(a,d,c,m,h,f,w.x,w.y)&&un(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;I&&I.z<=b;){if(I.x>=y&&I.x<=S&&I.y>=v&&I.y<=C&&I!==i&&I!==o&&fc(a,d,c,m,h,f,I.x,I.y)&&un(I.prev,I,I.next)>=0)return!1;I=I.nextZ}return!0}function oD(t,e,n){var r=t;do{var i=r.prev,s=r.next.next;!Zg(i,s)&&RA(i,r,r.next,s)&&Xd(i,s)&&Xd(s,i)&&(e.push(i.i/n|0),e.push(r.i/n|0),e.push(s.i/n|0),qd(r),qd(r.next),r=t=s),r=r.next}while(r!==t);return cu(r)}function aD(t,e,n,r,i,s){var o=t;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&gD(o,a)){var c=MA(o,a);o=cu(o,o.next),c=cu(c,c.next),Vd(o,e,n,r,i,s,0),Vd(c,e,n,r,i,s,0);return}a=a.next}o=o.next}while(o!==t)}function lD(t,e,n,r){var i=[],s,o,a,c,h;for(s=0,o=e.length;s<o;s++)a=e[s]*r,c=s<o-1?e[s+1]*r:t.length,h=kA(t,a,c,r,!1),h===h.next&&(h.steiner=!0),i.push(mD(h));for(i.sort(uD),s=0;s<i.length;s++)n=cD(i[s],n);return n}function uD(t,e){return t.x-e.x}function cD(t,e){var n=hD(t,e);if(!n)return e;var r=MA(n,t);return cu(r,r.next),cu(n,n.next)}function hD(t,e){var n=e,r=t.x,i=t.y,s=-1/0,o;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){var a=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(a<=r&&a>s&&(s=a,o=n.x<n.next.x?n:n.next,a===r))return o}n=n.next}while(n!==e);if(!o)return null;var c=o,h=o.x,d=o.y,m=1/0,f;n=o;do r>=n.x&&n.x>=h&&r!==n.x&&fc(i<d?r:s,i,h,d,i<d?s:r,i,n.x,n.y)&&(f=Math.abs(i-n.y)/(r-n.x),Xd(n,t)&&(f<m||f===m&&(n.x>o.x||n.x===o.x&&dD(o,n)))&&(o=n,m=f)),n=n.next;while(n!==c);return o}function dD(t,e){return un(t.prev,t,e.prev)<0&&un(e.next,t,t.next)<0}function fD(t,e,n,r){var i=t;do i.z===0&&(i.z=H1(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,pD(i)}function pD(t){var e,n,r,i,s,o,a,c,h=1;do{for(n=t,t=null,s=null,o=0;n;){for(o++,r=n,a=0,e=0;e<h&&(a++,r=r.nextZ,!!r);e++);for(c=h;a>0||c>0&&r;)a!==0&&(c===0||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,c--),s?s.nextZ=i:t=i,i.prevZ=s,s=i;n=r}s.nextZ=null,h*=2}while(o>1);return t}function H1(t,e,n,r,i){return t=(t-n)*i|0,e=(e-r)*i|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function mD(t){var e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function fc(t,e,n,r,i,s,o,a){return(i-o)*(e-a)>=(t-o)*(s-a)&&(t-o)*(r-a)>=(n-o)*(e-a)&&(n-o)*(s-a)>=(i-o)*(r-a)}function gD(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!yD(t,e)&&(Xd(t,e)&&Xd(e,t)&&vD(t,e)&&(un(t.prev,t,e.prev)||un(t,e.prev,e))||Zg(t,e)&&un(t.prev,t,t.next)>0&&un(e.prev,e,e.next)>0)}function un(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Zg(t,e){return t.x===e.x&&t.y===e.y}function RA(t,e,n,r){var i=Pp(un(t,e,n)),s=Pp(un(t,e,r)),o=Pp(un(n,r,t)),a=Pp(un(n,r,e));return!!(i!==s&&o!==a||i===0&&Ap(t,n,e)||s===0&&Ap(t,r,e)||o===0&&Ap(n,t,r)||a===0&&Ap(n,e,r))}function Ap(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function Pp(t){return t>0?1:t<0?-1:0}function yD(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&RA(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function Xd(t,e){return un(t.prev,t,t.next)<0?un(t,e,t.next)>=0&&un(t,t.prev,e)>=0:un(t,e,t.prev)<0||un(t,t.next,e)<0}function vD(t,e){var n=t,r=!1,i=(t.x+e.x)/2,s=(t.y+e.y)/2;do n.y>s!=n.next.y>s&&n.next.y!==n.y&&i<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==t);return r}function MA(t,e){var n=new G1(t.i,t.x,t.y),r=new G1(e.i,e.x,e.y),i=t.next,s=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,s.next=r,r.prev=s,r}function vE(t,e,n,r){var i=new G1(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function qd(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function G1(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}Kg.deviation=function(t,e,n,r){var i=e&&e.length,s=i?e[0]*n:t.length,o=Math.abs(W1(t,0,s,n));if(i)for(var a=0,c=e.length;a<c;a++){var h=e[a]*n,d=a<c-1?e[a+1]*n:t.length;o-=Math.abs(W1(t,h,d,n))}var m=0;for(a=0;a<r.length;a+=3){var f=r[a]*n,y=r[a+1]*n,v=r[a+2]*n;m+=Math.abs((t[f]-t[v])*(t[y+1]-t[f+1])-(t[f]-t[y])*(t[v+1]-t[f+1]))}return o===0&&m===0?0:Math.abs((m-o)/o)};function W1(t,e,n,r){for(var i=0,s=e,o=n-r;s<n;s+=r)i+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return i}Kg.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var s=0;s<t[i].length;s++)for(var o=0;o<e;o++)n.vertices.push(t[i][s][o]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n};var xD=Gw.exports;const wD=uf(xD);var ng={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */ng.exports;(function(t,e){(function(n){var r=e&&!e.nodeType&&e,i=t&&!t.nodeType&&t,s=typeof y0=="object"&&y0;(s.global===s||s.window===s||s.self===s)&&(n=s);var o,a=2147483647,c=36,h=1,d=26,m=38,f=700,y=72,v=128,S="-",C=/^xn--/,_=/[^\x20-\x7E]/,b=/[\x2E\u3002\uFF0E\uFF61]/g,w={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},I=c-h,P=Math.floor,N=String.fromCharCode,O;function D(L){throw new RangeError(w[L])}function V(L,te){for(var Z=L.length,Ie=[];Z--;)Ie[Z]=te(L[Z]);return Ie}function G(L,te){var Z=L.split("@"),Ie="";Z.length>1&&(Ie=Z[0]+"@",L=Z[1]),L=L.replace(b,".");var ge=L.split("."),je=V(ge,te).join(".");return Ie+je}function F(L){for(var te=[],Z=0,Ie=L.length,ge,je;Z<Ie;)ge=L.charCodeAt(Z++),ge>=55296&&ge<=56319&&Z<Ie?(je=L.charCodeAt(Z++),(je&64512)==56320?te.push(((ge&1023)<<10)+(je&1023)+65536):(te.push(ge),Z--)):te.push(ge);return te}function q(L){return V(L,function(te){var Z="";return te>65535&&(te-=65536,Z+=N(te>>>10&1023|55296),te=56320|te&1023),Z+=N(te),Z}).join("")}function W(L){return L-48<10?L-22:L-65<26?L-65:L-97<26?L-97:c}function H(L,te){return L+22+75*(L<26)-((te!=0)<<5)}function se(L,te,Z){var Ie=0;for(L=Z?P(L/f):L>>1,L+=P(L/te);L>I*d>>1;Ie+=c)L=P(L/I);return P(Ie+(I+1)*L/(L+m))}function ue(L){var te=[],Z=L.length,Ie,ge=0,je=v,Ve=y,Be,pt,St,Qe,Ne,ct,tt,Sn,kn;for(Be=L.lastIndexOf(S),Be<0&&(Be=0),pt=0;pt<Be;++pt)L.charCodeAt(pt)>=128&&D("not-basic"),te.push(L.charCodeAt(pt));for(St=Be>0?Be+1:0;St<Z;){for(Qe=ge,Ne=1,ct=c;St>=Z&&D("invalid-input"),tt=W(L.charCodeAt(St++)),(tt>=c||tt>P((a-ge)/Ne))&&D("overflow"),ge+=tt*Ne,Sn=ct<=Ve?h:ct>=Ve+d?d:ct-Ve,!(tt<Sn);ct+=c)kn=c-Sn,Ne>P(a/kn)&&D("overflow"),Ne*=kn;Ie=te.length+1,Ve=se(ge-Qe,Ie,Qe==0),P(ge/Ie)>a-je&&D("overflow"),je+=P(ge/Ie),ge%=Ie,te.splice(ge++,0,je)}return q(te)}function K(L){var te,Z,Ie,ge,je,Ve,Be,pt,St,Qe,Ne,ct=[],tt,Sn,kn,ci;for(L=F(L),tt=L.length,te=v,Z=0,je=y,Ve=0;Ve<tt;++Ve)Ne=L[Ve],Ne<128&&ct.push(N(Ne));for(Ie=ge=ct.length,ge&&ct.push(S);Ie<tt;){for(Be=a,Ve=0;Ve<tt;++Ve)Ne=L[Ve],Ne>=te&&Ne<Be&&(Be=Ne);for(Sn=Ie+1,Be-te>P((a-Z)/Sn)&&D("overflow"),Z+=(Be-te)*Sn,te=Be,Ve=0;Ve<tt;++Ve)if(Ne=L[Ve],Ne<te&&++Z>a&&D("overflow"),Ne==te){for(pt=Z,St=c;Qe=St<=je?h:St>=je+d?d:St-je,!(pt<Qe);St+=c)ci=pt-Qe,kn=c-Qe,ct.push(N(H(Qe+ci%kn,0))),pt=P(ci/kn);ct.push(N(H(pt,0))),je=se(Z,Sn,Ie==ge),Z=0,++Ie}++Z,++te}return ct.join("")}function $(L){return G(L,function(te){return C.test(te)?ue(te.slice(4).toLowerCase()):te})}function Q(L){return G(L,function(te){return _.test(te)?"xn--"+K(te):te})}if(o={version:"1.4.1",ucs2:{decode:F,encode:q},decode:ue,encode:K,toASCII:Q,toUnicode:$},r&&i)if(t.exports==r)i.exports=o;else for(O in o)o.hasOwnProperty(O)&&(r[O]=o[O]);else n.punycode=o})(y0)})(ng,ng.exports);var _D=ng.exports,SD=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},n=Symbol("test"),r=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var i=42;e[n]=i;for(n in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var s=Object.getOwnPropertySymbols(e);if(s.length!==1||s[0]!==n||!Object.prototype.propertyIsEnumerable.call(e,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,n);if(o.value!==i||o.enumerable!==!0)return!1}return!0},xE=typeof Symbol<"u"&&Symbol,bD=SD,ED=function(){return typeof xE!="function"||typeof Symbol!="function"||typeof xE("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:bD()},wE={foo:{}},TD=Object,CD=function(){return{__proto__:wE}.foo===wE.foo&&!({__proto__:null}instanceof TD)},ID="Function.prototype.bind called on incompatible ",V0=Array.prototype.slice,AD=Object.prototype.toString,PD="[object Function]",kD=function(e){var n=this;if(typeof n!="function"||AD.call(n)!==PD)throw new TypeError(ID+n);for(var r=V0.call(arguments,1),i,s=function(){if(this instanceof i){var d=n.apply(this,r.concat(V0.call(arguments)));return Object(d)===d?d:this}else return n.apply(e,r.concat(V0.call(arguments)))},o=Math.max(0,n.length-r.length),a=[],c=0;c<o;c++)a.push("$"+c);if(i=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(s),n.prototype){var h=function(){};h.prototype=n.prototype,i.prototype=new h,h.prototype=null}return i},RD=kD,Ww=Function.prototype.bind||RD,MD=Ww,OD=MD.call(Function.call,Object.prototype.hasOwnProperty),st,$c=SyntaxError,OA=Function,Ec=TypeError,X0=function(t){try{return OA('"use strict"; return ('+t+").constructor;")()}catch{}},Jl=Object.getOwnPropertyDescriptor;if(Jl)try{Jl({},"")}catch{Jl=null}var q0=function(){throw new Ec},DD=Jl?function(){try{return arguments.callee,q0}catch{try{return Jl(arguments,"callee").get}catch{return q0}}}():q0,zu=ED(),ND=CD(),Qn=Object.getPrototypeOf||(ND?function(t){return t.__proto__}:null),qu={},LD=typeof Uint8Array>"u"||!Qn?st:Qn(Uint8Array),eu={"%AggregateError%":typeof AggregateError>"u"?st:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?st:ArrayBuffer,"%ArrayIteratorPrototype%":zu&&Qn?Qn([][Symbol.iterator]()):st,"%AsyncFromSyncIteratorPrototype%":st,"%AsyncFunction%":qu,"%AsyncGenerator%":qu,"%AsyncGeneratorFunction%":qu,"%AsyncIteratorPrototype%":qu,"%Atomics%":typeof Atomics>"u"?st:Atomics,"%BigInt%":typeof BigInt>"u"?st:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?st:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?st:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?st:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?st:Float32Array,"%Float64Array%":typeof Float64Array>"u"?st:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?st:FinalizationRegistry,"%Function%":OA,"%GeneratorFunction%":qu,"%Int8Array%":typeof Int8Array>"u"?st:Int8Array,"%Int16Array%":typeof Int16Array>"u"?st:Int16Array,"%Int32Array%":typeof Int32Array>"u"?st:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":zu&&Qn?Qn(Qn([][Symbol.iterator]())):st,"%JSON%":typeof JSON=="object"?JSON:st,"%Map%":typeof Map>"u"?st:Map,"%MapIteratorPrototype%":typeof Map>"u"||!zu||!Qn?st:Qn(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?st:Promise,"%Proxy%":typeof Proxy>"u"?st:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?st:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?st:Set,"%SetIteratorPrototype%":typeof Set>"u"||!zu||!Qn?st:Qn(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?st:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":zu&&Qn?Qn(""[Symbol.iterator]()):st,"%Symbol%":zu?Symbol:st,"%SyntaxError%":$c,"%ThrowTypeError%":DD,"%TypedArray%":LD,"%TypeError%":Ec,"%Uint8Array%":typeof Uint8Array>"u"?st:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?st:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?st:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?st:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?st:WeakMap,"%WeakRef%":typeof WeakRef>"u"?st:WeakRef,"%WeakSet%":typeof WeakSet>"u"?st:WeakSet};if(Qn)try{null.error}catch(t){var FD=Qn(Qn(t));eu["%Error.prototype%"]=FD}var BD=function t(e){var n;if(e==="%AsyncFunction%")n=X0("async function () {}");else if(e==="%GeneratorFunction%")n=X0("function* () {}");else if(e==="%AsyncGeneratorFunction%")n=X0("async function* () {}");else if(e==="%AsyncGenerator%"){var r=t("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");i&&Qn&&(n=Qn(i.prototype))}return eu[e]=n,n},_E={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},gf=Ww,rg=OD,UD=gf.call(Function.call,Array.prototype.concat),zD=gf.call(Function.apply,Array.prototype.splice),SE=gf.call(Function.call,String.prototype.replace),ig=gf.call(Function.call,String.prototype.slice),$D=gf.call(Function.call,RegExp.prototype.exec),HD=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,GD=/\\(\\)?/g,WD=function(e){var n=ig(e,0,1),r=ig(e,-1);if(n==="%"&&r!=="%")throw new $c("invalid intrinsic syntax, expected closing `%`");if(r==="%"&&n!=="%")throw new $c("invalid intrinsic syntax, expected opening `%`");var i=[];return SE(e,HD,function(s,o,a,c){i[i.length]=a?SE(c,GD,"$1"):o||s}),i},jD=function(e,n){var r=e,i;if(rg(_E,r)&&(i=_E[r],r="%"+i[0]+"%"),rg(eu,r)){var s=eu[r];if(s===qu&&(s=BD(r)),typeof s>"u"&&!n)throw new Ec("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:r,value:s}}throw new $c("intrinsic "+e+" does not exist!")},jw=function(e,n){if(typeof e!="string"||e.length===0)throw new Ec("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof n!="boolean")throw new Ec('"allowMissing" argument must be a boolean');if($D(/^%?[^%]*%?$/,e)===null)throw new $c("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=WD(e),i=r.length>0?r[0]:"",s=jD("%"+i+"%",n),o=s.name,a=s.value,c=!1,h=s.alias;h&&(i=h[0],zD(r,UD([0,1],h)));for(var d=1,m=!0;d<r.length;d+=1){var f=r[d],y=ig(f,0,1),v=ig(f,-1);if((y==='"'||y==="'"||y==="`"||v==='"'||v==="'"||v==="`")&&y!==v)throw new $c("property names with quotes must have matching quotes");if((f==="constructor"||!m)&&(c=!0),i+="."+f,o="%"+i+"%",rg(eu,o))a=eu[o];else if(a!=null){if(!(f in a)){if(!n)throw new Ec("base intrinsic for "+e+" exists, but the property is not available.");return}if(Jl&&d+1>=r.length){var S=Jl(a,f);m=!!S,m&&"get"in S&&!("originalValue"in S.get)?a=S.get:a=a[f]}else m=rg(a,f),a=a[f];m&&!c&&(eu[o]=a)}}return a},DA={exports:{}};(function(t){var e=Ww,n=jw,r=n("%Function.prototype.apply%"),i=n("%Function.prototype.call%"),s=n("%Reflect.apply%",!0)||e.call(i,r),o=n("%Object.getOwnPropertyDescriptor%",!0),a=n("%Object.defineProperty%",!0),c=n("%Math.max%");if(a)try{a({},"a",{value:1})}catch{a=null}t.exports=function(m){var f=s(e,i,arguments);if(o&&a){var y=o(f,"length");y.configurable&&a(f,"length",{value:1+c(0,m.length-(arguments.length-1))})}return f};var h=function(){return s(e,r,arguments)};a?a(t.exports,"apply",{value:h}):t.exports.apply=h})(DA);var VD=DA.exports,NA=jw,LA=VD,XD=LA(NA("String.prototype.indexOf")),qD=function(e,n){var r=NA(e,!!n);return typeof r=="function"&&XD(e,".prototype.")>-1?LA(r):r};const YD={},QD=Object.freeze(Object.defineProperty({__proto__:null,default:YD},Symbol.toStringTag,{value:"Module"})),KD=dC(QD);var Vw=typeof Map=="function"&&Map.prototype,Y0=Object.getOwnPropertyDescriptor&&Vw?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,sg=Vw&&Y0&&typeof Y0.get=="function"?Y0.get:null,bE=Vw&&Map.prototype.forEach,Xw=typeof Set=="function"&&Set.prototype,Q0=Object.getOwnPropertyDescriptor&&Xw?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,og=Xw&&Q0&&typeof Q0.get=="function"?Q0.get:null,EE=Xw&&Set.prototype.forEach,ZD=typeof WeakMap=="function"&&WeakMap.prototype,vd=ZD?WeakMap.prototype.has:null,JD=typeof WeakSet=="function"&&WeakSet.prototype,xd=JD?WeakSet.prototype.has:null,eN=typeof WeakRef=="function"&&WeakRef.prototype,TE=eN?WeakRef.prototype.deref:null,tN=Boolean.prototype.valueOf,nN=Object.prototype.toString,rN=Function.prototype.toString,iN=String.prototype.match,qw=String.prototype.slice,Wa=String.prototype.replace,sN=String.prototype.toUpperCase,CE=String.prototype.toLowerCase,FA=RegExp.prototype.test,IE=Array.prototype.concat,wo=Array.prototype.join,oN=Array.prototype.slice,AE=Math.floor,j1=typeof BigInt=="function"?BigInt.prototype.valueOf:null,K0=Object.getOwnPropertySymbols,V1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Hc=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Dr=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Hc||"symbol")?Symbol.toStringTag:null,BA=Object.prototype.propertyIsEnumerable,PE=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function kE(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||FA.call(/e/,e))return e;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var r=t<0?-AE(-t):AE(t);if(r!==t){var i=String(r),s=qw.call(e,i.length+1);return Wa.call(i,n,"$&_")+"."+Wa.call(Wa.call(s,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Wa.call(e,n,"$&_")}var X1=KD,RE=X1.custom,ME=zA(RE)?RE:null,aN=function t(e,n,r,i){var s=n||{};if(Na(s,"quoteStyle")&&s.quoteStyle!=="single"&&s.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Na(s,"maxStringLength")&&(typeof s.maxStringLength=="number"?s.maxStringLength<0&&s.maxStringLength!==1/0:s.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var o=Na(s,"customInspect")?s.customInspect:!0;if(typeof o!="boolean"&&o!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Na(s,"indent")&&s.indent!==null&&s.indent!=="	"&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Na(s,"numericSeparator")&&typeof s.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=s.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return HA(e,s);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var c=String(e);return a?kE(e,c):c}if(typeof e=="bigint"){var h=String(e)+"n";return a?kE(e,h):h}var d=typeof s.depth>"u"?5:s.depth;if(typeof r>"u"&&(r=0),r>=d&&d>0&&typeof e=="object")return q1(e)?"[Array]":"[Object]";var m=TN(s,r);if(typeof i>"u")i=[];else if($A(i,e)>=0)return"[Circular]";function f(W,H,se){if(H&&(i=oN.call(i),i.push(H)),se){var ue={depth:s.depth};return Na(s,"quoteStyle")&&(ue.quoteStyle=s.quoteStyle),t(W,ue,r+1,i)}return t(W,s,r+1,i)}if(typeof e=="function"&&!OE(e)){var y=gN(e),v=kp(e,f);return"[Function"+(y?": "+y:" (anonymous)")+"]"+(v.length>0?" { "+wo.call(v,", ")+" }":"")}if(zA(e)){var S=Hc?Wa.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):V1.call(e);return typeof e=="object"&&!Hc?Fh(S):S}if(SN(e)){for(var C="<"+CE.call(String(e.nodeName)),_=e.attributes||[],b=0;b<_.length;b++)C+=" "+_[b].name+"="+UA(lN(_[b].value),"double",s);return C+=">",e.childNodes&&e.childNodes.length&&(C+="..."),C+="</"+CE.call(String(e.nodeName))+">",C}if(q1(e)){if(e.length===0)return"[]";var w=kp(e,f);return m&&!EN(w)?"["+Y1(w,m)+"]":"[ "+wo.call(w,", ")+" ]"}if(cN(e)){var I=kp(e,f);return!("cause"in Error.prototype)&&"cause"in e&&!BA.call(e,"cause")?"{ ["+String(e)+"] "+wo.call(IE.call("[cause]: "+f(e.cause),I),", ")+" }":I.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+wo.call(I,", ")+" }"}if(typeof e=="object"&&o){if(ME&&typeof e[ME]=="function"&&X1)return X1(e,{depth:d-r});if(o!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(yN(e)){var P=[];return bE&&bE.call(e,function(W,H){P.push(f(H,e,!0)+" => "+f(W,e))}),DE("Map",sg.call(e),P,m)}if(wN(e)){var N=[];return EE&&EE.call(e,function(W){N.push(f(W,e))}),DE("Set",og.call(e),N,m)}if(vN(e))return Z0("WeakMap");if(_N(e))return Z0("WeakSet");if(xN(e))return Z0("WeakRef");if(dN(e))return Fh(f(Number(e)));if(pN(e))return Fh(f(j1.call(e)));if(fN(e))return Fh(tN.call(e));if(hN(e))return Fh(f(String(e)));if(!uN(e)&&!OE(e)){var O=kp(e,f),D=PE?PE(e)===Object.prototype:e instanceof Object||e.constructor===Object,V=e instanceof Object?"":"null prototype",G=!D&&Dr&&Object(e)===e&&Dr in e?qw.call(pl(e),8,-1):V?"Object":"",F=D||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",q=F+(G||V?"["+wo.call(IE.call([],G||[],V||[]),": ")+"] ":"");return O.length===0?q+"{}":m?q+"{"+Y1(O,m)+"}":q+"{ "+wo.call(O,", ")+" }"}return String(e)};function UA(t,e,n){var r=(n.quoteStyle||e)==="double"?'"':"'";return r+t+r}function lN(t){return Wa.call(String(t),/"/g,"&quot;")}function q1(t){return pl(t)==="[object Array]"&&(!Dr||!(typeof t=="object"&&Dr in t))}function uN(t){return pl(t)==="[object Date]"&&(!Dr||!(typeof t=="object"&&Dr in t))}function OE(t){return pl(t)==="[object RegExp]"&&(!Dr||!(typeof t=="object"&&Dr in t))}function cN(t){return pl(t)==="[object Error]"&&(!Dr||!(typeof t=="object"&&Dr in t))}function hN(t){return pl(t)==="[object String]"&&(!Dr||!(typeof t=="object"&&Dr in t))}function dN(t){return pl(t)==="[object Number]"&&(!Dr||!(typeof t=="object"&&Dr in t))}function fN(t){return pl(t)==="[object Boolean]"&&(!Dr||!(typeof t=="object"&&Dr in t))}function zA(t){if(Hc)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!V1)return!1;try{return V1.call(t),!0}catch{}return!1}function pN(t){if(!t||typeof t!="object"||!j1)return!1;try{return j1.call(t),!0}catch{}return!1}var mN=Object.prototype.hasOwnProperty||function(t){return t in this};function Na(t,e){return mN.call(t,e)}function pl(t){return nN.call(t)}function gN(t){if(t.name)return t.name;var e=iN.call(rN.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function $A(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}function yN(t){if(!sg||!t||typeof t!="object")return!1;try{sg.call(t);try{og.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function vN(t){if(!vd||!t||typeof t!="object")return!1;try{vd.call(t,vd);try{xd.call(t,xd)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function xN(t){if(!TE||!t||typeof t!="object")return!1;try{return TE.call(t),!0}catch{}return!1}function wN(t){if(!og||!t||typeof t!="object")return!1;try{og.call(t);try{sg.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function _N(t){if(!xd||!t||typeof t!="object")return!1;try{xd.call(t,xd);try{vd.call(t,vd)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function SN(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function HA(t,e){if(t.length>e.maxStringLength){var n=t.length-e.maxStringLength,r="... "+n+" more character"+(n>1?"s":"");return HA(qw.call(t,0,e.maxStringLength),e)+r}var i=Wa.call(Wa.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,bN);return UA(i,"single",e)}function bN(t){var e=t.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return n?"\\"+n:"\\x"+(e<16?"0":"")+sN.call(e.toString(16))}function Fh(t){return"Object("+t+")"}function Z0(t){return t+" { ? }"}function DE(t,e,n,r){var i=r?Y1(n,r):wo.call(n,", ");return t+" ("+e+") {"+i+"}"}function EN(t){for(var e=0;e<t.length;e++)if($A(t[e],`
`)>=0)return!1;return!0}function TN(t,e){var n;if(t.indent==="	")n="	";else if(typeof t.indent=="number"&&t.indent>0)n=wo.call(Array(t.indent+1)," ");else return null;return{base:n,prev:wo.call(Array(e+1),n)}}function Y1(t,e){if(t.length===0)return"";var n=`
`+e.prev+e.base;return n+wo.call(t,","+n)+`
`+e.prev}function kp(t,e){var n=q1(t),r=[];if(n){r.length=t.length;for(var i=0;i<t.length;i++)r[i]=Na(t,i)?e(t[i],t):""}var s=typeof K0=="function"?K0(t):[],o;if(Hc){o={};for(var a=0;a<s.length;a++)o["$"+s[a]]=s[a]}for(var c in t)Na(t,c)&&(n&&String(Number(c))===c&&c<t.length||Hc&&o["$"+c]instanceof Symbol||(FA.call(/[^\w$]/,c)?r.push(e(c,t)+": "+e(t[c],t)):r.push(c+": "+e(t[c],t))));if(typeof K0=="function")for(var h=0;h<s.length;h++)BA.call(t,s[h])&&r.push("["+e(s[h])+"]: "+e(t[s[h]],t));return r}var Yw=jw,rh=qD,CN=aN,IN=Yw("%TypeError%"),Rp=Yw("%WeakMap%",!0),Mp=Yw("%Map%",!0),AN=rh("WeakMap.prototype.get",!0),PN=rh("WeakMap.prototype.set",!0),kN=rh("WeakMap.prototype.has",!0),RN=rh("Map.prototype.get",!0),MN=rh("Map.prototype.set",!0),ON=rh("Map.prototype.has",!0),Qw=function(t,e){for(var n=t,r;(r=n.next)!==null;n=r)if(r.key===e)return n.next=r.next,r.next=t.next,t.next=r,r},DN=function(t,e){var n=Qw(t,e);return n&&n.value},NN=function(t,e,n){var r=Qw(t,e);r?r.value=n:t.next={key:e,next:t.next,value:n}},LN=function(t,e){return!!Qw(t,e)},FN=function(){var e,n,r,i={assert:function(s){if(!i.has(s))throw new IN("Side channel does not contain "+CN(s))},get:function(s){if(Rp&&s&&(typeof s=="object"||typeof s=="function")){if(e)return AN(e,s)}else if(Mp){if(n)return RN(n,s)}else if(r)return DN(r,s)},has:function(s){if(Rp&&s&&(typeof s=="object"||typeof s=="function")){if(e)return kN(e,s)}else if(Mp){if(n)return ON(n,s)}else if(r)return LN(r,s);return!1},set:function(s,o){Rp&&s&&(typeof s=="object"||typeof s=="function")?(e||(e=new Rp),PN(e,s,o)):Mp?(n||(n=new Mp),MN(n,s,o)):(r||(r={key:{},next:null}),NN(r,s,o))}};return i},BN=String.prototype.replace,UN=/%20/g,J0={RFC1738:"RFC1738",RFC3986:"RFC3986"},Kw={default:J0.RFC3986,formatters:{RFC1738:function(t){return BN.call(t,UN,"+")},RFC3986:function(t){return String(t)}},RFC1738:J0.RFC1738,RFC3986:J0.RFC3986},zN=Kw,ev=Object.prototype.hasOwnProperty,Wl=Array.isArray,fo=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),$N=function(e){for(;e.length>1;){var n=e.pop(),r=n.obj[n.prop];if(Wl(r)){for(var i=[],s=0;s<r.length;++s)typeof r[s]<"u"&&i.push(r[s]);n.obj[n.prop]=i}}},GA=function(e,n){for(var r=n&&n.plainObjects?Object.create(null):{},i=0;i<e.length;++i)typeof e[i]<"u"&&(r[i]=e[i]);return r},HN=function t(e,n,r){if(!n)return e;if(typeof n!="object"){if(Wl(e))e.push(n);else if(e&&typeof e=="object")(r&&(r.plainObjects||r.allowPrototypes)||!ev.call(Object.prototype,n))&&(e[n]=!0);else return[e,n];return e}if(!e||typeof e!="object")return[e].concat(n);var i=e;return Wl(e)&&!Wl(n)&&(i=GA(e,r)),Wl(e)&&Wl(n)?(n.forEach(function(s,o){if(ev.call(e,o)){var a=e[o];a&&typeof a=="object"&&s&&typeof s=="object"?e[o]=t(a,s,r):e.push(s)}else e[o]=s}),e):Object.keys(n).reduce(function(s,o){var a=n[o];return ev.call(s,o)?s[o]=t(s[o],a,r):s[o]=a,s},i)},GN=function(e,n){return Object.keys(n).reduce(function(r,i){return r[i]=n[i],r},e)},WN=function(t,e,n){var r=t.replace(/\+/g," ");if(n==="iso-8859-1")return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch{return r}},jN=function(e,n,r,i,s){if(e.length===0)return e;var o=e;if(typeof e=="symbol"?o=Symbol.prototype.toString.call(e):typeof e!="string"&&(o=String(e)),r==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(d){return"%26%23"+parseInt(d.slice(2),16)+"%3B"});for(var a="",c=0;c<o.length;++c){var h=o.charCodeAt(c);if(h===45||h===46||h===95||h===126||h>=48&&h<=57||h>=65&&h<=90||h>=97&&h<=122||s===zN.RFC1738&&(h===40||h===41)){a+=o.charAt(c);continue}if(h<128){a=a+fo[h];continue}if(h<2048){a=a+(fo[192|h>>6]+fo[128|h&63]);continue}if(h<55296||h>=57344){a=a+(fo[224|h>>12]+fo[128|h>>6&63]+fo[128|h&63]);continue}c+=1,h=65536+((h&1023)<<10|o.charCodeAt(c)&1023),a+=fo[240|h>>18]+fo[128|h>>12&63]+fo[128|h>>6&63]+fo[128|h&63]}return a},VN=function(e){for(var n=[{obj:{o:e},prop:"o"}],r=[],i=0;i<n.length;++i)for(var s=n[i],o=s.obj[s.prop],a=Object.keys(o),c=0;c<a.length;++c){var h=a[c],d=o[h];typeof d=="object"&&d!==null&&r.indexOf(d)===-1&&(n.push({obj:o,prop:h}),r.push(d))}return $N(n),e},XN=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},qN=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},YN=function(e,n){return[].concat(e,n)},QN=function(e,n){if(Wl(e)){for(var r=[],i=0;i<e.length;i+=1)r.push(n(e[i]));return r}return n(e)},WA={arrayToObject:GA,assign:GN,combine:YN,compact:VN,decode:WN,encode:jN,isBuffer:qN,isRegExp:XN,maybeMap:QN,merge:HN},jA=FN,bm=WA,wd=Kw,KN=Object.prototype.hasOwnProperty,NE={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,n){return e+"["+n+"]"},repeat:function(e){return e}},Xo=Array.isArray,ZN=Array.prototype.push,VA=function(t,e){ZN.apply(t,Xo(e)?e:[e])},JN=Date.prototype.toISOString,LE=wd.default,Ar={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:bm.encode,encodeValuesOnly:!1,format:LE,formatter:wd.formatters[LE],indices:!1,serializeDate:function(e){return JN.call(e)},skipNulls:!1,strictNullHandling:!1},eL=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},tv={},tL=function t(e,n,r,i,s,o,a,c,h,d,m,f,y,v,S,C){for(var _=e,b=C,w=0,I=!1;(b=b.get(tv))!==void 0&&!I;){var P=b.get(e);if(w+=1,typeof P<"u"){if(P===w)throw new RangeError("Cyclic object value");I=!0}typeof b.get(tv)>"u"&&(w=0)}if(typeof c=="function"?_=c(n,_):_ instanceof Date?_=m(_):r==="comma"&&Xo(_)&&(_=bm.maybeMap(_,function(ue){return ue instanceof Date?m(ue):ue})),_===null){if(s)return a&&!v?a(n,Ar.encoder,S,"key",f):n;_=""}if(eL(_)||bm.isBuffer(_)){if(a){var N=v?n:a(n,Ar.encoder,S,"key",f);return[y(N)+"="+y(a(_,Ar.encoder,S,"value",f))]}return[y(n)+"="+y(String(_))]}var O=[];if(typeof _>"u")return O;var D;if(r==="comma"&&Xo(_))v&&a&&(_=bm.maybeMap(_,a)),D=[{value:_.length>0?_.join(",")||null:void 0}];else if(Xo(c))D=c;else{var V=Object.keys(_);D=h?V.sort(h):V}for(var G=i&&Xo(_)&&_.length===1?n+"[]":n,F=0;F<D.length;++F){var q=D[F],W=typeof q=="object"&&typeof q.value<"u"?q.value:_[q];if(!(o&&W===null)){var H=Xo(_)?typeof r=="function"?r(G,q):G:G+(d?"."+q:"["+q+"]");C.set(e,w);var se=jA();se.set(tv,C),VA(O,t(W,H,r,i,s,o,r==="comma"&&v&&Xo(_)?null:a,c,h,d,m,f,y,v,S,se))}}return O},nL=function(e){if(!e)return Ar;if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var n=e.charset||Ar.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=wd.default;if(typeof e.format<"u"){if(!KN.call(wd.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var i=wd.formatters[r],s=Ar.filter;return(typeof e.filter=="function"||Xo(e.filter))&&(s=e.filter),{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:Ar.addQueryPrefix,allowDots:typeof e.allowDots>"u"?Ar.allowDots:!!e.allowDots,charset:n,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Ar.charsetSentinel,delimiter:typeof e.delimiter>"u"?Ar.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:Ar.encode,encoder:typeof e.encoder=="function"?e.encoder:Ar.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:Ar.encodeValuesOnly,filter:s,format:r,formatter:i,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:Ar.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:Ar.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Ar.strictNullHandling}},rL=function(t,e){var n=t,r=nL(e),i,s;typeof r.filter=="function"?(s=r.filter,n=s("",n)):Xo(r.filter)&&(s=r.filter,i=s);var o=[];if(typeof n!="object"||n===null)return"";var a;e&&e.arrayFormat in NE?a=e.arrayFormat:e&&"indices"in e?a=e.indices?"indices":"repeat":a="indices";var c=NE[a];if(e&&"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var h=c==="comma"&&e&&e.commaRoundTrip;i||(i=Object.keys(n)),r.sort&&i.sort(r.sort);for(var d=jA(),m=0;m<i.length;++m){var f=i[m];r.skipNulls&&n[f]===null||VA(o,tL(n[f],f,c,h,r.strictNullHandling,r.skipNulls,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,d))}var y=o.join(r.delimiter),v=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?v+="utf8=%26%2310003%3B&":v+="utf8=%E2%9C%93&"),y.length>0?v+y:""},Gc=WA,Q1=Object.prototype.hasOwnProperty,iL=Array.isArray,Yn={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:Gc.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},sL=function(t){return t.replace(/&#(\d+);/g,function(e,n){return String.fromCharCode(parseInt(n,10))})},XA=function(t,e){return t&&typeof t=="string"&&e.comma&&t.indexOf(",")>-1?t.split(","):t},oL="utf8=%26%2310003%3B",aL="utf8=%E2%9C%93",lL=function(e,n){var r={__proto__:null},i=n.ignoreQueryPrefix?e.replace(/^\?/,""):e,s=n.parameterLimit===1/0?void 0:n.parameterLimit,o=i.split(n.delimiter,s),a=-1,c,h=n.charset;if(n.charsetSentinel)for(c=0;c<o.length;++c)o[c].indexOf("utf8=")===0&&(o[c]===aL?h="utf-8":o[c]===oL&&(h="iso-8859-1"),a=c,c=o.length);for(c=0;c<o.length;++c)if(c!==a){var d=o[c],m=d.indexOf("]="),f=m===-1?d.indexOf("="):m+1,y,v;f===-1?(y=n.decoder(d,Yn.decoder,h,"key"),v=n.strictNullHandling?null:""):(y=n.decoder(d.slice(0,f),Yn.decoder,h,"key"),v=Gc.maybeMap(XA(d.slice(f+1),n),function(S){return n.decoder(S,Yn.decoder,h,"value")})),v&&n.interpretNumericEntities&&h==="iso-8859-1"&&(v=sL(v)),d.indexOf("[]=")>-1&&(v=iL(v)?[v]:v),Q1.call(r,y)?r[y]=Gc.combine(r[y],v):r[y]=v}return r},uL=function(t,e,n,r){for(var i=r?e:XA(e,n),s=t.length-1;s>=0;--s){var o,a=t[s];if(a==="[]"&&n.parseArrays)o=[].concat(i);else{o=n.plainObjects?Object.create(null):{};var c=a.charAt(0)==="["&&a.charAt(a.length-1)==="]"?a.slice(1,-1):a,h=parseInt(c,10);!n.parseArrays&&c===""?o={0:i}:!isNaN(h)&&a!==c&&String(h)===c&&h>=0&&n.parseArrays&&h<=n.arrayLimit?(o=[],o[h]=i):c!=="__proto__"&&(o[c]=i)}i=o}return i},cL=function(e,n,r,i){if(e){var s=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,c=r.depth>0&&o.exec(s),h=c?s.slice(0,c.index):s,d=[];if(h){if(!r.plainObjects&&Q1.call(Object.prototype,h)&&!r.allowPrototypes)return;d.push(h)}for(var m=0;r.depth>0&&(c=a.exec(s))!==null&&m<r.depth;){if(m+=1,!r.plainObjects&&Q1.call(Object.prototype,c[1].slice(1,-1))&&!r.allowPrototypes)return;d.push(c[1])}return c&&d.push("["+s.slice(c.index)+"]"),uL(d,n,r,i)}},hL=function(e){if(!e)return Yn;if(e.decoder!==null&&e.decoder!==void 0&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=typeof e.charset>"u"?Yn.charset:e.charset;return{allowDots:typeof e.allowDots>"u"?Yn.allowDots:!!e.allowDots,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:Yn.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:Yn.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:Yn.arrayLimit,charset:n,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Yn.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:Yn.comma,decoder:typeof e.decoder=="function"?e.decoder:Yn.decoder,delimiter:typeof e.delimiter=="string"||Gc.isRegExp(e.delimiter)?e.delimiter:Yn.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:Yn.depth,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:Yn.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:Yn.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:Yn.plainObjects,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Yn.strictNullHandling}},dL=function(t,e){var n=hL(e);if(t===""||t===null||typeof t>"u")return n.plainObjects?Object.create(null):{};for(var r=typeof t=="string"?lL(t,n):t,i=n.plainObjects?Object.create(null):{},s=Object.keys(r),o=0;o<s.length;++o){var a=s[o],c=cL(a,r[a],n,typeof t=="string");i=Gc.merge(i,c,n)}return n.allowSparse===!0?i:Gc.compact(i)},fL=rL,pL=dL,mL=Kw,gL={formats:mL,parse:pL,stringify:fL},yL=_D;function Rs(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var vL=/^([a-z0-9.+-]+:)/i,xL=/:[0-9]*$/,wL=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,_L=["<",">",'"',"`"," ","\r",`
`,"	"],SL=["{","}","|","\\","^","`"].concat(_L),K1=["'"].concat(SL),FE=["%","/","?",";","#"].concat(K1),BE=["/","?","#"],bL=255,UE=/^[+a-z0-9A-Z_-]{0,63}$/,EL=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,TL={javascript:!0,"javascript:":!0},Z1={javascript:!0,"javascript:":!0},Tc={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},J1=gL;function Jg(t,e,n){if(t&&typeof t=="object"&&t instanceof Rs)return t;var r=new Rs;return r.parse(t,e,n),r}Rs.prototype.parse=function(t,e,n){if(typeof t!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var r=t.indexOf("?"),i=r!==-1&&r<t.indexOf("#")?"?":"#",s=t.split(i),o=/\\/g;s[0]=s[0].replace(o,"/"),t=s.join(i);var a=t;if(a=a.trim(),!n&&t.split("#").length===1){var c=wL.exec(a);if(c)return this.path=a,this.href=a,this.pathname=c[1],c[2]?(this.search=c[2],e?this.query=J1.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var h=vL.exec(a);if(h){h=h[0];var d=h.toLowerCase();this.protocol=d,a=a.substr(h.length)}if(n||h||a.match(/^\/\/[^@/]+@[^@/]+/)){var m=a.substr(0,2)==="//";m&&!(h&&Z1[h])&&(a=a.substr(2),this.slashes=!0)}if(!Z1[h]&&(m||h&&!Tc[h])){for(var f=-1,y=0;y<BE.length;y++){var v=a.indexOf(BE[y]);v!==-1&&(f===-1||v<f)&&(f=v)}var S,C;f===-1?C=a.lastIndexOf("@"):C=a.lastIndexOf("@",f),C!==-1&&(S=a.slice(0,C),a=a.slice(C+1),this.auth=decodeURIComponent(S)),f=-1;for(var y=0;y<FE.length;y++){var v=a.indexOf(FE[y]);v!==-1&&(f===-1||v<f)&&(f=v)}f===-1&&(f=a.length),this.host=a.slice(0,f),a=a.slice(f),this.parseHost(),this.hostname=this.hostname||"";var _=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!_)for(var b=this.hostname.split(/\./),y=0,w=b.length;y<w;y++){var I=b[y];if(I&&!I.match(UE)){for(var P="",N=0,O=I.length;N<O;N++)I.charCodeAt(N)>127?P+="x":P+=I[N];if(!P.match(UE)){var D=b.slice(0,y),V=b.slice(y+1),G=I.match(EL);G&&(D.push(G[1]),V.unshift(G[2])),V.length&&(a="/"+V.join(".")+a),this.hostname=D.join(".");break}}}this.hostname.length>bL?this.hostname="":this.hostname=this.hostname.toLowerCase(),_||(this.hostname=yL.toASCII(this.hostname));var F=this.port?":"+this.port:"",q=this.hostname||"";this.host=q+F,this.href+=this.host,_&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),a[0]!=="/"&&(a="/"+a))}if(!TL[d])for(var y=0,w=K1.length;y<w;y++){var W=K1[y];if(a.indexOf(W)!==-1){var H=encodeURIComponent(W);H===W&&(H=escape(W)),a=a.split(W).join(H)}}var se=a.indexOf("#");se!==-1&&(this.hash=a.substr(se),a=a.slice(0,se));var ue=a.indexOf("?");if(ue!==-1?(this.search=a.substr(ue),this.query=a.substr(ue+1),e&&(this.query=J1.parse(this.query)),a=a.slice(0,ue)):e&&(this.search="",this.query={}),a&&(this.pathname=a),Tc[d]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var F=this.pathname||"",K=this.search||"";this.path=F+K}return this.href=this.format(),this};function CL(t){return typeof t=="string"&&(t=Jg(t)),t instanceof Rs?t.format():Rs.prototype.format.call(t)}Rs.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,s="";this.host?i=t+this.host:this.hostname&&(i=t+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(s=J1.stringify(this.query));var o=this.search||s&&"?"+s||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||Tc[e])&&i!==!1?(i="//"+(i||""),n&&n.charAt(0)!=="/"&&(n="/"+n)):i||(i=""),r&&r.charAt(0)!=="#"&&(r="#"+r),o&&o.charAt(0)!=="?"&&(o="?"+o),n=n.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),o=o.replace("#","%23"),e+i+n+o+r};function IL(t,e){return Jg(t,!1,!0).resolve(e)}Rs.prototype.resolve=function(t){return this.resolveObject(Jg(t,!1,!0)).format()};Rs.prototype.resolveObject=function(t){if(typeof t=="string"){var e=new Rs;e.parse(t,!1,!0),t=e}for(var n=new Rs,r=Object.keys(this),i=0;i<r.length;i++){var s=r[i];n[s]=this[s]}if(n.hash=t.hash,t.href==="")return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var o=Object.keys(t),a=0;a<o.length;a++){var c=o[a];c!=="protocol"&&(n[c]=t[c])}return Tc[n.protocol]&&n.hostname&&!n.pathname&&(n.pathname="/",n.path=n.pathname),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!Tc[t.protocol]){for(var h=Object.keys(t),d=0;d<h.length;d++){var m=h[d];n[m]=t[m]}return n.href=n.format(),n}if(n.protocol=t.protocol,!t.host&&!Z1[t.protocol]){for(var w=(t.pathname||"").split("/");w.length&&!(t.host=w.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),w[0]!==""&&w.unshift(""),w.length<2&&w.unshift(""),n.pathname=w.join("/")}else n.pathname=t.pathname;if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var f=n.pathname||"",y=n.search||"";n.path=f+y}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var v=n.pathname&&n.pathname.charAt(0)==="/",S=t.host||t.pathname&&t.pathname.charAt(0)==="/",C=S||v||n.host&&t.pathname,_=C,b=n.pathname&&n.pathname.split("/")||[],w=t.pathname&&t.pathname.split("/")||[],I=n.protocol&&!Tc[n.protocol];if(I&&(n.hostname="",n.port=null,n.host&&(b[0]===""?b[0]=n.host:b.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(w[0]===""?w[0]=t.host:w.unshift(t.host)),t.host=null),C=C&&(w[0]===""||b[0]==="")),S)n.host=t.host||t.host===""?t.host:n.host,n.hostname=t.hostname||t.hostname===""?t.hostname:n.hostname,n.search=t.search,n.query=t.query,b=w;else if(w.length)b||(b=[]),b.pop(),b=b.concat(w),n.search=t.search,n.query=t.query;else if(t.search!=null){if(I){n.host=b.shift(),n.hostname=n.host;var P=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;P&&(n.auth=P.shift(),n.hostname=P.shift(),n.host=n.hostname)}return n.search=t.search,n.query=t.query,(n.pathname!==null||n.search!==null)&&(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!b.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var N=b.slice(-1)[0],O=(n.host||t.host||b.length>1)&&(N==="."||N==="..")||N==="",D=0,V=b.length;V>=0;V--)N=b[V],N==="."?b.splice(V,1):N===".."?(b.splice(V,1),D++):D&&(b.splice(V,1),D--);if(!C&&!_)for(;D--;D)b.unshift("..");C&&b[0]!==""&&(!b[0]||b[0].charAt(0)!=="/")&&b.unshift(""),O&&b.join("/").substr(-1)!=="/"&&b.push("");var G=b[0]===""||b[0]&&b[0].charAt(0)==="/";if(I){n.hostname=G?"":b.length?b.shift():"",n.host=n.hostname;var P=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;P&&(n.auth=P.shift(),n.hostname=P.shift(),n.host=n.hostname)}return C=C||n.host&&b.length,C&&!G&&b.unshift(""),b.length>0?n.pathname=b.join("/"):(n.pathname=null,n.path=null),(n.pathname!==null||n.search!==null)&&(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n};Rs.prototype.parseHost=function(){var t=this.host,e=xL.exec(t);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};var AL=Jg,PL=IL,kL=CL;const RL={parse:AL,format:kL,resolve:PL};function ds(t){if(typeof t!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(t)}`)}function Bh(t){return t.split("?")[0].split("#")[0]}function ML(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function OL(t,e,n){return t.replace(new RegExp(ML(e),"g"),n)}function DL(t,e){let n="",r=0,i=-1,s=0,o=-1;for(let a=0;a<=t.length;++a){if(a<t.length)o=t.charCodeAt(a);else{if(o===47)break;o=47}if(o===47){if(!(i===a-1||s===1))if(i!==a-1&&s===2){if(n.length<2||r!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){const c=n.lastIndexOf("/");if(c!==n.length-1){c===-1?(n="",r=0):(n=n.slice(0,c),r=n.length-1-n.lastIndexOf("/")),i=a,s=0;continue}}else if(n.length===2||n.length===1){n="",r=0,i=a,s=0;continue}}e&&(n.length>0?n+="/..":n="..",r=2)}else n.length>0?n+=`/${t.slice(i+1,a)}`:n=t.slice(i+1,a),r=a-i-1;i=a,s=0}else o===46&&s!==-1?++s:s=-1}return n}const Rr={toPosix(t){return OL(t,"\\","/")},isUrl(t){return/^https?:/.test(this.toPosix(t))},isDataUrl(t){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(t)},hasProtocol(t){return/^[^/:]+:\//.test(this.toPosix(t))},getProtocol(t){ds(t),t=this.toPosix(t);let e="";const n=/^file:\/\/\//.exec(t),r=/^[^/:]+:\/\//.exec(t),i=/^[^/:]+:\//.exec(t);if(n||r||i){const s=(n==null?void 0:n[0])||(r==null?void 0:r[0])||(i==null?void 0:i[0]);e=s,t=t.slice(s.length)}return e},toAbsolute(t,e,n){if(this.isDataUrl(t))return t;const r=Bh(this.toPosix(e??Se.ADAPTER.getBaseUrl())),i=Bh(this.toPosix(n??this.rootname(r)));return ds(t),t=this.toPosix(t),t.startsWith("/")?Rr.join(i,t.slice(1)):this.isAbsolute(t)?t:this.join(r,t)},normalize(t){if(t=this.toPosix(t),ds(t),t.length===0)return".";let e="";const n=t.startsWith("/");this.hasProtocol(t)&&(e=this.rootname(t),t=t.slice(e.length));const r=t.endsWith("/");return t=DL(t,!1),t.length>0&&r&&(t+="/"),n?`/${t}`:e+t},isAbsolute(t){return ds(t),t=this.toPosix(t),this.hasProtocol(t)?!0:t.startsWith("/")},join(...t){if(t.length===0)return".";let e;for(let n=0;n<t.length;++n){const r=t[n];if(ds(r),r.length>0)if(e===void 0)e=r;else{const i=t[n-1]??"";this.extname(i)?e+=`/../${r}`:e+=`/${r}`}}return e===void 0?".":this.normalize(e)},dirname(t){if(ds(t),t.length===0)return".";t=this.toPosix(t);let e=t.charCodeAt(0);const n=e===47;let r=-1,i=!0;const s=this.getProtocol(t),o=t;t=t.slice(s.length);for(let a=t.length-1;a>=1;--a)if(e=t.charCodeAt(a),e===47){if(!i){r=a;break}}else i=!1;return r===-1?n?"/":this.isUrl(o)?s+t:s:n&&r===1?"//":s+t.slice(0,r)},rootname(t){ds(t),t=this.toPosix(t);let e="";if(t.startsWith("/")?e="/":e=this.getProtocol(t),this.isUrl(t)){const n=t.indexOf("/",e.length);n!==-1?e=t.slice(0,n):e=t,e.endsWith("/")||(e+="/")}return e},basename(t,e){ds(t),e&&ds(e),t=Bh(this.toPosix(t));let n=0,r=-1,i=!0,s;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";let o=e.length-1,a=-1;for(s=t.length-1;s>=0;--s){const c=t.charCodeAt(s);if(c===47){if(!i){n=s+1;break}}else a===-1&&(i=!1,a=s+1),o>=0&&(c===e.charCodeAt(o)?--o===-1&&(r=s):(o=-1,r=a))}return n===r?r=a:r===-1&&(r=t.length),t.slice(n,r)}for(s=t.length-1;s>=0;--s)if(t.charCodeAt(s)===47){if(!i){n=s+1;break}}else r===-1&&(i=!1,r=s+1);return r===-1?"":t.slice(n,r)},extname(t){ds(t),t=Bh(this.toPosix(t));let e=-1,n=0,r=-1,i=!0,s=0;for(let o=t.length-1;o>=0;--o){const a=t.charCodeAt(o);if(a===47){if(!i){n=o+1;break}continue}r===-1&&(i=!1,r=o+1),a===46?e===-1?e=o:s!==1&&(s=1):e!==-1&&(s=-1)}return e===-1||r===-1||s===0||s===1&&e===r-1&&e===n+1?"":t.slice(e,r)},parse(t){ds(t);const e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;t=Bh(this.toPosix(t));let n=t.charCodeAt(0);const r=this.isAbsolute(t);let i;e.root=this.rootname(t),r||this.hasProtocol(t)?i=1:i=0;let s=-1,o=0,a=-1,c=!0,h=t.length-1,d=0;for(;h>=i;--h){if(n=t.charCodeAt(h),n===47){if(!c){o=h+1;break}continue}a===-1&&(c=!1,a=h+1),n===46?s===-1?s=h:d!==1&&(d=1):s!==-1&&(d=-1)}return s===-1||a===-1||d===0||d===1&&s===a-1&&s===o+1?a!==-1&&(o===0&&r?e.base=e.name=t.slice(1,a):e.base=e.name=t.slice(o,a)):(o===0&&r?(e.name=t.slice(1,s),e.base=t.slice(1,a)):(e.name=t.slice(o,s),e.base=t.slice(o,a)),e.ext=t.slice(s,a)),e.dir=this.dirname(t),e},sep:"/",delimiter:":"},zE={};function ot(t,e,n=3){if(zE[e])return;let r=new Error().stack;typeof r>"u"?console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${t}`):(r=r.split(`
`).splice(n).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${e}
Deprecated since v${t}`),console.warn(r),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${t}`),console.warn(r))),zE[e]=!0}let nv;function NL(){return typeof nv>"u"&&(nv=function(){var n;const e={stencil:!0,failIfMajorPerformanceCaveat:Se.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!Se.ADAPTER.getWebGLRenderingContext())return!1;const r=Se.ADAPTER.createCanvas();let i=r.getContext("webgl",e)||r.getContext("experimental-webgl",e);const s=!!((n=i==null?void 0:i.getContextAttributes())!=null&&n.stencil);if(i){const o=i.getExtension("WEBGL_lose_context");o&&o.loseContext()}return i=null,s}catch{return!1}}()),nv}var LL={grad:.9,turn:360,rad:360/(2*Math.PI)},Ho=function(t){return typeof t=="string"?t.length>0:typeof t=="number"},Zn=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=Math.pow(10,e)),Math.round(n*t)/n+0},is=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=1),t>n?n:t>e?t:e},qA=function(t){return(t=isFinite(t)?t%360:0)>0?t:t+360},$E=function(t){return{r:is(t.r,0,255),g:is(t.g,0,255),b:is(t.b,0,255),a:is(t.a)}},rv=function(t){return{r:Zn(t.r),g:Zn(t.g),b:Zn(t.b),a:Zn(t.a,3)}},FL=/^#([0-9a-f]{3,8})$/i,Op=function(t){var e=t.toString(16);return e.length<2?"0"+e:e},YA=function(t){var e=t.r,n=t.g,r=t.b,i=t.a,s=Math.max(e,n,r),o=s-Math.min(e,n,r),a=o?s===e?(n-r)/o:s===n?2+(r-e)/o:4+(e-n)/o:0;return{h:60*(a<0?a+6:a),s:s?o/s*100:0,v:s/255*100,a:i}},QA=function(t){var e=t.h,n=t.s,r=t.v,i=t.a;e=e/360*6,n/=100,r/=100;var s=Math.floor(e),o=r*(1-n),a=r*(1-(e-s)*n),c=r*(1-(1-e+s)*n),h=s%6;return{r:255*[r,a,o,o,c,r][h],g:255*[c,r,r,a,o,o][h],b:255*[o,o,c,r,r,a][h],a:i}},HE=function(t){return{h:qA(t.h),s:is(t.s,0,100),l:is(t.l,0,100),a:is(t.a)}},GE=function(t){return{h:Zn(t.h),s:Zn(t.s),l:Zn(t.l),a:Zn(t.a,3)}},WE=function(t){return QA((n=(e=t).s,{h:e.h,s:(n*=((r=e.l)<50?r:100-r)/100)>0?2*n/(r+n)*100:0,v:r+n,a:e.a}));var e,n,r},_d=function(t){return{h:(e=YA(t)).h,s:(i=(200-(n=e.s))*(r=e.v)/100)>0&&i<200?n*r/100/(i<=100?i:200-i)*100:0,l:i/2,a:e.a};var e,n,r,i},BL=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,UL=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,zL=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,$L=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,ex={string:[[function(t){var e=FL.exec(t);return e?(t=e[1]).length<=4?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:t.length===4?Zn(parseInt(t[3]+t[3],16)/255,2):1}:t.length===6||t.length===8?{r:parseInt(t.substr(0,2),16),g:parseInt(t.substr(2,2),16),b:parseInt(t.substr(4,2),16),a:t.length===8?Zn(parseInt(t.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(t){var e=zL.exec(t)||$L.exec(t);return e?e[2]!==e[4]||e[4]!==e[6]?null:$E({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(t){var e=BL.exec(t)||UL.exec(t);if(!e)return null;var n,r,i=HE({h:(n=e[1],r=e[2],r===void 0&&(r="deg"),Number(n)*(LL[r]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return WE(i)},"hsl"]],object:[[function(t){var e=t.r,n=t.g,r=t.b,i=t.a,s=i===void 0?1:i;return Ho(e)&&Ho(n)&&Ho(r)?$E({r:Number(e),g:Number(n),b:Number(r),a:Number(s)}):null},"rgb"],[function(t){var e=t.h,n=t.s,r=t.l,i=t.a,s=i===void 0?1:i;if(!Ho(e)||!Ho(n)||!Ho(r))return null;var o=HE({h:Number(e),s:Number(n),l:Number(r),a:Number(s)});return WE(o)},"hsl"],[function(t){var e=t.h,n=t.s,r=t.v,i=t.a,s=i===void 0?1:i;if(!Ho(e)||!Ho(n)||!Ho(r))return null;var o=function(a){return{h:qA(a.h),s:is(a.s,0,100),v:is(a.v,0,100),a:is(a.a)}}({h:Number(e),s:Number(n),v:Number(r),a:Number(s)});return QA(o)},"hsv"]]},jE=function(t,e){for(var n=0;n<e.length;n++){var r=e[n][0](t);if(r)return[r,e[n][1]]}return[null,void 0]},HL=function(t){return typeof t=="string"?jE(t.trim(),ex.string):typeof t=="object"&&t!==null?jE(t,ex.object):[null,void 0]},iv=function(t,e){var n=_d(t);return{h:n.h,s:is(n.s+100*e,0,100),l:n.l,a:n.a}},sv=function(t){return(299*t.r+587*t.g+114*t.b)/1e3/255},VE=function(t,e){var n=_d(t);return{h:n.h,s:n.s,l:is(n.l+100*e,0,100),a:n.a}},tx=function(){function t(e){this.parsed=HL(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return t.prototype.isValid=function(){return this.parsed!==null},t.prototype.brightness=function(){return Zn(sv(this.rgba),2)},t.prototype.isDark=function(){return sv(this.rgba)<.5},t.prototype.isLight=function(){return sv(this.rgba)>=.5},t.prototype.toHex=function(){return e=rv(this.rgba),n=e.r,r=e.g,i=e.b,o=(s=e.a)<1?Op(Zn(255*s)):"","#"+Op(n)+Op(r)+Op(i)+o;var e,n,r,i,s,o},t.prototype.toRgb=function(){return rv(this.rgba)},t.prototype.toRgbString=function(){return e=rv(this.rgba),n=e.r,r=e.g,i=e.b,(s=e.a)<1?"rgba("+n+", "+r+", "+i+", "+s+")":"rgb("+n+", "+r+", "+i+")";var e,n,r,i,s},t.prototype.toHsl=function(){return GE(_d(this.rgba))},t.prototype.toHslString=function(){return e=GE(_d(this.rgba)),n=e.h,r=e.s,i=e.l,(s=e.a)<1?"hsla("+n+", "+r+"%, "+i+"%, "+s+")":"hsl("+n+", "+r+"%, "+i+"%)";var e,n,r,i,s},t.prototype.toHsv=function(){return e=YA(this.rgba),{h:Zn(e.h),s:Zn(e.s),v:Zn(e.v),a:Zn(e.a,3)};var e},t.prototype.invert=function(){return go({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},t.prototype.saturate=function(e){return e===void 0&&(e=.1),go(iv(this.rgba,e))},t.prototype.desaturate=function(e){return e===void 0&&(e=.1),go(iv(this.rgba,-e))},t.prototype.grayscale=function(){return go(iv(this.rgba,-1))},t.prototype.lighten=function(e){return e===void 0&&(e=.1),go(VE(this.rgba,e))},t.prototype.darken=function(e){return e===void 0&&(e=.1),go(VE(this.rgba,-e))},t.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},t.prototype.alpha=function(e){return typeof e=="number"?go({r:(n=this.rgba).r,g:n.g,b:n.b,a:e}):Zn(this.rgba.a,3);var n},t.prototype.hue=function(e){var n=_d(this.rgba);return typeof e=="number"?go({h:e,s:n.s,l:n.l,a:n.a}):Zn(n.h)},t.prototype.isEqual=function(e){return this.toHex()===go(e).toHex()},t}(),go=function(t){return t instanceof tx?t:new tx(t)},XE=[],GL=function(t){t.forEach(function(e){XE.indexOf(e)<0&&(e(tx,ex),XE.push(e))})};function WL(t,e){var n={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},r={};for(var i in n)r[n[i]]=i;var s={};t.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,c,h=r[this.toHex()];if(h)return h;if(o!=null&&o.closest){var d=this.toRgb(),m=1/0,f="black";if(!s.length)for(var y in n)s[y]=new t(n[y]).toRgb();for(var v in n){var S=(a=d,c=s[v],Math.pow(a.r-c.r,2)+Math.pow(a.g-c.g,2)+Math.pow(a.b-c.b,2));S<m&&(m=S,f=v)}return f}},e.string.push([function(o){var a=o.toLowerCase(),c=a==="transparent"?"#0000":n[a];return c?new t(c).toRgb():null},"name"])}GL([WL]);const Cc=class{constructor(t=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=t}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(t){return this.value=t,this}set value(t){if(t instanceof Cc)this._value=this.cloneSource(t._value),this._int=t._int,this._components.set(t._components);else{if(t===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,t))&&(this.normalize(t),this._value=this.cloneSource(t))}}get value(){return this._value}cloneSource(t){return typeof t=="string"||typeof t=="number"||t instanceof Number||t===null?t:Array.isArray(t)||ArrayBuffer.isView(t)?t.slice(0):typeof t=="object"&&t!==null?{...t}:t}isSourceEqual(t,e){const n=typeof t;if(n!==typeof e)return!1;if(n==="number"||n==="string"||t instanceof Number)return t===e;if(Array.isArray(t)&&Array.isArray(e)||ArrayBuffer.isView(t)&&ArrayBuffer.isView(e))return t.length!==e.length?!1:t.every((i,s)=>i===e[s]);if(t!==null&&e!==null){const i=Object.keys(t),s=Object.keys(e);return i.length!==s.length?!1:i.every(o=>t[o]===e[o])}return t===e}toRgba(){const[t,e,n,r]=this._components;return{r:t,g:e,b:n,a:r}}toRgb(){const[t,e,n]=this._components;return{r:t,g:e,b:n}}toRgbaString(){const[t,e,n]=this.toUint8RgbArray();return`rgba(${t},${e},${n},${this.alpha})`}toUint8RgbArray(t){const[e,n,r]=this._components;return t=t??[],t[0]=Math.round(e*255),t[1]=Math.round(n*255),t[2]=Math.round(r*255),t}toRgbArray(t){t=t??[];const[e,n,r]=this._components;return t[0]=e,t[1]=n,t[2]=r,t}toNumber(){return this._int}toLittleEndianNumber(){const t=this._int;return(t>>16)+(t&65280)+((t&255)<<16)}multiply(t){const[e,n,r,i]=Cc.temp.setValue(t)._components;return this._components[0]*=e,this._components[1]*=n,this._components[2]*=r,this._components[3]*=i,this.refreshInt(),this._value=null,this}premultiply(t,e=!0){return e&&(this._components[0]*=t,this._components[1]*=t,this._components[2]*=t),this._components[3]=t,this.refreshInt(),this._value=null,this}toPremultiplied(t,e=!0){if(t===1)return(255<<24)+this._int;if(t===0)return e?0:this._int;let n=this._int>>16&255,r=this._int>>8&255,i=this._int&255;return e&&(n=n*t+.5|0,r=r*t+.5|0,i=i*t+.5|0),(t*255<<24)+(n<<16)+(r<<8)+i}toHex(){const t=this._int.toString(16);return`#${"000000".substring(0,6-t.length)+t}`}toHexa(){const e=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-e.length)+e}setAlpha(t){return this._components[3]=this._clamp(t),this}round(t){const[e,n,r]=this._components;return this._components[0]=Math.round(e*t)/t,this._components[1]=Math.round(n*t)/t,this._components[2]=Math.round(r*t)/t,this.refreshInt(),this._value=null,this}toArray(t){t=t??[];const[e,n,r,i]=this._components;return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}normalize(t){let e,n,r,i;if((typeof t=="number"||t instanceof Number)&&t>=0&&t<=16777215){const s=t;e=(s>>16&255)/255,n=(s>>8&255)/255,r=(s&255)/255,i=1}else if((Array.isArray(t)||t instanceof Float32Array)&&t.length>=3&&t.length<=4)t=this._clamp(t),[e,n,r,i=1]=t;else if((t instanceof Uint8Array||t instanceof Uint8ClampedArray)&&t.length>=3&&t.length<=4)t=this._clamp(t,0,255),[e,n,r,i=255]=t,e/=255,n/=255,r/=255,i/=255;else if(typeof t=="string"||typeof t=="object"){if(typeof t=="string"){const o=Cc.HEX_PATTERN.exec(t);o&&(t=`#${o[2]}`)}const s=go(t);s.isValid()&&({r:e,g:n,b:r,a:i}=s.rgba,e/=255,n/=255,r/=255)}if(e!==void 0)this._components[0]=e,this._components[1]=n,this._components[2]=r,this._components[3]=i,this.refreshInt();else throw new Error(`Unable to convert color ${t}`)}refreshInt(){this._clamp(this._components);const[t,e,n]=this._components;this._int=(t*255<<16)+(e*255<<8)+(n*255|0)}_clamp(t,e=0,n=1){return typeof t=="number"?Math.min(Math.max(t,e),n):(t.forEach((r,i)=>{t[i]=Math.min(Math.max(r,e),n)}),t)}};let kt=Cc;kt.shared=new Cc;kt.temp=new Cc;kt.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;function jL(t){return ot("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),kt.shared.setValue(t).toHex()}function VL(t){return ot("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),kt.shared.setValue(t).toNumber()}function XL(){const t=[],e=[];for(let r=0;r<32;r++)t[r]=r,e[r]=r;t[Ue.NORMAL_NPM]=Ue.NORMAL,t[Ue.ADD_NPM]=Ue.ADD,t[Ue.SCREEN_NPM]=Ue.SCREEN,e[Ue.NORMAL]=Ue.NORMAL_NPM,e[Ue.ADD]=Ue.ADD_NPM,e[Ue.SCREEN]=Ue.SCREEN_NPM;const n=[];return n.push(e),n.push(t),n}const KA=XL();function ZA(t,e){return KA[e?1:0][t]}function qL(t,e=null){const n=t*6;if(e=e||new Uint16Array(n),e.length!==n)throw new Error(`Out buffer length is incorrect, got ${e.length} and expected ${n}`);for(let r=0,i=0;r<n;r+=6,i+=4)e[r+0]=i+0,e[r+1]=i+1,e[r+2]=i+2,e[r+3]=i+0,e[r+4]=i+2,e[r+5]=i+3;return e}function JA(t){if(t.BYTES_PER_ELEMENT===4)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(t.BYTES_PER_ELEMENT===2){if(t instanceof Uint16Array)return"Uint16Array"}else if(t.BYTES_PER_ELEMENT===1&&t instanceof Uint8Array)return"Uint8Array";return null}function ag(t){return t+=t===0?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t+1}function qE(t){return!(t&t-1)&&!!t}function YE(t){let e=(t>65535?1:0)<<4;t>>>=e;let n=(t>255?1:0)<<3;return t>>>=n,e|=n,n=(t>15?1:0)<<2,t>>>=n,e|=n,n=(t>3?1:0)<<1,t>>>=n,e|=n,e|t>>1}function Ic(t,e,n){const r=t.length;let i;if(e>=r||n===0)return;n=e+n>r?r-e:n;const s=r-n;for(i=e;i<s;++i)t[i]=t[i+n];t.length=s}function ja(t){return t===0?0:t<0?-1:1}let YL=0;function hu(){return++YL}const eP=class{constructor(t,e,n,r){this.left=t,this.top=e,this.right=n,this.bottom=r}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};let nx=eP;nx.EMPTY=new eP(0,0,0,0);const QE={},yo=Object.create(null),ka=Object.create(null);class QL{constructor(e,n,r){this._canvas=Se.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=r||Se.RESOLUTION,this.resize(e,n)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(e,n){this._checkDestroyed(),this._canvas.width=Math.round(e*this.resolution),this._canvas.height=Math.round(n*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(e){this._checkDestroyed(),this._canvas.width=Math.round(e)}get height(){return this._checkDestroyed(),this._canvas.height}set height(e){this._checkDestroyed(),this._canvas.height=Math.round(e)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function KE(t,e,n){for(let r=0,i=4*n*e;r<e;++r,i+=4)if(t[i+3]!==0)return!1;return!0}function ZE(t,e,n,r,i){const s=4*e;for(let o=r,a=r*s+4*n;o<=i;++o,a+=s)if(t[a+3]!==0)return!1;return!0}function KL(t){const{width:e,height:n}=t,r=t.getContext("2d",{willReadFrequently:!0});if(r===null)throw new TypeError("Failed to get canvas 2D context");const s=r.getImageData(0,0,e,n).data;let o=0,a=0,c=e-1,h=n-1;for(;a<n&&KE(s,e,a);)++a;if(a===n)return nx.EMPTY;for(;KE(s,e,h);)--h;for(;ZE(s,e,o,a,h);)++o;for(;ZE(s,e,c,a,h);)--c;return++c,++h,new nx(o,a,c,h)}function ZL(t){const e=KL(t),{width:n,height:r}=e;let i=null;if(!e.isEmpty()){const s=t.getContext("2d");if(s===null)throw new TypeError("Failed to get canvas 2D context");i=s.getImageData(e.left,e.top,n,r)}return{width:n,height:r,data:i}}let Dp;function JL(t,e=globalThis.location){if(t.startsWith("data:"))return"";e=e||globalThis.location,Dp||(Dp=document.createElement("a")),Dp.href=t;const n=RL.parse(Dp.href),r=!n.port&&e.port===""||n.port===e.port;return n.hostname!==e.hostname||!r||n.protocol!==e.protocol?"anonymous":""}function sl(t,e=1){var r;const n=(r=Se.RETINA_PREFIX)==null?void 0:r.exec(t);return n?parseFloat(n[1]):e}var Ee=(t=>(t.Renderer="renderer",t.Application="application",t.RendererSystem="renderer-webgl-system",t.RendererPlugin="renderer-webgl-plugin",t.CanvasRendererSystem="renderer-canvas-system",t.CanvasRendererPlugin="renderer-canvas-plugin",t.Asset="asset",t.LoadParser="load-parser",t.ResolveParser="resolve-parser",t.CacheParser="cache-parser",t.DetectionParser="detection-parser",t))(Ee||{});const rx=t=>{if(typeof t=="function"||typeof t=="object"&&t.extension){if(!t.extension)throw new Error("Extension class must have an extension object");t={...typeof t.extension!="object"?{type:t.extension}:t.extension,ref:t}}if(typeof t=="object")t={...t};else throw new Error("Invalid extension type");return typeof t.type=="string"&&(t.type=[t.type]),t},JE=(t,e)=>rx(t).priority??e,Me={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...t){return t.map(rx).forEach(e=>{e.type.forEach(n=>{var r,i;return(i=(r=this._removeHandlers)[n])==null?void 0:i.call(r,e)})}),this},add(...t){return t.map(rx).forEach(e=>{e.type.forEach(n=>{const r=this._addHandlers,i=this._queue;r[n]?r[n](e):(i[n]=i[n]||[],i[n].push(e))})}),this},handle(t,e,n){const r=this._addHandlers,i=this._removeHandlers;if(r[t]||i[t])throw new Error(`Extension type ${t} already has a handler`);r[t]=e,i[t]=n;const s=this._queue;return s[t]&&(s[t].forEach(o=>e(o)),delete s[t]),this},handleByMap(t,e){return this.handle(t,n=>{e[n.name]=n.ref},n=>{delete e[n.name]})},handleByList(t,e,n=-1){return this.handle(t,r=>{e.includes(r.ref)||(e.push(r.ref),e.sort((i,s)=>JE(s,n)-JE(i,n)))},r=>{const i=e.indexOf(r.ref);i!==-1&&e.splice(i,1)})}};class ix{constructor(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}const eF=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function tF(t){let e="";for(let n=0;n<t;++n)n>0&&(e+=`
else `),n<t-1&&(e+=`if(test == ${n}.0){}`);return e}function nF(t,e){if(t===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const n=e.createShader(e.FRAGMENT_SHADER);for(;;){const r=eF.replace(/%forloop%/gi,tF(t));if(e.shaderSource(n,r),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS))t=t/2|0;else break}return t}const ov=0,av=1,lv=2,uv=3,cv=4,hv=5;class ua{constructor(){this.data=0,this.blendMode=Ue.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<ov)}set blend(e){!!(this.data&1<<ov)!==e&&(this.data^=1<<ov)}get offsets(){return!!(this.data&1<<av)}set offsets(e){!!(this.data&1<<av)!==e&&(this.data^=1<<av)}get culling(){return!!(this.data&1<<lv)}set culling(e){!!(this.data&1<<lv)!==e&&(this.data^=1<<lv)}get depthTest(){return!!(this.data&1<<uv)}set depthTest(e){!!(this.data&1<<uv)!==e&&(this.data^=1<<uv)}get depthMask(){return!!(this.data&1<<hv)}set depthMask(e){!!(this.data&1<<hv)!==e&&(this.data^=1<<hv)}get clockwiseFrontFace(){return!!(this.data&1<<cv)}set clockwiseFrontFace(e){!!(this.data&1<<cv)!==e&&(this.data^=1<<cv)}get blendMode(){return this._blendMode}set blendMode(e){this.blend=e!==Ue.NONE,this._blendMode=e}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){this.offsets=!!e,this._polygonOffset=e}toString(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`}static for2d(){const e=new ua;return e.depthTest=!1,e.blend=!0,e}}const sx=[];function tP(t,e){if(!t)return null;let n="";if(typeof t=="string"){const r=/\.(\w{3,4})(?:$|\?|#)/i.exec(t);r&&(n=r[1].toLowerCase())}for(let r=sx.length-1;r>=0;--r){const i=sx[r];if(i.test&&i.test(t,n))return new i(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}class Ms{constructor(e){this.items=[],this._name=e,this._aliasCount=0}emit(e,n,r,i,s,o,a,c){if(arguments.length>8)throw new Error("max arguments reached");const{name:h,items:d}=this;this._aliasCount++;for(let m=0,f=d.length;m<f;m++)d[m][h](e,n,r,i,s,o,a,c);return d===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this}remove(e){const n=this.items.indexOf(e);return n!==-1&&(this.ensureNonAliasedItems(),this.items.splice(n,1)),this}contains(e){return this.items.includes(e)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(Ms.prototype,{dispatch:{value:Ms.prototype.emit},run:{value:Ms.prototype.emit}});class Yd{constructor(e=0,n=0){this._width=e,this._height=n,this.destroyed=!1,this.internal=!1,this.onResize=new Ms("setRealSize"),this.onUpdate=new Ms("update"),this.onError=new Ms("onError")}bind(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)}resize(e,n){(e!==this._width||n!==this._height)&&(this._width=e,this._height=n,this.onResize.emit(e,n))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(e,n,r){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(e,n){return!1}}class yf extends Yd{constructor(e,n){const{width:r,height:i}=n||{};if(!r||!i)throw new Error("BufferResource width or height invalid");super(r,i),this.data=e}upload(e,n,r){const i=e.gl;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.alphaMode===Bs.UNPACK);const s=n.realWidth,o=n.realHeight;return r.width===s&&r.height===o?i.texSubImage2D(n.target,0,0,0,s,o,n.format,r.type,this.data):(r.width=s,r.height=o,i.texImage2D(n.target,0,r.internalFormat,s,o,0,n.format,r.type,this.data)),!0}dispose(){this.data=null}static test(e){return e instanceof Float32Array||e instanceof Uint8Array||e instanceof Uint32Array}}const rF={scaleMode:ns.NEAREST,format:me.RGBA,alphaMode:Bs.NPM},Yu=class extends mf{constructor(t=null,e=null){super(),e=Object.assign({},Yu.defaultOptions,e);const{alphaMode:n,mipmap:r,anisotropicLevel:i,scaleMode:s,width:o,height:a,wrapMode:c,format:h,type:d,target:m,resolution:f,resourceOptions:y}=e;t&&!(t instanceof Yd)&&(t=tP(t,y),t.internal=!0),this.resolution=f||Se.RESOLUTION,this.width=Math.round((o||0)*this.resolution)/this.resolution,this.height=Math.round((a||0)*this.resolution)/this.resolution,this._mipmap=r,this.anisotropicLevel=i,this._wrapMode=c,this._scaleMode=s,this.format=h,this.type=d,this.target=m,this.alphaMode=n,this.uid=hu(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=o>0&&a>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(t)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(t){this._mipmap!==t&&(this._mipmap=t,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(t){this._scaleMode!==t&&(this._scaleMode=t,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(t){this._wrapMode!==t&&(this._wrapMode=t,this.dirtyStyleId++)}setStyle(t,e){let n;return t!==void 0&&t!==this.scaleMode&&(this.scaleMode=t,n=!0),e!==void 0&&e!==this.mipmap&&(this.mipmap=e,n=!0),n&&this.dirtyStyleId++,this}setSize(t,e,n){return n=n||this.resolution,this.setRealSize(t*n,e*n,n)}setRealSize(t,e,n){return this.resolution=n||this.resolution,this.width=Math.round(t)/this.resolution,this.height=Math.round(e)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=qE(this.realWidth)&&qE(this.realHeight)}setResolution(t){const e=this.resolution;return e===t?this:(this.resolution=t,this.valid&&(this.width=Math.round(this.width*e)/t,this.height=Math.round(this.height*e)/t,this.emit("update",this)),this._refreshPOT(),this)}setResource(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(t){this.emit("error",this,t)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete ka[this.cacheId],delete yo[this.cacheId],this.cacheId=null),this.dispose(),Yu.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(t,e,n=Se.STRICT_TEXTURE_CACHE){const r=typeof t=="string";let i=null;if(r)i=t;else{if(!t._pixiId){const o=(e==null?void 0:e.pixiIdPrefix)||"pixiid";t._pixiId=`${o}_${hu()}`}i=t._pixiId}let s=ka[i];if(r&&n&&!s)throw new Error(`The cacheId "${i}" does not exist in BaseTextureCache.`);return s||(s=new Yu(t,e),s.cacheId=i,Yu.addToCache(s,i)),s}static fromBuffer(t,e,n,r){t=t||new Float32Array(e*n*4);const i=new yf(t,{width:e,height:n}),s=t instanceof Float32Array?Fe.FLOAT:Fe.UNSIGNED_BYTE;return new Yu(i,Object.assign({},rF,{type:s},r))}static addToCache(t,e){e&&(t.textureCacheIds.includes(e)||t.textureCacheIds.push(e),ka[e]&&ka[e]!==t&&console.warn(`BaseTexture added to the cache with an id [${e}] that already had an entry`),ka[e]=t)}static removeFromCache(t){if(typeof t=="string"){const e=ka[t];if(e){const n=e.textureCacheIds.indexOf(t);return n>-1&&e.textureCacheIds.splice(n,1),delete ka[t],e}}else if(t!=null&&t.textureCacheIds){for(let e=0;e<t.textureCacheIds.length;++e)delete ka[t.textureCacheIds[e]];return t.textureCacheIds.length=0,t}return null}};let Ge=Yu;Ge.defaultOptions={mipmap:Io.POW2,anisotropicLevel:0,scaleMode:ns.LINEAR,wrapMode:Jo.CLAMP,alphaMode:Bs.UNPACK,target:bc.TEXTURE_2D,format:me.RGBA,type:Fe.UNSIGNED_BYTE};Ge._globalBatch=0;class ox{constructor(){this.texArray=null,this.blend=0,this.type=Cs.TRIANGLES,this.start=0,this.size=0,this.data=null}}let iF=0;class wn{constructor(e,n=!0,r=!1){this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=r,this.static=n,this.id=iF++,this.disposeRunner=new Ms("disposeBuffer")}update(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(e){this.type=e?To.ELEMENT_ARRAY_BUFFER:To.ARRAY_BUFFER}get index(){return this.type===To.ELEMENT_ARRAY_BUFFER}static from(e){return e instanceof Array&&(e=new Float32Array(e)),new wn(e)}}class lg{constructor(e,n=0,r=!1,i=Fe.FLOAT,s,o,a,c=1){this.buffer=e,this.size=n,this.normalized=r,this.type=i,this.stride=s,this.start=o,this.instance=a,this.divisor=c}destroy(){this.buffer=null}static from(e,n,r,i,s){return new lg(e,n,r,i,s)}}const sF={Float32Array,Uint32Array,Int32Array,Uint8Array};function oF(t,e){let n=0,r=0;const i={};for(let c=0;c<t.length;c++)r+=e[c],n+=t[c].length;const s=new ArrayBuffer(n*4);let o=null,a=0;for(let c=0;c<t.length;c++){const h=e[c],d=t[c],m=JA(d);i[m]||(i[m]=new sF[m](s)),o=i[m];for(let f=0;f<d.length;f++){const y=(f/h|0)*r+a,v=f%h;o[y+v]=d[f]}a+=h}return new Float32Array(s)}const eT={5126:4,5123:2,5121:1};let aF=0;const lF={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class ol{constructor(e=[],n={}){this.buffers=e,this.indexBuffer=null,this.attributes=n,this.glVertexArrayObjects={},this.id=aF++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Ms("disposeGeometry"),this.refCount=0}addAttribute(e,n,r=0,i=!1,s,o,a,c=!1){if(!n)throw new Error("You must pass a buffer when creating an attribute");n instanceof wn||(n instanceof Array&&(n=new Float32Array(n)),n=new wn(n));const h=e.split("|");if(h.length>1){for(let m=0;m<h.length;m++)this.addAttribute(h[m],n,r,i,s);return this}let d=this.buffers.indexOf(n);return d===-1&&(this.buffers.push(n),d=this.buffers.length-1),this.attributes[e]=new lg(d,r,i,s,o,a,c),this.instanced=this.instanced||c,this}getAttribute(e){return this.attributes[e]}getBuffer(e){return this.buffers[this.getAttribute(e).buffer]}addIndex(e){return e instanceof wn||(e instanceof Array&&(e=new Uint16Array(e)),e=new wn(e)),e.type=To.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,this.buffers.includes(e)||this.buffers.push(e),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const e=[],n=[],r=new wn;let i;for(i in this.attributes){const s=this.attributes[i],o=this.buffers[s.buffer];e.push(o.data),n.push(s.size*eT[s.type]/4),s.buffer=0}for(r.data=oF(e,n),i=0;i<this.buffers.length;i++)this.buffers[i]!==this.indexBuffer&&this.buffers[i].destroy();return this.buffers=[r],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const e in this.attributes){const n=this.attributes[e];return this.buffers[n.buffer].data.length/(n.stride/4||n.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const e=new ol;for(let n=0;n<this.buffers.length;n++)e.buffers[n]=new wn(this.buffers[n].data.slice(0));for(const n in this.attributes){const r=this.attributes[n];e.attributes[n]=new lg(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=To.ELEMENT_ARRAY_BUFFER),e}static merge(e){const n=new ol,r=[],i=[],s=[];let o;for(let a=0;a<e.length;a++){o=e[a];for(let c=0;c<o.buffers.length;c++)i[c]=i[c]||0,i[c]+=o.buffers[c].data.length,s[c]=0}for(let a=0;a<o.buffers.length;a++)r[a]=new lF[JA(o.buffers[a].data)](i[a]),n.buffers[a]=new wn(r[a]);for(let a=0;a<e.length;a++){o=e[a];for(let c=0;c<o.buffers.length;c++)r[c].set(o.buffers[c].data,s[c]),s[c]+=o.buffers[c].data.length}if(n.attributes=o.attributes,o.indexBuffer){n.indexBuffer=n.buffers[o.buffers.indexOf(o.indexBuffer)],n.indexBuffer.type=To.ELEMENT_ARRAY_BUFFER;let a=0,c=0,h=0,d=0;for(let m=0;m<o.buffers.length;m++)if(o.buffers[m]!==o.indexBuffer){d=m;break}for(const m in o.attributes){const f=o.attributes[m];(f.buffer|0)===d&&(c+=f.size*eT[f.type]/4)}for(let m=0;m<e.length;m++){const f=e[m].indexBuffer.data;for(let y=0;y<f.length;y++)n.indexBuffer.data[y+h]+=a;a+=e[m].buffers[d].data.length/c,h+=f.length}}return n}}class nP extends ol{constructor(e=!1){super(),this._buffer=new wn(null,e,!1),this._indexBuffer=new wn(null,e,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,Fe.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,Fe.FLOAT).addAttribute("aColor",this._buffer,4,!0,Fe.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,Fe.FLOAT).addIndex(this._indexBuffer)}}const ug=Math.PI*2,uF=180/Math.PI,cF=Math.PI/180;var dr=(t=>(t[t.POLY=0]="POLY",t[t.RECT=1]="RECT",t[t.CIRC=2]="CIRC",t[t.ELIP=3]="ELIP",t[t.RREC=4]="RREC",t))(dr||{});class Oe{constructor(e=0,n=0){this.x=0,this.y=0,this.x=e,this.y=n}clone(){return new Oe(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,n=e){return this.x=e,this.y=n,this}toString(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`}}const Np=[new Oe,new Oe,new Oe,new Oe];class Ye{constructor(e=0,n=0,r=0,i=0){this.x=Number(e),this.y=Number(n),this.width=Number(r),this.height=Number(i),this.type=dr.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new Ye(0,0,0,0)}clone(){return new Ye(this.x,this.y,this.width,this.height)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}contains(e,n){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&n>=this.y&&n<this.y+this.height}intersects(e,n){if(!n){const D=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=D)return!1;const G=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>G}const r=this.left,i=this.right,s=this.top,o=this.bottom;if(i<=r||o<=s)return!1;const a=Np[0].set(e.left,e.top),c=Np[1].set(e.left,e.bottom),h=Np[2].set(e.right,e.top),d=Np[3].set(e.right,e.bottom);if(h.x<=a.x||c.y<=a.y)return!1;const m=Math.sign(n.a*n.d-n.b*n.c);if(m===0||(n.apply(a,a),n.apply(c,c),n.apply(h,h),n.apply(d,d),Math.max(a.x,c.x,h.x,d.x)<=r||Math.min(a.x,c.x,h.x,d.x)>=i||Math.max(a.y,c.y,h.y,d.y)<=s||Math.min(a.y,c.y,h.y,d.y)>=o))return!1;const f=m*(c.y-a.y),y=m*(a.x-c.x),v=f*r+y*s,S=f*i+y*s,C=f*r+y*o,_=f*i+y*o;if(Math.max(v,S,C,_)<=f*a.x+y*a.y||Math.min(v,S,C,_)>=f*d.x+y*d.y)return!1;const b=m*(a.y-h.y),w=m*(h.x-a.x),I=b*r+w*s,P=b*i+w*s,N=b*r+w*o,O=b*i+w*o;return!(Math.max(I,P,N,O)<=b*a.x+w*a.y||Math.min(I,P,N,O)>=b*d.x+w*d.y)}pad(e=0,n=e){return this.x-=e,this.y-=n,this.width+=e*2,this.height+=n*2,this}fit(e){const n=Math.max(this.x,e.x),r=Math.min(this.x+this.width,e.x+e.width),i=Math.max(this.y,e.y),s=Math.min(this.y+this.height,e.y+e.height);return this.x=n,this.width=Math.max(r-n,0),this.y=i,this.height=Math.max(s-i,0),this}ceil(e=1,n=.001){const r=Math.ceil((this.x+this.width-n)*e)/e,i=Math.ceil((this.y+this.height-n)*e)/e;return this.x=Math.floor((this.x+n)*e)/e,this.y=Math.floor((this.y+n)*e)/e,this.width=r-this.x,this.height=i-this.y,this}enlarge(e){const n=Math.min(this.x,e.x),r=Math.max(this.x+this.width,e.x+e.width),i=Math.min(this.y,e.y),s=Math.max(this.y+this.height,e.y+e.height);return this.x=n,this.width=r-n,this.y=i,this.height=s-i,this}toString(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}class Zw{constructor(e=0,n=0,r=0){this.x=e,this.y=n,this.radius=r,this.type=dr.CIRC}clone(){return new Zw(this.x,this.y,this.radius)}contains(e,n){if(this.radius<=0)return!1;const r=this.radius*this.radius;let i=this.x-e,s=this.y-n;return i*=i,s*=s,i+s<=r}getBounds(){return new Ye(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}toString(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class Jw{constructor(e=0,n=0,r=0,i=0){this.x=e,this.y=n,this.width=r,this.height=i,this.type=dr.ELIP}clone(){return new Jw(this.x,this.y,this.width,this.height)}contains(e,n){if(this.width<=0||this.height<=0)return!1;let r=(e-this.x)/this.width,i=(n-this.y)/this.height;return r*=r,i*=i,r+i<=1}getBounds(){return new Ye(this.x-this.width,this.y-this.height,this.width,this.height)}toString(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}class Ac{constructor(...e){let n=Array.isArray(e[0])?e[0]:e;if(typeof n[0]!="number"){const r=[];for(let i=0,s=n.length;i<s;i++)r.push(n[i].x,n[i].y);n=r}this.points=n,this.type=dr.POLY,this.closeStroke=!0}clone(){const e=this.points.slice(),n=new Ac(e);return n.closeStroke=this.closeStroke,n}contains(e,n){let r=!1;const i=this.points.length/2;for(let s=0,o=i-1;s<i;o=s++){const a=this.points[s*2],c=this.points[s*2+1],h=this.points[o*2],d=this.points[o*2+1];c>n!=d>n&&e<(h-a)*((n-c)/(d-c))+a&&(r=!r)}return r}toString(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((e,n)=>`${e}, ${n}`,"")}]`}}class e_{constructor(e=0,n=0,r=0,i=0,s=20){this.x=e,this.y=n,this.width=r,this.height=i,this.radius=s,this.type=dr.RREC}clone(){return new e_(this.x,this.y,this.width,this.height,this.radius)}contains(e,n){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&n>=this.y&&n<=this.y+this.height){const r=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(n>=this.y+r&&n<=this.y+this.height-r||e>=this.x+r&&e<=this.x+this.width-r)return!0;let i=e-(this.x+r),s=n-(this.y+r);const o=r*r;if(i*i+s*s<=o||(i=e-(this.x+this.width-r),i*i+s*s<=o)||(s=n-(this.y+this.height-r),i*i+s*s<=o)||(i=e-(this.x+r),i*i+s*s<=o))return!0}return!1}toString(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}class en{constructor(e=1,n=0,r=0,i=1,s=0,o=0){this.array=null,this.a=e,this.b=n,this.c=r,this.d=i,this.tx=s,this.ty=o}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,n,r,i,s,o){return this.a=e,this.b=n,this.c=r,this.d=i,this.tx=s,this.ty=o,this}toArray(e,n){this.array||(this.array=new Float32Array(9));const r=n||this.array;return e?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty,r[8]=1):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0,r[8]=1),r}apply(e,n){n=n||new Oe;const r=e.x,i=e.y;return n.x=this.a*r+this.c*i+this.tx,n.y=this.b*r+this.d*i+this.ty,n}applyInverse(e,n){n=n||new Oe;const r=1/(this.a*this.d+this.c*-this.b),i=e.x,s=e.y;return n.x=this.d*r*i+-this.c*r*s+(this.ty*this.c-this.tx*this.d)*r,n.y=this.a*r*s+-this.b*r*i+(-this.ty*this.a+this.tx*this.b)*r,n}translate(e,n){return this.tx+=e,this.ty+=n,this}scale(e,n){return this.a*=e,this.d*=n,this.c*=e,this.b*=n,this.tx*=e,this.ty*=n,this}rotate(e){const n=Math.cos(e),r=Math.sin(e),i=this.a,s=this.c,o=this.tx;return this.a=i*n-this.b*r,this.b=i*r+this.b*n,this.c=s*n-this.d*r,this.d=s*r+this.d*n,this.tx=o*n-this.ty*r,this.ty=o*r+this.ty*n,this}append(e){const n=this.a,r=this.b,i=this.c,s=this.d;return this.a=e.a*n+e.b*i,this.b=e.a*r+e.b*s,this.c=e.c*n+e.d*i,this.d=e.c*r+e.d*s,this.tx=e.tx*n+e.ty*i+this.tx,this.ty=e.tx*r+e.ty*s+this.ty,this}setTransform(e,n,r,i,s,o,a,c,h){return this.a=Math.cos(a+h)*s,this.b=Math.sin(a+h)*s,this.c=-Math.sin(a-c)*o,this.d=Math.cos(a-c)*o,this.tx=e-(r*this.a+i*this.c),this.ty=n-(r*this.b+i*this.d),this}prepend(e){const n=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){const r=this.a,i=this.c;this.a=r*e.a+this.b*e.c,this.b=r*e.b+this.b*e.d,this.c=i*e.a+this.d*e.c,this.d=i*e.b+this.d*e.d}return this.tx=n*e.a+this.ty*e.c+e.tx,this.ty=n*e.b+this.ty*e.d+e.ty,this}decompose(e){const n=this.a,r=this.b,i=this.c,s=this.d,o=e.pivot,a=-Math.atan2(-i,s),c=Math.atan2(r,n),h=Math.abs(a+c);return h<1e-5||Math.abs(ug-h)<1e-5?(e.rotation=c,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=a,e.skew.y=c),e.scale.x=Math.sqrt(n*n+r*r),e.scale.y=Math.sqrt(i*i+s*s),e.position.x=this.tx+(o.x*n+o.y*i),e.position.y=this.ty+(o.x*r+o.y*s),e}invert(){const e=this.a,n=this.b,r=this.c,i=this.d,s=this.tx,o=e*i-n*r;return this.a=i/o,this.b=-n/o,this.c=-r/o,this.d=e/o,this.tx=(r*this.ty-i*s)/o,this.ty=-(e*this.ty-n*s)/o,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new en;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}toString(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return new en}static get TEMP_MATRIX(){return new en}}const Fl=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Bl=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Ul=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],zl=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],ax=[],rP=[],Lp=Math.sign;function hF(){for(let t=0;t<16;t++){const e=[];ax.push(e);for(let n=0;n<16;n++){const r=Lp(Fl[t]*Fl[n]+Ul[t]*Bl[n]),i=Lp(Bl[t]*Fl[n]+zl[t]*Bl[n]),s=Lp(Fl[t]*Ul[n]+Ul[t]*zl[n]),o=Lp(Bl[t]*Ul[n]+zl[t]*zl[n]);for(let a=0;a<16;a++)if(Fl[a]===r&&Bl[a]===i&&Ul[a]===s&&zl[a]===o){e.push(a);break}}}for(let t=0;t<16;t++){const e=new en;e.set(Fl[t],Bl[t],Ul[t],zl[t],0,0),rP.push(e)}}hF();const an={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:t=>Fl[t],uY:t=>Bl[t],vX:t=>Ul[t],vY:t=>zl[t],inv:t=>t&8?t&15:-t&7,add:(t,e)=>ax[t][e],sub:(t,e)=>ax[t][an.inv(e)],rotate180:t=>t^4,isVertical:t=>(t&3)===2,byDirection:(t,e)=>Math.abs(t)*2<=Math.abs(e)?e>=0?an.S:an.N:Math.abs(e)*2<=Math.abs(t)?t>0?an.E:an.W:e>0?t>0?an.SE:an.SW:t>0?an.NE:an.NW,matrixAppendRotationInv:(t,e,n=0,r=0)=>{const i=rP[an.inv(e)];i.tx=n,i.ty=r,t.append(i)}};class Ko{constructor(e,n,r=0,i=0){this._x=r,this._y=i,this.cb=e,this.scope=n}clone(e=this.cb,n=this.scope){return new Ko(e,n,this._x,this._y)}set(e=0,n=e){return(this._x!==e||this._y!==n)&&(this._x=e,this._y=n,this.cb.call(this.scope)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}toString(){return`[@pixi/math:ObservablePoint x=0 y=0 scope=${this.scope}]`}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))}}const iP=class{constructor(){this.worldTransform=new en,this.localTransform=new en,this.position=new Ko(this.onChange,this,0,0),this.scale=new Ko(this.onChange,this,1,1),this.pivot=new Ko(this.onChange,this,0,0),this.skew=new Ko(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}toString(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`}updateLocalTransform(){const t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(t){const e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){const n=t.worldTransform,r=this.worldTransform;r.a=e.a*n.a+e.b*n.c,r.b=e.a*n.b+e.b*n.d,r.c=e.c*n.a+e.d*n.c,r.d=e.c*n.b+e.d*n.d,r.tx=e.tx*n.a+e.ty*n.c+n.tx,r.ty=e.tx*n.b+e.ty*n.d+n.ty,this._parentID=t._worldID,this._worldID++}}setFromMatrix(t){t.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())}};let ey=iP;ey.IDENTITY=new iP;var dF=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,fF=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function tT(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}function dv(t){const e=new Array(t);for(let n=0;n<e.length;n++)e[n]=!1;return e}function sP(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return dv(2*e);case"bvec3":return dv(3*e);case"bvec4":return dv(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const Pc=[{test:t=>t.type==="float"&&t.size===1&&!t.isArray,code:t=>`
            if(uv["${t}"] !== ud["${t}"].value)
            {
                ud["${t}"].value = uv["${t}"]
                gl.uniform1f(ud["${t}"].location, uv["${t}"])
            }
            `},{test:(t,e)=>(t.type==="sampler2D"||t.type==="samplerCube"||t.type==="sampler2DArray")&&t.size===1&&!t.isArray&&(e==null||e.castToBaseTexture!==void 0),code:t=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${t}"], t);

            if(ud["${t}"].value !== t)
            {
                ud["${t}"].value = t;
                gl.uniform1i(ud["${t}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(t,e)=>t.type==="mat3"&&t.size===1&&!t.isArray&&e.a!==void 0,code:t=>`
            gl.uniformMatrix3fv(ud["${t}"].location, false, uv["${t}"].toArray(true));
            `,codeUbo:t=>`
                var ${t}_matrix = uv.${t}.toArray(true);

                data[offset] = ${t}_matrix[0];
                data[offset+1] = ${t}_matrix[1];
                data[offset+2] = ${t}_matrix[2];
        
                data[offset + 4] = ${t}_matrix[3];
                data[offset + 5] = ${t}_matrix[4];
                data[offset + 6] = ${t}_matrix[5];
        
                data[offset + 8] = ${t}_matrix[6];
                data[offset + 9] = ${t}_matrix[7];
                data[offset + 10] = ${t}_matrix[8];
            `},{test:(t,e)=>t.type==="vec2"&&t.size===1&&!t.isArray&&e.x!==void 0,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${t}"].location, v.x, v.y);
                }`,codeUbo:t=>`
                v = uv.${t};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:t=>t.type==="vec2"&&t.size===1&&!t.isArray,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${t}"].location, v[0], v[1]);
                }
            `},{test:(t,e)=>t.type==="vec4"&&t.size===1&&!t.isArray&&e.width!==void 0,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${t}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:t=>`
                    v = uv.${t};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(t,e)=>t.type==="vec4"&&t.size===1&&!t.isArray&&e.red!==void 0,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${t}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:t=>`
                    v = uv.${t};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(t,e)=>t.type==="vec3"&&t.size===1&&!t.isArray&&e.red!==void 0,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${t}"].location, v.red, v.green, v.blue)
                }`,codeUbo:t=>`
                    v = uv.${t};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:t=>t.type==="vec4"&&t.size===1&&!t.isArray,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${t}"].location, v[0], v[1], v[2], v[3])
                }`}],pF={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},mF={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function gF(t,e){var r;const n=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const i in t.uniforms){const s=e[i];if(!s){(r=t.uniforms[i])!=null&&r.group&&(t.uniforms[i].ubo?n.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${i}, '${i}');
                    `):n.push(`
                        renderer.shader.syncUniformGroup(uv.${i}, syncData);
                    `));continue}const o=t.uniforms[i];let a=!1;for(let c=0;c<Pc.length;c++)if(Pc[c].test(s,o)){n.push(Pc[c].code(i,o)),a=!0;break}if(!a){const h=(s.size===1&&!s.isArray?pF:mF)[s.type].replace("location",`ud["${i}"].location`);n.push(`
            cu = ud["${i}"];
            cv = cu.value;
            v = uv["${i}"];
            ${h};`)}}return new Function("ud","uv","renderer","syncData",n.join(`
`))}const oP={};let $u=oP;function yF(){if($u===oP||$u!=null&&$u.isContextLost()){const t=Se.ADAPTER.createCanvas();let e;Se.PREFER_ENV>=gu.WEBGL2&&(e=t.getContext("webgl2",{})),e||(e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}),e?e.getExtension("WEBGL_draw_buffers"):e=null),$u=e}return $u}let Fp;function vF(){if(!Fp){Fp=rs.MEDIUM;const t=yF();t&&t.getShaderPrecisionFormat&&(Fp=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision?rs.HIGH:rs.MEDIUM)}return Fp}function nT(t,e){const n=t.getShaderSource(e).split(`
`).map((h,d)=>`${d}: ${h}`),r=t.getShaderInfoLog(e),i=r.split(`
`),s={},o=i.map(h=>parseFloat(h.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(h=>h&&!s[h]?(s[h]=!0,!0):!1),a=[""];o.forEach(h=>{n[h-1]=`%c${n[h-1]}%c`,a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const c=n.join(`
`);a[0]=c,console.error(r),console.groupCollapsed("click to view full shader code"),console.warn(...a),console.groupEnd()}function xF(t,e,n,r){t.getProgramParameter(e,t.LINK_STATUS)||(t.getShaderParameter(n,t.COMPILE_STATUS)||nT(t,n),t.getShaderParameter(r,t.COMPILE_STATUS)||nT(t,r),console.error("PixiJS Error: Could not initialize shader."),t.getProgramInfoLog(e)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(e)))}const wF={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function aP(t){return wF[t]}let Bp=null;const rT={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function lP(t,e){if(!Bp){const n=Object.keys(rT);Bp={};for(let r=0;r<n.length;++r){const i=n[r];Bp[t[i]]=rT[i]}}return Bp[e]}function iT(t,e,n){if(t.substring(0,9)!=="precision"){let r=e;return e===rs.HIGH&&n!==rs.HIGH&&(r=rs.MEDIUM),`precision ${r} float;
${t}`}else if(n!==rs.HIGH&&t.substring(0,15)==="precision highp")return t.replace("precision highp","precision mediump");return t}let Uh;function _F(){if(typeof Uh=="boolean")return Uh;try{Uh=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{Uh=!1}return Uh}let SF=0;const Up={},Qu=class{constructor(t,e,n="pixi-shader",r={}){this.extra={},this.id=SF++,this.vertexSrc=t||Qu.defaultVertexSrc,this.fragmentSrc=e||Qu.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=r,this.vertexSrc.substring(0,8)!=="#version"&&(n=n.replace(/\s+/g,"-"),Up[n]?(Up[n]++,n+=`-${Up[n]}`):Up[n]=1,this.vertexSrc=`#define SHADER_NAME ${n}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${n}
${this.fragmentSrc}`,this.vertexSrc=iT(this.vertexSrc,Qu.defaultVertexPrecision,rs.HIGH),this.fragmentSrc=iT(this.fragmentSrc,Qu.defaultFragmentPrecision,vF())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return fF}static get defaultFragmentSrc(){return dF}static from(t,e,n){const r=t+e;let i=QE[r];return i||(QE[r]=i=new Qu(t,e,n)),i}};let Is=Qu;Is.defaultVertexPrecision=rs.HIGH;Is.defaultFragmentPrecision=Qo.apple.device?rs.HIGH:rs.MEDIUM;let bF=0;class Os{constructor(e,n,r){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=bF++,this.static=!!n,this.ubo=!!r,e instanceof wn?(this.buffer=e,this.buffer.type=To.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new wn(new Float32Array(1)),this.buffer.type=To.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(e,n,r){if(!this.ubo)this.uniforms[e]=new Os(n,r);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(e,n,r){return new Os(e,n,r)}static uboFrom(e,n){return new Os(e,n??!0,!0)}}class Co{constructor(e,n){this.uniformBindCount=0,this.program=e,n?n instanceof Os?this.uniformGroup=n:this.uniformGroup=new Os(n):this.uniformGroup=new Os({}),this.disposeRunner=new Ms("disposeShader")}checkUniformExists(e,n){if(n.uniforms[e])return!0;for(const r in n.uniforms){const i=n.uniforms[r];if(i.group&&this.checkUniformExists(e,i))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(e,n,r){const i=Is.from(e,n);return new Co(i,r)}}class EF{constructor(e,n){if(this.vertexSrc=e,this.fragTemplate=n,this.programCache={},this.defaultGroupCache={},!n.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!n.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(e){if(!this.programCache[e]){const r=new Int32Array(e);for(let s=0;s<e;s++)r[s]=s;this.defaultGroupCache[e]=Os.from({uSamplers:r},!0);let i=this.fragTemplate;i=i.replace(/%count%/gi,`${e}`),i=i.replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new Is(this.vertexSrc,i)}const n={tint:new Float32Array([1,1,1,1]),translationMatrix:new en,default:this.defaultGroupCache[e]};return new Co(this.programCache[e],n)}generateSampleSrc(e){let n="";n+=`
`,n+=`
`;for(let r=0;r<e;r++)r>0&&(n+=`
else `),r<e-1&&(n+=`if(vTextureId < ${r}.5)`),n+=`
{`,n+=`
	color = texture2D(uSamplers[${r}], vTextureCoord);`,n+=`
}`;return n+=`
`,n+=`
`,n}}class lx{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let e=0;e<this.count;e++)this.elements[e]=null;this.count=0}}function TF(){return!Qo.apple.device}function CF(t){let e=!0;const n=Se.ADAPTER.getNavigator();if(Qo.tablet||Qo.phone){if(Qo.apple.device){const r=n.userAgent.match(/OS (\d+)_(\d+)?/);r&&parseInt(r[1],10)<11&&(e=!1)}if(Qo.android.device){const r=n.userAgent.match(/Android\s([0-9.]*)/);r&&parseInt(r[1],10)<7&&(e=!1)}}return e?t:4}class ty{constructor(e){this.renderer=e}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(e){}}var IF=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,AF=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const ms=class extends ty{constructor(t){super(t),this.setShaderGenerator(),this.geometryClass=nP,this.vertexSize=6,this.state=ua.for2d(),this.size=ms.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),t.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??CF(32),this._defaultMaxTextures}static set defaultMaxTextures(t){this._defaultMaxTextures=t}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??TF(),this._canUploadSameBuffer}static set canUploadSameBuffer(t){this._canUploadSameBuffer=t}get MAX_TEXTURES(){return ot("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return AF}static get defaultFragmentTemplate(){return IF}setShaderGenerator({vertex:t=ms.defaultVertexSrc,fragment:e=ms.defaultFragmentTemplate}={}){this.shaderGenerator=new EF(t,e)}contextChange(){const t=this.renderer.gl;Se.PREFER_ENV===gu.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),ms.defaultMaxTextures),this.maxTextures=nF(this.maxTextures,t)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:t,_textureArrayPool:e}=ms,n=this.size/4,r=Math.floor(n/this.maxTextures)+1;for(;t.length<n;)t.push(new ox);for(;e.length<r;)e.push(new lx);for(let i=0;i<this.maxTextures;i++)this._tempBoundTextures[i]=null}onPrerender(){this._flushId=0}render(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)}buildTexturesAndDrawCalls(){const{_bufferedTextures:t,maxTextures:e}=this,n=ms._textureArrayPool,r=this.renderer.batch,i=this._tempBoundTextures,s=this.renderer.textureGC.count;let o=++Ge._globalBatch,a=0,c=n[0],h=0;r.copyBoundTextures(i,e);for(let d=0;d<this._bufferSize;++d){const m=t[d];t[d]=null,m._batchEnabled!==o&&(c.count>=e&&(r.boundArray(c,i,o,e),this.buildDrawCalls(c,h,d),h=d,c=n[++a],++o),m._batchEnabled=o,m.touched=s,c.elements[c.count++]=m)}c.count>0&&(r.boundArray(c,i,o,e),this.buildDrawCalls(c,h,this._bufferSize),++a,++o);for(let d=0;d<i.length;d++)i[d]=null;Ge._globalBatch=o}buildDrawCalls(t,e,n){const{_bufferedElements:r,_attributeBuffer:i,_indexBuffer:s,vertexSize:o}=this,a=ms._drawCallPool;let c=this._dcIndex,h=this._aIndex,d=this._iIndex,m=a[c];m.start=this._iIndex,m.texArray=t;for(let f=e;f<n;++f){const y=r[f],v=y._texture.baseTexture,S=KA[v.alphaMode?1:0][y.blendMode];r[f]=null,e<f&&m.blend!==S&&(m.size=d-m.start,e=f,m=a[++c],m.texArray=t,m.start=d),this.packInterleavedGeometry(y,i,s,h,d),h+=y.vertexData.length/2*o,d+=y.indices.length,m.blend=S}e<n&&(m.size=d-m.start,++c),this._dcIndex=c,this._aIndex=h,this._iIndex=d}bindAndClearTexArray(t){const e=this.renderer.texture;for(let n=0;n<t.count;n++)e.bind(t.elements[n],t.ids[n]),t.elements[n]=null;t.count=0}updateGeometry(){const{_packedGeometries:t,_attributeBuffer:e,_indexBuffer:n}=this;ms.canUploadSameBuffer?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(n),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(n),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const t=this._dcIndex,{gl:e,state:n}=this.renderer,r=ms._drawCallPool;let i=null;for(let s=0;s<t;s++){const{texArray:o,type:a,size:c,start:h,blend:d}=r[s];i!==o&&(i=o,this.bindAndClearTexArray(o)),this.state.blendMode=d,n.set(this.state),e.drawElements(a,c,e.UNSIGNED_SHORT,h*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),ms.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(t){const e=ag(Math.ceil(t/8)),n=YE(e),r=e*8;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);let i=this._aBuffers[r];return i||(this._aBuffers[r]=i=new ix(r*this.vertexSize*4)),i}getIndexBuffer(t){const e=ag(Math.ceil(t/12)),n=YE(e),r=e*12;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);let i=this._iBuffers[n];return i||(this._iBuffers[n]=i=new Uint16Array(r)),i}packInterleavedGeometry(t,e,n,r,i){const{uint32View:s,float32View:o}=e,a=r/this.vertexSize,c=t.uvs,h=t.indices,d=t.vertexData,m=t._texture.baseTexture._batchLocation,f=Math.min(t.worldAlpha,1),y=kt.shared.setValue(t._tintRGB).toPremultiplied(f,t._texture.baseTexture.alphaMode>0);for(let v=0;v<d.length;v+=2)o[r++]=d[v],o[r++]=d[v+1],o[r++]=c[v],o[r++]=c[v+1],s[r++]=y,o[r++]=m;for(let v=0;v<h.length;v++)n[i++]=a+h[v]}};let Es=ms;Es.defaultBatchSize=4096;Es.extension={name:"batch",type:Ee.RendererPlugin};Es._drawCallPool=[];Es._textureArrayPool=[];Me.add(Es);var PF=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,kF=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const Jh=class extends Co{constructor(t,e,n){const r=Is.from(t||Jh.defaultVertexSrc,e||Jh.defaultFragmentSrc);super(r,n),this.padding=0,this.resolution=Jh.defaultResolution,this.multisample=Jh.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new ua}apply(t,e,n,r,i){t.applyFilter(this,e,n,r)}get blendMode(){return this.state.blendMode}set blendMode(t){this.state.blendMode=t}get resolution(){return this._resolution}set resolution(t){this._resolution=t}static get defaultVertexSrc(){return kF}static get defaultFragmentSrc(){return PF}};let fr=Jh;fr.defaultResolution=1;fr.defaultMultisample=An.NONE;class ny{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new kt(0),this.alpha=1}init(e){this.clearBeforeRender=e.clearBeforeRender;const{backgroundColor:n,background:r,backgroundAlpha:i}=e,s=r??n;s!==void 0&&(this.color=s),this.alpha=i}get color(){return this._backgroundColor.value}set color(e){this._backgroundColor.setValue(e)}get alpha(){return this._backgroundColor.alpha}set alpha(e){this._backgroundColor.setAlpha(e)}get backgroundColor(){return this._backgroundColor}destroy(){}}ny.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0};ny.extension={type:[Ee.RendererSystem,Ee.CanvasRendererSystem],name:"background"};Me.add(ny);class uP{constructor(e){this.renderer=e,this.emptyRenderer=new ty(e),this.currentRenderer=this.emptyRenderer}setObjectRenderer(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(e,n){const{boundTextures:r}=this.renderer.texture;for(let i=n-1;i>=0;--i)e[i]=r[i]||null,e[i]&&(e[i]._batchLocation=i)}boundArray(e,n,r,i){const{elements:s,ids:o,count:a}=e;let c=0;for(let h=0;h<a;h++){const d=s[h],m=d._batchLocation;if(m>=0&&m<i&&n[m]===d){o[h]=m;continue}for(;c<i;){const f=n[c];if(f&&f._batchEnabled===r&&f._batchLocation===c){c++;continue}o[h]=c,d._batchLocation=c,n[c]=d;break}}}destroy(){this.renderer=null}}uP.extension={type:Ee.RendererSystem,name:"batch"};Me.add(uP);let sT=0;class ry{constructor(e){this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=sT++}init(e){if(e.context)this.initFromContext(e.context);else{const n=this.renderer.background.alpha<1,r=e.premultipliedAlpha;this.preserveDrawingBuffer=e.preserveDrawingBuffer,this.useContextAlpha=e.useContextAlpha,this.powerPreference=e.powerPreference,this.initFromOptions({alpha:n,premultipliedAlpha:r,antialias:e.antialias,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:e.powerPreference})}}initFromContext(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=sT++,this.renderer.runners.contextChange.emit(e);const n=this.renderer.view;n.addEventListener!==void 0&&(n.addEventListener("webglcontextlost",this.handleContextLost,!1),n.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(e){const n=this.createContext(this.renderer.view,e);this.initFromContext(n)}createContext(e,n){let r;if(Se.PREFER_ENV>=gu.WEBGL2&&(r=e.getContext("webgl2",n)),r)this.webGLVersion=2;else if(this.webGLVersion=1,r=e.getContext("webgl",n)||e.getContext("experimental-webgl",n),!r)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=r,this.getExtensions(),this.gl}getExtensions(){const{gl:e}=this,n={loseContext:e.getExtension("WEBGL_lose_context"),anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,n,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,n,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})}handleContextLost(e){e.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const e=this.renderer.view;this.renderer=null,e.removeEventListener!==void 0&&(e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(e){const n=e.getContextAttributes(),r="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext;r&&(this.webGLVersion=2),n&&!n.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const i=r||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=i,i||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}ry.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"};ry.extension={type:Ee.RendererSystem,name:"context"};Me.add(ry);class RF extends yf{upload(e,n,r){const i=e.gl;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.alphaMode===Bs.UNPACK);const s=n.realWidth,o=n.realHeight;return r.width===s&&r.height===o?i.texSubImage2D(n.target,0,0,0,s,o,n.format,r.type,this.data):(r.width=s,r.height=o,i.texImage2D(n.target,0,r.internalFormat,s,o,0,n.format,r.type,this.data)),!0}}class ux{constructor(e,n){this.width=Math.round(e||100),this.height=Math.round(n||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Ms("disposeFramebuffer"),this.multisample=An.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(e=0,n){return this.colorTextures[e]=n||new Ge(null,{scaleMode:ns.NEAREST,resolution:1,mipmap:Io.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(e){return this.depthTexture=e||new Ge(new RF(null,{width:this.width,height:this.height}),{scaleMode:ns.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:Io.OFF,format:me.DEPTH_COMPONENT,type:Fe.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(e,n){if(e=Math.round(e),n=Math.round(n),!(e===this.width&&n===this.height)){this.width=e,this.height=n,this.dirtyId++,this.dirtySize++;for(let r=0;r<this.colorTextures.length;r++){const i=this.colorTextures[r],s=i.resolution;i.setSize(e/s,n/s)}if(this.depthTexture){const r=this.depthTexture.resolution;this.depthTexture.setSize(e/r,n/r)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class cP extends Ge{constructor(e={}){if(typeof e=="number"){const n=arguments[0],r=arguments[1],i=arguments[2],s=arguments[3];e={width:n,height:r,scaleMode:i,resolution:s}}e.width=e.width||100,e.height=e.height||100,e.multisample??(e.multisample=An.NONE),super(null,e),this.mipmap=Io.OFF,this.valid=!0,this._clear=new kt([0,0,0,0]),this.framebuffer=new ux(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=e.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(e){this._clear.setValue(e)}get clearColor(){return this._clear.value}get clear(){return this._clear}resize(e,n){this.framebuffer.resize(e*this.resolution,n*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class al extends Yd{constructor(e){const n=e,r=n.naturalWidth||n.videoWidth||n.width,i=n.naturalHeight||n.videoHeight||n.height;super(r,i),this.source=e,this.noSubImage=!1}static crossOrigin(e,n,r){r===void 0&&!n.startsWith("data:")?e.crossOrigin=JL(n):r!==!1&&(e.crossOrigin=typeof r=="string"?r:"anonymous")}upload(e,n,r,i){const s=e.gl,o=n.realWidth,a=n.realHeight;if(i=i||this.source,typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement){if(!i.complete||i.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement&&i.readyState<=1&&i.buffered.length===0)return!1;return s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.alphaMode===Bs.UNPACK),!this.noSubImage&&n.target===s.TEXTURE_2D&&r.width===o&&r.height===a?s.texSubImage2D(s.TEXTURE_2D,0,0,0,n.format,r.type,i):(r.width=o,r.height=a,s.texImage2D(n.target,0,r.internalFormat,n.format,r.type,i)),!0}update(){if(this.destroyed)return;const e=this.source,n=e.naturalWidth||e.videoWidth||e.width,r=e.naturalHeight||e.videoHeight||e.height;this.resize(n,r),super.update()}dispose(){this.source=null}}class hP extends al{constructor(e,n){if(n=n||{},typeof e=="string"){const r=new Image;al.crossOrigin(r,e,n.crossorigin),r.src=e,e=r}super(e),!e.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=e.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(n.createBitmap??Se.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof n.alphaMode=="number"?n.alphaMode:null,this.bitmap=null,this._load=null,n.autoLoad!==!1&&this.load()}load(e){return this._load?this._load:(e!==void 0&&(this.createBitmap=e),this._load=new Promise((n,r)=>{const i=this.source;this.url=i.src;const s=()=>{this.destroyed||(i.onload=null,i.onerror=null,this.resize(i.width,i.height),this._load=null,this.createBitmap?n(this.process()):n(this))};i.complete&&i.src?s():(i.onload=s,i.onerror=o=>{r(o),this.onError.emit(o)})}),this._load)}process(){const e=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const n=globalThis.createImageBitmap,r=!e.crossOrigin||e.crossOrigin==="anonymous";return this._process=fetch(e.src,{mode:r?"cors":"no-cors"}).then(i=>i.blob()).then(i=>n(i,0,0,e.width,e.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===Bs.UNPACK?"premultiply":"none"})).then(i=>this.destroyed?Promise.reject():(this.bitmap=i,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(e,n,r){if(typeof this.alphaMode=="number"&&(n.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(e,n,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(e,n,r,this.bitmap),!this.preserveBitmap){let i=!0;const s=n._glTextures;for(const o in s){const a=s[o];if(a!==r&&a.dirtyId!==n.dirtyId){i=!1;break}}i&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(e){return typeof HTMLImageElement<"u"&&(typeof e=="string"||e instanceof HTMLImageElement)}}class dP{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(e,n,r){const i=n.width,s=n.height;if(r){const o=e.width/2/i,a=e.height/2/s,c=e.x/i+o,h=e.y/s+a;r=an.add(r,an.NW),this.x0=c+o*an.uX(r),this.y0=h+a*an.uY(r),r=an.add(r,2),this.x1=c+o*an.uX(r),this.y1=h+a*an.uY(r),r=an.add(r,2),this.x2=c+o*an.uX(r),this.y2=h+a*an.uY(r),r=an.add(r,2),this.x3=c+o*an.uX(r),this.y3=h+a*an.uY(r)}else this.x0=e.x/i,this.y0=e.y/s,this.x1=(e.x+e.width)/i,this.y1=e.y/s,this.x2=(e.x+e.width)/i,this.y2=(e.y+e.height)/s,this.x3=e.x/i,this.y3=(e.y+e.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}toString(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`}}const oT=new dP;function zp(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}class xe extends mf{constructor(e,n,r,i,s,o,a){if(super(),this.noFrame=!1,n||(this.noFrame=!0,n=new Ye(0,0,1,1)),e instanceof xe&&(e=e.baseTexture),this.baseTexture=e,this._frame=n,this.trim=i,this.valid=!1,this._uvs=oT,this.uvMatrix=null,this.orig=r||n,this._rotate=Number(s||0),s===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=o?new Oe(o.x,o.y):new Oe(0,0),this.defaultBorders=a,this._updateID=0,this.textureCacheIds=[],e.valid?this.noFrame?e.valid&&this.onBaseTextureUpdated(e):this.frame=n:e.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&e.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(e){if(this.baseTexture){if(e){const{resource:n}=this.baseTexture;n!=null&&n.url&&yo[n.url]&&xe.removeFromCache(n.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,xe.removeFromCache(this),this.textureCacheIds=null}clone(){var i;const e=this._frame.clone(),n=this._frame===this.orig?e:this.orig.clone(),r=new xe(this.baseTexture,!this.noFrame&&e,n,(i=this.trim)==null?void 0:i.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(r._frame=e),r}updateUvs(){this._uvs===oT&&(this._uvs=new dP),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(e,n={},r=Se.STRICT_TEXTURE_CACHE){const i=typeof e=="string";let s=null;if(i)s=e;else if(e instanceof Ge){if(!e.cacheId){const a=(n==null?void 0:n.pixiIdPrefix)||"pixiid";e.cacheId=`${a}-${hu()}`,Ge.addToCache(e,e.cacheId)}s=e.cacheId}else{if(!e._pixiId){const a=(n==null?void 0:n.pixiIdPrefix)||"pixiid";e._pixiId=`${a}_${hu()}`}s=e._pixiId}let o=yo[s];if(i&&r&&!o)throw new Error(`The cacheId "${s}" does not exist in TextureCache.`);return!o&&!(e instanceof Ge)?(n.resolution||(n.resolution=sl(e)),o=new xe(new Ge(e,n)),o.baseTexture.cacheId=s,Ge.addToCache(o.baseTexture,s),xe.addToCache(o,s)):!o&&e instanceof Ge&&(o=new xe(e),xe.addToCache(o,s)),o}static fromURL(e,n){const r=Object.assign({autoLoad:!1},n==null?void 0:n.resourceOptions),i=xe.from(e,Object.assign({resourceOptions:r},n),!1),s=i.baseTexture.resource;return i.baseTexture.valid?Promise.resolve(i):s.load().then(()=>Promise.resolve(i))}static fromBuffer(e,n,r,i){return new xe(Ge.fromBuffer(e,n,r,i))}static fromLoader(e,n,r,i){const s=new Ge(e,Object.assign({scaleMode:Ge.defaultOptions.scaleMode,resolution:sl(n)},i)),{resource:o}=s;o instanceof hP&&(o.url=n);const a=new xe(s);return r||(r=n),Ge.addToCache(a.baseTexture,r),xe.addToCache(a,r),r!==n&&(Ge.addToCache(a.baseTexture,n),xe.addToCache(a,n)),a.baseTexture.valid?Promise.resolve(a):new Promise(c=>{a.baseTexture.once("loaded",()=>c(a))})}static addToCache(e,n){n&&(e.textureCacheIds.includes(n)||e.textureCacheIds.push(n),yo[n]&&yo[n]!==e&&console.warn(`Texture added to the cache with an id [${n}] that already had an entry`),yo[n]=e)}static removeFromCache(e){if(typeof e=="string"){const n=yo[e];if(n){const r=n.textureCacheIds.indexOf(e);return r>-1&&n.textureCacheIds.splice(r,1),delete yo[e],n}}else if(e!=null&&e.textureCacheIds){for(let n=0;n<e.textureCacheIds.length;++n)yo[e.textureCacheIds[n]]===e&&delete yo[e.textureCacheIds[n]];return e.textureCacheIds.length=0,e}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(e){this._frame=e,this.noFrame=!1;const{x:n,y:r,width:i,height:s}=e,o=n+i>this.baseTexture.width,a=r+s>this.baseTexture.height;if(o||a){const c=o&&a?"and":"or",h=`X: ${n} + ${i} = ${n+i} > ${this.baseTexture.width}`,d=`Y: ${r} + ${s} = ${r+s} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${h} ${c} ${d}`)}this.valid=i&&s&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(e){this._rotate=e,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return xe._EMPTY||(xe._EMPTY=new xe(new Ge),zp(xe._EMPTY),zp(xe._EMPTY.baseTexture)),xe._EMPTY}static get WHITE(){if(!xe._WHITE){const e=Se.ADAPTER.createCanvas(16,16),n=e.getContext("2d");e.width=16,e.height=16,n.fillStyle="white",n.fillRect(0,0,16,16),xe._WHITE=new xe(Ge.from(e)),zp(xe._WHITE),zp(xe._WHITE.baseTexture)}return xe._WHITE}}class yu extends xe{constructor(e,n){super(e,n),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,n,r=!0){const i=this.baseTexture.resolution,s=Math.round(e*i)/i,o=Math.round(n*i)/i;this.valid=s>0&&o>0,this._frame.width=this.orig.width=s,this._frame.height=this.orig.height=o,r&&this.baseTexture.resize(s,o),this.updateUvs()}setResolution(e){const{baseTexture:n}=this;n.resolution!==e&&(n.setResolution(e),this.resize(n.width,n.height,!1))}static create(e){return new yu(new cP(e))}}class fP{constructor(e){this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(e,n,r=An.NONE){const i=new cP(Object.assign({width:e,height:n,resolution:1,multisample:r},this.textureOptions));return new yu(i)}getOptimalTexture(e,n,r=1,i=An.NONE){let s;e=Math.ceil(e*r-1e-6),n=Math.ceil(n*r-1e-6),!this.enableFullScreen||e!==this._pixelsWidth||n!==this._pixelsHeight?(e=ag(e),n=ag(n),s=((e&65535)<<16|n&65535)>>>0,i>1&&(s+=i*4294967296)):s=i>1?-i:-1,this.texturePool[s]||(this.texturePool[s]=[]);let o=this.texturePool[s].pop();return o||(o=this.createTexture(e,n,i)),o.filterPoolKey=s,o.setResolution(r),o}getFilterTexture(e,n,r){const i=this.getOptimalTexture(e.width,e.height,n||e.resolution,r||An.NONE);return i.filterFrame=e.filterFrame,i}returnTexture(e){const n=e.filterPoolKey;e.filterFrame=null,this.texturePool[n].push(e)}returnFilterTexture(e){this.returnTexture(e)}clear(e){if(e=e!==!1,e)for(const n in this.texturePool){const r=this.texturePool[n];if(r)for(let i=0;i<r.length;i++)r[i].destroy(!0)}this.texturePool={}}setScreenSize(e){if(!(e.width===this._pixelsWidth&&e.height===this._pixelsHeight)){this.enableFullScreen=e.width>0&&e.height>0;for(const n in this.texturePool){if(!(Number(n)<0))continue;const r=this.texturePool[n];if(r)for(let i=0;i<r.length;i++)r[i].destroy(!0);this.texturePool[n]=[]}this._pixelsWidth=e.width,this._pixelsHeight=e.height}}}fP.SCREEN_KEY=-1;class MF extends ol{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class pP extends ol{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new wn(this.vertices),this.uvBuffer=new wn(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(e,n){let r=0,i=0;return this.uvs[0]=r,this.uvs[1]=i,this.uvs[2]=r+n.width/e.width,this.uvs[3]=i,this.uvs[4]=r+n.width/e.width,this.uvs[5]=i+n.height/e.height,this.uvs[6]=r,this.uvs[7]=i+n.height/e.height,r=n.x,i=n.y,this.vertices[0]=r,this.vertices[1]=i,this.vertices[2]=r+n.width,this.vertices[3]=i,this.vertices[4]=r+n.width,this.vertices[5]=i+n.height,this.vertices[6]=r,this.vertices[7]=i+n.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class OF{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=An.NONE,this.sourceFrame=new Ye,this.destinationFrame=new Ye,this.bindingSourceFrame=new Ye,this.bindingDestinationFrame=new Ye,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const $p=[new Oe,new Oe,new Oe,new Oe],fv=new en;class mP{constructor(e){this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new fP,this.statePool=[],this.quad=new MF,this.quadUv=new pP,this.tempRect=new Ye,this.activeState={},this.globalUniforms=new Os({outputFrame:new Ye,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(e,n){const r=this.renderer,i=this.defaultFilterStack,s=this.statePool.pop()||new OF,o=this.renderer.renderTexture;let a=n[0].resolution,c=n[0].multisample,h=n[0].padding,d=n[0].autoFit,m=n[0].legacy??!0;for(let v=1;v<n.length;v++){const S=n[v];a=Math.min(a,S.resolution),c=Math.min(c,S.multisample),h=this.useMaxPadding?Math.max(h,S.padding):h+S.padding,d=d&&S.autoFit,m=m||(S.legacy??!0)}i.length===1&&(this.defaultFilterStack[0].renderTexture=o.current),i.push(s),s.resolution=a,s.multisample=c,s.legacy=m,s.target=e,s.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),s.sourceFrame.pad(h);const f=this.tempRect.copyFrom(o.sourceFrame);r.projection.transform&&this.transformAABB(fv.copyFrom(r.projection.transform).invert(),f),d?(s.sourceFrame.fit(f),(s.sourceFrame.width<=0||s.sourceFrame.height<=0)&&(s.sourceFrame.width=0,s.sourceFrame.height=0)):s.sourceFrame.intersects(f)||(s.sourceFrame.width=0,s.sourceFrame.height=0),this.roundFrame(s.sourceFrame,o.current?o.current.resolution:r.resolution,o.sourceFrame,o.destinationFrame,r.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,a,c),s.filters=n,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;const y=this.tempRect;y.x=0,y.y=0,y.width=s.sourceFrame.width,y.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(o.sourceFrame),s.bindingDestinationFrame.copyFrom(o.destinationFrame),s.transform=r.projection.transform,r.projection.transform=null,o.bind(s.renderTexture,s.sourceFrame,y),r.framebuffer.clear(0,0,0,0)}pop(){const e=this.defaultFilterStack,n=e.pop(),r=n.filters;this.activeState=n;const i=this.globalUniforms.uniforms;i.outputFrame=n.sourceFrame,i.resolution=n.resolution;const s=i.inputSize,o=i.inputPixel,a=i.inputClamp;if(s[0]=n.destinationFrame.width,s[1]=n.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],o[0]=Math.round(s[0]*n.resolution),o[1]=Math.round(s[1]*n.resolution),o[2]=1/o[0],o[3]=1/o[1],a[0]=.5*o[2],a[1]=.5*o[3],a[2]=n.sourceFrame.width*s[2]-.5*o[2],a[3]=n.sourceFrame.height*s[3]-.5*o[3],n.legacy){const h=i.filterArea;h[0]=n.destinationFrame.width,h[1]=n.destinationFrame.height,h[2]=n.sourceFrame.x,h[3]=n.sourceFrame.y,i.filterClamp=i.inputClamp}this.globalUniforms.update();const c=e[e.length-1];if(this.renderer.framebuffer.blit(),r.length===1)r[0].apply(this,n.renderTexture,c.renderTexture,xo.BLEND,n),this.returnFilterTexture(n.renderTexture);else{let h=n.renderTexture,d=this.getOptimalFilterTexture(h.width,h.height,n.resolution);d.filterFrame=h.filterFrame;let m=0;for(m=0;m<r.length-1;++m){m===1&&n.multisample>1&&(d=this.getOptimalFilterTexture(h.width,h.height,n.resolution),d.filterFrame=h.filterFrame),r[m].apply(this,h,d,xo.CLEAR,n);const f=h;h=d,d=f}r[m].apply(this,h,c.renderTexture,xo.BLEND,n),m>1&&n.multisample>1&&this.returnFilterTexture(n.renderTexture),this.returnFilterTexture(h),this.returnFilterTexture(d)}n.clear(),this.statePool.push(n)}bindAndClear(e,n=xo.CLEAR){const{renderTexture:r,state:i}=this.renderer;if(e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,e!=null&&e.filterFrame){const o=this.tempRect;o.x=0,o.y=0,o.width=e.filterFrame.width,o.height=e.filterFrame.height,r.bind(e,e.filterFrame,o)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?r.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const s=i.stateId&1||this.forceClear;(n===xo.CLEAR||n===xo.BLIT&&s)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(e,n,r,i){const s=this.renderer;s.state.set(e.state),this.bindAndClear(r,i),e.uniforms.uSampler=n,e.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(n._frame,n.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(Cs.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(Cs.TRIANGLE_STRIP))}calculateSpriteMatrix(e,n){const{sourceFrame:r,destinationFrame:i}=this.activeState,{orig:s}=n._texture,o=e.set(i.width,0,0,i.height,r.x,r.y),a=n.worldTransform.copyTo(en.TEMP_MATRIX);return a.invert(),o.prepend(a),o.scale(1/s.width,1/s.height),o.translate(n.anchor.x,n.anchor.y),o}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(e,n,r=1,i=An.NONE){return this.texturePool.getOptimalTexture(e,n,r,i)}getFilterTexture(e,n,r){if(typeof e=="number"){const s=e;e=n,n=s}e=e||this.activeState.renderTexture;const i=this.texturePool.getOptimalTexture(e.width,e.height,n||e.resolution,r||An.NONE);return i.filterFrame=e.filterFrame,i}returnFilterTexture(e){this.texturePool.returnTexture(e)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(e,n){const r=$p[0],i=$p[1],s=$p[2],o=$p[3];r.set(n.left,n.top),i.set(n.left,n.bottom),s.set(n.right,n.top),o.set(n.right,n.bottom),e.apply(r,r),e.apply(i,i),e.apply(s,s),e.apply(o,o);const a=Math.min(r.x,i.x,s.x,o.x),c=Math.min(r.y,i.y,s.y,o.y),h=Math.max(r.x,i.x,s.x,o.x),d=Math.max(r.y,i.y,s.y,o.y);n.x=a,n.y=c,n.width=h-a,n.height=d-c}roundFrame(e,n,r,i,s){if(!(e.width<=0||e.height<=0||r.width<=0||r.height<=0)){if(s){const{a:o,b:a,c,d:h}=s;if((Math.abs(a)>1e-4||Math.abs(c)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(h)>1e-4))return}s=s?fv.copyFrom(s):fv.identity(),s.translate(-r.x,-r.y).scale(i.width/r.width,i.height/r.height).translate(i.x,i.y),this.transformAABB(s,e),e.ceil(n),this.transformAABB(s.invert(),e)}}}mP.extension={type:Ee.RendererSystem,name:"filter"};Me.add(mP);class DF{constructor(e){this.framebuffer=e,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=An.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const NF=new Ye;class gP{constructor(e){this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new ux(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Ye,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let n=this.renderer.context.extensions.drawBuffers,r=this.renderer.context.extensions.depthTexture;Se.PREFER_ENV===gu.WEBGL_LEGACY&&(n=null,r=null),n?e.drawBuffers=i=>n.drawBuffersWEBGL(i):(this.hasMRT=!1,e.drawBuffers=()=>{}),r||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)}bind(e,n,r=0){const{gl:i}=this;if(e){const s=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,i.bindFramebuffer(i.FRAMEBUFFER,s.framebuffer)),s.mipLevel!==r&&(e.dirtyId++,e.dirtyFormat++,s.mipLevel=r),s.dirtyId!==e.dirtyId&&(s.dirtyId=e.dirtyId,s.dirtyFormat!==e.dirtyFormat?(s.dirtyFormat=e.dirtyFormat,s.dirtySize=e.dirtySize,this.updateFramebuffer(e,r)):s.dirtySize!==e.dirtySize&&(s.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(let o=0;o<e.colorTextures.length;o++){const a=e.colorTextures[o];this.renderer.texture.unbind(a.parentTextureArray||a)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),n){const o=n.width>>r,a=n.height>>r,c=o/n.width;this.setViewport(n.x*c,n.y*c,o,a)}else{const o=e.width>>r,a=e.height>>r;this.setViewport(0,0,o,a)}}else this.current&&(this.current=null,i.bindFramebuffer(i.FRAMEBUFFER,null)),n?this.setViewport(n.x,n.y,n.width,n.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(e,n,r,i){const s=this.viewport;e=Math.round(e),n=Math.round(n),r=Math.round(r),i=Math.round(i),(s.width!==r||s.height!==i||s.x!==e||s.y!==n)&&(s.x=e,s.y=n,s.width=r,s.height=i,this.gl.viewport(e,n,r,i))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(e,n,r,i,s=z1.COLOR|z1.DEPTH){const{gl:o}=this;o.clearColor(e,n,r,i),o.clear(s)}initFramebuffer(e){const{gl:n}=this,r=new DF(n.createFramebuffer());return r.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=r,this.managedFramebuffers.push(e),e.disposeRunner.add(this),r}resizeFramebuffer(e){const{gl:n}=this,r=e.glFramebuffers[this.CONTEXT_UID];r.stencil&&(n.bindRenderbuffer(n.RENDERBUFFER,r.stencil),r.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,r.multisample,n.DEPTH24_STENCIL8,e.width,e.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,e.width,e.height));const i=e.colorTextures;let s=i.length;n.drawBuffers||(s=Math.min(s,1));for(let o=0;o<s;o++){const a=i[o],c=a.parentTextureArray||a;this.renderer.texture.bind(c,0),o===0&&r.msaaBuffer&&(n.bindRenderbuffer(n.RENDERBUFFER,r.msaaBuffer),n.renderbufferStorageMultisample(n.RENDERBUFFER,r.multisample,c._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height))}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)}updateFramebuffer(e,n){const{gl:r}=this,i=e.glFramebuffers[this.CONTEXT_UID],s=e.colorTextures;let o=s.length;r.drawBuffers||(o=Math.min(o,1)),i.multisample>1&&this.canMultisampleFramebuffer(e)?i.msaaBuffer=i.msaaBuffer||r.createRenderbuffer():i.msaaBuffer&&(r.deleteRenderbuffer(i.msaaBuffer),i.msaaBuffer=null,i.blitFramebuffer&&(i.blitFramebuffer.dispose(),i.blitFramebuffer=null));const a=[];for(let c=0;c<o;c++){const h=s[c],d=h.parentTextureArray||h;this.renderer.texture.bind(d,0),c===0&&i.msaaBuffer?(r.bindRenderbuffer(r.RENDERBUFFER,i.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,i.multisample,d._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,i.msaaBuffer)):(r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+c,h.target,d._glTextures[this.CONTEXT_UID].texture,n),a.push(r.COLOR_ATTACHMENT0+c))}if(a.length>1&&r.drawBuffers(a),e.depthTexture&&this.writeDepthTexture){const h=e.depthTexture;this.renderer.texture.bind(h,0),r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,h._glTextures[this.CONTEXT_UID].texture,n)}(e.stencil||e.depth)&&!(e.depthTexture&&this.writeDepthTexture)?(i.stencil=i.stencil||r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,i.stencil),i.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,i.multisample,r.DEPTH24_STENCIL8,e.width,e.height):r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,e.width,e.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,i.stencil)):i.stencil&&(r.deleteRenderbuffer(i.stencil),i.stencil=null)}canMultisampleFramebuffer(e){return this.renderer.context.webGLVersion!==1&&e.colorTextures.length<=1&&!e.depthTexture}detectSamples(e){const{msaaSamples:n}=this;let r=An.NONE;if(e<=1||n===null)return r;for(let i=0;i<n.length;i++)if(n[i]<=e){r=n[i];break}return r===1&&(r=An.NONE),r}blit(e,n,r){const{current:i,renderer:s,gl:o,CONTEXT_UID:a}=this;if(s.context.webGLVersion!==2||!i)return;const c=i.glFramebuffers[a];if(!c)return;if(!e){if(!c.msaaBuffer)return;const d=i.colorTextures[0];if(!d)return;c.blitFramebuffer||(c.blitFramebuffer=new ux(i.width,i.height),c.blitFramebuffer.addColorTexture(0,d)),e=c.blitFramebuffer,e.colorTextures[0]!==d&&(e.colorTextures[0]=d,e.dirtyId++,e.dirtyFormat++),(e.width!==i.width||e.height!==i.height)&&(e.width=i.width,e.height=i.height,e.dirtyId++,e.dirtySize++)}n||(n=NF,n.width=i.width,n.height=i.height),r||(r=n);const h=n.width===r.width&&n.height===r.height;this.bind(e),o.bindFramebuffer(o.READ_FRAMEBUFFER,c.framebuffer),o.blitFramebuffer(n.left,n.top,n.right,n.bottom,r.left,r.top,r.right,r.bottom,o.COLOR_BUFFER_BIT,h?o.NEAREST:o.LINEAR),o.bindFramebuffer(o.READ_FRAMEBUFFER,e.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(e,n){const r=e.glFramebuffers[this.CONTEXT_UID],i=this.gl;if(!r)return;delete e.glFramebuffers[this.CONTEXT_UID];const s=this.managedFramebuffers.indexOf(e);s>=0&&this.managedFramebuffers.splice(s,1),e.disposeRunner.remove(this),n||(i.deleteFramebuffer(r.framebuffer),r.msaaBuffer&&i.deleteRenderbuffer(r.msaaBuffer),r.stencil&&i.deleteRenderbuffer(r.stencil)),r.blitFramebuffer&&this.disposeFramebuffer(r.blitFramebuffer,n)}disposeAll(e){const n=this.managedFramebuffers;this.managedFramebuffers=[];for(let r=0;r<n.length;r++)this.disposeFramebuffer(n[r],e)}forceStencil(){const e=this.current;if(!e)return;const n=e.glFramebuffers[this.CONTEXT_UID];if(!n||n.stencil)return;e.stencil=!0;const r=e.width,i=e.height,s=this.gl,o=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,o),n.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,n.multisample,s.DEPTH24_STENCIL8,r,i):s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,r,i),n.stencil=o,s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,o)}reset(){this.current=this.unknownFramebuffer,this.viewport=new Ye}destroy(){this.renderer=null}}gP.extension={type:Ee.RendererSystem,name:"framebuffer"};Me.add(gP);const pv={5126:4,5123:2,5121:1};class yP{constructor(e){this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl,n=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,n.webGLVersion!==2){let r=this.renderer.context.extensions.vertexArrayObject;Se.PREFER_ENV===gu.WEBGL_LEGACY&&(r=null),r?(e.createVertexArray=()=>r.createVertexArrayOES(),e.bindVertexArray=i=>r.bindVertexArrayOES(i),e.deleteVertexArray=i=>r.deleteVertexArrayOES(i)):(this.hasVao=!1,e.createVertexArray=()=>null,e.bindVertexArray=()=>null,e.deleteVertexArray=()=>null)}if(n.webGLVersion!==2){const r=e.getExtension("ANGLE_instanced_arrays");r?(e.vertexAttribDivisor=(i,s)=>r.vertexAttribDivisorANGLE(i,s),e.drawElementsInstanced=(i,s,o,a,c)=>r.drawElementsInstancedANGLE(i,s,o,a,c),e.drawArraysInstanced=(i,s,o,a)=>r.drawArraysInstancedANGLE(i,s,o,a)):this.hasInstance=!1}this.canUseUInt32ElementIndex=n.webGLVersion===2||!!n.extensions.uint32ElementIndex}bind(e,n){n=n||this.renderer.shader.shader;const{gl:r}=this;let i=e.glVertexArrayObjects[this.CONTEXT_UID],s=!1;i||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=i={},s=!0);const o=i[n.program.id]||this.initGeometryVao(e,n,s);this._activeGeometry=e,this._activeVao!==o&&(this._activeVao=o,this.hasVao?r.bindVertexArray(o):this.activateVao(e,n.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const e=this._activeGeometry,n=this.renderer.buffer;for(let r=0;r<e.buffers.length;r++){const i=e.buffers[r];n.update(i)}}checkCompatibility(e,n){const r=e.attributes,i=n.attributeData;for(const s in i)if(!r[s])throw new Error(`shader and geometry incompatible, geometry missing the "${s}" attribute`)}getSignature(e,n){const r=e.attributes,i=n.attributeData,s=["g",e.id];for(const o in r)i[o]&&s.push(o,i[o].location);return s.join("-")}initGeometryVao(e,n,r=!0){const i=this.gl,s=this.CONTEXT_UID,o=this.renderer.buffer,a=n.program;a.glPrograms[s]||this.renderer.shader.generateProgram(n),this.checkCompatibility(e,a);const c=this.getSignature(e,a),h=e.glVertexArrayObjects[this.CONTEXT_UID];let d=h[c];if(d)return h[a.id]=d,d;const m=e.buffers,f=e.attributes,y={},v={};for(const S in m)y[S]=0,v[S]=0;for(const S in f)!f[S].size&&a.attributeData[S]?f[S].size=a.attributeData[S].size:f[S].size||console.warn(`PIXI Geometry attribute '${S}' size cannot be determined (likely the bound shader does not have the attribute)`),y[f[S].buffer]+=f[S].size*pv[f[S].type];for(const S in f){const C=f[S],_=C.size;C.stride===void 0&&(y[C.buffer]===_*pv[C.type]?C.stride=0:C.stride=y[C.buffer]),C.start===void 0&&(C.start=v[C.buffer],v[C.buffer]+=_*pv[C.type])}d=i.createVertexArray(),i.bindVertexArray(d);for(let S=0;S<m.length;S++){const C=m[S];o.bind(C),r&&C._glBuffers[s].refCount++}return this.activateVao(e,a),h[a.id]=d,h[c]=d,i.bindVertexArray(null),o.unbind(To.ARRAY_BUFFER),d}disposeGeometry(e,n){var a;if(!this.managedGeometries[e.id])return;delete this.managedGeometries[e.id];const r=e.glVertexArrayObjects[this.CONTEXT_UID],i=this.gl,s=e.buffers,o=(a=this.renderer)==null?void 0:a.buffer;if(e.disposeRunner.remove(this),!!r){if(o)for(let c=0;c<s.length;c++){const h=s[c]._glBuffers[this.CONTEXT_UID];h&&(h.refCount--,h.refCount===0&&!n&&o.dispose(s[c],n))}if(!n){for(const c in r)if(c[0]==="g"){const h=r[c];this._activeVao===h&&this.unbind(),i.deleteVertexArray(h)}}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(e){const n=Object.keys(this.managedGeometries);for(let r=0;r<n.length;r++)this.disposeGeometry(this.managedGeometries[n[r]],e)}activateVao(e,n){const r=this.gl,i=this.CONTEXT_UID,s=this.renderer.buffer,o=e.buffers,a=e.attributes;e.indexBuffer&&s.bind(e.indexBuffer);let c=null;for(const h in a){const d=a[h],m=o[d.buffer],f=m._glBuffers[i];if(n.attributeData[h]){c!==f&&(s.bind(m),c=f);const y=n.attributeData[h].location;if(r.enableVertexAttribArray(y),r.vertexAttribPointer(y,d.size,d.type||r.FLOAT,d.normalized,d.stride,d.start),d.instance)if(this.hasInstance)r.vertexAttribDivisor(y,d.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(e,n,r,i){const{gl:s}=this,o=this._activeGeometry;if(o.indexBuffer){const a=o.indexBuffer.data.BYTES_PER_ELEMENT,c=a===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;a===2||a===4&&this.canUseUInt32ElementIndex?o.instanced?s.drawElementsInstanced(e,n||o.indexBuffer.data.length,c,(r||0)*a,i||1):s.drawElements(e,n||o.indexBuffer.data.length,c,(r||0)*a):console.warn("unsupported index buffer type: uint32")}else o.instanced?s.drawArraysInstanced(e,r,n||o.getSize(),i||1):s.drawArrays(e,r,n||o.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}yP.extension={type:Ee.RendererSystem,name:"geometry"};Me.add(yP);const aT=new en;class t_{constructor(e,n){this._texture=e,this.mapCoord=new en,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof n>"u"?.5:n,this.isSimple=!1}get texture(){return this._texture}set texture(e){this._texture=e,this._textureID=-1}multiplyUvs(e,n){n===void 0&&(n=e);const r=this.mapCoord;for(let i=0;i<e.length;i+=2){const s=e[i],o=e[i+1];n[i]=s*r.a+o*r.c+r.tx,n[i+1]=s*r.b+o*r.d+r.ty}return n}update(e){const n=this._texture;if(!n||!n.valid||!e&&this._textureID===n._updateID)return!1;this._textureID=n._updateID,this._updateID++;const r=n._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);const i=n.orig,s=n.trim;s&&(aT.set(i.width/s.width,0,0,i.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(aT));const o=n.baseTexture,a=this.uClampFrame,c=this.clampMargin/o.resolution,h=this.clampOffset;return a[0]=(n._frame.x+c+h)/o.width,a[1]=(n._frame.y+c+h)/o.height,a[2]=(n._frame.x+n._frame.width-c+h)/o.width,a[3]=(n._frame.y+n._frame.height-c+h)/o.height,this.uClampOffset[0]=h/o.realWidth,this.uClampOffset[1]=h/o.realHeight,this.isSimple=n._frame.width===o.width&&n._frame.height===o.height&&n.rotate===0,!0}}var LF=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,FF=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;class BF extends fr{constructor(e,n,r){let i=null;typeof e!="string"&&n===void 0&&r===void 0&&(i=e,e=void 0,n=void 0,r=void 0),super(e||FF,n||LF,r),this.maskSprite=i,this.maskMatrix=new en}get maskSprite(){return this._maskSprite}set maskSprite(e){this._maskSprite=e,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(e,n,r,i){const s=this._maskSprite,o=s._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new t_(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,s).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=s.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,e.applyFilter(this,n,r,i))}}class UF{constructor(e=null){this.type=Un.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=fr.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=Un.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class vP{constructor(e){this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)}push(e,n){let r=n;if(!r.isMaskData){const s=this.maskDataPool.pop()||new UF;s.pooled=!0,s.maskObject=n,r=s}const i=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(r.copyCountersOrReset(i),r._colorMask=i?i._colorMask:15,r.autoDetect&&this.detect(r),r._target=e,r.type!==Un.SPRITE&&this.maskStack.push(r),r.enabled)switch(r.type){case Un.SCISSOR:this.renderer.scissor.push(r);break;case Un.STENCIL:this.renderer.stencil.push(r);break;case Un.SPRITE:r.copyCountersOrReset(null),this.pushSpriteMask(r);break;case Un.COLOR:this.pushColorMask(r);break}r.type===Un.SPRITE&&this.maskStack.push(r)}pop(e){const n=this.maskStack.pop();if(!(!n||n._target!==e)){if(n.enabled)switch(n.type){case Un.SCISSOR:this.renderer.scissor.pop(n);break;case Un.STENCIL:this.renderer.stencil.pop(n.maskObject);break;case Un.SPRITE:this.popSpriteMask(n);break;case Un.COLOR:this.popColorMask(n);break}if(n.reset(),n.pooled&&this.maskDataPool.push(n),this.maskStack.length!==0){const r=this.maskStack[this.maskStack.length-1];r.type===Un.SPRITE&&r._filters&&(r._filters[0].maskSprite=r.maskObject)}}}detect(e){const n=e.maskObject;n?n.isSprite?e.type=Un.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?e.type=Un.SCISSOR:e.type=Un.STENCIL:e.type=Un.COLOR}pushSpriteMask(e){const{maskObject:n}=e,r=e._target;let i=e._filters;i||(i=this.alphaMaskPool[this.alphaMaskIndex],i||(i=this.alphaMaskPool[this.alphaMaskIndex]=[new BF]));const s=this.renderer,o=s.renderTexture;let a,c;if(o.current){const d=o.current;a=e.resolution||d.resolution,c=e.multisample??d.multisample}else a=e.resolution||s.resolution,c=e.multisample??s.multisample;i[0].resolution=a,i[0].multisample=c,i[0].maskSprite=n;const h=r.filterArea;r.filterArea=n.getBounds(!0),s.filter.push(r,i),r.filterArea=h,e._filters||this.alphaMaskIndex++}popSpriteMask(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(e){const n=e._colorMask,r=e._colorMask=n&e.colorMask;r!==n&&this.renderer.gl.colorMask((r&1)!==0,(r&2)!==0,(r&4)!==0,(r&8)!==0)}popColorMask(e){const n=e._colorMask,r=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;r!==n&&this.renderer.gl.colorMask((r&1)!==0,(r&2)!==0,(r&4)!==0,(r&8)!==0)}destroy(){this.renderer=null}}vP.extension={type:Ee.RendererSystem,name:"mask"};Me.add(vP);class xP{constructor(e){this.renderer=e,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(e){const{gl:n}=this.renderer,r=this.getStackLength();this.maskStack=e;const i=this.getStackLength();i!==r&&(i===0?n.disable(this.glConst):(n.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const lT=new en,uT=[],Em=class extends xP{constructor(t){super(t),this.glConst=Se.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0}calcScissorRect(t){if(t._scissorRectLocal)return;const e=t._scissorRect,{maskObject:n}=t,{renderer:r}=this,i=r.renderTexture,s=n.getBounds(!0,uT.pop()??new Ye);this.roundFrameToPixels(s,i.current?i.current.resolution:r.resolution,i.sourceFrame,i.destinationFrame,r.projection.transform),e&&s.fit(e),t._scissorRectLocal=s}static isMatrixRotated(t){if(!t)return!1;const{a:e,b:n,c:r,d:i}=t;return(Math.abs(n)>1e-4||Math.abs(r)>1e-4)&&(Math.abs(e)>1e-4||Math.abs(i)>1e-4)}testScissor(t){const{maskObject:e}=t;if(!e.isFastRect||!e.isFastRect()||Em.isMatrixRotated(e.worldTransform)||Em.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(t);const n=t._scissorRectLocal;return n.width>0&&n.height>0}roundFrameToPixels(t,e,n,r,i){Em.isMatrixRotated(i)||(i=i?lT.copyFrom(i):lT.identity(),i.translate(-n.x,-n.y).scale(r.width/n.width,r.height/n.height).translate(r.x,r.y),this.renderer.filter.transformAABB(i,t),t.fit(r),t.x=Math.round(t.x*e),t.y=Math.round(t.y*e),t.width=Math.round(t.width*e),t.height=Math.round(t.height*e))}push(t){t._scissorRectLocal||this.calcScissorRect(t);const{gl:e}=this.renderer;t._scissorRect||e.enable(e.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=t._scissorRectLocal,this._useCurrent()}pop(t){const{gl:e}=this.renderer;t&&uT.push(t._scissorRectLocal),this.getStackLength()>0?this._useCurrent():e.disable(e.SCISSOR_TEST)}_useCurrent(){const t=this.maskStack[this.maskStack.length-1]._scissorRect;let e;this.renderer.renderTexture.current?e=t.y:e=this.renderer.height-t.height-t.y,this.renderer.gl.scissor(t.x,e,t.width,t.height)}};let wP=Em;wP.extension={type:Ee.RendererSystem,name:"scissor"};Me.add(wP);class _P extends xP{constructor(e){super(e),this.glConst=Se.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0}push(e){const n=e.maskObject,{gl:r}=this.renderer,i=e._stencilCounter;i===0&&(this.renderer.framebuffer.forceStencil(),r.clearStencil(0),r.clear(r.STENCIL_BUFFER_BIT),r.enable(r.STENCIL_TEST)),e._stencilCounter++;const s=e._colorMask;s!==0&&(e._colorMask=0,r.colorMask(!1,!1,!1,!1)),r.stencilFunc(r.EQUAL,i,4294967295),r.stencilOp(r.KEEP,r.KEEP,r.INCR),n.renderable=!0,n.render(this.renderer),this.renderer.batch.flush(),n.renderable=!1,s!==0&&(e._colorMask=s,r.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)),this._useCurrent()}pop(e){const n=this.renderer.gl;if(this.getStackLength()===0)n.disable(n.STENCIL_TEST);else{const r=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,i=r?r._colorMask:15;i!==0&&(r._colorMask=0,n.colorMask(!1,!1,!1,!1)),n.stencilOp(n.KEEP,n.KEEP,n.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,i!==0&&(r._colorMask=i,n.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)),this._useCurrent()}}_useCurrent(){const e=this.renderer.gl;e.stencilFunc(e.EQUAL,this.getStackLength(),4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)}}_P.extension={type:Ee.RendererSystem,name:"stencil"};Me.add(_P);class SP{constructor(e){this.renderer=e,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return ot("7.0.0","renderer.plugins.extract has moved to renderer.extract"),e.extract}},prepare:{enumerable:!1,get(){return ot("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),e.prepare}},interaction:{enumerable:!1,get(){return ot("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),e.events}}})}init(){const e=this.rendererPlugins;for(const n in e)this.plugins[n]=new e[n](this.renderer)}destroy(){for(const e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null}}SP.extension={type:[Ee.RendererSystem,Ee.CanvasRendererSystem],name:"_plugin"};Me.add(SP);class bP{constructor(e){this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new en,this.transform=null}update(e,n,r,i){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=n||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,r,i),this.transform&&this.projectionMatrix.append(this.transform);const s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)}calculateProjection(e,n,r,i){const s=this.projectionMatrix,o=i?-1:1;s.identity(),s.a=1/n.width*2,s.d=o*(1/n.height*2),s.tx=-1-n.x*s.a,s.ty=-o-n.y*s.d}setTransform(e){}destroy(){this.renderer=null}}bP.extension={type:Ee.RendererSystem,name:"projection"};Me.add(bP);const zF=new ey;class EP{constructor(e){this.renderer=e,this._tempMatrix=new en}generateTexture(e,n){const{region:r,...i}=n||{},s=r||e.getLocalBounds(null,!0);s.width===0&&(s.width=1),s.height===0&&(s.height=1);const o=yu.create({width:s.width,height:s.height,...i});this._tempMatrix.tx=-s.x,this._tempMatrix.ty=-s.y;const a=e.transform;return e.transform=zF,this.renderer.render(e,{renderTexture:o,transform:this._tempMatrix,skipUpdateTransform:!!e.parent,blit:!0}),e.transform=a,o}destroy(){}}EP.extension={type:[Ee.RendererSystem,Ee.CanvasRendererSystem],name:"textureGenerator"};Me.add(EP);const Rl=new Ye,zh=new Ye;class TP{constructor(e){this.renderer=e,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Ye,this.destinationFrame=new Ye,this.viewportFrame=new Ye}contextChange(){var n;const e=(n=this.renderer)==null?void 0:n.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha)}bind(e=null,n,r){const i=this.renderer;this.current=e;let s,o,a;e?(s=e.baseTexture,a=s.resolution,n||(Rl.width=e.frame.width,Rl.height=e.frame.height,n=Rl),r||(zh.x=e.frame.x,zh.y=e.frame.y,zh.width=n.width,zh.height=n.height,r=zh),o=s.framebuffer):(a=i.resolution,n||(Rl.width=i._view.screen.width,Rl.height=i._view.screen.height,n=Rl),r||(r=Rl,r.width=n.width,r.height=n.height));const c=this.viewportFrame;c.x=r.x*a,c.y=r.y*a,c.width=r.width*a,c.height=r.height*a,e||(c.y=i.view.height-(c.y+c.height)),c.ceil(),this.renderer.framebuffer.bind(o,c),this.renderer.projection.update(r,n,a,!o),e?this.renderer.mask.setMaskStack(s.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(n),this.destinationFrame.copyFrom(r)}clear(e,n){const r=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,i=kt.shared.setValue(e||r);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&i.premultiply(i.alpha);const s=this.destinationFrame,o=this.current?this.current.baseTexture:this.renderer._view.screen,a=s.width!==o.width||s.height!==o.height;if(a){let{x:c,y:h,width:d,height:m}=this.viewportFrame;c=Math.round(c),h=Math.round(h),d=Math.round(d),m=Math.round(m),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(c,h,d,m)}this.renderer.framebuffer.clear(i.red,i.green,i.blue,i.alpha,n),a&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}TP.extension={type:Ee.RendererSystem,name:"renderTexture"};Me.add(TP);class $F{constructor(e,n){this.program=e,this.uniformData=n,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function HF(t,e){const n={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const s=e.getActiveAttrib(t,i);if(s.name.startsWith("gl_"))continue;const o=lP(e,s.type),a={type:o,name:s.name,size:aP(o),location:e.getAttribLocation(t,s.name)};n[s.name]=a}return n}function GF(t,e){const n={},r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<r;i++){const s=e.getActiveUniform(t,i),o=s.name.replace(/\[.*?\]$/,""),a=!!s.name.match(/\[.*?\]$/),c=lP(e,s.type);n[o]={name:o,index:i,type:c,size:s.size,isArray:a,value:sP(c,s.size)}}return n}function WF(t,e){var c;const n=tT(t,t.VERTEX_SHADER,e.vertexSrc),r=tT(t,t.FRAGMENT_SHADER,e.fragmentSrc),i=t.createProgram();t.attachShader(i,n),t.attachShader(i,r);const s=(c=e.extra)==null?void 0:c.transformFeedbackVaryings;if(s&&(typeof t.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):t.transformFeedbackVaryings(i,s.names,s.bufferMode==="separate"?t.SEPARATE_ATTRIBS:t.INTERLEAVED_ATTRIBS)),t.linkProgram(i),t.getProgramParameter(i,t.LINK_STATUS)||xF(t,i,n,r),e.attributeData=HF(i,t),e.uniformData=GF(i,t),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){const h=Object.keys(e.attributeData);h.sort((d,m)=>d>m?1:-1);for(let d=0;d<h.length;d++)e.attributeData[h[d]].location=d,t.bindAttribLocation(i,d,h[d]);t.linkProgram(i)}t.deleteShader(n),t.deleteShader(r);const o={};for(const h in e.uniformData){const d=e.uniformData[h];o[h]={location:t.getUniformLocation(i,h),value:sP(d.type,d.size)}}return new $F(i,o)}function jF(t,e,n,r,i){n.buffer.update(i)}const VF={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},CP={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function XF(t){const e=t.map(s=>({data:s,offset:0,dataLen:0,dirty:0}));let n=0,r=0,i=0;for(let s=0;s<e.length;s++){const o=e[s];if(n=CP[o.data.type],o.data.size>1&&(n=Math.max(n,16)*o.data.size),o.dataLen=n,r%n!==0&&r<16){const a=r%n%16;r+=a,i+=a}r+n>16?(i=Math.ceil(i/16)*16,o.offset=i,i+=n,r=n):(o.offset=i,r+=n,i+=n)}return i=Math.ceil(i/16)*16,{uboElements:e,size:i}}function qF(t,e){const n=[];for(const r in t)e[r]&&n.push(e[r]);return n.sort((r,i)=>r.index-i.index),n}function YF(t,e){if(!t.autoManage)return{size:0,syncFunc:jF};const n=qF(t.uniforms,e),{uboElements:r,size:i}=XF(n),s=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let o=0;o<r.length;o++){const a=r[o],c=t.uniforms[a.data.name],h=a.data.name;let d=!1;for(let m=0;m<Pc.length;m++){const f=Pc[m];if(f.codeUbo&&f.test(a.data,c)){s.push(`offset = ${a.offset/4};`,Pc[m].codeUbo(a.data.name,c)),d=!0;break}}if(!d)if(a.data.size>1){const m=aP(a.data.type),f=Math.max(CP[a.data.type]/16,1),y=m/f,v=(4-y%4)%4;s.push(`
                cv = ud.${h}.value;
                v = uv.${h};
                offset = ${a.offset/4};

                t = 0;

                for(var i=0; i < ${a.data.size*f}; i++)
                {
                    for(var j = 0; j < ${y}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${v};
                }

                `)}else{const m=VF[a.data.type];s.push(`
                cv = ud.${h}.value;
                v = uv.${h};
                offset = ${a.offset/4};
                ${m};
                `)}}return s.push(`
       renderer.buffer.update(buffer);
    `),{size:i,syncFunc:new Function("ud","uv","renderer","syncData","buffer",s.join(`
`))}}let QF=0;const Hp={textureCount:0,uboCount:0};class IP{constructor(e){this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=QF++}systemCheck(){if(!_F())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(e){this.gl=e,this.reset()}bind(e,n){e.disposeRunner.add(this),e.uniforms.globals=this.renderer.globalUniforms;const r=e.program,i=r.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==r&&(this.program=r,this.gl.useProgram(i.program)),n||(Hp.textureCount=0,Hp.uboCount=0,this.syncUniformGroup(e.uniformGroup,Hp)),i}setUniforms(e){const n=this.shader.program,r=n.glPrograms[this.renderer.CONTEXT_UID];n.syncUniforms(r.uniformData,e,this.renderer)}syncUniformGroup(e,n){const r=this.getGlProgram();(!e.static||e.dirtyId!==r.uniformDirtyGroups[e.id])&&(r.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,r,n))}syncUniforms(e,n,r){(e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e))(n.uniformData,e.uniforms,this.renderer,r)}createSyncGroups(e){const n=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[n]||(this.cache[n]=gF(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[n],e.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(e,n){const r=this.getGlProgram();if(!e.static||e.dirtyId!==0||!r.uniformGroups[e.id]){e.dirtyId=0;const i=r.uniformGroups[e.id]||this.createSyncBufferGroup(e,r,n);e.buffer.update(),i(r.uniformData,e.uniforms,this.renderer,Hp,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,r.uniformBufferBindings[n])}createSyncBufferGroup(e,n,r){const{gl:i}=this.renderer;this.renderer.buffer.bind(e.buffer);const s=this.gl.getUniformBlockIndex(n.program,r);n.uniformBufferBindings[r]=this.shader.uniformBindCount,i.uniformBlockBinding(n.program,s,this.shader.uniformBindCount),this.shader.uniformBindCount++;const o=this.getSignature(e,this.shader.program.uniformData,"ubo");let a=this._uboCache[o];if(a||(a=this._uboCache[o]=YF(e,this.shader.program.uniformData)),e.autoManage){const c=new Float32Array(a.size/4);e.buffer.update(c)}return n.uniformGroups[e.id]=a.syncFunc,n.uniformGroups[e.id]}getSignature(e,n,r){const i=e.uniforms,s=[`${r}-`];for(const o in i)s.push(o),n[o]&&s.push(n[o].type);return s.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(e){const n=this.gl,r=e.program,i=WF(n,r);return r.glPrograms[this.renderer.CONTEXT_UID]=i,i}reset(){this.program=null,this.shader=null}disposeShader(e){this.shader===e&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}IP.extension={type:Ee.RendererSystem,name:"shader"};Me.add(IP);class iy{constructor(e){this.renderer=e}run(e){const{renderer:n}=this;n.runners.init.emit(n.options),e.hello&&console.log(`PixiJS 7.2.4 - ${n.rendererLogId} - https://pixijs.com`),n.resize(n.screen.width,n.screen.height)}destroy(){}}iy.defaultOptions={hello:!1};iy.extension={type:[Ee.RendererSystem,Ee.CanvasRendererSystem],name:"startup"};Me.add(iy);function KF(t,e=[]){return e[Ue.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ue.ADD]=[t.ONE,t.ONE],e[Ue.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ue.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ue.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ue.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ue.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ue.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ue.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ue.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ue.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ue.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ue.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ue.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ue.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ue.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ue.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ue.NONE]=[0,0],e[Ue.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ue.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[Ue.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ue.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[Ue.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[Ue.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[Ue.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[Ue.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[Ue.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[Ue.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[Ue.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[Ue.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e}const ZF=0,JF=1,e4=2,t4=3,n4=4,r4=5,cx=class{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=Ue.NONE,this._blendEq=!1,this.map=[],this.map[ZF]=this.setBlend,this.map[JF]=this.setOffset,this.map[e4]=this.setCullFace,this.map[t4]=this.setDepthTest,this.map[n4]=this.setFrontFace,this.map[r4]=this.setDepthMask,this.checks=[],this.defaultState=new ua,this.defaultState.blend=!0}contextChange(t){this.gl=t,this.blendModes=KF(t),this.set(this.defaultState),this.reset()}set(t){if(t=t||this.defaultState,this.stateId!==t.data){let e=this.stateId^t.data,n=0;for(;e;)e&1&&this.map[n].call(this,!!(t.data&1<<n)),e=e>>1,n++;this.stateId=t.data}for(let e=0;e<this.checks.length;e++)this.checks[e](this,t)}forceState(t){t=t||this.defaultState;for(let e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(let e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data}setBlend(t){this.updateCheck(cx.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)}setOffset(t){this.updateCheck(cx.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(t){this.gl.depthMask(t)}setCullFace(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])}setBlendMode(t){if(t===this.blendMode)return;this.blendMode=t;const e=this.blendModes[t],n=this.gl;e.length===2?n.blendFunc(e[0],e[1]):n.blendFuncSeparate(e[0],e[1],e[2],e[3]),e.length===6?(this._blendEq=!0,n.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD))}setPolygonOffset(t,e){this.gl.polygonOffset(t,e)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(t,e){const n=this.checks.indexOf(t);e&&n===-1?this.checks.push(t):!e&&n!==-1&&this.checks.splice(n,1)}static checkBlendMode(t,e){t.setBlendMode(e.blendMode)}static checkPolygonOffset(t,e){t.setPolygonOffset(1,e.polygonOffset)}destroy(){this.gl=null}};let AP=cx;AP.extension={type:Ee.RendererSystem,name:"state"};Me.add(AP);class i4 extends mf{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(e){this.addRunners(...e.runners);const n=(e.priority??[]).filter(i=>e.systems[i]),r=[...n,...Object.keys(e.systems).filter(i=>!n.includes(i))];for(const i of r)this.addSystem(e.systems[i],i)}addRunners(...e){e.forEach(n=>{this.runners[n]=new Ms(n)})}addSystem(e,n){const r=new e(this);if(this[n])throw new Error(`Whoops! The name "${n}" is already in use`);this[n]=r,this._systemsHash[n]=r;for(const i in this.runners)this.runners[i].add(r);return this}emitWithCustomOptions(e,n){const r=Object.keys(this._systemsHash);e.items.forEach(i=>{const s=r.find(o=>this._systemsHash[o]===i);i[e.name](n[s])})}destroy(){Object.values(this.runners).forEach(e=>{e.destroy()}),this._systemsHash={}}}const Tm=class{constructor(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=Tm.defaultMaxIdle,this.checkCountMax=Tm.defaultCheckCountMax,this.mode=Tm.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==Hw.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const t=this.renderer.texture,e=t.managedTextures;let n=!1;for(let r=0;r<e.length;r++){const i=e[r];!i.framebuffer&&this.count-i.touched>this.maxIdle&&(t.destroyTexture(i,!0),e[r]=null,n=!0)}if(n){let r=0;for(let i=0;i<e.length;i++)e[i]!==null&&(e[r++]=e[i]);e.length=r}}unload(t){const e=this.renderer.texture,n=t._texture;n&&!n.framebuffer&&e.destroyTexture(n);for(let r=t.children.length-1;r>=0;r--)this.unload(t.children[r])}destroy(){this.renderer=null}};let Ts=Tm;Ts.defaultMode=Hw.AUTO;Ts.defaultMaxIdle=60*60;Ts.defaultCheckCountMax=60*10;Ts.extension={type:Ee.RendererSystem,name:"textureGC"};Me.add(Ts);class mv{constructor(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=Fe.UNSIGNED_BYTE,this.internalFormat=me.RGBA,this.samplerType=0}}function s4(t){let e;return"WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext?e={[Fe.UNSIGNED_BYTE]:{[me.RGBA]:t.RGBA8,[me.RGB]:t.RGB8,[me.RG]:t.RG8,[me.RED]:t.R8,[me.RGBA_INTEGER]:t.RGBA8UI,[me.RGB_INTEGER]:t.RGB8UI,[me.RG_INTEGER]:t.RG8UI,[me.RED_INTEGER]:t.R8UI,[me.ALPHA]:t.ALPHA,[me.LUMINANCE]:t.LUMINANCE,[me.LUMINANCE_ALPHA]:t.LUMINANCE_ALPHA},[Fe.BYTE]:{[me.RGBA]:t.RGBA8_SNORM,[me.RGB]:t.RGB8_SNORM,[me.RG]:t.RG8_SNORM,[me.RED]:t.R8_SNORM,[me.RGBA_INTEGER]:t.RGBA8I,[me.RGB_INTEGER]:t.RGB8I,[me.RG_INTEGER]:t.RG8I,[me.RED_INTEGER]:t.R8I},[Fe.UNSIGNED_SHORT]:{[me.RGBA_INTEGER]:t.RGBA16UI,[me.RGB_INTEGER]:t.RGB16UI,[me.RG_INTEGER]:t.RG16UI,[me.RED_INTEGER]:t.R16UI,[me.DEPTH_COMPONENT]:t.DEPTH_COMPONENT16},[Fe.SHORT]:{[me.RGBA_INTEGER]:t.RGBA16I,[me.RGB_INTEGER]:t.RGB16I,[me.RG_INTEGER]:t.RG16I,[me.RED_INTEGER]:t.R16I},[Fe.UNSIGNED_INT]:{[me.RGBA_INTEGER]:t.RGBA32UI,[me.RGB_INTEGER]:t.RGB32UI,[me.RG_INTEGER]:t.RG32UI,[me.RED_INTEGER]:t.R32UI,[me.DEPTH_COMPONENT]:t.DEPTH_COMPONENT24},[Fe.INT]:{[me.RGBA_INTEGER]:t.RGBA32I,[me.RGB_INTEGER]:t.RGB32I,[me.RG_INTEGER]:t.RG32I,[me.RED_INTEGER]:t.R32I},[Fe.FLOAT]:{[me.RGBA]:t.RGBA32F,[me.RGB]:t.RGB32F,[me.RG]:t.RG32F,[me.RED]:t.R32F,[me.DEPTH_COMPONENT]:t.DEPTH_COMPONENT32F},[Fe.HALF_FLOAT]:{[me.RGBA]:t.RGBA16F,[me.RGB]:t.RGB16F,[me.RG]:t.RG16F,[me.RED]:t.R16F},[Fe.UNSIGNED_SHORT_5_6_5]:{[me.RGB]:t.RGB565},[Fe.UNSIGNED_SHORT_4_4_4_4]:{[me.RGBA]:t.RGBA4},[Fe.UNSIGNED_SHORT_5_5_5_1]:{[me.RGBA]:t.RGB5_A1},[Fe.UNSIGNED_INT_2_10_10_10_REV]:{[me.RGBA]:t.RGB10_A2,[me.RGBA_INTEGER]:t.RGB10_A2UI},[Fe.UNSIGNED_INT_10F_11F_11F_REV]:{[me.RGB]:t.R11F_G11F_B10F},[Fe.UNSIGNED_INT_5_9_9_9_REV]:{[me.RGB]:t.RGB9_E5},[Fe.UNSIGNED_INT_24_8]:{[me.DEPTH_STENCIL]:t.DEPTH24_STENCIL8},[Fe.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[me.DEPTH_STENCIL]:t.DEPTH32F_STENCIL8}}:e={[Fe.UNSIGNED_BYTE]:{[me.RGBA]:t.RGBA,[me.RGB]:t.RGB,[me.ALPHA]:t.ALPHA,[me.LUMINANCE]:t.LUMINANCE,[me.LUMINANCE_ALPHA]:t.LUMINANCE_ALPHA},[Fe.UNSIGNED_SHORT_5_6_5]:{[me.RGB]:t.RGB},[Fe.UNSIGNED_SHORT_4_4_4_4]:{[me.RGBA]:t.RGBA},[Fe.UNSIGNED_SHORT_5_5_5_1]:{[me.RGBA]:t.RGBA}},e}class PP{constructor(e){this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new Ge,this.hasIntegerTextures=!1}contextChange(){const e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=s4(e);const n=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=n;for(let i=0;i<n;i++)this.boundTextures[i]=null;this.emptyTextures={};const r=new mv(e.createTexture());e.bindTexture(e.TEXTURE_2D,r.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=r,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new mv(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(let i=0;i<6;i++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(let i=0;i<this.boundTextures.length;i++)this.bind(null,i)}bind(e,n=0){const{gl:r}=this;if(e=e==null?void 0:e.castToBaseTexture(),e!=null&&e.valid&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;const i=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[n]!==e&&(this.currentLocation!==n&&(this.currentLocation=n,r.activeTexture(r.TEXTURE0+n)),r.bindTexture(e.target,i.texture)),i.dirtyId!==e.dirtyId?(this.currentLocation!==n&&(this.currentLocation=n,r.activeTexture(r.TEXTURE0+n)),this.updateTexture(e)):i.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(e),this.boundTextures[n]=e}else this.currentLocation!==n&&(this.currentLocation=n,r.activeTexture(r.TEXTURE0+n)),r.bindTexture(r.TEXTURE_2D,this.emptyTextures[r.TEXTURE_2D].texture),this.boundTextures[n]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture}unbind(e){const{gl:n,boundTextures:r}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let i=0;i<r.length;i++)r[i]===this.unknownTexture&&this.bind(null,i)}for(let i=0;i<r.length;i++)r[i]===e&&(this.currentLocation!==i&&(n.activeTexture(n.TEXTURE0+i),this.currentLocation=i),n.bindTexture(e.target,this.emptyTextures[e.target].texture),r[i]=null)}ensureSamplerType(e){const{boundTextures:n,hasIntegerTextures:r,CONTEXT_UID:i}=this;if(r)for(let s=e-1;s>=0;--s){const o=n[s];o&&o._glTextures[i].samplerType!==$1.FLOAT&&this.renderer.texture.unbind(o)}}initTexture(e){const n=new mv(this.gl.createTexture());return n.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=n,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),n}initTextureType(e,n){var r;n.internalFormat=((r=this.internalFormats[e.type])==null?void 0:r[e.format])??e.format,this.webGLVersion===2&&e.type===Fe.HALF_FLOAT?n.type=this.gl.HALF_FLOAT:n.type=e.type}updateTexture(e){var i;const n=e._glTextures[this.CONTEXT_UID];if(!n)return;const r=this.renderer;if(this.initTextureType(e,n),(i=e.resource)!=null&&i.upload(r,e,n))n.samplerType!==$1.FLOAT&&(this.hasIntegerTextures=!0);else{const s=e.realWidth,o=e.realHeight,a=r.gl;(n.width!==s||n.height!==o||n.dirtyId<0)&&(n.width=s,n.height=o,a.texImage2D(e.target,0,n.internalFormat,s,o,0,e.format,n.type,null))}e.dirtyStyleId!==n.dirtyStyleId&&this.updateTextureStyle(e),n.dirtyId=e.dirtyId}destroyTexture(e,n){const{gl:r}=this;if(e=e.castToBaseTexture(),e._glTextures[this.CONTEXT_UID]&&(this.unbind(e),r.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!n)){const i=this.managedTextures.indexOf(e);i!==-1&&Ic(this.managedTextures,i,1)}}updateTextureStyle(e){var r;const n=e._glTextures[this.CONTEXT_UID];n&&((e.mipmap===Io.POW2||this.webGLVersion!==2)&&!e.isPowerOfTwo?n.mipmap=!1:n.mipmap=e.mipmap>=1,this.webGLVersion!==2&&!e.isPowerOfTwo?n.wrapMode=Jo.CLAMP:n.wrapMode=e.wrapMode,(r=e.resource)!=null&&r.style(this.renderer,e,n)||this.setStyle(e,n),n.dirtyStyleId=e.dirtyStyleId)}setStyle(e,n){const r=this.gl;if(n.mipmap&&e.mipmap!==Io.ON_MANUAL&&r.generateMipmap(e.target),r.texParameteri(e.target,r.TEXTURE_WRAP_S,n.wrapMode),r.texParameteri(e.target,r.TEXTURE_WRAP_T,n.wrapMode),n.mipmap){r.texParameteri(e.target,r.TEXTURE_MIN_FILTER,e.scaleMode===ns.LINEAR?r.LINEAR_MIPMAP_LINEAR:r.NEAREST_MIPMAP_NEAREST);const i=this.renderer.context.extensions.anisotropicFiltering;if(i&&e.anisotropicLevel>0&&e.scaleMode===ns.LINEAR){const s=Math.min(e.anisotropicLevel,r.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT));r.texParameterf(e.target,i.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else r.texParameteri(e.target,r.TEXTURE_MIN_FILTER,e.scaleMode===ns.LINEAR?r.LINEAR:r.NEAREST);r.texParameteri(e.target,r.TEXTURE_MAG_FILTER,e.scaleMode===ns.LINEAR?r.LINEAR:r.NEAREST)}destroy(){this.renderer=null}}PP.extension={type:Ee.RendererSystem,name:"texture"};Me.add(PP);class kP{constructor(e){this.renderer=e}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:n,CONTEXT_UID:r}=this,i=e._glTransformFeedbacks[r]||this.createGLTransformFeedback(e);n.bindTransformFeedback(n.TRANSFORM_FEEDBACK,i)}unbind(){const{gl:e}=this;e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(e,n){const{gl:r,renderer:i}=this;n&&i.shader.bind(n),r.beginTransformFeedback(e)}endTransformFeedback(){const{gl:e}=this;e.endTransformFeedback()}createGLTransformFeedback(e){const{gl:n,renderer:r,CONTEXT_UID:i}=this,s=n.createTransformFeedback();e._glTransformFeedbacks[i]=s,n.bindTransformFeedback(n.TRANSFORM_FEEDBACK,s);for(let o=0;o<e.buffers.length;o++){const a=e.buffers[o];a&&(r.buffer.update(a),a._glBuffers[i].refCount++,n.bindBufferBase(n.TRANSFORM_FEEDBACK_BUFFER,o,a._glBuffers[i].buffer||null))}return n.bindTransformFeedback(n.TRANSFORM_FEEDBACK,null),e.disposeRunner.add(this),s}disposeTransformFeedback(e,n){const r=e._glTransformFeedbacks[this.CONTEXT_UID],i=this.gl;e.disposeRunner.remove(this);const s=this.renderer.buffer;if(s)for(let o=0;o<e.buffers.length;o++){const a=e.buffers[o];if(!a)continue;const c=a._glBuffers[this.CONTEXT_UID];c&&(c.refCount--,c.refCount===0&&!n&&s.dispose(a,n))}r&&(n||i.deleteTransformFeedback(r),delete e._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}kP.extension={type:Ee.RendererSystem,name:"transformFeedback"};Me.add(kP);class sy{constructor(e){this.renderer=e}init(e){this.screen=new Ye(0,0,e.width,e.height),this.element=e.view||Se.ADAPTER.createCanvas(),this.resolution=e.resolution||Se.RESOLUTION,this.autoDensity=!!e.autoDensity}resizeView(e,n){this.element.width=Math.round(e*this.resolution),this.element.height=Math.round(n*this.resolution);const r=this.element.width/this.resolution,i=this.element.height/this.resolution;this.screen.width=r,this.screen.height=i,this.autoDensity&&(this.element.style.width=`${r}px`,this.element.style.height=`${i}px`),this.renderer.emit("resize",r,i),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(e){var n;e&&((n=this.element.parentNode)==null||n.removeChild(this.element)),this.renderer=null,this.element=null,this.screen=null}}sy.defaultOptions={width:800,height:600,resolution:Se.RESOLUTION,autoDensity:!1};sy.extension={type:[Ee.RendererSystem,Ee.CanvasRendererSystem],name:"_view"};Me.add(sy);Se.PREFER_ENV=gu.WEBGL2;Se.STRICT_TEXTURE_CACHE=!1;Se.RENDER_OPTIONS={...ry.defaultOptions,...ny.defaultOptions,...sy.defaultOptions,...iy.defaultOptions};Object.defineProperties(Se,{WRAP_MODE:{get(){return Ge.defaultOptions.wrapMode},set(t){ot("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),Ge.defaultOptions.wrapMode=t}},SCALE_MODE:{get(){return Ge.defaultOptions.scaleMode},set(t){ot("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),Ge.defaultOptions.scaleMode=t}},MIPMAP_TEXTURES:{get(){return Ge.defaultOptions.mipmap},set(t){ot("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),Ge.defaultOptions.mipmap=t}},ANISOTROPIC_LEVEL:{get(){return Ge.defaultOptions.anisotropicLevel},set(t){ot("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),Ge.defaultOptions.anisotropicLevel=t}},FILTER_RESOLUTION:{get(){return ot("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),fr.defaultResolution},set(t){fr.defaultResolution=t}},FILTER_MULTISAMPLE:{get(){return ot("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),fr.defaultMultisample},set(t){fr.defaultMultisample=t}},SPRITE_MAX_TEXTURES:{get(){return Es.defaultMaxTextures},set(t){ot("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),Es.defaultMaxTextures=t}},SPRITE_BATCH_SIZE:{get(){return Es.defaultBatchSize},set(t){ot("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),Es.defaultBatchSize=t}},CAN_UPLOAD_SAME_BUFFER:{get(){return Es.canUploadSameBuffer},set(t){ot("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),Es.canUploadSameBuffer=t}},GC_MODE:{get(){return Ts.defaultMode},set(t){ot("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),Ts.defaultMode=t}},GC_MAX_IDLE:{get(){return Ts.defaultMaxIdle},set(t){ot("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),Ts.defaultMaxIdle=t}},GC_MAX_CHECK_COUNT:{get(){return Ts.defaultCheckCountMax},set(t){ot("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),Ts.defaultCheckCountMax=t}},PRECISION_VERTEX:{get(){return Is.defaultVertexPrecision},set(t){ot("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),Is.defaultVertexPrecision=t}},PRECISION_FRAGMENT:{get(){return Is.defaultFragmentPrecision},set(t){ot("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),Is.defaultFragmentPrecision=t}}});var ll=(t=>(t[t.INTERACTION=50]="INTERACTION",t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY",t))(ll||{});class gv{constructor(e,n=null,r=0,i=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=e,this.context=n,this.priority=r,this.once=i}match(e,n=null){return this.fn===e&&this.context===n}emit(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));const n=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),n}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const n=this.next;return this.next=e?null:n,this.previous=null,n}}const wi=class{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new gv(null,null,1/0),this.deltaMS=1/wi.targetFPMS,this.elapsedMS=1/wi.targetFPMS,this._tick=t=>{this._requestId=null,this.started&&(this.update(t),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(t,e,n=ll.NORMAL){return this._addListener(new gv(t,e,n))}addOnce(t,e,n=ll.NORMAL){return this._addListener(new gv(t,e,n,!0))}_addListener(t){let e=this._head.next,n=this._head;if(!e)t.connect(n);else{for(;e;){if(t.priority>e.priority){t.connect(n);break}n=e,e=e.next}t.previous||t.connect(n)}return this._startIfPossible(),this}remove(t,e){let n=this._head.next;for(;n;)n.match(t,e)?n=n.destroy():n=n.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let t=0,e=this._head;for(;e=e.next;)t++;return t}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let t=this._head.next;for(;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}}update(t=performance.now()){let e;if(t>this.lastTime){if(e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){const i=t-this._lastFrame|0;if(i<this._minElapsedMS)return;this._lastFrame=t-i%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*wi.targetFPMS;const n=this._head;let r=n.next;for(;r;)r=r.emit(this.deltaTime);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(t){const e=Math.min(this.maxFPS,t),n=Math.min(Math.max(0,e)/1e3,wi.targetFPMS);this._maxElapsedMS=1/n}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(t){if(t===0)this._minElapsedMS=0;else{const e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}}static get shared(){if(!wi._shared){const t=wi._shared=new wi;t.autoStart=!0,t._protected=!0}return wi._shared}static get system(){if(!wi._system){const t=wi._system=new wi;t.autoStart=!0,t._protected=!0}return wi._system}};let mn=wi;mn.targetFPMS=.06;Object.defineProperties(Se,{TARGET_FPMS:{get(){return mn.targetFPMS},set(t){ot("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),mn.targetFPMS=t}}});class RP{static init(e){e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set(n){this._ticker&&this._ticker.remove(this.render,this),this._ticker=n,n&&n.add(this.render,this,ll.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?mn.shared:new mn,e.autoStart&&this.start()}static destroy(){if(this._ticker){const e=this._ticker;this.ticker=null,e.destroy()}}}RP.extension=Ee.Application;Me.add(RP);const MP=[];Me.handleByList(Ee.Renderer,MP);function o4(t){for(const e of MP)if(e.test(t))return new e(t);throw new Error("Unable to auto-detect a suitable renderer.")}var a4=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,l4=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const u4=a4,OP=l4;class DP{constructor(e){this.renderer=e}contextChange(e){let n;if(this.renderer.context.webGLVersion===1){const r=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),n=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,r)}else{const r=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),n=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,r)}n>=An.HIGH?this.multisample=An.HIGH:n>=An.MEDIUM?this.multisample=An.MEDIUM:n>=An.LOW?this.multisample=An.LOW:this.multisample=An.NONE}destroy(){}}DP.extension={type:Ee.RendererSystem,name:"_multisample"};Me.add(DP);class c4{constructor(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class NP{constructor(e){this.renderer=e,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:n,CONTEXT_UID:r}=this,i=e._glBuffers[r]||this.createGLBuffer(e);n.bindBuffer(e.type,i.buffer)}unbind(e){const{gl:n}=this;n.bindBuffer(e,null)}bindBufferBase(e,n){const{gl:r,CONTEXT_UID:i}=this;if(this.boundBufferBases[n]!==e){const s=e._glBuffers[i]||this.createGLBuffer(e);this.boundBufferBases[n]=e,r.bindBufferBase(r.UNIFORM_BUFFER,n,s.buffer)}}bindBufferRange(e,n,r){const{gl:i,CONTEXT_UID:s}=this;r=r||0;const o=e._glBuffers[s]||this.createGLBuffer(e);i.bindBufferRange(i.UNIFORM_BUFFER,n||0,o.buffer,r*256,256)}update(e){const{gl:n,CONTEXT_UID:r}=this,i=e._glBuffers[r]||this.createGLBuffer(e);if(e._updateID!==i.updateID)if(i.updateID=e._updateID,n.bindBuffer(e.type,i.buffer),i.byteLength>=e.data.byteLength)n.bufferSubData(e.type,0,e.data);else{const s=e.static?n.STATIC_DRAW:n.DYNAMIC_DRAW;i.byteLength=e.data.byteLength,n.bufferData(e.type,e.data,s)}}dispose(e,n){if(!this.managedBuffers[e.id])return;delete this.managedBuffers[e.id];const r=e._glBuffers[this.CONTEXT_UID],i=this.gl;e.disposeRunner.remove(this),r&&(n||i.deleteBuffer(r.buffer),delete e._glBuffers[this.CONTEXT_UID])}disposeAll(e){const n=Object.keys(this.managedBuffers);for(let r=0;r<n.length;r++)this.dispose(this.managedBuffers[n[r]],e)}createGLBuffer(e){const{CONTEXT_UID:n,gl:r}=this;return e._glBuffers[n]=new c4(r.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[n]}}NP.extension={type:Ee.RendererSystem,name:"buffer"};Me.add(NP);class LP{constructor(e){this.renderer=e}render(e,n){const r=this.renderer;let i,s,o,a;if(n&&(i=n.renderTexture,s=n.clear,o=n.transform,a=n.skipUpdateTransform),this.renderingToScreen=!i,r.runners.prerender.emit(),r.emit("prerender"),r.projection.transform=o,!r.context.isLost){if(i||(this.lastObjectRendered=e),!a){const c=e.enableTempParent();e.updateTransform(),e.disableTempParent(c)}r.renderTexture.bind(i),r.batch.currentRenderer.start(),(s??r.background.clearBeforeRender)&&r.renderTexture.clear(),e.render(r),r.batch.currentRenderer.flush(),i&&(n.blit&&r.framebuffer.blit(),i.baseTexture.update()),r.runners.postrender.emit(),r.projection.transform=null,r.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}LP.extension={type:Ee.RendererSystem,name:"objectRenderer"};Me.add(LP);const hx=class extends i4{constructor(t){super(),this.type=AA.WEBGL,t=Object.assign({},Se.RENDER_OPTIONS,t),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new Os({projectionMatrix:new en},!0);const e={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:hx.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(e),"useContextAlpha"in t&&(ot("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),t.premultipliedAlpha=t.useContextAlpha&&t.useContextAlpha!=="notMultiplied",t.backgroundAlpha=t.useContextAlpha===!1?1:t.backgroundAlpha),this._plugin.rendererPlugins=hx.__plugins,this.options=t,this.startup.run(this.options)}static test(t){return t!=null&&t.forceCanvas?!1:NL()}render(t,e){this.objectRenderer.render(t,e)}resize(t,e){this._view.resizeView(t,e)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(t=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:t}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(t){this._view.resolution=t,this.runners.resolutionChange.emit(t)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return ot("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return ot("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return ot("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return ot("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(t){ot("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=t}get backgroundAlpha(){return ot("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(t){ot("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=t}get powerPreference(){return ot("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(t,e){return this.textureGenerator.generateTexture(t,e)}};let ih=hx;ih.extension={type:Ee.Renderer,priority:1};ih.__plugins={};ih.__systems={};Me.handleByMap(Ee.RendererPlugin,ih.__plugins);Me.handleByMap(Ee.RendererSystem,ih.__systems);Me.add(ih);class FP extends Yd{constructor(e,n){const{width:r,height:i}=n||{};super(r,i),this.items=[],this.itemDirtyIds=[];for(let s=0;s<e;s++){const o=new Ge;this.items.push(o),this.itemDirtyIds.push(-2)}this.length=e,this._load=null,this.baseTexture=null}initFromArray(e,n){for(let r=0;r<this.length;r++)e[r]&&(e[r].castToBaseTexture?this.addBaseTextureAt(e[r].castToBaseTexture(),r):e[r]instanceof Yd?this.addResourceAt(e[r],r):this.addResourceAt(tP(e[r],n),r))}dispose(){for(let e=0,n=this.length;e<n;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(e,n){if(!this.items[n])throw new Error(`Index ${n} is out of bounds`);return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[n].setResource(e),this}bind(e){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(e);for(let n=0;n<this.length;n++)this.items[n].parentTextureArray=e,this.items[n].on("update",e.update,e)}unbind(e){super.unbind(e);for(let n=0;n<this.length;n++)this.items[n].parentTextureArray=null,this.items[n].off("update",e.update,e)}load(){if(this._load)return this._load;const n=this.items.map(r=>r.resource).filter(r=>r).map(r=>r.load());return this._load=Promise.all(n).then(()=>{const{realWidth:r,realHeight:i}=this.items[0];return this.resize(r,i),Promise.resolve(this)}),this._load}}class h4 extends FP{constructor(e,n){const{width:r,height:i}=n||{};let s,o;Array.isArray(e)?(s=e,o=e.length):o=e,super(o,{width:r,height:i}),s&&this.initFromArray(s,n)}addBaseTextureAt(e,n){if(e.resource)this.addResourceAt(e.resource,n);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(e){super.bind(e),e.target=bc.TEXTURE_2D_ARRAY}upload(e,n,r){const{length:i,itemDirtyIds:s,items:o}=this,{gl:a}=e;r.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,r.internalFormat,this._width,this._height,i,0,n.format,r.type,null);for(let c=0;c<i;c++){const h=o[c];s[c]<h.dirtyId&&(s[c]=h.dirtyId,h.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,c,h.resource.width,h.resource.height,1,n.format,r.type,h.resource.source))}return!0}}class d4 extends al{constructor(e){super(e)}static test(e){const{OffscreenCanvas:n}=globalThis;return n&&e instanceof n?!0:globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement}}const ed=class extends FP{constructor(t,e){const{width:n,height:r,autoLoad:i,linkBaseTexture:s}=e||{};if(t&&t.length!==ed.SIDES)throw new Error(`Invalid length. Got ${t.length}, expected 6`);super(6,{width:n,height:r});for(let o=0;o<ed.SIDES;o++)this.items[o].target=bc.TEXTURE_CUBE_MAP_POSITIVE_X+o;this.linkBaseTexture=s!==!1,t&&this.initFromArray(t,e),i!==!1&&this.load()}bind(t){super.bind(t),t.target=bc.TEXTURE_CUBE_MAP}addBaseTextureAt(t,e,n){if(n===void 0&&(n=this.linkBaseTexture),!this.items[e])throw new Error(`Index ${e} is out of bounds`);if(!this.linkBaseTexture||t.parentTextureArray||Object.keys(t._glTextures).length>0)if(t.resource)this.addResourceAt(t.resource,e);else throw new Error("CubeResource does not support copying of renderTexture.");else t.target=bc.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this}upload(t,e,n){const r=this.itemDirtyIds;for(let i=0;i<ed.SIDES;i++){const s=this.items[i];(r[i]<s.dirtyId||n.dirtyId<e.dirtyId)&&(s.valid&&s.resource?(s.resource.upload(t,s,n),r[i]=s.dirtyId):r[i]<-1&&(t.gl.texImage2D(s.target,0,n.internalFormat,e.realWidth,e.realHeight,0,e.format,n.type,null),r[i]=-1))}return!0}static test(t){return Array.isArray(t)&&t.length===ed.SIDES}};let BP=ed;BP.SIDES=6;class pc extends al{constructor(e,n){n=n||{};let r,i;typeof e=="string"?(r=pc.EMPTY,i=e):(r=e,i=null),super(r),this.url=i,this.crossOrigin=n.crossOrigin??!0,this.alphaMode=typeof n.alphaMode=="number"?n.alphaMode:null,this._load=null,n.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(e,n)=>{if(this.url===null){e(this);return}try{const r=await Se.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const i=await r.blob();if(this.destroyed)return;const s=await createImageBitmap(i,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===Bs.UNPACK?"premultiply":"none"});if(this.destroyed)return;this.source=s,this.update(),e(this)}catch(r){if(this.destroyed)return;n(r),this.onError.emit(r)}}),this._load)}upload(e,n,r){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(n.alphaMode=this.alphaMode),super.upload(e,n,r)):(this.load(),!1)}dispose(){this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(e){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof e=="string"||e instanceof ImageBitmap)}static get EMPTY(){return pc._EMPTY=pc._EMPTY??Se.ADAPTER.createCanvas(0,0),pc._EMPTY}}const Cm=class extends al{constructor(t,e){e=e||{},super(Se.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=t,this.scale=e.scale||1,this._overrideWidth=e.width,this._overrideHeight=e.height,this._resolve=null,this._crossorigin=e.crossorigin,this._load=null,e.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(t=>{if(this._resolve=()=>{this.resize(this.source.width,this.source.height),t(this)},Cm.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const t=new Image;al.crossOrigin(t,this.svg,this._crossorigin),t.src=this.svg,t.onerror=e=>{this._resolve&&(t.onerror=null,this.onError.emit(e))},t.onload=()=>{if(!this._resolve)return;const e=t.width,n=t.height;if(!e||!n)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let r=e*this.scale,i=n*this.scale;(this._overrideWidth||this._overrideHeight)&&(r=this._overrideWidth||this._overrideHeight/n*e,i=this._overrideHeight||this._overrideWidth/e*n),r=Math.round(r),i=Math.round(i);const s=this.source;s.width=r,s.height=i,s._pixiId=`canvas_${hu()}`,s.getContext("2d").drawImage(t,0,0,e,n,0,0,r,i),this._resolve(),this._resolve=null}}static getSize(t){const e=Cm.SVG_SIZE.exec(t),n={};return e&&(n[e[1]]=Math.round(parseFloat(e[3])),n[e[5]]=Math.round(parseFloat(e[7]))),n}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(t,e){return e==="svg"||typeof t=="string"&&t.startsWith("data:image/svg+xml")||typeof t=="string"&&Cm.SVG_XML.test(t)}};let Qd=Cm;Qd.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m;Qd.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;const dx=class extends al{constructor(t,e){if(e=e||{},!(t instanceof HTMLVideoElement)){const n=document.createElement("video");n.setAttribute("preload","auto"),n.setAttribute("webkit-playsinline",""),n.setAttribute("playsinline",""),typeof t=="string"&&(t=[t]);const r=t[0].src||t[0];al.crossOrigin(n,r,e.crossorigin);for(let i=0;i<t.length;++i){const s=document.createElement("source");let{src:o,mime:a}=t[i];o=o||t[i];const c=o.split("?").shift().toLowerCase(),h=c.slice(c.lastIndexOf(".")+1);a=a||dx.MIME_TYPES[h]||`video/${h}`,s.src=o,s.type=a,n.appendChild(s)}t=n}super(t),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=e.autoPlay!==!1,this._load=null,this._resolve=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),e.autoLoad!==!1&&this.load()}update(t=0){if(!this.destroyed){const e=mn.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-e),(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}load(){if(this._load)return this._load;const t=this.source;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart.bind(this)),t.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlay),t.addEventListener("error",this._onError,!0)),this._load=new Promise(e=>{this.valid?e(this):(this._resolve=e,t.load())}),this._load}_onError(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)}_isSourcePlaying(){const t=this.source;return!t.paused&&!t.ended&&this._isSourceReady()}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(mn.shared.add(this.update,this),this._isConnectedToTicker=!0)}_onPlayStop(){this._isConnectedToTicker&&(mn.shared.remove(this.update,this),this._isConnectedToTicker=!1)}_onCanPlay(){const t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);const e=this.valid;this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()}dispose(){this._isConnectedToTicker&&(mn.shared.remove(this.update,this),this._isConnectedToTicker=!1);const t=this.source;t&&(t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(mn.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(mn.shared.add(this.update,this),this._isConnectedToTicker=!0))}get updateFPS(){return this._updateFPS}set updateFPS(t){t!==this._updateFPS&&(this._updateFPS=t)}static test(t,e){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement||dx.TYPES.includes(e)}};let n_=dx;n_.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"];n_.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};sx.push(pc,hP,d4,n_,Qd,yf,BP,h4);class cg{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(e){return this.minX>this.maxX||this.minY>this.maxY?Ye.EMPTY:(e=e||new Ye(0,0,1,1),e.x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)}addPoint(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)}addPointMatrix(e,n){const{a:r,b:i,c:s,d:o,tx:a,ty:c}=e,h=r*n.x+s*n.y+a,d=i*n.x+o*n.y+c;this.minX=Math.min(this.minX,h),this.maxX=Math.max(this.maxX,h),this.minY=Math.min(this.minY,d),this.maxY=Math.max(this.maxY,d)}addQuad(e){let n=this.minX,r=this.minY,i=this.maxX,s=this.maxY,o=e[0],a=e[1];n=o<n?o:n,r=a<r?a:r,i=o>i?o:i,s=a>s?a:s,o=e[2],a=e[3],n=o<n?o:n,r=a<r?a:r,i=o>i?o:i,s=a>s?a:s,o=e[4],a=e[5],n=o<n?o:n,r=a<r?a:r,i=o>i?o:i,s=a>s?a:s,o=e[6],a=e[7],n=o<n?o:n,r=a<r?a:r,i=o>i?o:i,s=a>s?a:s,this.minX=n,this.minY=r,this.maxX=i,this.maxY=s}addFrame(e,n,r,i,s){this.addFrameMatrix(e.worldTransform,n,r,i,s)}addFrameMatrix(e,n,r,i,s){const o=e.a,a=e.b,c=e.c,h=e.d,d=e.tx,m=e.ty;let f=this.minX,y=this.minY,v=this.maxX,S=this.maxY,C=o*n+c*r+d,_=a*n+h*r+m;f=C<f?C:f,y=_<y?_:y,v=C>v?C:v,S=_>S?_:S,C=o*i+c*r+d,_=a*i+h*r+m,f=C<f?C:f,y=_<y?_:y,v=C>v?C:v,S=_>S?_:S,C=o*n+c*s+d,_=a*n+h*s+m,f=C<f?C:f,y=_<y?_:y,v=C>v?C:v,S=_>S?_:S,C=o*i+c*s+d,_=a*i+h*s+m,f=C<f?C:f,y=_<y?_:y,v=C>v?C:v,S=_>S?_:S,this.minX=f,this.minY=y,this.maxX=v,this.maxY=S}addVertexData(e,n,r){let i=this.minX,s=this.minY,o=this.maxX,a=this.maxY;for(let c=n;c<r;c+=2){const h=e[c],d=e[c+1];i=h<i?h:i,s=d<s?d:s,o=h>o?h:o,a=d>a?d:a}this.minX=i,this.minY=s,this.maxX=o,this.maxY=a}addVertices(e,n,r,i){this.addVerticesMatrix(e.worldTransform,n,r,i)}addVerticesMatrix(e,n,r,i,s=0,o=s){const a=e.a,c=e.b,h=e.c,d=e.d,m=e.tx,f=e.ty;let y=this.minX,v=this.minY,S=this.maxX,C=this.maxY;for(let _=r;_<i;_+=2){const b=n[_],w=n[_+1],I=a*b+h*w+m,P=d*w+c*b+f;y=Math.min(y,I-s),S=Math.max(S,I+s),v=Math.min(v,P-o),C=Math.max(C,P+o)}this.minX=y,this.minY=v,this.maxX=S,this.maxY=C}addBounds(e){const n=this.minX,r=this.minY,i=this.maxX,s=this.maxY;this.minX=e.minX<n?e.minX:n,this.minY=e.minY<r?e.minY:r,this.maxX=e.maxX>i?e.maxX:i,this.maxY=e.maxY>s?e.maxY:s}addBoundsMask(e,n){const r=e.minX>n.minX?e.minX:n.minX,i=e.minY>n.minY?e.minY:n.minY,s=e.maxX<n.maxX?e.maxX:n.maxX,o=e.maxY<n.maxY?e.maxY:n.maxY;if(r<=s&&i<=o){const a=this.minX,c=this.minY,h=this.maxX,d=this.maxY;this.minX=r<a?r:a,this.minY=i<c?i:c,this.maxX=s>h?s:h,this.maxY=o>d?o:d}}addBoundsMatrix(e,n){this.addFrameMatrix(n,e.minX,e.minY,e.maxX,e.maxY)}addBoundsArea(e,n){const r=e.minX>n.x?e.minX:n.x,i=e.minY>n.y?e.minY:n.y,s=e.maxX<n.x+n.width?e.maxX:n.x+n.width,o=e.maxY<n.y+n.height?e.maxY:n.y+n.height;if(r<=s&&i<=o){const a=this.minX,c=this.minY,h=this.maxX,d=this.maxY;this.minX=r<a?r:a,this.minY=i<c?i:c,this.maxX=s>h?s:h,this.maxY=o>d?o:d}}pad(e=0,n=e){this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=n,this.maxY+=n)}addFramePad(e,n,r,i,s,o){e-=s,n-=o,r+=s,i+=o,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>r?this.maxX:r,this.minY=this.minY<n?this.minY:n,this.maxY=this.maxY>i?this.maxY:i}}class tn extends mf{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new ey,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new cg,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(e){const n=Object.keys(e);for(let r=0;r<n.length;++r){const i=n[r];Object.defineProperty(tn.prototype,i,Object.getOwnPropertyDescriptor(e,i))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(e,n){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),n||(this._boundsRect||(this._boundsRect=new Ye),n=this._boundsRect),this._bounds.getRectangle(n)}getLocalBounds(e){e||(this._localBoundsRect||(this._localBoundsRect=new Ye),e=this._localBoundsRect),this._localBounds||(this._localBounds=new cg);const n=this.transform,r=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;const i=this._bounds,s=this._boundsID;this._bounds=this._localBounds;const o=this.getBounds(!1,e);return this.parent=r,this.transform=n,this._bounds=i,this._bounds.updateID+=this._boundsID-s,o}toGlobal(e,n,r=!1){return r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,n)}toLocal(e,n,r,i){return n&&(e=n.toGlobal(e,r,i)),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,r)}setParent(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e}removeFromParent(){var e;(e=this.parent)==null||e.removeChild(this)}setTransform(e=0,n=0,r=1,i=1,s=0,o=0,a=0,c=0,h=0){return this.position.x=e,this.position.y=n,this.scale.x=r||1,this.scale.y=i||1,this.rotation=s,this.skew.x=o,this.skew.y=a,this.pivot.x=c,this.pivot.y=h,this}destroy(e){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new f4),this.tempDisplayObjectParent}enableTempParent(){const e=this.parent;return this.parent=this._tempDisplayObjectParent,e}disableTempParent(e){this.parent=e}get x(){return this.position.x}set x(e){this.transform.position.x=e}get y(){return this.position.y}set y(e){this.transform.position.y=e}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(e){this.transform.position.copyFrom(e)}get scale(){return this.transform.scale}set scale(e){this.transform.scale.copyFrom(e)}get pivot(){return this.transform.pivot}set pivot(e){this.transform.pivot.copyFrom(e)}get skew(){return this.transform.skew}set skew(e){this.transform.skew.copyFrom(e)}get rotation(){return this.transform.rotation}set rotation(e){this.transform.rotation=e}get angle(){return this.transform.rotation*uF}set angle(e){this.transform.rotation=e*cF}get zIndex(){return this._zIndex}set zIndex(e){this._zIndex=e,this.parent&&(this.parent.sortDirty=!0)}get worldVisible(){let e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}get mask(){return this._mask}set mask(e){if(this._mask!==e){if(this._mask){const n=this._mask.isMaskData?this._mask.maskObject:this._mask;n&&(n._maskRefCount--,n._maskRefCount===0&&(n.renderable=!0,n.isMask=!1))}if(this._mask=e,this._mask){const n=this._mask.isMaskData?this._mask.maskObject:this._mask;n&&(n._maskRefCount===0&&(n.renderable=!1,n.isMask=!0),n._maskRefCount++)}}}}class f4 extends tn{constructor(){super(...arguments),this.sortDirty=null}}tn.prototype.displayObjectUpdateTransform=tn.prototype.updateTransform;const p4=new en;function m4(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}const fx=class extends tn{constructor(){super(),this.children=[],this.sortableChildren=fx.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(t){}addChild(...t){if(t.length>1)for(let e=0;e<t.length;e++)this.addChild(t[e]);else{const e=t[0];e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.push(e),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",e,this,this.children.length-1),e.emit("added",this)}return t[0]}addChildAt(t,e){if(e<0||e>this.children.length)throw new Error(`${t}addChildAt: The index ${e} supplied is out of bounds ${this.children.length}`);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t}swapChildren(t,e){if(t===e)return;const n=this.getChildIndex(t),r=this.getChildIndex(e);this.children[n]=e,this.children[r]=t,this.onChildrenChange(n<r?n:r)}getChildIndex(t){const e=this.children.indexOf(t);if(e===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return e}setChildIndex(t,e){if(e<0||e>=this.children.length)throw new Error(`The index ${e} supplied is out of bounds ${this.children.length}`);const n=this.getChildIndex(t);Ic(this.children,n,1),this.children.splice(e,0,t),this.onChildrenChange(e)}getChildAt(t){if(t<0||t>=this.children.length)throw new Error(`getChildAt: Index (${t}) does not exist.`);return this.children[t]}removeChild(...t){if(t.length>1)for(let e=0;e<t.length;e++)this.removeChild(t[e]);else{const e=t[0],n=this.children.indexOf(e);if(n===-1)return null;e.parent=null,e.transform._parentID=-1,Ic(this.children,n,1),this._boundsID++,this.onChildrenChange(n),e.emit("removed",this),this.emit("childRemoved",e,this,n)}return t[0]}removeChildAt(t){const e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,Ic(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e}removeChildren(t=0,e=this.children.length){const n=t,r=e,i=r-n;let s;if(i>0&&i<=r){s=this.children.splice(n,i);for(let o=0;o<s.length;++o)s[o].parent=null,s[o].transform&&(s[o].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(let o=0;o<s.length;++o)s[o].emit("removed",this),this.emit("childRemoved",s[o],this,o);return s}else if(i===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let t=!1;for(let e=0,n=this.children.length;e<n;++e){const r=this.children[e];r._lastSortedIndex=e,!t&&r.zIndex!==0&&(t=!0)}t&&this.children.length>1&&this.children.sort(m4),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let t=0,e=this.children.length;t<e;++t){const n=this.children[t];n.visible&&n.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let t=0;t<this.children.length;t++){const e=this.children[t];if(!(!e.visible||!e.renderable))if(e.calculateBounds(),e._mask){const n=e._mask.isMaskData?e._mask.maskObject:e._mask;n?(n.calculateBounds(),this._bounds.addBoundsMask(e._bounds,n._bounds)):this._bounds.addBounds(e._bounds)}else e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(t,e=!1){const n=super.getLocalBounds(t);if(!e)for(let r=0,i=this.children.length;r<i;++r){const s=this.children[r];s.visible&&s.updateTransform()}return n}_calculateBounds(){}_renderWithCulling(t){const e=t.renderTexture.sourceFrame;if(!(e.width>0&&e.height>0))return;let n,r;this.cullArea?(n=this.cullArea,r=this.worldTransform):this._render!==fx.prototype._render&&(n=this.getBounds(!0));const i=t.projection.transform;if(i&&(r?(r=p4.copyFrom(r),r.prepend(i)):r=i),n&&e.intersects(n,r))this._render(t);else if(this.cullArea)return;for(let s=0,o=this.children.length;s<o;++s){const a=this.children[s],c=a.cullable;a.cullable=c||!this.cullArea,a.render(t),a.cullable=c}}render(t){var e;if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||(e=this.filters)!=null&&e.length)this.renderAdvanced(t);else if(this.cullable)this._renderWithCulling(t);else{this._render(t);for(let n=0,r=this.children.length;n<r;++n)this.children[n].render(t)}}renderAdvanced(t){var i,s,o;const e=this.filters,n=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let a=0;a<e.length;a++)e[a].enabled&&this._enabledFilters.push(e[a])}const r=e&&((i=this._enabledFilters)==null?void 0:i.length)||n&&(!n.isMaskData||n.enabled&&(n.autoDetect||n.type!==Un.NONE));if(r&&t.batch.flush(),e&&((s=this._enabledFilters)!=null&&s.length)&&t.filter.push(this,this._enabledFilters),n&&t.mask.push(this,this._mask),this.cullable)this._renderWithCulling(t);else{this._render(t);for(let a=0,c=this.children.length;a<c;++a)this.children[a].render(t)}r&&t.batch.flush(),n&&t.mask.pop(this),e&&((o=this._enabledFilters)!=null&&o.length)&&t.filter.pop()}_render(t){}destroy(t){super.destroy(),this.sortDirty=!1;const e=typeof t=="boolean"?t:t==null?void 0:t.children,n=this.removeChildren(0,this.children.length);if(e)for(let r=0;r<n.length;++r)n[r].destroy(t)}get width(){return this.scale.x*this.getLocalBounds().width}set width(t){const e=this.getLocalBounds().width;e!==0?this.scale.x=t/e:this.scale.x=1,this._width=t}get height(){return this.scale.y*this.getLocalBounds().height}set height(t){const e=this.getLocalBounds().height;e!==0?this.scale.y=t/e:this.scale.y=1,this._height=t}};let nr=fx;nr.defaultSortableChildren=!1;nr.prototype.containerUpdateTransform=nr.prototype.updateTransform;Object.defineProperties(Se,{SORTABLE_CHILDREN:{get(){return nr.defaultSortableChildren},set(t){ot("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),nr.defaultSortableChildren=t}}});const $h=new Oe,g4=new Uint16Array([0,1,2,0,2,3]);class Us extends nr{constructor(e){super(),this._anchor=new Ko(this._onAnchorUpdate,this,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new kt(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=Ue.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=e||xe.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=g4,this.pluginName="batch",this.isSprite=!0,this._roundPixels=Se.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=ja(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=ja(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const e=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===e._updateID)return;this._textureID!==e._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=e._updateID;const n=this.transform.worldTransform,r=n.a,i=n.b,s=n.c,o=n.d,a=n.tx,c=n.ty,h=this.vertexData,d=e.trim,m=e.orig,f=this._anchor;let y=0,v=0,S=0,C=0;if(d?(v=d.x-f._x*m.width,y=v+d.width,C=d.y-f._y*m.height,S=C+d.height):(v=-f._x*m.width,y=v+m.width,C=-f._y*m.height,S=C+m.height),h[0]=r*v+s*C+a,h[1]=o*C+i*v+c,h[2]=r*y+s*C+a,h[3]=o*C+i*y+c,h[4]=r*y+s*S+a,h[5]=o*S+i*y+c,h[6]=r*v+s*S+a,h[7]=o*S+i*v+c,this._roundPixels){const _=Se.RESOLUTION;for(let b=0;b<h.length;++b)h[b]=Math.round(h[b]*_)/_}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const e=this._texture,n=this.vertexTrimmedData,r=e.orig,i=this._anchor,s=this.transform.worldTransform,o=s.a,a=s.b,c=s.c,h=s.d,d=s.tx,m=s.ty,f=-i._x*r.width,y=f+r.width,v=-i._y*r.height,S=v+r.height;n[0]=o*f+c*v+d,n[1]=h*v+a*f+m,n[2]=o*y+c*v+d,n[3]=h*v+a*y+m,n[4]=o*y+c*S+d,n[5]=h*S+a*y+m,n[6]=o*f+c*S+d,n[7]=h*S+a*f+m}_render(e){this.calculateVertices(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)}_calculateBounds(){const e=this._texture.trim,n=this._texture.orig;!e||e.width===n.width&&e.height===n.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(e){return this.children.length===0?(this._localBounds||(this._localBounds=new cg),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new Ye),e=this._localBoundsRect),this._localBounds.getRectangle(e)):super.getLocalBounds.call(this,e)}containsPoint(e){this.worldTransform.applyInverse(e,$h);const n=this._texture.orig.width,r=this._texture.orig.height,i=-n*this.anchor.x;let s=0;return $h.x>=i&&$h.x<i+n&&(s=-r*this.anchor.y,$h.y>=s&&$h.y<s+r)}destroy(e){if(super.destroy(e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof e=="boolean"?e:e==null?void 0:e.texture){const r=typeof e=="boolean"?e:e==null?void 0:e.baseTexture;this._texture.destroy(!!r)}this._texture=null}static from(e,n){const r=e instanceof xe?e:xe.from(e,n);return new Us(r)}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){const n=ja(this.scale.x)||1;this.scale.x=n*e/this._texture.orig.width,this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){const n=ja(this.scale.y)||1;this.scale.y=n*e/this._texture.orig.height,this._height=e}get anchor(){return this._anchor}set anchor(e){this._anchor.copyFrom(e)}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=e||xe.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.valid?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}}const UP=new en;tn.prototype._cacheAsBitmap=!1;tn.prototype._cacheData=null;tn.prototype._cacheAsBitmapResolution=null;tn.prototype._cacheAsBitmapMultisample=null;class y4{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(tn.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(t){t!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(t){t!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(t){if(this._cacheAsBitmap===t)return;this._cacheAsBitmap=t;let e;t?(this._cacheData||(this._cacheData=new y4),e=this._cacheData,e.originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(e=this._cacheData,e.sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}});tn.prototype._renderCached=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(e),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(e))};tn.prototype._initCachedDisplayObject=function(e){var f,y;if((f=this._cacheData)!=null&&f.sprite)return;const n=this.alpha;this.alpha=1,e.batch.flush();const r=this.getLocalBounds(null,!0).clone();if((y=this.filters)!=null&&y.length){const v=this.filters[0].padding;r.pad(v)}r.ceil(Se.RESOLUTION);const i=e.renderTexture.current,s=e.renderTexture.sourceFrame.clone(),o=e.renderTexture.destinationFrame.clone(),a=e.projection.transform,c=yu.create({width:r.width,height:r.height,resolution:this.cacheAsBitmapResolution||e.resolution,multisample:this.cacheAsBitmapMultisample??e.multisample}),h=`cacheAsBitmap_${hu()}`;this._cacheData.textureCacheId=h,Ge.addToCache(c.baseTexture,h),xe.addToCache(c,h);const d=this.transform.localTransform.copyTo(UP).invert().translate(-r.x,-r.y);this.render=this._cacheData.originalRender,e.render(this,{renderTexture:c,clear:!0,transform:d,skipUpdateTransform:!1}),e.framebuffer.blit(),e.projection.transform=a,e.renderTexture.bind(i,s,o),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=n;const m=new Us(c);m.transform.worldTransform=this.transform.worldTransform,m.anchor.x=-(r.x/r.width),m.anchor.y=-(r.y/r.height),m.alpha=n,m._bounds=this._bounds,this._cacheData.sprite=m,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=m.containsPoint.bind(m)};tn.prototype._renderCachedCanvas=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(e),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(e))};tn.prototype._initCachedDisplayObjectCanvas=function(e){var d;if((d=this._cacheData)!=null&&d.sprite)return;const n=this.getLocalBounds(null,!0),r=this.alpha;this.alpha=1;const i=e.canvasContext.activeContext,s=e._projTransform;n.ceil(Se.RESOLUTION);const o=yu.create({width:n.width,height:n.height}),a=`cacheAsBitmap_${hu()}`;this._cacheData.textureCacheId=a,Ge.addToCache(o.baseTexture,a),xe.addToCache(o,a);const c=UP;this.transform.localTransform.copyTo(c),c.invert(),c.tx-=n.x,c.ty-=n.y,this.renderCanvas=this._cacheData.originalRenderCanvas,e.render(this,{renderTexture:o,clear:!0,transform:c,skipUpdateTransform:!1}),e.canvasContext.activeContext=i,e._projTransform=s,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=r;const h=new Us(o);h.transform.worldTransform=this.transform.worldTransform,h.anchor.x=-(n.x/n.width),h.anchor.y=-(n.y/n.height),h.alpha=r,h._bounds=this._bounds,this._cacheData.sprite=h,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=e._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=h.containsPoint.bind(h)};tn.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};tn.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};tn.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,Ge.removeFromCache(this._cacheData.textureCacheId),xe.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};tn.prototype._cacheAsBitmapDestroy=function(e){this.cacheAsBitmap=!1,this.destroy(e)};tn.prototype.name=null;nr.prototype.getChildByName=function(e,n){for(let r=0,i=this.children.length;r<i;r++)if(this.children[r].name===e)return this.children[r];if(n)for(let r=0,i=this.children.length;r<i;r++){const s=this.children[r];if(!s.getChildByName)continue;const o=s.getChildByName(e,!0);if(o)return o}return null};tn.prototype.getGlobalPosition=function(e=new Oe,n=!1){return this.parent?this.parent.toGlobal(this.position,e,n):(e.x=this.position.x,e.y=this.position.y),e};var v4=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;class x4 extends fr{constructor(e=1){super(u4,v4,{uAlpha:1}),this.alpha=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}const w4={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},_4=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function S4(t){const e=w4[t],n=e.length;let r=_4,i="";const s="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";let o;for(let a=0;a<t;a++){let c=s.replace("%index%",a.toString());o=a,a>=n&&(o=t-a-1),c=c.replace("%value%",e[o].toString()),i+=c,i+=`
`}return r=r.replace("%blur%",i),r=r.replace("%size%",t.toString()),r}const b4=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function E4(t,e){const n=Math.ceil(t/2);let r=b4,i="",s;e?s="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":s="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let o=0;o<t;o++){let a=s.replace("%index%",o.toString());a=a.replace("%sampleIndex%",`${o-(n-1)}.0`),i+=a,i+=`
`}return r=r.replace("%blur%",i),r=r.replace("%size%",t.toString()),r}class px extends fr{constructor(e,n=8,r=4,i=fr.defaultResolution,s=5){const o=E4(s,e),a=S4(s);super(o,a),this.horizontal=e,this.resolution=i,this._quality=0,this.quality=r,this.blur=n}apply(e,n,r,i){if(r?this.horizontal?this.uniforms.strength=1/r.width*(r.width/n.width):this.uniforms.strength=1/r.height*(r.height/n.height):this.horizontal?this.uniforms.strength=1/e.renderer.width*(e.renderer.width/n.width):this.uniforms.strength=1/e.renderer.height*(e.renderer.height/n.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)e.applyFilter(this,n,r,i);else{const s=e.getFilterTexture(),o=e.renderer;let a=n,c=s;this.state.blend=!1,e.applyFilter(this,a,c,xo.CLEAR);for(let h=1;h<this.passes-1;h++){e.bindAndClear(a,xo.BLIT),this.uniforms.uSampler=c;const d=c;c=a,a=d,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,e.applyFilter(this,c,r,i),e.returnFilterTexture(s)}}get blur(){return this.strength}set blur(e){this.padding=1+Math.abs(e)*2,this.strength=e}get quality(){return this._quality}set quality(e){this._quality=e,this.passes=e}}class T4 extends fr{constructor(e=8,n=4,r=fr.defaultResolution,i=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new px(!0,e,n,r,i),this.blurYFilter=new px(!1,e,n,r,i),this.resolution=r,this.quality=n,this.blur=e,this.repeatEdgePixels=!1}apply(e,n,r,i){const s=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(s&&o){const a=e.getFilterTexture();this.blurXFilter.apply(e,n,a,xo.CLEAR),this.blurYFilter.apply(e,a,r,i),e.returnFilterTexture(a)}else o?this.blurYFilter.apply(e,n,r,i):this.blurXFilter.apply(e,n,r,i)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(e){this.blurXFilter.quality=this.blurYFilter.quality=e}get blurX(){return this.blurXFilter.blur}set blurX(e){this.blurXFilter.blur=e,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(e){this.blurYFilter.blur=e,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(e){this.blurYFilter.blendMode=e}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(e){this._repeatEdgePixels=e,this.updatePadding()}}var C4=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;class mx extends fr{constructor(){const e={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(OP,C4,e),this.alpha=1}_loadMatrix(e,n=!1){let r=e;n&&(this._multiply(r,this.uniforms.m,e),r=this._colorMatrix(r)),this.uniforms.m=r}_multiply(e,n,r){return e[0]=n[0]*r[0]+n[1]*r[5]+n[2]*r[10]+n[3]*r[15],e[1]=n[0]*r[1]+n[1]*r[6]+n[2]*r[11]+n[3]*r[16],e[2]=n[0]*r[2]+n[1]*r[7]+n[2]*r[12]+n[3]*r[17],e[3]=n[0]*r[3]+n[1]*r[8]+n[2]*r[13]+n[3]*r[18],e[4]=n[0]*r[4]+n[1]*r[9]+n[2]*r[14]+n[3]*r[19]+n[4],e[5]=n[5]*r[0]+n[6]*r[5]+n[7]*r[10]+n[8]*r[15],e[6]=n[5]*r[1]+n[6]*r[6]+n[7]*r[11]+n[8]*r[16],e[7]=n[5]*r[2]+n[6]*r[7]+n[7]*r[12]+n[8]*r[17],e[8]=n[5]*r[3]+n[6]*r[8]+n[7]*r[13]+n[8]*r[18],e[9]=n[5]*r[4]+n[6]*r[9]+n[7]*r[14]+n[8]*r[19]+n[9],e[10]=n[10]*r[0]+n[11]*r[5]+n[12]*r[10]+n[13]*r[15],e[11]=n[10]*r[1]+n[11]*r[6]+n[12]*r[11]+n[13]*r[16],e[12]=n[10]*r[2]+n[11]*r[7]+n[12]*r[12]+n[13]*r[17],e[13]=n[10]*r[3]+n[11]*r[8]+n[12]*r[13]+n[13]*r[18],e[14]=n[10]*r[4]+n[11]*r[9]+n[12]*r[14]+n[13]*r[19]+n[14],e[15]=n[15]*r[0]+n[16]*r[5]+n[17]*r[10]+n[18]*r[15],e[16]=n[15]*r[1]+n[16]*r[6]+n[17]*r[11]+n[18]*r[16],e[17]=n[15]*r[2]+n[16]*r[7]+n[17]*r[12]+n[18]*r[17],e[18]=n[15]*r[3]+n[16]*r[8]+n[17]*r[13]+n[18]*r[18],e[19]=n[15]*r[4]+n[16]*r[9]+n[17]*r[14]+n[18]*r[19]+n[19],e}_colorMatrix(e){const n=new Float32Array(e);return n[4]/=255,n[9]/=255,n[14]/=255,n[19]/=255,n}brightness(e,n){const r=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(r,n)}tint(e,n){const[r,i,s]=kt.shared.setValue(e).toArray(),o=[r,0,0,0,0,0,i,0,0,0,0,0,s,0,0,0,0,0,1,0];this._loadMatrix(o,n)}greyscale(e,n){const r=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(r,n)}blackAndWhite(e){const n=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(n,e)}hue(e,n){e=(e||0)/180*Math.PI;const r=Math.cos(e),i=Math.sin(e),s=Math.sqrt,o=1/3,a=s(o),c=r+(1-r)*o,h=o*(1-r)-a*i,d=o*(1-r)+a*i,m=o*(1-r)+a*i,f=r+o*(1-r),y=o*(1-r)-a*i,v=o*(1-r)-a*i,S=o*(1-r)+a*i,C=r+o*(1-r),_=[c,h,d,0,0,m,f,y,0,0,v,S,C,0,0,0,0,0,1,0];this._loadMatrix(_,n)}contrast(e,n){const r=(e||0)+1,i=-.5*(r-1),s=[r,0,0,0,i,0,r,0,0,i,0,0,r,0,i,0,0,0,1,0];this._loadMatrix(s,n)}saturate(e=0,n){const r=e*2/3+1,i=(r-1)*-.5,s=[r,i,i,0,0,i,r,i,0,0,i,i,r,0,0,0,0,0,1,0];this._loadMatrix(s,n)}desaturate(){this.saturate(-1)}negative(e){const n=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(n,e)}sepia(e){const n=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(n,e)}technicolor(e){const n=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(n,e)}polaroid(e){const n=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(n,e)}toBGR(e){const n=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(n,e)}kodachrome(e){const n=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(n,e)}browni(e){const n=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(n,e)}vintage(e){const n=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(n,e)}colorTone(e,n,r,i,s){e=e||.2,n=n||.15,r=r||16770432,i=i||3375104;const o=kt.shared,[a,c,h]=o.setValue(r).toArray(),[d,m,f]=o.setValue(i).toArray(),y=[.3,.59,.11,0,0,a,c,h,e,0,d,m,f,n,0,a-d,c-m,h-f,0,0];this._loadMatrix(y,s)}night(e,n){e=e||.1;const r=[e*-2,-e,0,0,0,-e,0,e,0,0,0,e,e*2,0,0,0,0,0,1,0];this._loadMatrix(r,n)}predator(e,n){const r=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(r,n)}lsd(e){const n=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(n,e)}reset(){const e=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(e,!1)}get matrix(){return this.uniforms.m}set matrix(e){this.uniforms.m=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}mx.prototype.grayscale=mx.prototype.greyscale;var I4=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,A4=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;class P4 extends fr{constructor(e,n){const r=new en;e.renderable=!1,super(A4,I4,{mapSampler:e._texture,filterMatrix:r,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=e,this.maskMatrix=r,n==null&&(n=20),this.scale=new Oe(n,n)}apply(e,n,r,i){this.uniforms.filterMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const s=this.maskSprite.worldTransform,o=Math.sqrt(s.a*s.a+s.b*s.b),a=Math.sqrt(s.c*s.c+s.d*s.d);o!==0&&a!==0&&(this.uniforms.rotation[0]=s.a/o,this.uniforms.rotation[1]=s.b/o,this.uniforms.rotation[2]=s.c/a,this.uniforms.rotation[3]=s.d/a),e.applyFilter(this,n,r,i)}get map(){return this.uniforms.mapSampler}set map(e){this.uniforms.mapSampler=e}}var k4=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,R4=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;class M4 extends fr{constructor(){super(R4,k4)}}var O4=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;class D4 extends fr{constructor(e=.5,n=Math.random()){super(OP,O4,{uNoise:0,uSeed:0}),this.noise=e,this.seed=n}get noise(){return this.uniforms.uNoise}set noise(e){this.uniforms.uNoise=e}get seed(){return this.uniforms.uSeed}set seed(e){this.uniforms.uSeed=e}}const cT={AlphaFilter:x4,BlurFilter:T4,BlurFilterPass:px,ColorMatrixFilter:mx,DisplacementFilter:P4,FXAAFilter:M4,NoiseFilter:D4};Object.entries(cT).forEach(([t,e])=>{Object.defineProperty(cT,t,{get(){return ot("7.1.0",`filters.${t} has moved to ${t}`),e}})});class N4{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(e){this.removeTickerListener(),this.events=e,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(e){this._pauseUpdate=e}addTickerListener(){this.tickerAdded||!this.domElement||(mn.system.add(this.tickerUpdate,this,ll.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(mn.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const e=this.events.rootPointerEvent;this.events.supportsTouchEvents&&e.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:e.clientX,clientY:e.clientY}))}tickerUpdate(e){this._deltaTime+=e,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}}const za=new N4;class vf{constructor(e){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=vf.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new Oe,this.page=new Oe,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(e,n,r){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(e,n,r,i,s){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class hg extends vf{constructor(){super(...arguments),this.client=new Oe,this.movement=new Oe,this.offset=new Oe,this.global=new Oe,this.screen=new Oe}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(e,n,r){return e.worldTransform.applyInverse(r||this.global,n)}getModifierState(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e)}initMouseEvent(e,n,r,i,s,o,a,c,h,d,m,f,y,v,S){throw new Error("Method not implemented.")}}class gs extends hg{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class Wc extends hg{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}Wc.DOM_DELTA_PIXEL=0;Wc.DOM_DELTA_LINE=1;Wc.DOM_DELTA_PAGE=2;const L4=2048,F4=new Oe,yv=new Oe;class B4{constructor(e){this.dispatch=new mf,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=e,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(e,n){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:n,priority:0}),this.mappingTable[e].sort((r,i)=>r.priority-i.priority)}dispatchEvent(e,n){e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,n),this.dispatch.emit(n||e.type,e)}mapEvent(e){if(!this.rootTarget)return;const n=this.mappingTable[e.type];if(n)for(let r=0,i=n.length;r<i;r++)n[r].fn(e);else console.warn(`[EventBoundary]: Event mapping not defined for ${e.type}`)}hitTest(e,n){za.pauseUpdate=!0;const i=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",s=this[i](this.rootTarget,this.rootTarget.eventMode,F4.set(e,n),this.hitTestFn,this.hitPruneFn);return s&&s[0]}propagate(e,n){if(!e.target)return;const r=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(let i=0,s=r.length-1;i<s;i++)if(e.currentTarget=r[i],this.notifyTarget(e,n),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,n),!(e.propagationStopped||e.propagationImmediatelyStopped)){e.eventPhase=e.BUBBLING_PHASE;for(let i=r.length-2;i>=0;i--)if(e.currentTarget=r[i],this.notifyTarget(e,n),e.propagationStopped||e.propagationImmediatelyStopped)return}}all(e,n,r=this._allInteractiveElements){if(r.length===0)return;e.eventPhase=e.BUBBLING_PHASE;const i=Array.isArray(n)?n:[n];for(let s=r.length-1;s>=0;s--)i.forEach(o=>{e.currentTarget=r[s],this.notifyTarget(e,o)})}propagationPath(e){const n=[e];for(let r=0;r<L4&&e!==this.rootTarget;r++){if(!e.parent)throw new Error("Cannot find propagation path to disconnected target");n.push(e.parent),e=e.parent}return n.reverse(),n}hitTestMoveRecursive(e,n,r,i,s,o=!1){let a=!1;if(this._interactivePrune(e))return null;if((e.eventMode==="dynamic"||n==="dynamic")&&(za.pauseUpdate=!1),e.interactiveChildren&&e.children){const d=e.children;for(let m=d.length-1;m>=0;m--){const f=d[m],y=this.hitTestMoveRecursive(f,this._isInteractive(n)?n:f.eventMode,r,i,s,o||s(e,r));if(y){if(y.length>0&&!y[y.length-1].parent)continue;const v=e.isInteractive();(y.length>0||v)&&(v&&this._allInteractiveElements.push(e),y.push(e)),this._hitElements.length===0&&(this._hitElements=y),a=!0}}}const c=this._isInteractive(n),h=e.isInteractive();return h&&h&&this._allInteractiveElements.push(e),o||this._hitElements.length>0?null:a?this._hitElements:c&&!s(e,r)&&i(e,r)?h?[e]:[]:null}hitTestRecursive(e,n,r,i,s){if(this._interactivePrune(e)||s(e,r))return null;if((e.eventMode==="dynamic"||n==="dynamic")&&(za.pauseUpdate=!1),e.interactiveChildren&&e.children){const c=e.children;for(let h=c.length-1;h>=0;h--){const d=c[h],m=this.hitTestRecursive(d,this._isInteractive(n)?n:d.eventMode,r,i,s);if(m){if(m.length>0&&!m[m.length-1].parent)continue;const f=e.isInteractive();return(m.length>0||f)&&m.push(e),m}}}const o=this._isInteractive(n),a=e.isInteractive();return o&&i(e,r)?a?[e]:[]:null}_isInteractive(e){return e==="static"||e==="dynamic"}_interactivePrune(e){return!!(!e||e.isMask||!e.visible||!e.renderable||e.eventMode==="none"||e.eventMode==="passive"&&!e.interactiveChildren||e.isMask)}hitPruneFn(e,n){var r;if(e.hitArea&&(e.worldTransform.applyInverse(n,yv),!e.hitArea.contains(yv.x,yv.y)))return!0;if(e._mask){const i=e._mask.isMaskData?e._mask.maskObject:e._mask;if(i&&!((r=i.containsPoint)!=null&&r.call(i,n)))return!0}return!1}hitTestFn(e,n){return e.eventMode==="passive"?!1:e.hitArea?!0:e.containsPoint?e.containsPoint(n):!1}notifyTarget(e,n){var s,o;n=n??e.type;const r=`on${n}`;(o=(s=e.currentTarget)[r])==null||o.call(s,e);const i=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?`${n}capture`:n;this.notifyListeners(e,i),e.eventPhase===e.AT_TARGET&&this.notifyListeners(e,n)}mapPointerDown(e){if(!(e instanceof gs)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const n=this.createPointerEvent(e);if(this.dispatchEvent(n,"pointerdown"),n.pointerType==="touch")this.dispatchEvent(n,"touchstart");else if(n.pointerType==="mouse"||n.pointerType==="pen"){const i=n.button===2;this.dispatchEvent(n,i?"rightdown":"mousedown")}const r=this.trackingData(e.pointerId);r.pressTargetsByButton[e.button]=n.composedPath(),this.freeEvent(n)}mapPointerMove(e){var c,h;if(!(e instanceof gs)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const n=this.createPointerEvent(e);this._isPointerMoveEvent=!1;const r=n.pointerType==="mouse"||n.pointerType==="pen",i=this.trackingData(e.pointerId),s=this.findMountedTarget(i.overTargets);if(((c=i.overTargets)==null?void 0:c.length)>0&&s!==n.target){const d=e.type==="mousemove"?"mouseout":"pointerout",m=this.createPointerEvent(e,d,s);if(this.dispatchEvent(m,"pointerout"),r&&this.dispatchEvent(m,"mouseout"),!n.composedPath().includes(s)){const f=this.createPointerEvent(e,"pointerleave",s);for(f.eventPhase=f.AT_TARGET;f.target&&!n.composedPath().includes(f.target);)f.currentTarget=f.target,this.notifyTarget(f),r&&this.notifyTarget(f,"mouseleave"),f.target=f.target.parent;this.freeEvent(f)}this.freeEvent(m)}if(s!==n.target){const d=e.type==="mousemove"?"mouseover":"pointerover",m=this.clonePointerEvent(n,d);this.dispatchEvent(m,"pointerover"),r&&this.dispatchEvent(m,"mouseover");let f=s==null?void 0:s.parent;for(;f&&f!==this.rootTarget.parent&&f!==n.target;)f=f.parent;if(!f||f===this.rootTarget.parent){const v=this.clonePointerEvent(n,"pointerenter");for(v.eventPhase=v.AT_TARGET;v.target&&v.target!==s&&v.target!==this.rootTarget.parent;)v.currentTarget=v.target,this.notifyTarget(v),r&&this.notifyTarget(v,"mouseenter"),v.target=v.target.parent;this.freeEvent(v)}this.freeEvent(m)}const o=[],a=this.enableGlobalMoveEvents??!0;this.moveOnAll?o.push("pointermove"):this.dispatchEvent(n,"pointermove"),a&&o.push("globalpointermove"),n.pointerType==="touch"&&(this.moveOnAll?o.splice(1,0,"touchmove"):this.dispatchEvent(n,"touchmove"),a&&o.push("globaltouchmove")),r&&(this.moveOnAll?o.splice(1,0,"mousemove"):this.dispatchEvent(n,"mousemove"),a&&o.push("globalmousemove"),this.cursor=(h=n.target)==null?void 0:h.cursor),o.length>0&&this.all(n,o),this._allInteractiveElements.length=0,this._hitElements.length=0,i.overTargets=n.composedPath(),this.freeEvent(n)}mapPointerOver(e){var o;if(!(e instanceof gs)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const n=this.trackingData(e.pointerId),r=this.createPointerEvent(e),i=r.pointerType==="mouse"||r.pointerType==="pen";this.dispatchEvent(r,"pointerover"),i&&this.dispatchEvent(r,"mouseover"),r.pointerType==="mouse"&&(this.cursor=(o=r.target)==null?void 0:o.cursor);const s=this.clonePointerEvent(r,"pointerenter");for(s.eventPhase=s.AT_TARGET;s.target&&s.target!==this.rootTarget.parent;)s.currentTarget=s.target,this.notifyTarget(s),i&&this.notifyTarget(s,"mouseenter"),s.target=s.target.parent;n.overTargets=r.composedPath(),this.freeEvent(r),this.freeEvent(s)}mapPointerOut(e){if(!(e instanceof gs)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const n=this.trackingData(e.pointerId);if(n.overTargets){const r=e.pointerType==="mouse"||e.pointerType==="pen",i=this.findMountedTarget(n.overTargets),s=this.createPointerEvent(e,"pointerout",i);this.dispatchEvent(s),r&&this.dispatchEvent(s,"mouseout");const o=this.createPointerEvent(e,"pointerleave",i);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),r&&this.notifyTarget(o,"mouseleave"),o.target=o.target.parent;n.overTargets=null,this.freeEvent(s),this.freeEvent(o)}this.cursor=null}mapPointerUp(e){if(!(e instanceof gs)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const n=performance.now(),r=this.createPointerEvent(e);if(this.dispatchEvent(r,"pointerup"),r.pointerType==="touch")this.dispatchEvent(r,"touchend");else if(r.pointerType==="mouse"||r.pointerType==="pen"){const a=r.button===2;this.dispatchEvent(r,a?"rightup":"mouseup")}const i=this.trackingData(e.pointerId),s=this.findMountedTarget(i.pressTargetsByButton[e.button]);let o=s;if(s&&!r.composedPath().includes(s)){let a=s;for(;a&&!r.composedPath().includes(a);){if(r.currentTarget=a,this.notifyTarget(r,"pointerupoutside"),r.pointerType==="touch")this.notifyTarget(r,"touchendoutside");else if(r.pointerType==="mouse"||r.pointerType==="pen"){const c=r.button===2;this.notifyTarget(r,c?"rightupoutside":"mouseupoutside")}a=a.parent}delete i.pressTargetsByButton[e.button],o=a}if(o){const a=this.clonePointerEvent(r,"click");a.target=o,a.path=null,i.clicksByButton[e.button]||(i.clicksByButton[e.button]={clickCount:0,target:a.target,timeStamp:n});const c=i.clicksByButton[e.button];if(c.target===a.target&&n-c.timeStamp<200?++c.clickCount:c.clickCount=1,c.target=a.target,c.timeStamp=n,a.detail=c.clickCount,a.pointerType==="mouse"){const h=a.button===2;this.dispatchEvent(a,h?"rightclick":"click")}else a.pointerType==="touch"&&this.dispatchEvent(a,"tap");this.dispatchEvent(a,"pointertap"),this.freeEvent(a)}this.freeEvent(r)}mapPointerUpOutside(e){if(!(e instanceof gs)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const n=this.trackingData(e.pointerId),r=this.findMountedTarget(n.pressTargetsByButton[e.button]),i=this.createPointerEvent(e);if(r){let s=r;for(;s;)i.currentTarget=s,this.notifyTarget(i,"pointerupoutside"),i.pointerType==="touch"?this.notifyTarget(i,"touchendoutside"):(i.pointerType==="mouse"||i.pointerType==="pen")&&this.notifyTarget(i,i.button===2?"rightupoutside":"mouseupoutside"),s=s.parent;delete n.pressTargetsByButton[e.button]}this.freeEvent(i)}mapWheel(e){if(!(e instanceof Wc)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const n=this.createWheelEvent(e);this.dispatchEvent(n),this.freeEvent(n)}findMountedTarget(e){if(!e)return null;let n=e[0];for(let r=1;r<e.length&&e[r].parent===n;r++)n=e[r];return n}createPointerEvent(e,n,r){const i=this.allocateEvent(gs);return this.copyPointerData(e,i),this.copyMouseData(e,i),this.copyData(e,i),i.nativeEvent=e.nativeEvent,i.originalEvent=e,i.target=r??this.hitTest(i.global.x,i.global.y)??this._hitElements[0],typeof n=="string"&&(i.type=n),i}createWheelEvent(e){const n=this.allocateEvent(Wc);return this.copyWheelData(e,n),this.copyMouseData(e,n),this.copyData(e,n),n.nativeEvent=e.nativeEvent,n.originalEvent=e,n.target=this.hitTest(n.global.x,n.global.y),n}clonePointerEvent(e,n){const r=this.allocateEvent(gs);return r.nativeEvent=e.nativeEvent,r.originalEvent=e.originalEvent,this.copyPointerData(e,r),this.copyMouseData(e,r),this.copyData(e,r),r.target=e.target,r.path=e.composedPath().slice(),r.type=n??r.type,r}copyWheelData(e,n){n.deltaMode=e.deltaMode,n.deltaX=e.deltaX,n.deltaY=e.deltaY,n.deltaZ=e.deltaZ}copyPointerData(e,n){e instanceof gs&&n instanceof gs&&(n.pointerId=e.pointerId,n.width=e.width,n.height=e.height,n.isPrimary=e.isPrimary,n.pointerType=e.pointerType,n.pressure=e.pressure,n.tangentialPressure=e.tangentialPressure,n.tiltX=e.tiltX,n.tiltY=e.tiltY,n.twist=e.twist)}copyMouseData(e,n){e instanceof hg&&n instanceof hg&&(n.altKey=e.altKey,n.button=e.button,n.buttons=e.buttons,n.client.copyFrom(e.client),n.ctrlKey=e.ctrlKey,n.metaKey=e.metaKey,n.movement.copyFrom(e.movement),n.screen.copyFrom(e.screen),n.shiftKey=e.shiftKey,n.global.copyFrom(e.global))}copyData(e,n){n.isTrusted=e.isTrusted,n.srcElement=e.srcElement,n.timeStamp=performance.now(),n.type=e.type,n.detail=e.detail,n.view=e.view,n.which=e.which,n.layer.copyFrom(e.layer),n.page.copyFrom(e.page)}trackingData(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}allocateEvent(e){this.eventPool.has(e)||this.eventPool.set(e,[]);const n=this.eventPool.get(e).pop()||new e(this);return n.eventPhase=n.NONE,n.currentTarget=null,n.path=null,n.target=null,n}freeEvent(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const n=e.constructor;this.eventPool.has(n)||this.eventPool.set(n,[]),this.eventPool.get(n).push(e)}notifyListeners(e,n){const r=e.currentTarget._events[n];if(r&&e.currentTarget.isInteractive())if("fn"in r)r.once&&e.currentTarget.removeListener(n,r.fn,void 0,!0),r.fn.call(r.context,e);else for(let i=0,s=r.length;i<s&&!e.propagationImmediatelyStopped;i++)r[i].once&&e.currentTarget.removeListener(n,r[i].fn,void 0,!0),r[i].fn.call(r[i].context,e)}}const U4=1,z4={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},gx=class{constructor(t){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=t,this.rootBoundary=new B4(null),za.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new gs(null),this.rootWheelEvent=new Wc(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...gx.defaultEventFeatures},{set:(e,n,r)=>(n==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=r),e[n]=r,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(t){const{view:e,resolution:n}=this.renderer;this.setTargetElement(e),this.resolution=n,gx._defaultEventMode=t.eventMode??"auto",Object.assign(this.features,t.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(t){this.resolution=t}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(t){t=t||"default";let e=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(e=!1),this.currentCursor===t)return;this.currentCursor=t;const n=this.cursorStyles[t];if(n)switch(typeof n){case"string":e&&(this.domElement.style.cursor=n);break;case"function":n(t);break;case"object":e&&Object.assign(this.domElement.style,n);break}else e&&typeof t=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,t)&&(this.domElement.style.cursor=t)}get pointer(){return this.rootPointerEvent}onPointerDown(t){if(!this.features.click||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&t.pointerType==="touch"))return;const e=this.normalizeToPointerData(t);this.autoPreventDefault&&e[0].isNormalized&&(t.cancelable||!("cancelable"in t))&&t.preventDefault();for(let n=0,r=e.length;n<r;n++){const i=e[n],s=this.bootstrapEvent(this.rootPointerEvent,i);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(t){if(!this.features.move||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&t.pointerType==="touch"))return;za.pointerMoved();const e=this.normalizeToPointerData(t);for(let n=0,r=e.length;n<r;n++){const i=this.bootstrapEvent(this.rootPointerEvent,e[n]);this.rootBoundary.mapEvent(i)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(t){if(!this.features.click||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&t.pointerType==="touch"))return;let e=t.target;t.composedPath&&t.composedPath().length>0&&(e=t.composedPath()[0]);const n=e!==this.domElement?"outside":"",r=this.normalizeToPointerData(t);for(let i=0,s=r.length;i<s;i++){const o=this.bootstrapEvent(this.rootPointerEvent,r[i]);o.type+=n,this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(t){if(!this.features.click||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&t.pointerType==="touch"))return;const e=this.normalizeToPointerData(t);for(let n=0,r=e.length;n<r;n++){const i=this.bootstrapEvent(this.rootPointerEvent,e[n]);this.rootBoundary.mapEvent(i)}this.setCursor(this.rootBoundary.cursor)}onWheel(t){if(!this.features.wheel)return;const e=this.normalizeWheelEvent(t);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(e)}setTargetElement(t){this.removeEvents(),this.domElement=t,za.domElement=t,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;za.addTickerListener();const t=this.domElement.style;t&&(globalThis.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0)),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;za.removeTickerListener();const t=this.domElement.style;globalThis.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(t,e,n){let r;this.domElement.parentElement?r=this.domElement.getBoundingClientRect():r={x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0};const i=1/this.resolution;t.x=(e-r.left)*(this.domElement.width/r.width)*i,t.y=(n-r.top)*(this.domElement.height/r.height)*i}normalizeToPointerData(t){const e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(let n=0,r=t.changedTouches.length;n<r;n++){const i=t.changedTouches[n];typeof i.button>"u"&&(i.button=0),typeof i.buttons>"u"&&(i.buttons=1),typeof i.isPrimary>"u"&&(i.isPrimary=t.touches.length===1&&t.type==="touchstart"),typeof i.width>"u"&&(i.width=i.radiusX||1),typeof i.height>"u"&&(i.height=i.radiusY||1),typeof i.tiltX>"u"&&(i.tiltX=0),typeof i.tiltY>"u"&&(i.tiltY=0),typeof i.pointerType>"u"&&(i.pointerType="touch"),typeof i.pointerId>"u"&&(i.pointerId=i.identifier||0),typeof i.pressure>"u"&&(i.pressure=i.force||.5),typeof i.twist>"u"&&(i.twist=0),typeof i.tangentialPressure>"u"&&(i.tangentialPressure=0),typeof i.layerX>"u"&&(i.layerX=i.offsetX=i.clientX),typeof i.layerY>"u"&&(i.layerY=i.offsetY=i.clientY),i.isNormalized=!0,i.type=t.type,e.push(i)}else if(!globalThis.MouseEvent||t instanceof MouseEvent&&(!this.supportsPointerEvents||!(t instanceof globalThis.PointerEvent))){const n=t;typeof n.isPrimary>"u"&&(n.isPrimary=!0),typeof n.width>"u"&&(n.width=1),typeof n.height>"u"&&(n.height=1),typeof n.tiltX>"u"&&(n.tiltX=0),typeof n.tiltY>"u"&&(n.tiltY=0),typeof n.pointerType>"u"&&(n.pointerType="mouse"),typeof n.pointerId>"u"&&(n.pointerId=U4),typeof n.pressure>"u"&&(n.pressure=.5),typeof n.twist>"u"&&(n.twist=0),typeof n.tangentialPressure>"u"&&(n.tangentialPressure=0),n.isNormalized=!0,e.push(n)}else e.push(t);return e}normalizeWheelEvent(t){const e=this.rootWheelEvent;return this.transferMouseData(e,t),e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ,e.deltaMode=t.deltaMode,this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.nativeEvent=t,e.type=t.type,e}bootstrapEvent(t,e){return t.originalEvent=null,t.nativeEvent=e,t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist,this.transferMouseData(t,e),this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.isTrusted=e.isTrusted,t.type==="pointerleave"&&(t.type="pointerout"),t.type.startsWith("mouse")&&(t.type=t.type.replace("mouse","pointer")),t.type.startsWith("touch")&&(t.type=z4[t.type]||t.type),t}transferMouseData(t,e){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.x=e.clientX,t.client.y=e.clientY,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.movement.x=e.movementX,t.movement.y=e.movementY,t.page.x=e.pageX,t.page.y=e.pageY,t.relatedTarget=null,t.shiftKey=e.shiftKey}};let Kd=gx;Kd.extension={name:"events",type:[Ee.RendererSystem,Ee.CanvasRendererSystem]};Kd.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};Me.add(Kd);function hT(t){return t==="dynamic"||t==="static"}const $4={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??hT(Kd.defaultEventMode)},set interactive(t){ot("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=t,this.eventMode=t?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??Kd.defaultEventMode},set eventMode(t){this._internalInteractive=hT(t),this._internalEventMode=t},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(t,e,n){const r=typeof n=="boolean"&&n||typeof n=="object"&&n.capture,i=typeof e=="function"?void 0:e;t=r?`${t}capture`:t,e=typeof e=="function"?e:e.handleEvent,this.on(t,e,i)},removeEventListener(t,e,n){const r=typeof n=="boolean"&&n||typeof n=="object"&&n.capture,i=typeof e=="function"?void 0:e;t=r?`${t}capture`:t,e=typeof e=="function"?e:e.handleEvent,this.off(t,e,i)},dispatchEvent(t){if(!(t instanceof vf))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return t.defaultPrevented=!1,t.path=null,t.target=this,t.manager.dispatchEvent(t),!t.defaultPrevented}};tn.mixin($4);const H4={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};tn.mixin(H4);const G4=9,Gp=100,W4=0,j4=0,dT=2,fT=1,V4=-1e3,X4=-1e3,q4=2;class zP{constructor(e){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(Qo.tablet||Qo.phone)&&this.createTouchHook();const n=document.createElement("div");n.style.width=`${Gp}px`,n.style.height=`${Gp}px`,n.style.position="absolute",n.style.top=`${W4}px`,n.style.left=`${j4}px`,n.style.zIndex=dT.toString(),this.div=n,this.renderer=e,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const e=document.createElement("button");e.style.width=`${fT}px`,e.style.height=`${fT}px`,e.style.position="absolute",e.style.top=`${V4}px`,e.style.left=`${X4}px`,e.style.zIndex=q4.toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(e),this._hookDiv=e}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){var e;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(e=this.renderer.view.parentNode)==null||e.appendChild(this.div))}deactivate(){var e;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(e=this.div.parentNode)==null||e.removeChild(this.div))}updateAccessibleObjects(e){if(!e.visible||!e.accessibleChildren)return;e.accessible&&e.isInteractive()&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);const n=e.children;if(n)for(let r=0;r<n.length;r++)this.updateAccessibleObjects(n[r])}update(){const e=performance.now();if(Qo.android.device&&e<this.androidUpdateCount||(this.androidUpdateCount=e+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:n,y:r,width:i,height:s}=this.renderer.view.getBoundingClientRect(),{width:o,height:a,resolution:c}=this.renderer,h=i/o*c,d=s/a*c;let m=this.div;m.style.left=`${n}px`,m.style.top=`${r}px`,m.style.width=`${o}px`,m.style.height=`${a}px`;for(let f=0;f<this.children.length;f++){const y=this.children[f];if(y.renderId!==this.renderId)y._accessibleActive=!1,Ic(this.children,f,1),this.div.removeChild(y._accessibleDiv),this.pool.push(y._accessibleDiv),y._accessibleDiv=null,f--;else{m=y._accessibleDiv;let v=y.hitArea;const S=y.worldTransform;y.hitArea?(m.style.left=`${(S.tx+v.x*S.a)*h}px`,m.style.top=`${(S.ty+v.y*S.d)*d}px`,m.style.width=`${v.width*S.a*h}px`,m.style.height=`${v.height*S.d*d}px`):(v=y.getBounds(),this.capHitArea(v),m.style.left=`${v.x*h}px`,m.style.top=`${v.y*d}px`,m.style.width=`${v.width*h}px`,m.style.height=`${v.height*d}px`,m.title!==y.accessibleTitle&&y.accessibleTitle!==null&&(m.title=y.accessibleTitle),m.getAttribute("aria-label")!==y.accessibleHint&&y.accessibleHint!==null&&m.setAttribute("aria-label",y.accessibleHint)),(y.accessibleTitle!==m.title||y.tabIndex!==m.tabIndex)&&(m.title=y.accessibleTitle,m.tabIndex=y.tabIndex,this.debug&&this.updateDebugHTML(m))}}this.renderId++}updateDebugHTML(e){e.innerHTML=`type: ${e.type}</br> title : ${e.title}</br> tabIndex: ${e.tabIndex}`}capHitArea(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);const{width:n,height:r}=this.renderer;e.x+e.width>n&&(e.width=n-e.x),e.y+e.height>r&&(e.height=r-e.y)}addChild(e){let n=this.pool.pop();n||(n=document.createElement("button"),n.style.width=`${Gp}px`,n.style.height=`${Gp}px`,n.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",n.style.position="absolute",n.style.zIndex=dT.toString(),n.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?n.setAttribute("aria-live","off"):n.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?n.setAttribute("aria-relevant","additions"):n.setAttribute("aria-relevant","text"),n.addEventListener("click",this._onClick.bind(this)),n.addEventListener("focus",this._onFocus.bind(this)),n.addEventListener("focusout",this._onFocusOut.bind(this))),n.style.pointerEvents=e.accessiblePointerEvents,n.type=e.accessibleType,e.accessibleTitle&&e.accessibleTitle!==null?n.title=e.accessibleTitle:(!e.accessibleHint||e.accessibleHint===null)&&(n.title=`displayObject ${e.tabIndex}`),e.accessibleHint&&e.accessibleHint!==null&&n.setAttribute("aria-label",e.accessibleHint),this.debug&&this.updateDebugHTML(n),e._accessibleActive=!0,e._accessibleDiv=n,n.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex}_dispatchEvent(e,n){const{displayObject:r}=e.target,i=this.renderer.events.rootBoundary,s=Object.assign(new vf(i),{target:r});i.rootTarget=this.renderer.lastObjectRendered,n.forEach(o=>i.dispatchEvent(s,o))}_onClick(e){this._dispatchEvent(e,["click","pointertap","tap"])}_onFocus(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive"),this._dispatchEvent(e,["mouseover"])}_onFocusOut(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite"),this._dispatchEvent(e,["mouseout"])}_onKeyDown(e){e.keyCode===G4&&this.activate()}_onMouseMove(e){e.movementX===0&&e.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}zP.extension={name:"accessibility",type:[Ee.RendererPlugin,Ee.CanvasRendererPlugin]};Me.add(zP);const yx=class{constructor(t){this.stage=new nr,t=Object.assign({forceCanvas:!1},t),this.renderer=o4(t),yx._plugins.forEach(e=>{e.init.call(this,t)})}render(){this.renderer.render(this.stage)}get view(){return this.renderer.view}get screen(){return this.renderer.screen}destroy(t,e){const n=yx._plugins.slice(0);n.reverse(),n.forEach(r=>{r.destroy.call(this)}),this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null}};let xf=yx;xf._plugins=[];Me.handleByList(Ee.Application,xf._plugins);class $P{static init(e){Object.defineProperty(this,"resizeTo",{set(n){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=n,n&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let n,r;if(this._resizeTo===globalThis.window)n=globalThis.innerWidth,r=globalThis.innerHeight;else{const{clientWidth:i,clientHeight:s}=this._resizeTo;n=i,r=s}this.renderer.resize(n,r),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}$P.extension=Ee.Application;Me.add($P);const pT={loader:Ee.LoadParser,resolver:Ee.ResolveParser,cache:Ee.CacheParser,detection:Ee.DetectionParser};Me.handle(Ee.Asset,t=>{const e=t.ref;Object.entries(pT).filter(([n])=>!!e[n]).forEach(([n,r])=>Me.add(Object.assign(e[n],{extension:e[n].extension??r})))},t=>{const e=t.ref;Object.keys(pT).filter(n=>!!e[n]).forEach(n=>Me.remove(e[n]))});class Y4{constructor(e,n=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=n}add(e){e.forEach(n=>{this._assetList.push(n)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const e=[],n=Math.min(this._assetList.length,this._maxConcurrent);for(let r=0;r<n;r++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}function wf(t,e){if(Array.isArray(e)){for(const n of e)if(t.startsWith(`data:${n}`))return!0;return!1}return t.startsWith(`data:${e}`)}function vu(t,e){const n=t.split("?")[0],r=Rr.extname(n).toLowerCase();return Array.isArray(e)?e.includes(r):r===e}const ea=(t,e)=>(Array.isArray(t)||(t=[t]),e?t.map(n=>typeof n=="string"?e(n):n):t),vx=(t,e)=>{const n=e.split("?")[1];return n&&(t+=`?${n}`),t};function HP(t,e,n,r,i){const s=e[n];for(let o=0;o<s.length;o++){const a=s[o];n<e.length-1?HP(t.replace(r[n],a),e,n+1,r,i):i.push(t.replace(r[n],a))}}function Q4(t){const e=/\{(.*?)\}/g,n=t.match(e),r=[];if(n){const i=[];n.forEach(s=>{const o=s.substring(1,s.length-1).split(",");i.push(o)}),HP(t,i,0,n,r)}else r.push(t);return r}const dg=t=>!Array.isArray(t);class K4{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){const n=this._cache.get(e);return n||console.warn(`[Assets] Asset id ${e} was not found in the Cache`),n}set(e,n){const r=ea(e);let i;for(let a=0;a<this.parsers.length;a++){const c=this.parsers[a];if(c.test(n)){i=c.getCacheableAssets(r,n);break}}i||(i={},r.forEach(a=>{i[a]=n}));const s=Object.keys(i),o={cacheKeys:s,keys:r};if(r.forEach(a=>{this._cacheMap.set(a,o)}),s.forEach(a=>{this._cache.has(a)&&this._cache.get(a)!==n&&console.warn("[Cache] already has key:",a),this._cache.set(a,i[a])}),n instanceof xe){const a=n;r.forEach(c=>{a.baseTexture!==xe.EMPTY.baseTexture&&Ge.addToCache(a.baseTexture,c),xe.addToCache(a,c)})}}remove(e){if(this._cacheMap.get(e),!this._cacheMap.has(e)){console.warn(`[Assets] Asset id ${e} was not found in the Cache`);return}const n=this._cacheMap.get(e);n.cacheKeys.forEach(i=>{this._cache.delete(i)}),n.keys.forEach(i=>{this._cacheMap.delete(i)})}get parsers(){return this._parsers}}const Hh=new K4;class Z4{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,n,r)=>(this._parsersValidated=!1,e[n]=r,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,n){const r={promise:null,parser:null};return r.promise=(async()=>{var o,a;let i=null,s=null;if(n.loadParser&&(s=this._parserHash[n.loadParser],s||console.warn(`[Assets] specified load parser "${n.loadParser}" not found while loading ${e}`)),!s){for(let c=0;c<this.parsers.length;c++){const h=this.parsers[c];if(h.load&&((o=h.test)!=null&&o.call(h,e,n,this))){s=h;break}}if(!s)return console.warn(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}i=await s.load(e,n,this),r.parser=s;for(let c=0;c<this.parsers.length;c++){const h=this.parsers[c];h.parse&&h.parse&&await((a=h.testParse)==null?void 0:a.call(h,i,n,this))&&(i=await h.parse(i,n,this)||i,r.parser=h)}return i})(),r}async load(e,n){this._parsersValidated||this._validateParsers();let r=0;const i={},s=dg(e),o=ea(e,h=>({src:h})),a=o.length,c=o.map(async h=>{const d=Rr.toAbsolute(h.src);if(!i[h.src])try{this.promiseCache[d]||(this.promiseCache[d]=this._getLoadPromiseAndParser(d,h)),i[h.src]=await this.promiseCache[d].promise,n&&n(++r/a)}catch(m){throw delete this.promiseCache[d],delete i[h.src],new Error(`[Loader.load] Failed to load ${d}.
${m}`)}});return await Promise.all(c),s?i[o[0].src]:i}async unload(e){const r=ea(e,i=>({src:i})).map(async i=>{var a,c;const s=Rr.toAbsolute(i.src),o=this.promiseCache[s];if(o){const h=await o.promise;(c=(a=o.parser)==null?void 0:a.unload)==null||c.call(a,h,i,this),delete this.promiseCache[s]}});await Promise.all(r)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name).reduce((e,n)=>(e[n.name]&&console.warn(`[Assets] loadParser name conflict "${n.name}"`),{...e,[n.name]:n}),{})}}var ko=(t=>(t[t.Low=0]="Low",t[t.Normal=1]="Normal",t[t.High=2]="High",t))(ko||{});const J4=".json",eB="application/json",tB={extension:{type:Ee.LoadParser,priority:ko.Low},name:"loadJson",test(t){return wf(t,eB)||vu(t,J4)},async load(t){return await(await Se.ADAPTER.fetch(t)).json()}};Me.add(tB);const nB=".txt",rB="text/plain",iB={name:"loadTxt",extension:{type:Ee.LoadParser,priority:ko.Low},test(t){return wf(t,rB)||vu(t,nB)},async load(t){return await(await Se.ADAPTER.fetch(t)).text()}};Me.add(iB);const sB=["normal","bold","100","200","300","400","500","600","700","800","900"],oB=[".ttf",".otf",".woff",".woff2"],aB=["font/ttf","font/otf","font/woff","font/woff2"],lB=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function uB(t){const e=Rr.extname(t),i=Rr.basename(t,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(a=>a.charAt(0).toUpperCase()+a.slice(1));let s=i.length>0;for(const a of i)if(!a.match(lB)){s=!1;break}let o=i.join(" ");return s||(o=`"${o.replace(/[\\"]/g,"\\$&")}"`),o}const cB={extension:{type:Ee.LoadParser,priority:ko.Low},name:"loadWebFont",test(t){return wf(t,aB)||vu(t,oB)},async load(t,e){var r,i,s;const n=Se.ADAPTER.getFontFaceSet();if(n){const o=[],a=((r=e.data)==null?void 0:r.family)??uB(t),c=((s=(i=e.data)==null?void 0:i.weights)==null?void 0:s.filter(d=>sB.includes(d)))??["normal"],h=e.data??{};for(let d=0;d<c.length;d++){const m=c[d],f=new FontFace(a,`url(${encodeURI(t)})`,{...h,weight:m});await f.load(),n.add(f),o.push(f)}return o.length===1?o[0]:o}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(t){(Array.isArray(t)?t:[t]).forEach(e=>Se.ADAPTER.getFontFaceSet().delete(e))}};Me.add(cB);let mT=0,vv;const hB="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=",dB={id:"checkImageBitmap",code:`
    async function checkImageBitmap()
    {
        try
        {
            if (typeof createImageBitmap !== 'function') return false;

            const response = await fetch('${hB}');
            const imageBlob =  await response.blob();
            const imageBitmap = await createImageBitmap(imageBlob);

            return imageBitmap.width === 1 && imageBitmap.height === 1;
        }
        catch (e)
        {
            return false;
        }
    }
    checkImageBitmap().then((result) => { self.postMessage(result); });
    `},fB={id:"loadImageBitmap",code:`
    async function loadImageBitmap(url)
    {
        const response = await fetch(url);

        if (!response.ok)
        {
            throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \`
                + \`\${response.status} \${response.statusText}\`);
        }

        const imageBlob =  await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);

        return imageBitmap;
    }
    self.onmessage = async (event) =>
    {
        try
        {
            const imageBitmap = await loadImageBitmap(event.data.data[0]);

            self.postMessage({
                data: imageBitmap,
                uuid: event.data.uuid,
                id: event.data.id,
            }, [imageBitmap]);
        }
        catch(e)
        {
            self.postMessage({
                error: e,
                uuid: event.data.uuid,
                id: event.data.id,
            });
        }
    };`};let xv;class pB{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(e=>{const n=URL.createObjectURL(new Blob([dB.code],{type:"application/javascript"})),r=new Worker(n);r.addEventListener("message",i=>{r.terminate(),URL.revokeObjectURL(n),e(i.data)})}),this._isImageBitmapSupported)}loadImageBitmap(e){return this._run("loadImageBitmap",[e])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){vv===void 0&&(vv=navigator.hardwareConcurrency||4);let e=this.workerPool.pop();return!e&&this._createdWorkers<vv&&(xv||(xv=URL.createObjectURL(new Blob([fB.code],{type:"application/javascript"}))),this._createdWorkers++,e=new Worker(xv),e.addEventListener("message",n=>{this.complete(n.data),this.returnWorker(n.target),this.next()})),e}returnWorker(e){this.workerPool.push(e)}complete(e){e.error!==void 0?this.resolveHash[e.uuid].reject(e.error):this.resolveHash[e.uuid].resolve(e.data),this.resolveHash[e.uuid]=null}async _run(e,n){await this._initWorkers();const r=new Promise((i,s)=>{this.queue.push({id:e,arguments:n,resolve:i,reject:s})});return this.next(),r}next(){if(!this.queue.length)return;const e=this.getWorker();if(!e)return;const n=this.queue.pop(),r=n.id;this.resolveHash[mT]={resolve:n.resolve,reject:n.reject},e.postMessage({data:n.arguments,uuid:mT++,id:r})}}const gT=new pB;function oy(t,e,n){const r=new xe(t);return r.baseTexture.on("dispose",()=>{delete e.promiseCache[n]}),r}const mB=[".jpeg",".jpg",".png",".webp",".avif"],gB=["image/jpeg","image/png","image/webp","image/avif"];async function yB(t){const e=await Se.ADAPTER.fetch(t);if(!e.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${t}: ${e.status} ${e.statusText}`);const n=await e.blob();return await createImageBitmap(n)}const ay={name:"loadTextures",extension:{type:Ee.LoadParser,priority:ko.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(t){return wf(t,gB)||vu(t,mB)},async load(t,e,n){let r=null;globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await gT.isImageBitmapSupported()?r=await gT.loadImageBitmap(t):r=await yB(t):r=await new Promise(s=>{r=new Image,r.crossOrigin=this.config.crossOrigin,r.src=t,r.complete?s(r):r.onload=()=>{s(r)}});const i=new Ge(r,{resolution:sl(t),...e.data});return i.resource.src=t,oy(i,n,t)},unload(t){t.destroy(!0)}};Me.add(ay);const vB=".svg",xB="image/svg+xml",wB={extension:{type:Ee.LoadParser,priority:ko.High},name:"loadSVG",test(t){return wf(t,xB)||vu(t,vB)},async testParse(t){return Qd.test(t)},async parse(t,e,n){var o;const r=new Qd(t,(o=e==null?void 0:e.data)==null?void 0:o.resourceOptions);await r.load();const i=new Ge(r,{resolution:sl(t),...e==null?void 0:e.data});return i.resource.src=t,oy(i,n,t)},async load(t,e){return(await Se.ADAPTER.fetch(t)).text()},unload:ay.unload};Me.add(wB);class _B{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,n)=>`${e}${this._bundleIdConnector}${n}`,extractAssetIdFromBundle:(e,n)=>n.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(n=>{this._preferredOrder.push(n),n.priority||(n.priority=Object.keys(n.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if(typeof e=="string")this._defaultSearchParams=e;else{const n=e;this._defaultSearchParams=Object.keys(n).map(r=>`${encodeURIComponent(r)}=${encodeURIComponent(n[r])}`).join("&")}}addManifest(e){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(n=>{this.addBundle(n.name,n.assets)})}addBundle(e,n){const r=[];Array.isArray(n)?n.forEach(i=>{if(typeof i.name=="string"){const s=this._createBundleAssetId(e,i.name);r.push(s),this.add([i.name,s],i.srcs,i.data)}else{const s=i.name.map(o=>this._createBundleAssetId(e,o));s.forEach(o=>{r.push(o)}),this.add([...i.name,...s],i.srcs)}}):Object.keys(n).forEach(i=>{r.push(this._createBundleAssetId(e,i)),this.add([i,this._createBundleAssetId(e,i)],n[i])}),this._bundles[e]=r}add(e,n,r){const i=ea(e);i.forEach(o=>{this.hasKey(o)&&console.warn(`[Resolver] already has key: ${o} overwriting`)}),Array.isArray(n)||(typeof n=="string"?n=Q4(n):n=[n]);const s=n.map(o=>{let a=o;if(typeof o=="string"){let c=!1;for(let h=0;h<this._parsers.length;h++){const d=this._parsers[h];if(d.test(o)){a=d.parse(o),c=!0;break}}c||(a={src:o})}return a.format||(a.format=a.src.split(".").pop()),a.alias||(a.alias=i),(this._basePath||this._rootPath)&&(a.src=Rr.toAbsolute(a.src,this._basePath,this._rootPath)),a.src=this._appendDefaultSearchParams(a.src),a.data=a.data??r,a});i.forEach(o=>{this._assetMap[o]=s})}resolveBundle(e){const n=dg(e);e=ea(e);const r={};return e.forEach(i=>{const s=this._bundles[i];if(s){const o=this.resolve(s),a={};for(const c in o){const h=o[c];a[this._extractAssetIdFromBundle(i,c)]=h}r[i]=a}}),n?r[e[0]]:r}resolveUrl(e){const n=this.resolve(e);if(typeof e!="string"){const r={};for(const i in n)r[i]=n[i].src;return r}return n.src}resolve(e){const n=dg(e);e=ea(e);const r={};return e.forEach(i=>{if(!this._resolverHash[i])if(this._assetMap[i]){let s=this._assetMap[i];const o=this._getPreferredOrder(s),a=s[0];o==null||o.priority.forEach(c=>{o.params[c].forEach(h=>{const d=s.filter(m=>m[c]?m[c]===h:!1);d.length&&(s=d)})}),this._resolverHash[i]=s[0]??a}else{let s=i;(this._basePath||this._rootPath)&&(s=Rr.toAbsolute(s,this._basePath,this._rootPath)),s=this._appendDefaultSearchParams(s),this._resolverHash[i]={src:s}}r[i]=this._resolverHash[i]}),n?r[e[0]]:r}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let n=0;n<e.length;n++){const r=e[0],i=this._preferredOrder.find(s=>s.params.format.includes(r.format));if(i)return i}return this._preferredOrder[0]}_appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;const n=/\?/.test(e)?"&":"?";return`${e}${n}${this._defaultSearchParams}`}}class SB{constructor(){this._detections=[],this._initialized=!1,this.resolver=new _B,this.loader=new Z4,this.cache=Hh,this._backgroundLoader=new Y4(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){var s,o,a;if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Asset.init()?");return}if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let c=e.manifest;typeof c=="string"&&(c=await this.load(c)),this.resolver.addManifest(c)}const n=((s=e.texturePreference)==null?void 0:s.resolution)??1,r=typeof n=="number"?[n]:n;let i=[];if((o=e.texturePreference)!=null&&o.format){const c=(a=e.texturePreference)==null?void 0:a.format;i=typeof c=="string"?[c]:c;for(const h of this._detections)await h.test()||(i=await h.remove(i))}else for(const c of this._detections)await c.test()&&(i=await c.add(i));this.resolver.prefer({params:{format:i,resolution:r}}),e.preferences&&this.setPreferences(e.preferences)}add(e,n,r){this.resolver.add(e,n,r)}async load(e,n){this._initialized||await this.init();const r=dg(e),i=ea(e).map(a=>typeof a!="string"?(this.resolver.add(a.src,a),a.src):(this.resolver.hasKey(a)||this.resolver.add(a,a),a)),s=this.resolver.resolve(i),o=await this._mapLoadToResolve(s,n);return r?o[i[0]]:o}addBundle(e,n){this.resolver.addBundle(e,n)}async loadBundle(e,n){this._initialized||await this.init();let r=!1;typeof e=="string"&&(r=!0,e=[e]);const i=this.resolver.resolveBundle(e),s={},o=Object.keys(i);let a=0,c=0;const h=()=>{n==null||n(++a/c)},d=o.map(m=>{const f=i[m];return c+=Object.keys(f).length,this._mapLoadToResolve(f,h).then(y=>{s[m]=y})});return await Promise.all(d),r?s[e[0]]:s}async backgroundLoad(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const n=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(n))}async backgroundLoadBundle(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const n=this.resolver.resolveBundle(e);Object.values(n).forEach(r=>{this._backgroundLoader.add(Object.values(r))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if(typeof e=="string")return Hh.get(e);const n={};for(let r=0;r<e.length;r++)n[r]=Hh.get(e[r]);return n}async _mapLoadToResolve(e,n){const r=Object.values(e),i=Object.keys(e);this._backgroundLoader.active=!1;const s=await this.loader.load(r,n);this._backgroundLoader.active=!0;const o={};return r.forEach((a,c)=>{const h=s[a.src],d=[a.src];a.alias&&d.push(...a.alias),o[i[c]]=h,Hh.set(d,h)}),o}async unload(e){this._initialized||await this.init();const n=ea(e).map(i=>typeof i!="string"?i.src:i),r=this.resolver.resolve(n);await this._unloadFromResolved(r)}async unloadBundle(e){this._initialized||await this.init(),e=ea(e);const n=this.resolver.resolveBundle(e),r=Object.keys(n).map(i=>this._unloadFromResolved(n[i]));await Promise.all(r)}async _unloadFromResolved(e){const n=Object.values(e);n.forEach(r=>{Hh.remove(r.src)}),await this.loader.unload(n)}get detections(){return this._detections}get preferWorkers(){return ay.config.preferWorkers}set preferWorkers(e){ot("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:e})}setPreferences(e){this.loader.parsers.forEach(n=>{n.config&&Object.keys(n.config).filter(r=>r in e).forEach(r=>{n.config[r]=e[r]})})}}const Wp=new SB;Me.handleByList(Ee.LoadParser,Wp.loader.parsers).handleByList(Ee.ResolveParser,Wp.resolver.parsers).handleByList(Ee.CacheParser,Wp.cache.parsers).handleByList(Ee.DetectionParser,Wp.detections);const bB={extension:Ee.CacheParser,test:t=>Array.isArray(t)&&t.every(e=>e instanceof xe),getCacheableAssets:(t,e)=>{const n={};return t.forEach(r=>{e.forEach((i,s)=>{n[r+(s===0?"":s+1)]=i})}),n}};Me.add(bB);const EB={extension:{type:Ee.DetectionParser,priority:1},test:async()=>{if(!globalThis.createImageBitmap)return!1;const t="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=",e=await Se.ADAPTER.fetch(t).then(n=>n.blob());return createImageBitmap(e).then(()=>!0,()=>!1)},add:async t=>[...t,"avif"],remove:async t=>t.filter(e=>e!=="avif")};Me.add(EB);const TB={extension:{type:Ee.DetectionParser,priority:0},test:async()=>{if(!globalThis.createImageBitmap)return!1;const t="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=",e=await Se.ADAPTER.fetch(t).then(n=>n.blob());return createImageBitmap(e).then(()=>!0,()=>!1)},add:async t=>[...t,"webp"],remove:async t=>t.filter(e=>e!=="webp")};Me.add(TB);const yT=["png","jpg","jpeg"],CB={extension:{type:Ee.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async t=>[...t,...yT],remove:async t=>t.filter(e=>!yT.includes(e))};Me.add(CB);const IB={extension:Ee.ResolveParser,test:ay.test,parse:t=>{var e;return{resolution:parseFloat(((e=Se.RETINA_PREFIX.exec(t))==null?void 0:e[1])??"1"),format:t.split(".").pop(),src:t}}};Me.add(IB);var Si=(t=>(t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",t[t.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",t[t.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",t))(Si||{});const fg={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35986:1,34798:1,37808:1};let Go,Ku;function vT(){Ku={s3tc:Go.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:Go.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:Go.getExtension("WEBGL_compressed_texture_etc"),etc1:Go.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:Go.getExtension("WEBGL_compressed_texture_pvrtc")||Go.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:Go.getExtension("WEBGL_compressed_texture_atc"),astc:Go.getExtension("WEBGL_compressed_texture_astc")}}const AB={extension:{type:Ee.DetectionParser,priority:2},test:async()=>{const e=Se.ADAPTER.createCanvas().getContext("webgl");return e?(Go=e,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async t=>{Ku||vT();const e=[];for(const n in Ku)Ku[n]&&e.push(n);return[...e,...t]},remove:async t=>(Ku||vT(),t.filter(e=>!(e in Ku)))};Me.add(AB);class PB extends yf{constructor(e,n={width:1,height:1,autoLoad:!0}){let r,i;typeof e=="string"?(r=e,i=new Uint8Array):(r=null,i=e),super(i,n),this.origin=r,this.buffer=i?new ix(i):null,this._load=null,this.loaded=!1,this.origin!==null&&n.autoLoad!==!1&&this.load(),this.origin===null&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(e){}load(){return this._load?this._load:(this._load=fetch(this.origin).then(e=>e.blob()).then(e=>e.arrayBuffer()).then(e=>(this.data=new Uint32Array(e),this.buffer=new ix(e),this.loaded=!0,this.onBlobLoaded(e),this.update(),this)),this._load)}}class tu extends PB{constructor(e,n){super(e,n),this.format=n.format,this.levels=n.levels||1,this._width=n.width,this._height=n.height,this._extension=tu._formatToExtension(this.format),(n.levelBuffers||this.buffer)&&(this._levelBuffers=n.levelBuffers||tu._createLevelBuffers(e instanceof Uint8Array?e:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(e,n,r){const i=e.gl;if(!e.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;for(let o=0,a=this.levels;o<a;o++){const{levelID:c,levelWidth:h,levelHeight:d,levelBuffer:m}=this._levelBuffers[o];i.compressedTexImage2D(i.TEXTURE_2D,c,this.format,h,d,0,m)}return!0}onBlobLoaded(){this._levelBuffers=tu._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(e){if(e>=33776&&e<=33779)return"s3tc";if(e>=37488&&e<=37497)return"etc";if(e>=35840&&e<=35843)return"pvrtc";if(e>=36196)return"etc1";if(e>=35986&&e<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")}static _createLevelBuffers(e,n,r,i,s,o,a){const c=new Array(r);let h=e.byteOffset,d=o,m=a,f=d+i-1&~(i-1),y=m+s-1&~(s-1),v=f*y*fg[n];for(let S=0;S<r;S++)c[S]={levelID:S,levelWidth:r>1?d:f,levelHeight:r>1?m:y,levelBuffer:new Uint8Array(e.buffer,h,v)},h+=v,d=d>>1||1,m=m>>1||1,f=d+i-1&~(i-1),y=m+s-1&~(s-1),v=f*y*fg[n];return c}}const wv=4,jp=124,kB=32,xT=20,RB=542327876,Vp={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},MB={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},Xp={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},OB=1,DB=2,NB=4,LB=64,FB=512,BB=131072,UB=827611204,zB=861165636,$B=894720068,HB=808540228,GB=4,WB={[UB]:Si.COMPRESSED_RGBA_S3TC_DXT1_EXT,[zB]:Si.COMPRESSED_RGBA_S3TC_DXT3_EXT,[$B]:Si.COMPRESSED_RGBA_S3TC_DXT5_EXT},jB={70:Si.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:Si.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:Si.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:Si.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:Si.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:Si.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:Si.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:Si.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:Si.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT};function VB(t){const e=new Uint32Array(t);if(e[0]!==RB)throw new Error("Invalid DDS file magic word");const r=new Uint32Array(t,0,jp/Uint32Array.BYTES_PER_ELEMENT),i=r[Vp.HEIGHT],s=r[Vp.WIDTH],o=r[Vp.MIPMAP_COUNT],a=new Uint32Array(t,Vp.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,kB/Uint32Array.BYTES_PER_ELEMENT),c=a[OB];if(c&NB){const h=a[MB.FOURCC];if(h!==HB){const w=WB[h],I=wv+jp,P=new Uint8Array(t,I);return[new tu(P,{format:w,width:s,height:i,levels:o})]}const d=wv+jp,m=new Uint32Array(e.buffer,d,xT/Uint32Array.BYTES_PER_ELEMENT),f=m[Xp.DXGI_FORMAT],y=m[Xp.RESOURCE_DIMENSION],v=m[Xp.MISC_FLAG],S=m[Xp.ARRAY_SIZE],C=jB[f];if(C===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${f}`);if(v===GB)throw new Error("DDSParser does not support cubemap textures");if(y===6)throw new Error("DDSParser does not supported 3D texture data");const _=new Array,b=wv+jp+xT;if(S===1)_.push(new Uint8Array(t,b));else{const w=fg[C];let I=0,P=s,N=i;for(let D=0;D<o;D++){const V=Math.max(1,P+3&-4),G=Math.max(1,N+3&-4),F=V*G*w;I+=F,P=P>>>1,N=N>>>1}let O=b;for(let D=0;D<S;D++)_.push(new Uint8Array(t,O,I)),O+=I}return _.map(w=>new tu(w,{format:C,width:s,height:i,levels:o}))}throw c&LB?new Error("DDSParser does not support uncompressed texture data."):c&FB?new Error("DDSParser does not supported YUV uncompressed texture data."):c&BB?new Error("DDSParser does not support single-channel (lumninance) texture data!"):c&DB?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}const wT=[171,75,84,88,32,49,49,187,13,10,26,10],XB=67305985,fs={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},xx=64,_T={[Fe.UNSIGNED_BYTE]:1,[Fe.UNSIGNED_SHORT]:2,[Fe.INT]:4,[Fe.UNSIGNED_INT]:4,[Fe.FLOAT]:4,[Fe.HALF_FLOAT]:8},qB={[me.RGBA]:4,[me.RGB]:3,[me.RG]:2,[me.RED]:1,[me.LUMINANCE]:1,[me.LUMINANCE_ALPHA]:2,[me.ALPHA]:1},YB={[Fe.UNSIGNED_SHORT_4_4_4_4]:2,[Fe.UNSIGNED_SHORT_5_5_5_1]:2,[Fe.UNSIGNED_SHORT_5_6_5]:2};function QB(t,e,n=!1){const r=new DataView(e);if(!KB(t,r))return null;const i=r.getUint32(fs.ENDIANNESS,!0)===XB,s=r.getUint32(fs.GL_TYPE,i),o=r.getUint32(fs.GL_FORMAT,i),a=r.getUint32(fs.GL_INTERNAL_FORMAT,i),c=r.getUint32(fs.PIXEL_WIDTH,i),h=r.getUint32(fs.PIXEL_HEIGHT,i)||1,d=r.getUint32(fs.PIXEL_DEPTH,i)||1,m=r.getUint32(fs.NUMBER_OF_ARRAY_ELEMENTS,i)||1,f=r.getUint32(fs.NUMBER_OF_FACES,i),y=r.getUint32(fs.NUMBER_OF_MIPMAP_LEVELS,i),v=r.getUint32(fs.BYTES_OF_KEY_VALUE_DATA,i);if(h===0||d!==1)throw new Error("Only 2D textures are supported");if(f!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(m!==1)throw new Error("WebGL does not support array textures");const S=4,C=4,_=c+3&-4,b=h+3&-4,w=new Array(m);let I=c*h;s===0&&(I=_*b);let P;if(s!==0?_T[s]?P=_T[s]*qB[o]:P=YB[s]:P=fg[a],P===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const N=n?JB(r,v,i):null;let D=I*P,V=c,G=h,F=_,q=b,W=xx+v;for(let H=0;H<y;H++){const se=r.getUint32(W,i);let ue=W+4;for(let K=0;K<m;K++){let $=w[K];$||($=w[K]=new Array(y)),$[H]={levelID:H,levelWidth:y>1||s!==0?V:F,levelHeight:y>1||s!==0?G:q,levelBuffer:new Uint8Array(e,ue,D)},ue+=D}W+=se+4,W=W%4!==0?W+4-W%4:W,V=V>>1||1,G=G>>1||1,F=V+S-1&~(S-1),q=G+C-1&~(C-1),D=F*q*P}return s!==0?{uncompressed:w.map(H=>{let se=H[0].levelBuffer,ue=!1;return s===Fe.FLOAT?se=new Float32Array(H[0].levelBuffer.buffer,H[0].levelBuffer.byteOffset,H[0].levelBuffer.byteLength/4):s===Fe.UNSIGNED_INT?(ue=!0,se=new Uint32Array(H[0].levelBuffer.buffer,H[0].levelBuffer.byteOffset,H[0].levelBuffer.byteLength/4)):s===Fe.INT&&(ue=!0,se=new Int32Array(H[0].levelBuffer.buffer,H[0].levelBuffer.byteOffset,H[0].levelBuffer.byteLength/4)),{resource:new yf(se,{width:H[0].levelWidth,height:H[0].levelHeight}),type:s,format:ue?ZB(o):o}}),kvData:N}:{compressed:w.map(H=>new tu(null,{format:a,width:c,height:h,levels:y,levelBuffers:H})),kvData:N}}function KB(t,e){for(let n=0;n<wT.length;n++)if(e.getUint8(n)!==wT[n])return console.error(`${t} is not a valid *.ktx file!`),!1;return!0}function ZB(t){switch(t){case me.RGBA:return me.RGBA_INTEGER;case me.RGB:return me.RGB_INTEGER;case me.RG:return me.RG_INTEGER;case me.RED:return me.RED_INTEGER;default:return t}}function JB(t,e,n){const r=new Map;let i=0;for(;i<e;){const s=t.getUint32(xx+i,n),o=xx+i+4,a=3-(s+3)%4;if(s===0||s>e-i){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let c=0;for(;c<s&&t.getUint8(o+c)!==0;c++);if(c===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const h=new TextDecoder().decode(new Uint8Array(t.buffer,o,c)),d=new DataView(t.buffer,o+c+1,s-c-1);r.set(h,d),i+=4+s+a}return r}const eU={extension:{type:Ee.LoadParser,priority:ko.High},name:"loadDDS",test(t){return vu(t,".dds")},async load(t,e,n){const i=await(await Se.ADAPTER.fetch(t)).arrayBuffer(),o=VB(i).map(a=>{const c=new Ge(a,{mipmap:Io.OFF,alphaMode:Bs.NO_PREMULTIPLIED_ALPHA,resolution:sl(t),...e.data});return oy(c,n,t)});return o.length===1?o[0]:o},unload(t){Array.isArray(t)?t.forEach(e=>e.destroy(!0)):t.destroy(!0)}};Me.add(eU);const tU={extension:{type:Ee.LoadParser,priority:ko.High},name:"loadKTX",test(t){return vu(t,".ktx")},async load(t,e,n){const i=await(await Se.ADAPTER.fetch(t)).arrayBuffer(),{compressed:s,uncompressed:o,kvData:a}=QB(t,i),c=s??o,h={mipmap:Io.OFF,alphaMode:Bs.NO_PREMULTIPLIED_ALPHA,resolution:sl(t),...e.data},d=c.map(m=>{c===o&&Object.assign(h,{type:m.type,format:m.format});const f=new Ge(m,h);return f.ktxKeyValueData=a,oy(f,n,t)});return d.length===1?d[0]:d},unload(t){Array.isArray(t)?t.forEach(e=>e.destroy(!0)):t.destroy(!0)}};Me.add(tU);const nU={extension:Ee.ResolveParser,test:t=>{const n=t.split("?")[0].split(".").pop();return["basis","ktx","dds"].includes(n)},parse:t=>{var r,i;if(t.split("?")[0].split(".").pop()==="ktx"){const s=[".s3tc.ktx",".s3tc_sRGB.ktx",".etc.ktx",".etc1.ktx",".pvrt.ktx",".atc.ktx",".astc.ktx"];if(s.some(o=>t.endsWith(o)))return{resolution:parseFloat(((r=Se.RETINA_PREFIX.exec(t))==null?void 0:r[1])??"1"),format:s.find(o=>t.endsWith(o)),src:t}}return{resolution:parseFloat(((i=Se.RETINA_PREFIX.exec(t))==null?void 0:i[1])??"1"),format:t.split(".").pop(),src:t}}};Me.add(nU);const rU=new Ye,iU=4,td=class{constructor(t){this.renderer=t}async image(t,e,n){const r=new Image;return r.src=await this.base64(t,e,n),r}async base64(t,e,n){const r=this.canvas(t);if(r.toBlob!==void 0)return new Promise((i,s)=>{r.toBlob(o=>{if(!o){s(new Error("ICanvas.toBlob failed!"));return}const a=new FileReader;a.onload=()=>i(a.result),a.onerror=s,a.readAsDataURL(o)},e,n)});if(r.toDataURL!==void 0)return r.toDataURL(e,n);if(r.convertToBlob!==void 0){const i=await r.convertToBlob({type:e,quality:n});return new Promise((s,o)=>{const a=new FileReader;a.onload=()=>s(a.result),a.onerror=o,a.readAsDataURL(i)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(t,e){const{pixels:n,width:r,height:i,flipY:s}=this._rawPixels(t,e);s&&td._flipY(n,r,i),td._unpremultiplyAlpha(n);const o=new QL(r,i,1),a=new ImageData(new Uint8ClampedArray(n.buffer),r,i);return o.context.putImageData(a,0,0),o.canvas}pixels(t,e){const{pixels:n,width:r,height:i,flipY:s}=this._rawPixels(t,e);return s&&td._flipY(n,r,i),td._unpremultiplyAlpha(n),n}_rawPixels(t,e){const n=this.renderer;if(!n)throw new Error("The Extract has already been destroyed");let r,i=!1,s,o=!1;if(t&&(t instanceof yu?s=t:(s=n.generateTexture(t,{resolution:n.resolution,multisample:n.multisample}),o=!0)),s){if(r=s.baseTexture.resolution,e=e??s.frame,i=!1,!o){n.renderTexture.bind(s);const m=s.framebuffer.glFramebuffers[n.CONTEXT_UID];m.blitFramebuffer&&n.framebuffer.bind(m.blitFramebuffer)}}else r=n.resolution,e||(e=rU,e.width=n.width/r,e.height=n.height/r),i=!0,n.renderTexture.bind();const a=Math.round(e.width*r),c=Math.round(e.height*r),h=new Uint8Array(iU*a*c),d=n.gl;return d.readPixels(Math.round(e.x*r),Math.round(e.y*r),a,c,d.RGBA,d.UNSIGNED_BYTE,h),o&&(s==null||s.destroy(!0)),{pixels:h,width:a,height:c,flipY:i}}destroy(){this.renderer=null}static _flipY(t,e,n){const r=e<<2,i=n>>1,s=new Uint8Array(r);for(let o=0;o<i;o++){const a=o*r,c=(n-o-1)*r;s.set(t.subarray(a,a+r)),t.copyWithin(a,c,c+r),t.set(s,c)}}static _unpremultiplyAlpha(t){t instanceof Uint8ClampedArray&&(t=new Uint8Array(t.buffer));const e=t.length;for(let n=0;n<e;n+=4){const r=t[n+3];if(r!==0){const i=255.001/r;t[n]=t[n]*i+.5,t[n+1]=t[n+1]*i+.5,t[n+2]=t[n+2]*i+.5}}}};let GP=td;GP.extension={name:"extract",type:Ee.RendererSystem};Me.add(GP);const pg={build(t){const e=t.points;let n,r,i,s,o,a;if(t.type===dr.CIRC){const v=t.shape;n=v.x,r=v.y,o=a=v.radius,i=s=0}else if(t.type===dr.ELIP){const v=t.shape;n=v.x,r=v.y,o=v.width,a=v.height,i=s=0}else{const v=t.shape,S=v.width/2,C=v.height/2;n=v.x+S,r=v.y+C,o=a=Math.max(0,Math.min(v.radius,Math.min(S,C))),i=S-o,s=C-a}if(!(o>=0&&a>=0&&i>=0&&s>=0)){e.length=0;return}const c=Math.ceil(2.3*Math.sqrt(o+a)),h=c*8+(i?4:0)+(s?4:0);if(e.length=h,h===0)return;if(c===0){e.length=8,e[0]=e[6]=n+i,e[1]=e[3]=r+s,e[2]=e[4]=n-i,e[5]=e[7]=r-s;return}let d=0,m=c*4+(i?2:0)+2,f=m,y=h;{const v=i+o,S=s,C=n+v,_=n-v,b=r+S;if(e[d++]=C,e[d++]=b,e[--m]=b,e[--m]=_,s){const w=r-S;e[f++]=_,e[f++]=w,e[--y]=w,e[--y]=C}}for(let v=1;v<c;v++){const S=Math.PI/2*(v/c),C=i+Math.cos(S)*o,_=s+Math.sin(S)*a,b=n+C,w=n-C,I=r+_,P=r-_;e[d++]=b,e[d++]=I,e[--m]=I,e[--m]=w,e[f++]=w,e[f++]=P,e[--y]=P,e[--y]=b}{const v=i,S=s+a,C=n+v,_=n-v,b=r+S,w=r-S;e[d++]=C,e[d++]=b,e[--y]=w,e[--y]=C,i&&(e[d++]=_,e[d++]=b,e[--y]=w,e[--y]=_)}},triangulate(t,e){const n=t.points,r=e.points,i=e.indices;if(n.length===0)return;let s=r.length/2;const o=s;let a,c;if(t.type!==dr.RREC){const d=t.shape;a=d.x,c=d.y}else{const d=t.shape;a=d.x+d.width/2,c=d.y+d.height/2}const h=t.matrix;r.push(t.matrix?h.a*a+h.c*c+h.tx:a,t.matrix?h.b*a+h.d*c+h.ty:c),s++,r.push(n[0],n[1]);for(let d=2;d<n.length;d+=2)r.push(n[d],n[d+1]),i.push(s++,o,s);i.push(o+1,o,s)}};function ST(t,e=!1){const n=t.length;if(n<6)return;let r=0;for(let i=0,s=t[n-2],o=t[n-1];i<n;i+=2){const a=t[i],c=t[i+1];r+=(a-s)*(c+o),s=a,o=c}if(!e&&r>0||e&&r<=0){const i=n/2;for(let s=i+i%2;s<n;s+=2){const o=n-s-2,a=n-s-1,c=s,h=s+1;[t[o],t[c]]=[t[c],t[o]],[t[a],t[h]]=[t[h],t[a]]}}}const WP={build(t){t.points=t.shape.points.slice()},triangulate(t,e){let n=t.points;const r=t.holes,i=e.points,s=e.indices;if(n.length>=6){ST(n,!1);const o=[];for(let h=0;h<r.length;h++){const d=r[h];ST(d.points,!0),o.push(n.length/2),n=n.concat(d.points)}const a=wD(n,o,2);if(!a)return;const c=i.length/2;for(let h=0;h<a.length;h+=3)s.push(a[h]+c),s.push(a[h+1]+c),s.push(a[h+2]+c);for(let h=0;h<n.length;h++)i.push(n[h])}}},sU={build(t){const e=t.shape,n=e.x,r=e.y,i=e.width,s=e.height,o=t.points;o.length=0,i>=0&&s>=0&&o.push(n,r,n+i,r,n+i,r+s,n,r+s)},triangulate(t,e){const n=t.points,r=e.points;if(n.length===0)return;const i=r.length/2;r.push(n[0],n[1],n[2],n[3],n[6],n[7],n[4],n[5]),e.indices.push(i,i+1,i+2,i+1,i+2,i+3)}},oU={build(t){pg.build(t)},triangulate(t,e){pg.triangulate(t,e)}};var ws=(t=>(t.MITER="miter",t.BEVEL="bevel",t.ROUND="round",t))(ws||{}),Yl=(t=>(t.BUTT="butt",t.ROUND="round",t.SQUARE="square",t))(Yl||{});const jc={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(t,e=20){if(!this.adaptive||!t||isNaN(t))return e;let n=Math.ceil(t/this.maxLength);return n<this.minSegments?n=this.minSegments:n>this.maxSegments&&(n=this.maxSegments),n}};class bT{static curveTo(e,n,r,i,s,o){const a=o[o.length-2],h=o[o.length-1]-n,d=a-e,m=i-n,f=r-e,y=Math.abs(h*f-d*m);if(y<1e-8||s===0)return(o[o.length-2]!==e||o[o.length-1]!==n)&&o.push(e,n),null;const v=h*h+d*d,S=m*m+f*f,C=h*m+d*f,_=s*Math.sqrt(v)/y,b=s*Math.sqrt(S)/y,w=_*C/v,I=b*C/S,P=_*f+b*d,N=_*m+b*h,O=d*(b+w),D=h*(b+w),V=f*(_+I),G=m*(_+I),F=Math.atan2(D-N,O-P),q=Math.atan2(G-N,V-P);return{cx:P+e,cy:N+n,radius:s,startAngle:F,endAngle:q,anticlockwise:d*m>f*h}}static arc(e,n,r,i,s,o,a,c,h){const d=a-o,m=jc._segmentsCount(Math.abs(d)*s,Math.ceil(Math.abs(d)/ug)*40),f=d/(m*2),y=f*2,v=Math.cos(f),S=Math.sin(f),C=m-1,_=C%1/C;for(let b=0;b<=C;++b){const w=b+_*b,I=f+o+y*w,P=Math.cos(I),N=-Math.sin(I);h.push((v*P+S*N)*s+r,(v*-N+S*P)*s+i)}}}class aU{constructor(){this.reset()}begin(e,n,r){this.reset(),this.style=e,this.start=n,this.attribStart=r}end(e,n){this.attribSize=n-this.attribStart,this.size=e-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}class r_{static curveLength(e,n,r,i,s,o,a,c){let d=0,m=0,f=0,y=0,v=0,S=0,C=0,_=0,b=0,w=0,I=0,P=e,N=n;for(let O=1;O<=10;++O)m=O/10,f=m*m,y=f*m,v=1-m,S=v*v,C=S*v,_=C*e+3*S*m*r+3*v*f*s+y*a,b=C*n+3*S*m*i+3*v*f*o+y*c,w=P-_,I=N-b,P=_,N=b,d+=Math.sqrt(w*w+I*I);return d}static curveTo(e,n,r,i,s,o,a){const c=a[a.length-2],h=a[a.length-1];a.length-=2;const d=jc._segmentsCount(r_.curveLength(c,h,e,n,r,i,s,o));let m=0,f=0,y=0,v=0,S=0;a.push(c,h);for(let C=1,_=0;C<=d;++C)_=C/d,m=1-_,f=m*m,y=f*m,v=_*_,S=v*_,a.push(y*c+3*f*_*e+3*m*v*r+S*s,y*h+3*f*_*n+3*m*v*i+S*o)}}function ET(t,e,n,r,i,s,o,a){const c=t-n*i,h=e-r*i,d=t+n*s,m=e+r*s;let f,y;o?(f=r,y=-n):(f=-r,y=n);const v=c+f,S=h+y,C=d+f,_=m+y;return a.push(v,S,C,_),2}function Ml(t,e,n,r,i,s,o,a){const c=n-t,h=r-e;let d=Math.atan2(c,h),m=Math.atan2(i-t,s-e);a&&d<m?d+=Math.PI*2:!a&&d>m&&(m+=Math.PI*2);let f=d;const y=m-d,v=Math.abs(y),S=Math.sqrt(c*c+h*h),C=(15*v*Math.sqrt(S)/Math.PI>>0)+1,_=y/C;if(f+=_,a){o.push(t,e,n,r);for(let b=1,w=f;b<C;b++,w+=_)o.push(t,e,t+Math.sin(w)*S,e+Math.cos(w)*S);o.push(t,e,i,s)}else{o.push(n,r,t,e);for(let b=1,w=f;b<C;b++,w+=_)o.push(t+Math.sin(w)*S,e+Math.cos(w)*S,t,e);o.push(i,s,t,e)}return C*2}function lU(t,e){const n=t.shape;let r=t.points||n.points.slice();const i=e.closePointEps;if(r.length===0)return;const s=t.lineStyle,o=new Oe(r[0],r[1]),a=new Oe(r[r.length-2],r[r.length-1]),c=n.type!==dr.POLY||n.closeStroke,h=Math.abs(o.x-a.x)<i&&Math.abs(o.y-a.y)<i;if(c){r=r.slice(),h&&(r.pop(),r.pop(),a.set(r[r.length-2],r[r.length-1]));const K=(o.x+a.x)*.5,$=(a.y+o.y)*.5;r.unshift(K,$),r.push(K,$)}const d=e.points,m=r.length/2;let f=r.length;const y=d.length/2,v=s.width/2,S=v*v,C=s.miterLimit*s.miterLimit;let _=r[0],b=r[1],w=r[2],I=r[3],P=0,N=0,O=-(b-I),D=_-w,V=0,G=0,F=Math.sqrt(O*O+D*D);O/=F,D/=F,O*=v,D*=v;const q=s.alignment,W=(1-q)*2,H=q*2;c||(s.cap===Yl.ROUND?f+=Ml(_-O*(W-H)*.5,b-D*(W-H)*.5,_-O*W,b-D*W,_+O*H,b+D*H,d,!0)+2:s.cap===Yl.SQUARE&&(f+=ET(_,b,O,D,W,H,!0,d))),d.push(_-O*W,b-D*W,_+O*H,b+D*H);for(let K=1;K<m-1;++K){_=r[(K-1)*2],b=r[(K-1)*2+1],w=r[K*2],I=r[K*2+1],P=r[(K+1)*2],N=r[(K+1)*2+1],O=-(b-I),D=_-w,F=Math.sqrt(O*O+D*D),O/=F,D/=F,O*=v,D*=v,V=-(I-N),G=w-P,F=Math.sqrt(V*V+G*G),V/=F,G/=F,V*=v,G*=v;const $=w-_,Q=b-I,L=w-P,te=N-I,Z=$*L+Q*te,Ie=Q*L-te*$,ge=Ie<0;if(Math.abs(Ie)<.001*Math.abs(Z)){d.push(w-O*W,I-D*W,w+O*H,I+D*H),Z>=0&&(s.join===ws.ROUND?f+=Ml(w,I,w-O*W,I-D*W,w-V*W,I-G*W,d,!1)+4:f+=2,d.push(w-V*H,I-G*H,w+V*W,I+G*W));continue}const je=(-O+_)*(-D+I)-(-O+w)*(-D+b),Ve=(-V+P)*(-G+I)-(-V+w)*(-G+N),Be=($*Ve-L*je)/Ie,pt=(te*je-Q*Ve)/Ie,St=(Be-w)*(Be-w)+(pt-I)*(pt-I),Qe=w+(Be-w)*W,Ne=I+(pt-I)*W,ct=w-(Be-w)*H,tt=I-(pt-I)*H,Sn=Math.min($*$+Q*Q,L*L+te*te),kn=ge?W:H,ci=Sn+kn*kn*S,hi=St<=ci;let Rn=s.join;if(Rn===ws.MITER&&St/S>C&&(Rn=ws.BEVEL),hi)switch(Rn){case ws.MITER:{d.push(Qe,Ne,ct,tt);break}case ws.BEVEL:{ge?d.push(Qe,Ne,w+O*H,I+D*H,Qe,Ne,w+V*H,I+G*H):d.push(w-O*W,I-D*W,ct,tt,w-V*W,I-G*W,ct,tt),f+=2;break}case ws.ROUND:{ge?(d.push(Qe,Ne,w+O*H,I+D*H),f+=Ml(w,I,w+O*H,I+D*H,w+V*H,I+G*H,d,!0)+4,d.push(Qe,Ne,w+V*H,I+G*H)):(d.push(w-O*W,I-D*W,ct,tt),f+=Ml(w,I,w-O*W,I-D*W,w-V*W,I-G*W,d,!1)+4,d.push(w-V*W,I-G*W,ct,tt));break}}else{switch(d.push(w-O*W,I-D*W,w+O*H,I+D*H),Rn){case ws.MITER:{ge?d.push(ct,tt,ct,tt):d.push(Qe,Ne,Qe,Ne),f+=2;break}case ws.ROUND:{ge?f+=Ml(w,I,w+O*H,I+D*H,w+V*H,I+G*H,d,!0)+2:f+=Ml(w,I,w-O*W,I-D*W,w-V*W,I-G*W,d,!1)+2;break}}d.push(w-V*W,I-G*W,w+V*H,I+G*H),f+=2}}_=r[(m-2)*2],b=r[(m-2)*2+1],w=r[(m-1)*2],I=r[(m-1)*2+1],O=-(b-I),D=_-w,F=Math.sqrt(O*O+D*D),O/=F,D/=F,O*=v,D*=v,d.push(w-O*W,I-D*W,w+O*H,I+D*H),c||(s.cap===Yl.ROUND?f+=Ml(w-O*(W-H)*.5,I-D*(W-H)*.5,w-O*W,I-D*W,w+O*H,I+D*H,d,!1)+2:s.cap===Yl.SQUARE&&(f+=ET(w,I,O,D,W,H,!1,d)));const se=e.indices,ue=jc.epsilon*jc.epsilon;for(let K=y;K<f+y-2;++K)_=d[K*2],b=d[K*2+1],w=d[(K+1)*2],I=d[(K+1)*2+1],P=d[(K+2)*2],N=d[(K+2)*2+1],!(Math.abs(_*(I-N)+w*(N-b)+P*(b-I))<ue)&&se.push(K,K+1,K+2)}function uU(t,e){let n=0;const r=t.shape,i=t.points||r.points,s=r.type!==dr.POLY||r.closeStroke;if(i.length===0)return;const o=e.points,a=e.indices,c=i.length/2,h=o.length/2;let d=h;for(o.push(i[0],i[1]),n=1;n<c;n++)o.push(i[n*2],i[n*2+1]),a.push(d,d+1),d++;s&&a.push(d,h)}function TT(t,e){t.lineStyle.native?uU(t,e):lU(t,e)}class i_{static curveLength(e,n,r,i,s,o){const a=e-2*r+s,c=n-2*i+o,h=2*r-2*e,d=2*i-2*n,m=4*(a*a+c*c),f=4*(a*h+c*d),y=h*h+d*d,v=2*Math.sqrt(m+f+y),S=Math.sqrt(m),C=2*m*S,_=2*Math.sqrt(y),b=f/S;return(C*v+S*f*(v-_)+(4*y*m-f*f)*Math.log((2*S+b+v)/(b+_)))/(4*C)}static curveTo(e,n,r,i,s){const o=s[s.length-2],a=s[s.length-1],c=jc._segmentsCount(i_.curveLength(o,a,e,n,r,i));let h=0,d=0;for(let m=1;m<=c;++m){const f=m/c;h=o+(e-o)*f,d=a+(n-a)*f,s.push(h+(e+(r-e)*f-h)*f,d+(n+(i-n)*f-d)*f)}}}const _v={[dr.POLY]:WP,[dr.CIRC]:pg,[dr.ELIP]:pg,[dr.RECT]:sU,[dr.RREC]:oU},CT=[],qp=[];class mg{constructor(e,n=null,r=null,i=null){this.points=[],this.holes=[],this.shape=e,this.lineStyle=r,this.fillStyle=n,this.matrix=i,this.type=e.type}clone(){return new mg(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}const Hu=new Oe,jP=class extends nP{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new cg,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),qp.push(this.drawCalls[t]);this.drawCalls.length=0;for(let t=0;t<this.batches.length;t++){const e=this.batches[t];e.reset(),CT.push(e)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(t,e=null,n=null,r=null){const i=new mg(t,e,n,r);return this.graphicsData.push(i),this.dirty++,this}drawHole(t,e=null){if(!this.graphicsData.length)return null;const n=new mg(t,null,null,e),r=this.graphicsData[this.graphicsData.length-1];return n.lineStyle=r.lineStyle,r.holes.push(n),this.dirty++,this}destroy(){super.destroy();for(let t=0;t<this.graphicsData.length;++t)this.graphicsData[t].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(t){const e=this.graphicsData;for(let n=0;n<e.length;++n){const r=e[n];if(r.fillStyle.visible&&r.shape&&(r.matrix?r.matrix.applyInverse(t,Hu):Hu.copyFrom(t),r.shape.contains(Hu.x,Hu.y))){let i=!1;if(r.holes){for(let s=0;s<r.holes.length;s++)if(r.holes[s].shape.contains(Hu.x,Hu.y)){i=!0;break}}if(!i)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const t=this.uvs,e=this.graphicsData;let n=null,r=null;this.batches.length>0&&(n=this.batches[this.batches.length-1],r=n.style);for(let a=this.shapeIndex;a<e.length;a++){this.shapeIndex++;const c=e[a],h=c.fillStyle,d=c.lineStyle;_v[c.type].build(c),c.matrix&&this.transformPoints(c.points,c.matrix),(h.visible||d.visible)&&this.processHoles(c.holes);for(let f=0;f<2;f++){const y=f===0?h:d;if(!y.visible)continue;const v=y.texture.baseTexture,S=this.indices.length,C=this.points.length/2;v.wrapMode=Jo.REPEAT,f===0?this.processFill(c):this.processLine(c);const _=this.points.length/2-C;_!==0&&(n&&!this._compareStyles(r,y)&&(n.end(S,C),n=null),n||(n=CT.pop()||new aU,n.begin(y,S,C),this.batches.push(n),r=y),this.addUvs(this.points,t,y.texture,C,_,y.matrix))}}const i=this.indices.length,s=this.points.length/2;if(n&&n.end(i,s),this.batches.length===0){this.batchable=!0;return}const o=s>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&o===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=o?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(t,e){return!(!t||!e||t.texture.baseTexture!==e.texture.baseTexture||t.color+t.alpha!==e.color+e.alpha||!!t.native!=!!e.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let t=0,e=this.graphicsData.length;t<e;t++){const n=this.graphicsData[t],r=n.fillStyle,i=n.lineStyle;if(r&&!r.texture.baseTexture.valid||i&&!i.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const t=this.batches;for(let e=0,n=t.length;e<n;e++){const r=t[e];for(let i=0;i<r.size;i++){const s=r.start+i;this.indicesUint16[s]=this.indicesUint16[s]-r.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const t=this.batches;for(let e=0;e<t.length;e++)if(t[e].style.native)return!1;return this.points.length<jP.BATCHABLE_SIZE*2}buildDrawCalls(){let t=++Ge._globalBatch;for(let d=0;d<this.drawCalls.length;d++)this.drawCalls[d].texArray.clear(),qp.push(this.drawCalls[d]);this.drawCalls.length=0;const e=this.colors,n=this.textureIds;let r=qp.pop();r||(r=new ox,r.texArray=new lx),r.texArray.count=0,r.start=0,r.size=0,r.type=Cs.TRIANGLES;let i=0,s=null,o=0,a=!1,c=Cs.TRIANGLES,h=0;this.drawCalls.push(r);for(let d=0;d<this.batches.length;d++){const m=this.batches[d],f=8,y=m.style,v=y.texture.baseTexture;a!==!!y.native&&(a=!!y.native,c=a?Cs.LINES:Cs.TRIANGLES,s=null,i=f,t++),s!==v&&(s=v,v._batchEnabled!==t&&(i===f&&(t++,i=0,r.size>0&&(r=qp.pop(),r||(r=new ox,r.texArray=new lx),this.drawCalls.push(r)),r.start=h,r.size=0,r.texArray.count=0,r.type=c),v.touched=1,v._batchEnabled=t,v._batchLocation=i,v.wrapMode=Jo.REPEAT,r.texArray.elements[r.texArray.count++]=v,i++)),r.size+=m.size,h+=m.size,o=v._batchLocation,this.addColors(e,y.color,y.alpha,m.attribSize,m.attribStart),this.addTextureIds(n,o,m.attribSize,m.attribStart)}Ge._globalBatch=t,this.packAttributes()}packAttributes(){const t=this.points,e=this.uvs,n=this.colors,r=this.textureIds,i=new ArrayBuffer(t.length*3*4),s=new Float32Array(i),o=new Uint32Array(i);let a=0;for(let c=0;c<t.length/2;c++)s[a++]=t[c*2],s[a++]=t[c*2+1],s[a++]=e[c*2],s[a++]=e[c*2+1],o[a++]=n[c],s[a++]=r[c];this._buffer.update(i),this._indexBuffer.update(this.indicesUint16)}processFill(t){t.holes.length?WP.triangulate(t,this):_v[t.type].triangulate(t,this)}processLine(t){TT(t,this);for(let e=0;e<t.holes.length;e++)TT(t.holes[e],this)}processHoles(t){for(let e=0;e<t.length;e++){const n=t[e];_v[n.type].build(n),n.matrix&&this.transformPoints(n.points,n.matrix)}}calculateBounds(){const t=this._bounds;t.clear(),t.addVertexData(this.points,0,this.points.length),t.pad(this.boundsPadding,this.boundsPadding)}transformPoints(t,e){for(let n=0;n<t.length/2;n++){const r=t[n*2],i=t[n*2+1];t[n*2]=e.a*r+e.c*i+e.tx,t[n*2+1]=e.b*r+e.d*i+e.ty}}addColors(t,e,n,r,i=0){const s=kt.shared.setValue(e).toLittleEndianNumber(),o=kt.shared.setValue(s).toPremultiplied(n);t.length=Math.max(t.length,i+r);for(let a=0;a<r;a++)t[i+a]=o}addTextureIds(t,e,n,r=0){t.length=Math.max(t.length,r+n);for(let i=0;i<n;i++)t[r+i]=e}addUvs(t,e,n,r,i,s=null){let o=0;const a=e.length,c=n.frame;for(;o<i;){let d=t[(r+o)*2],m=t[(r+o)*2+1];if(s){const f=s.a*d+s.c*m+s.tx;m=s.b*d+s.d*m+s.ty,d=f}o++,e.push(d/c.width,m/c.height)}const h=n.baseTexture;(c.width<h.width||c.height<h.height)&&this.adjustUvs(e,n,a,i)}adjustUvs(t,e,n,r){const i=e.baseTexture,s=1e-6,o=n+r*2,a=e.frame,c=a.width/i.width,h=a.height/i.height;let d=a.x/a.width,m=a.y/a.height,f=Math.floor(t[n]+s),y=Math.floor(t[n+1]+s);for(let v=n+2;v<o;v+=2)f=Math.min(f,Math.floor(t[v]+s)),y=Math.min(y,Math.floor(t[v+1]+s));d-=f,m-=y;for(let v=n;v<o;v+=2)t[v]=(t[v]+d)*c,t[v+1]=(t[v+1]+m)*h}};let VP=jP;VP.BATCHABLE_SIZE=100;class ly{constructor(){this.color=16777215,this.alpha=1,this.texture=xe.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const e=new ly;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e}reset(){this.color=16777215,this.alpha=1,this.texture=xe.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class s_ extends ly{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=Yl.BUTT,this.join=ws.MITER,this.miterLimit=10}clone(){const e=new s_;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e.width=this.width,e.alignment=this.alignment,e.native=this.native,e.cap=this.cap,e.join=this.join,e.miterLimit=this.miterLimit,e}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1}}const Sv={},Im=class extends nr{constructor(t=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new ly,this._lineStyle=new s_,this._matrix=null,this._holeMode=!1,this.state=ua.for2d(),this._geometry=t||new VP,this._geometry.refCount++,this._transformID=-1,this._tintColor=new kt(16777215),this.blendMode=Ue.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new Im(this._geometry)}set blendMode(t){this.state.blendMode=t}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(t){this._tintColor.setValue(t)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(t=null,e=0,n,r=.5,i=!1){return typeof t=="number"&&(t={width:t,color:e,alpha:n,alignment:r,native:i}),this.lineTextureStyle(t)}lineTextureStyle(t){const e={width:0,texture:xe.WHITE,color:t!=null&&t.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:Yl.BUTT,join:ws.MITER,miterLimit:10};t=Object.assign(e,t),this.normalizeColor(t),this.currentPath&&this.startPoly();const n=t.width>0&&t.alpha>0;return n?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:n},t)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const t=this.currentPath.points,e=this.currentPath.points.length;e>2&&(this.drawShape(this.currentPath),this.currentPath=new Ac,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[e-2],t[e-1]))}else this.currentPath=new Ac,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(t,e){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=e,this}lineTo(t,e){this.currentPath||this.moveTo(0,0);const n=this.currentPath.points,r=n[n.length-2],i=n[n.length-1];return(r!==t||i!==e)&&n.push(t,e),this}_initCurve(t=0,e=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[t,e]):this.moveTo(t,e)}quadraticCurveTo(t,e,n,r){this._initCurve();const i=this.currentPath.points;return i.length===0&&this.moveTo(0,0),i_.curveTo(t,e,n,r,i),this}bezierCurveTo(t,e,n,r,i,s){return this._initCurve(),r_.curveTo(t,e,n,r,i,s,this.currentPath.points),this}arcTo(t,e,n,r,i){this._initCurve(t,e);const s=this.currentPath.points,o=bT.curveTo(t,e,n,r,i,s);if(o){const{cx:a,cy:c,radius:h,startAngle:d,endAngle:m,anticlockwise:f}=o;this.arc(a,c,h,d,m,f)}return this}arc(t,e,n,r,i,s=!1){if(r===i)return this;if(!s&&i<=r?i+=ug:s&&r<=i&&(r+=ug),i-r===0)return this;const a=t+Math.cos(r)*n,c=e+Math.sin(r)*n,h=this._geometry.closePointEps;let d=this.currentPath?this.currentPath.points:null;if(d){const m=Math.abs(d[d.length-2]-a),f=Math.abs(d[d.length-1]-c);m<h&&f<h||d.push(a,c)}else this.moveTo(a,c),d=this.currentPath.points;return bT.arc(a,c,t,e,n,r,i,s,d),this}beginFill(t=0,e){return this.beginTextureFill({texture:xe.WHITE,color:t,alpha:e})}normalizeColor(t){const e=kt.shared.setValue(t.color??0);t.color=e.toNumber(),t.alpha??(t.alpha=e.alpha)}beginTextureFill(t){const e={texture:xe.WHITE,color:16777215,matrix:null};t=Object.assign(e,t),this.normalizeColor(t),this.currentPath&&this.startPoly();const n=t.alpha>0;return n?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:n},t)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(t,e,n,r){return this.drawShape(new Ye(t,e,n,r))}drawRoundedRect(t,e,n,r,i){return this.drawShape(new e_(t,e,n,r,i))}drawCircle(t,e,n){return this.drawShape(new Zw(t,e,n))}drawEllipse(t,e,n,r){return this.drawShape(new Jw(t,e,n,r))}drawPolygon(...t){let e,n=!0;const r=t[0];r.points?(n=r.closeStroke,e=r.points):Array.isArray(t[0])?e=t[0]:e=t;const i=new Ac(e);return i.closeStroke=n,this.drawShape(i),this}drawShape(t){return this._holeMode?this._geometry.drawHole(t,this._matrix):this._geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const t=this._geometry.graphicsData;return t.length===1&&t[0].shape.type===dr.RECT&&!t[0].matrix&&!t[0].holes.length&&!(t[0].lineStyle.visible&&t[0].lineStyle.width)}_render(t){this.finishPoly();const e=this._geometry;e.updateBatches(),e.batchable?(this.batchDirty!==e.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))}_populateBatches(){const t=this._geometry,e=this.blendMode,n=t.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.batches.length=n,this.vertexData=new Float32Array(t.points);for(let r=0;r<n;r++){const i=t.batches[r],s=i.style.color,o=new Float32Array(this.vertexData.buffer,i.attribStart*4*2,i.attribSize*2),a=new Float32Array(t.uvsFloat32.buffer,i.attribStart*4*2,i.attribSize*2),c=new Uint16Array(t.indicesUint16.buffer,i.start*2,i.size),h={vertexData:o,blendMode:e,indices:c,uvs:a,_batchRGB:kt.shared.setValue(s).toRgbArray(),_tintRGB:s,_texture:i.style.texture,alpha:i.style.alpha,worldAlpha:1};this.batches[r]=h}}_renderBatched(t){if(this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let e=0,n=this.batches.length;e<n;e++){const r=this.batches[e];r.worldAlpha=this.worldAlpha*r.alpha,t.plugins[this.pluginName].render(r)}}}_renderDirect(t){const e=this._resolveDirectShader(t),n=this._geometry,r=this.worldAlpha,i=e.uniforms,s=n.drawCalls;i.translationMatrix=this.transform.worldTransform,kt.shared.setValue(this._tintColor).premultiply(r).toArray(i.tint),t.shader.bind(e),t.geometry.bind(n,e),t.state.set(this.state);for(let o=0,a=s.length;o<a;o++)this._renderDrawCallDirect(t,n.drawCalls[o])}_renderDrawCallDirect(t,e){const{texArray:n,type:r,size:i,start:s}=e,o=n.count;for(let a=0;a<o;a++)t.texture.bind(n.elements[a],a);t.geometry.draw(r,i,s)}_resolveDirectShader(t){let e=this.shader;const n=this.pluginName;if(!e){if(!Sv[n]){const{maxTextures:r}=t.plugins[n],i=new Int32Array(r);for(let a=0;a<r;a++)i[a]=a;const s={tint:new Float32Array([1,1,1,1]),translationMatrix:new en,default:Os.from({uSamplers:i},!0)},o=t.plugins[n]._shader.program;Sv[n]=new Co(o,s)}e=Sv[n]}return e}_calculateBounds(){this.finishPoly();const t=this._geometry;if(!t.graphicsData.length)return;const{minX:e,minY:n,maxX:r,maxY:i}=t.bounds;this._bounds.addFrame(this.transform,e,n,r,i)}containsPoint(t){return this.worldTransform.applyInverse(t,Im._TEMP_POINT),this._geometry.containsPoint(Im._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let t=0;t<this.batches.length;t++){const e=this.batches[t];e._tintRGB=kt.shared.setValue(this._tintColor).multiply(e._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const t=this.transform._worldID;if(this._transformID===t)return;this._transformID=t;const e=this.transform.worldTransform,n=e.a,r=e.b,i=e.c,s=e.d,o=e.tx,a=e.ty,c=this._geometry.points,h=this.vertexData;let d=0;for(let m=0;m<c.length;m+=2){const f=c[m],y=c[m+1];h[d++]=n*f+i*y+o,h[d++]=s*y+r*f+a}}closePath(){const t=this.currentPath;return t&&(t.closeStroke=!0,this.finishPoly()),this}setMatrix(t){return this._matrix=t,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(t){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(t)}};let nu=Im;nu.curves=jc;nu._TEMP_POINT=new Oe;class cU{constructor(e,n){this.uvBuffer=e,this.uvMatrix=n,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(e){if(!e&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const n=this.uvBuffer.data;(!this.data||this.data.length!==n.length)&&(this.data=new Float32Array(n.length)),this.uvMatrix.multiplyUvs(n,this.data),this._updateID++}}const bv=new Oe,IT=new Ac,XP=class extends nr{constructor(t,e,n,r=Cs.TRIANGLES){super(),this.geometry=t,this.shader=e,this.state=n||ua.for2d(),this.drawMode=r,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=Se.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(t){this._geometry!==t&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=t,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(t){this.shader=t}get material(){return this.shader}set blendMode(t){this.state.blendMode=t}get blendMode(){return this.state.blendMode}set roundPixels(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(t){this.shader.tint=t}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(t){this.shader.texture=t}_render(t){const e=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===Cs.TRIANGLES&&e.length<XP.BATCHABLE_SIZE*2?this._renderToBatch(t):this._renderDefault(t)}_renderDefault(t){const e=this.shader;e.alpha=this.worldAlpha,e.update&&e.update(),t.batch.flush(),e.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),t.shader.bind(e),t.state.set(this.state),t.geometry.bind(this.geometry,e),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(t){const e=this.geometry,n=this.shader;n.uvMatrix&&(n.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=e.indexBuffer.data,this._tintRGB=n._tintRGB,this._texture=n.texture;const r=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[r]),t.plugins[r].render(this)}calculateVertices(){const e=this.geometry.buffers[0],n=e.data,r=e._updateID;if(r===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==n.length&&(this.vertexData=new Float32Array(n.length));const i=this.transform.worldTransform,s=i.a,o=i.b,a=i.c,c=i.d,h=i.tx,d=i.ty,m=this.vertexData;for(let f=0;f<m.length/2;f++){const y=n[f*2],v=n[f*2+1];m[f*2]=s*y+a*v+h,m[f*2+1]=o*y+c*v+d}if(this._roundPixels){const f=Se.RESOLUTION;for(let y=0;y<m.length;++y)m[y]=Math.round(m[y]*f)/f}this.vertexDirty=r}calculateUvs(){const t=this.geometry.buffers[1],e=this.shader;e.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new cU(t,e.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,bv);const e=this.geometry.getBuffer("aVertexPosition").data,n=IT.points,r=this.geometry.getIndex().data,i=r.length,s=this.drawMode===4?3:1;for(let o=0;o+2<i;o+=s){const a=r[o]*2,c=r[o+1]*2,h=r[o+2]*2;if(n[0]=e[a],n[1]=e[a+1],n[2]=e[c],n[3]=e[c+1],n[4]=e[h],n[5]=e[h+1],IT.contains(bv.x,bv.y))return!0}return!1}destroy(t){super.destroy(t),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};let Vc=XP;Vc.BATCHABLE_SIZE=100;class uy extends ol{constructor(e,n,r){super();const i=new wn(e),s=new wn(n,!0),o=new wn(r,!0,!0);this.addAttribute("aVertexPosition",i,2,!1,Fe.FLOAT).addAttribute("aTextureCoord",s,2,!1,Fe.FLOAT).addIndex(o),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}var hU=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,dU=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;class Zd extends Co{constructor(e,n){const r={uSampler:e,alpha:1,uTextureMatrix:en.IDENTITY,uColor:new Float32Array([1,1,1,1])};n=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},n),n.uniforms&&Object.assign(r,n.uniforms),super(n.program||Is.from(dU,hU),r),this._colorDirty=!1,this.uvMatrix=new t_(e),this.batchable=n.program===void 0,this.pluginName=n.pluginName,this._tintColor=new kt(n.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=n.alpha}get texture(){return this.uniforms.uSampler}set texture(e){this.uniforms.uSampler!==e&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!e.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=e,this.uvMatrix.texture=e)}set alpha(e){e!==this._alpha&&(this._alpha=e,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(e){e!==this.tint&&(this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const n=this.texture.baseTexture.alphaMode;kt.shared.setValue(this._tintColor).premultiply(this._alpha,n).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class fU extends uy{constructor(e=100,n=100,r=10,i=10){super(),this.segWidth=r,this.segHeight=i,this.width=e,this.height=n,this.build()}build(){const e=this.segWidth*this.segHeight,n=[],r=[],i=[],s=this.segWidth-1,o=this.segHeight-1,a=this.width/s,c=this.height/o;for(let d=0;d<e;d++){const m=d%this.segWidth,f=d/this.segWidth|0;n.push(m*a,f*c),r.push(m/s,f/o)}const h=s*o;for(let d=0;d<h;d++){const m=d%s,f=d/s|0,y=f*this.segWidth+m,v=f*this.segWidth+m+1,S=(f+1)*this.segWidth+m,C=(f+1)*this.segWidth+m+1;i.push(y,v,S,v,C,S)}this.buffers[0].data=new Float32Array(n),this.buffers[1].data=new Float32Array(r),this.indexBuffer.data=new Uint16Array(i),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()}}class pU extends uy{constructor(e=200,n,r=0){super(new Float32Array(n.length*4),new Float32Array(n.length*4),new Uint16Array((n.length-1)*6)),this.points=n,this._width=e,this.textureScale=r,this.build()}get width(){return this._width}build(){const e=this.points;if(!e)return;const n=this.getBuffer("aVertexPosition"),r=this.getBuffer("aTextureCoord"),i=this.getIndex();if(e.length<1)return;n.data.length/4!==e.length&&(n.data=new Float32Array(e.length*4),r.data=new Float32Array(e.length*4),i.data=new Uint16Array((e.length-1)*6));const s=r.data,o=i.data;s[0]=0,s[1]=0,s[2]=0,s[3]=1;let a=0,c=e[0];const h=this._width*this.textureScale,d=e.length;for(let f=0;f<d;f++){const y=f*4;if(this.textureScale>0){const v=c.x-e[f].x,S=c.y-e[f].y,C=Math.sqrt(v*v+S*S);c=e[f],a+=C/h}else a=f/(d-1);s[y]=a,s[y+1]=0,s[y+2]=a,s[y+3]=1}let m=0;for(let f=0;f<d-1;f++){const y=f*2;o[m++]=y,o[m++]=y+1,o[m++]=y+2,o[m++]=y+2,o[m++]=y+1,o[m++]=y+3}r.update(),i.update(),this.updateVertices()}updateVertices(){const e=this.points;if(e.length<1)return;let n=e[0],r,i=0,s=0;const o=this.buffers[0].data,a=e.length,c=this.textureScale>0?this.textureScale*this._width/2:this._width/2;for(let h=0;h<a;h++){const d=e[h],m=h*4;h<e.length-1?r=e[h+1]:r=d,s=-(r.x-n.x),i=r.y-n.y;const f=Math.sqrt(i*i+s*s);f<1e-6?(i=0,s=0):(i/=f,s/=f,i*=c,s*=c),o[m]=d.x+i,o[m+1]=d.y+s,o[m+2]=d.x-i,o[m+3]=d.y-s,n=d}this.buffers[0].update()}update(){this.textureScale>0?this.build():this.updateVertices()}}class mU extends Vc{constructor(e,n,r){const i=new fU(e.width,e.height,n,r),s=new Zd(xe.WHITE);super(i,s),this.texture=e,this.autoResize=!0}textureUpdated(){this._textureID=this.shader.texture._updateID;const e=this.geometry,{width:n,height:r}=this.shader.texture;this.autoResize&&(e.width!==n||e.height!==r)&&(e.width=this.shader.texture.width,e.height=this.shader.texture.height,e.build())}set texture(e){this.shader.texture!==e&&(this.shader.texture=e,this._textureID=-1,e.baseTexture.valid?this.textureUpdated():e.once("update",this.textureUpdated,this))}get texture(){return this.shader.texture}_render(e){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),super._render(e)}destroy(e){this.shader.texture.off("update",this.textureUpdated,this),super.destroy(e)}}const Yp=10;class gU extends mU{constructor(e,n,r,i,s){var o,a,c,h;super(xe.WHITE,4,4),this._origWidth=e.orig.width,this._origHeight=e.orig.height,this._width=this._origWidth,this._height=this._origHeight,this._leftWidth=n??((o=e.defaultBorders)==null?void 0:o.left)??Yp,this._rightWidth=i??((a=e.defaultBorders)==null?void 0:a.right)??Yp,this._topHeight=r??((c=e.defaultBorders)==null?void 0:c.top)??Yp,this._bottomHeight=s??((h=e.defaultBorders)==null?void 0:h.bottom)??Yp,this.texture=e}textureUpdated(){this._textureID=this.shader.texture._updateID,this._refresh()}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(e){this.geometry.getBuffer("aVertexPosition").data=e}updateHorizontalVertices(){const e=this.vertices,n=this._getMinScale();e[9]=e[11]=e[13]=e[15]=this._topHeight*n,e[17]=e[19]=e[21]=e[23]=this._height-this._bottomHeight*n,e[25]=e[27]=e[29]=e[31]=this._height}updateVerticalVertices(){const e=this.vertices,n=this._getMinScale();e[2]=e[10]=e[18]=e[26]=this._leftWidth*n,e[4]=e[12]=e[20]=e[28]=this._width-this._rightWidth*n,e[6]=e[14]=e[22]=e[30]=this._width}_getMinScale(){const e=this._leftWidth+this._rightWidth,n=this._width>e?1:this._width/e,r=this._topHeight+this._bottomHeight,i=this._height>r?1:this._height/r;return Math.min(n,i)}get width(){return this._width}set width(e){this._width=e,this._refresh()}get height(){return this._height}set height(e){this._height=e,this._refresh()}get leftWidth(){return this._leftWidth}set leftWidth(e){this._leftWidth=e,this._refresh()}get rightWidth(){return this._rightWidth}set rightWidth(e){this._rightWidth=e,this._refresh()}get topHeight(){return this._topHeight}set topHeight(e){this._topHeight=e,this._refresh()}get bottomHeight(){return this._bottomHeight}set bottomHeight(e){this._bottomHeight=e,this._refresh()}_refresh(){const e=this.texture,n=this.geometry.buffers[1].data;this._origWidth=e.orig.width,this._origHeight=e.orig.height;const r=1/this._origWidth,i=1/this._origHeight;n[0]=n[8]=n[16]=n[24]=0,n[1]=n[3]=n[5]=n[7]=0,n[6]=n[14]=n[22]=n[30]=1,n[25]=n[27]=n[29]=n[31]=1,n[2]=n[10]=n[18]=n[26]=r*this._leftWidth,n[4]=n[12]=n[20]=n[28]=1-r*this._rightWidth,n[9]=n[11]=n[13]=n[15]=i*this._topHeight,n[17]=n[19]=n[21]=n[23]=1-i*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()}}class yU extends Vc{constructor(e=xe.EMPTY,n,r,i,s){const o=new uy(n,r,i);o.getBuffer("aVertexPosition").static=!1;const a=new Zd(e);super(o,a,null,s),this.autoUpdate=!0}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(e){this.geometry.getBuffer("aVertexPosition").data=e}_render(e){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),super._render(e)}}class vU extends Vc{constructor(e,n,r=0){const i=new pU(e.height,n,r),s=new Zd(e);r>0&&(e.baseTexture.wrapMode=Jo.REPEAT),super(i,s),this.autoUpdate=!0}_render(e){const n=this.geometry;(this.autoUpdate||n._width!==this.shader.texture.height)&&(n._width=this.shader.texture.height,n.update()),super._render(e)}}class xU extends nr{constructor(e=1500,n,r=16384,i=!1){super();const s=16384;r>s&&(r=s),this._properties=[!1,!0,!1,!1,!1],this._maxSize=e,this._batchSize=r,this._buffers=null,this._bufferUpdateIDs=[],this._updateID=0,this.interactiveChildren=!1,this.blendMode=Ue.NORMAL,this.autoResize=i,this.roundPixels=!0,this.baseTexture=null,this.setProperties(n),this._tintColor=new kt(0),this.tintRgb=new Float32Array(3),this.tint=16777215}setProperties(e){e&&(this._properties[0]="vertices"in e||"scale"in e?!!e.vertices||!!e.scale:this._properties[0],this._properties[1]="position"in e?!!e.position:this._properties[1],this._properties[2]="rotation"in e?!!e.rotation:this._properties[2],this._properties[3]="uvs"in e?!!e.uvs:this._properties[3],this._properties[4]="tint"in e||"alpha"in e?!!e.tint||!!e.alpha:this._properties[4])}updateTransform(){this.displayObjectUpdateTransform()}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e),this._tintColor.toRgbArray(this.tintRgb)}render(e){!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",()=>this.onChildrenChange(0))),e.batch.setObjectRenderer(e.plugins.particle),e.plugins.particle.render(this))}onChildrenChange(e){const n=Math.floor(e/this._batchSize);for(;this._bufferUpdateIDs.length<n;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[n]=++this._updateID}dispose(){if(this._buffers){for(let e=0;e<this._buffers.length;++e)this._buffers[e].destroy();this._buffers=null}}destroy(e){super.destroy(e),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null}}class AT{constructor(e,n,r){this.geometry=new ol,this.indexBuffer=null,this.size=r,this.dynamicProperties=[],this.staticProperties=[];for(let i=0;i<e.length;++i){let s=e[i];s={attributeName:s.attributeName,size:s.size,uploadFunction:s.uploadFunction,type:s.type||Fe.FLOAT,offset:s.offset},n[i]?this.dynamicProperties.push(s):this.staticProperties.push(s)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const e=this.geometry;let n=0;this.indexBuffer=new wn(qL(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];a.offset=n,n+=a.size,this.dynamicStride+=a.size}const r=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(r),this.dynamicDataUint32=new Uint32Array(r),this.dynamicBuffer=new wn(this.dynamicData,!1,!1);let i=0;this.staticStride=0;for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];a.offset=i,i+=a.size,this.staticStride+=a.size}const s=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(s),this.staticDataUint32=new Uint32Array(s),this.staticBuffer=new wn(this.staticData,!0,!1);for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];e.addAttribute(a.attributeName,this.dynamicBuffer,0,a.type===Fe.UNSIGNED_BYTE,a.type,this.dynamicStride*4,a.offset*4)}for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];e.addAttribute(a.attributeName,this.staticBuffer,0,a.type===Fe.UNSIGNED_BYTE,a.type,this.staticStride*4,a.offset*4)}}uploadDynamic(e,n,r){for(let i=0;i<this.dynamicProperties.length;i++){const s=this.dynamicProperties[i];s.uploadFunction(e,n,r,s.type===Fe.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,s.offset)}this.dynamicBuffer._updateID++}uploadStatic(e,n,r){for(let i=0;i<this.staticProperties.length;i++){const s=this.staticProperties[i];s.uploadFunction(e,n,r,s.type===Fe.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,s.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}var wU=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,_U=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;class qP extends ty{constructor(e){super(e),this.shader=null,this.properties=null,this.tempMatrix=new en,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:Fe.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=Co.from(_U,wU,{}),this.state=ua.for2d()}render(e){const n=e.children,r=e._maxSize,i=e._batchSize,s=this.renderer;let o=n.length;if(o===0)return;o>r&&!e.autoResize&&(o=r);let a=e._buffers;a||(a=e._buffers=this.generateBuffers(e));const c=n[0]._texture.baseTexture,h=c.alphaMode>0;this.state.blendMode=ZA(e.blendMode,h),s.state.set(this.state);const d=s.gl,m=e.worldTransform.copyTo(this.tempMatrix);m.prepend(s.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=m.toArray(!0),this.shader.uniforms.uColor=kt.shared.setValue(e.tintRgb).premultiply(e.worldAlpha,h).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=c,this.renderer.shader.bind(this.shader);let f=!1;for(let y=0,v=0;y<o;y+=i,v+=1){let S=o-y;S>i&&(S=i),v>=a.length&&a.push(this._generateOneMoreBuffer(e));const C=a[v];C.uploadDynamic(n,y,S);const _=e._bufferUpdateIDs[v]||0;f=f||C._updateID<_,f&&(C._updateID=e._updateID,C.uploadStatic(n,y,S)),s.geometry.bind(C.geometry),d.drawElements(d.TRIANGLES,S*6,d.UNSIGNED_SHORT,0)}}generateBuffers(e){const n=[],r=e._maxSize,i=e._batchSize,s=e._properties;for(let o=0;o<r;o+=i)n.push(new AT(this.properties,s,i));return n}_generateOneMoreBuffer(e){const n=e._batchSize,r=e._properties;return new AT(this.properties,r,n)}uploadVertices(e,n,r,i,s,o){let a=0,c=0,h=0,d=0;for(let m=0;m<r;++m){const f=e[n+m],y=f._texture,v=f.scale.x,S=f.scale.y,C=y.trim,_=y.orig;C?(c=C.x-f.anchor.x*_.width,a=c+C.width,d=C.y-f.anchor.y*_.height,h=d+C.height):(a=_.width*(1-f.anchor.x),c=_.width*-f.anchor.x,h=_.height*(1-f.anchor.y),d=_.height*-f.anchor.y),i[o]=c*v,i[o+1]=d*S,i[o+s]=a*v,i[o+s+1]=d*S,i[o+s*2]=a*v,i[o+s*2+1]=h*S,i[o+s*3]=c*v,i[o+s*3+1]=h*S,o+=s*4}}uploadPosition(e,n,r,i,s,o){for(let a=0;a<r;a++){const c=e[n+a].position;i[o]=c.x,i[o+1]=c.y,i[o+s]=c.x,i[o+s+1]=c.y,i[o+s*2]=c.x,i[o+s*2+1]=c.y,i[o+s*3]=c.x,i[o+s*3+1]=c.y,o+=s*4}}uploadRotation(e,n,r,i,s,o){for(let a=0;a<r;a++){const c=e[n+a].rotation;i[o]=c,i[o+s]=c,i[o+s*2]=c,i[o+s*3]=c,o+=s*4}}uploadUvs(e,n,r,i,s,o){for(let a=0;a<r;++a){const c=e[n+a]._texture._uvs;c?(i[o]=c.x0,i[o+1]=c.y0,i[o+s]=c.x1,i[o+s+1]=c.y1,i[o+s*2]=c.x2,i[o+s*2+1]=c.y2,i[o+s*3]=c.x3,i[o+s*3+1]=c.y3,o+=s*4):(i[o]=0,i[o+1]=0,i[o+s]=0,i[o+s+1]=0,i[o+s*2]=0,i[o+s*2+1]=0,i[o+s*3]=0,i[o+s*3+1]=0,o+=s*4)}}uploadTint(e,n,r,i,s,o){for(let a=0;a<r;++a){const c=e[n+a],h=kt.shared.setValue(c._tintRGB).toPremultiplied(c.alpha,c.texture.baseTexture.alphaMode>0);i[o]=h,i[o+s]=h,i[o+s*2]=h,i[o+s*3]=h,o+=s*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}qP.extension={name:"particle",type:Ee.RendererPlugin};Me.add(qP);var cy=(t=>(t[t.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",t[t.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",t))(cy||{});const Qp={willReadFrequently:!0},ke=class{static get experimentalLetterSpacingSupported(){let t=ke._experimentalLetterSpacingSupported;if(t!==void 0){const e=Se.ADAPTER.getCanvasRenderingContext2D().prototype;t=ke._experimentalLetterSpacingSupported="letterSpacing"in e||"textLetterSpacing"in e}return t}constructor(t,e,n,r,i,s,o,a,c){this.text=t,this.style=e,this.width=n,this.height=r,this.lines=i,this.lineWidths=s,this.lineHeight=o,this.maxLineWidth=a,this.fontProperties=c}static measureText(t,e,n,r=ke._canvas){n=n??e.wordWrap;const i=e.toFontString(),s=ke.measureFont(i);s.fontSize===0&&(s.fontSize=e.fontSize,s.ascent=e.fontSize);const o=r.getContext("2d",Qp);o.font=i;const c=(n?ke.wordWrap(t,e,r):t).split(/(?:\r\n|\r|\n)/),h=new Array(c.length);let d=0;for(let v=0;v<c.length;v++){const S=ke._measureText(c[v],e.letterSpacing,o);h[v]=S,d=Math.max(d,S)}let m=d+e.strokeThickness;e.dropShadow&&(m+=e.dropShadowDistance);const f=e.lineHeight||s.fontSize+e.strokeThickness;let y=Math.max(f,s.fontSize+e.strokeThickness*2)+(c.length-1)*(f+e.leading);return e.dropShadow&&(y+=e.dropShadowDistance),new ke(t,e,m,y,c,h,f+e.leading,d,s)}static _measureText(t,e,n){let r=!1;ke.experimentalLetterSpacingSupported&&(ke.experimentalLetterSpacing?(n.letterSpacing=`${e}px`,n.textLetterSpacing=`${e}px`,r=!0):(n.letterSpacing="0px",n.textLetterSpacing="0px"));let i=n.measureText(t).width;return i>0&&(r?i-=e:i+=(ke.graphemeSegmenter(t).length-1)*e),i}static wordWrap(t,e,n=ke._canvas){const r=n.getContext("2d",Qp);let i=0,s="",o="";const a=Object.create(null),{letterSpacing:c,whiteSpace:h}=e,d=ke.collapseSpaces(h),m=ke.collapseNewlines(h);let f=!d;const y=e.wordWrapWidth+c,v=ke.tokenize(t);for(let S=0;S<v.length;S++){let C=v[S];if(ke.isNewline(C)){if(!m){o+=ke.addLine(s),f=!d,s="",i=0;continue}C=" "}if(d){const b=ke.isBreakingSpace(C),w=ke.isBreakingSpace(s[s.length-1]);if(b&&w)continue}const _=ke.getFromCache(C,c,a,r);if(_>y)if(s!==""&&(o+=ke.addLine(s),s="",i=0),ke.canBreakWords(C,e.breakWords)){const b=ke.wordWrapSplit(C);for(let w=0;w<b.length;w++){let I=b[w],P=I,N=1;for(;b[w+N];){const D=b[w+N];if(!ke.canBreakChars(P,D,C,w,e.breakWords))I+=D;else break;P=D,N++}w+=N-1;const O=ke.getFromCache(I,c,a,r);O+i>y&&(o+=ke.addLine(s),f=!1,s="",i=0),s+=I,i+=O}}else{s.length>0&&(o+=ke.addLine(s),s="",i=0);const b=S===v.length-1;o+=ke.addLine(C,!b),f=!1,s="",i=0}else _+i>y&&(f=!1,o+=ke.addLine(s),s="",i=0),(s.length>0||!ke.isBreakingSpace(C)||f)&&(s+=C,i+=_)}return o+=ke.addLine(s,!1),o}static addLine(t,e=!0){return t=ke.trimRight(t),t=e?`${t}
`:t,t}static getFromCache(t,e,n,r){let i=n[t];return typeof i!="number"&&(i=ke._measureText(t,e,r)+e,n[t]=i),i}static collapseSpaces(t){return t==="normal"||t==="pre-line"}static collapseNewlines(t){return t==="normal"}static trimRight(t){if(typeof t!="string")return"";for(let e=t.length-1;e>=0;e--){const n=t[e];if(!ke.isBreakingSpace(n))break;t=t.slice(0,-1)}return t}static isNewline(t){return typeof t!="string"?!1:ke._newlines.includes(t.charCodeAt(0))}static isBreakingSpace(t,e){return typeof t!="string"?!1:ke._breakingSpaces.includes(t.charCodeAt(0))}static tokenize(t){const e=[];let n="";if(typeof t!="string")return e;for(let r=0;r<t.length;r++){const i=t[r],s=t[r+1];if(ke.isBreakingSpace(i,s)||ke.isNewline(i)){n!==""&&(e.push(n),n=""),e.push(i);continue}n+=i}return n!==""&&e.push(n),e}static canBreakWords(t,e){return e}static canBreakChars(t,e,n,r,i){return!0}static wordWrapSplit(t){return ke.graphemeSegmenter(t)}static measureFont(t){if(ke._fonts[t])return ke._fonts[t];const e={ascent:0,descent:0,fontSize:0},n=ke._canvas,r=ke._context;r.font=t;const i=ke.METRICS_STRING+ke.BASELINE_SYMBOL,s=Math.ceil(r.measureText(i).width);let o=Math.ceil(r.measureText(ke.BASELINE_SYMBOL).width);const a=Math.ceil(ke.HEIGHT_MULTIPLIER*o);if(o=o*ke.BASELINE_MULTIPLIER|0,s===0||a===0)return ke._fonts[t]=e,e;n.width=s,n.height=a,r.fillStyle="#f00",r.fillRect(0,0,s,a),r.font=t,r.textBaseline="alphabetic",r.fillStyle="#000",r.fillText(i,0,o);const c=r.getImageData(0,0,s,a).data,h=c.length,d=s*4;let m=0,f=0,y=!1;for(m=0;m<o;++m){for(let v=0;v<d;v+=4)if(c[f+v]!==255){y=!0;break}if(!y)f+=d;else break}for(e.ascent=o-m,f=h-d,y=!1,m=a;m>o;--m){for(let v=0;v<d;v+=4)if(c[f+v]!==255){y=!0;break}if(!y)f-=d;else break}return e.descent=m-o,e.fontSize=e.ascent+e.descent,ke._fonts[t]=e,e}static clearMetrics(t=""){t?delete ke._fonts[t]:ke._fonts={}}static get _canvas(){if(!ke.__canvas){let t;try{const e=new OffscreenCanvas(0,0),n=e.getContext("2d",Qp);if(n!=null&&n.measureText)return ke.__canvas=e,e;t=Se.ADAPTER.createCanvas()}catch{t=Se.ADAPTER.createCanvas()}t.width=t.height=10,ke.__canvas=t}return ke.__canvas}static get _context(){return ke.__context||(ke.__context=ke._canvas.getContext("2d",Qp)),ke.__context}};let er=ke;er.METRICS_STRING="|q";er.BASELINE_SYMBOL="M";er.BASELINE_MULTIPLIER=1.4;er.HEIGHT_MULTIPLIER=2;er.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const t=new Intl.Segmenter;return e=>[...t.segment(e)].map(n=>n.segment)}return t=>[...t]})();er.experimentalLetterSpacing=!1;er._fonts={};er._newlines=[10,13];er._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];const SU=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],nd=class{constructor(t){this.styleID=0,this.reset(),Tv(this,t,t)}clone(){const t={};return Tv(t,this,nd.defaultStyle),new nd(t)}reset(){Tv(this,nd.defaultStyle,nd.defaultStyle)}get align(){return this._align}set align(t){this._align!==t&&(this._align=t,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(t){const e=Ev(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)}get fill(){return this._fill}set fill(t){const e=Ev(t);this._fill!==e&&(this._fill=e,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(t){bU(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)}get leading(){return this._leading}set leading(t){this._leading!==t&&(this._leading=t,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)}get padding(){return this._padding}set padding(t){this._padding!==t&&(this._padding=t,this.styleID++)}get stroke(){return this._stroke}set stroke(t){const e=Ev(t);this._stroke!==e&&(this._stroke=e,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)}get trim(){return this._trim}set trim(t){this._trim!==t&&(this._trim=t,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)}toFontString(){const t=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize;let e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(let n=e.length-1;n>=0;n--){let r=e[n].trim();!/([\"\'])[^\'\"]+\1/.test(r)&&!SU.includes(r)&&(r=`"${r}"`),e[n]=r}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${t} ${e.join(",")}`}};let Ns=nd;Ns.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:cy.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};function Ev(t){const e=kt.shared;return Array.isArray(t)?t.map(n=>e.setValue(n).toHex()):e.setValue(t).toHex()}function bU(t,e){if(!Array.isArray(t)||!Array.isArray(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}function Tv(t,e,n){for(const r in n)Array.isArray(e[r])?t[r]=e[r].slice():t[r]=e[r]}const EU={texture:!0,children:!1,baseTexture:!0},wx=class extends Us{constructor(t,e,n){let r=!1;n||(n=Se.ADAPTER.createCanvas(),r=!0),n.width=3,n.height=3;const i=xe.from(n);i.orig=new Ye,i.trim=new Ye,super(i),this._ownCanvas=r,this.canvas=n,this.context=n.getContext("2d",{willReadFrequently:!0}),this._resolution=wx.defaultResolution??Se.RESOLUTION,this._autoResolution=wx.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=t,this.style=e,this.localStyleID=-1}static get experimentalLetterSpacing(){return er.experimentalLetterSpacing}static set experimentalLetterSpacing(t){ot("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),er.experimentalLetterSpacing=t}updateText(t){const e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),!this.dirty&&t)return;this._font=this._style.toFontString();const n=this.context,r=er.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),i=r.width,s=r.height,o=r.lines,a=r.lineHeight,c=r.lineWidths,h=r.maxLineWidth,d=r.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,i)+e.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,s)+e.padding*2)*this._resolution),n.scale(this._resolution,this._resolution),n.clearRect(0,0,this.canvas.width,this.canvas.height),n.font=this._font,n.lineWidth=e.strokeThickness,n.textBaseline=e.textBaseline,n.lineJoin=e.lineJoin,n.miterLimit=e.miterLimit;let m,f;const y=e.dropShadow?2:1;for(let v=0;v<y;++v){const S=e.dropShadow&&v===0,C=S?Math.ceil(Math.max(1,s)+e.padding*2):0,_=C*this._resolution;if(S){n.fillStyle="black",n.strokeStyle="black";const w=e.dropShadowColor,I=e.dropShadowBlur*this._resolution,P=e.dropShadowDistance*this._resolution;n.shadowColor=kt.shared.setValue(w).setAlpha(e.dropShadowAlpha).toRgbaString(),n.shadowBlur=I,n.shadowOffsetX=Math.cos(e.dropShadowAngle)*P,n.shadowOffsetY=Math.sin(e.dropShadowAngle)*P+_}else n.fillStyle=this._generateFillStyle(e,o,r),n.strokeStyle=e.stroke,n.shadowColor="black",n.shadowBlur=0,n.shadowOffsetX=0,n.shadowOffsetY=0;let b=(a-d.fontSize)/2;a-d.fontSize<0&&(b=0);for(let w=0;w<o.length;w++)m=e.strokeThickness/2,f=e.strokeThickness/2+w*a+d.ascent+b,e.align==="right"?m+=h-c[w]:e.align==="center"&&(m+=(h-c[w])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(o[w],m+e.padding,f+e.padding-C,!0),e.fill&&this.drawLetterSpacing(o[w],m+e.padding,f+e.padding-C)}this.updateTexture()}drawLetterSpacing(t,e,n,r=!1){const s=this._style.letterSpacing;let o=!1;if(er.experimentalLetterSpacingSupported&&(er.experimentalLetterSpacing?(this.context.letterSpacing=`${s}px`,this.context.textLetterSpacing=`${s}px`,o=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),s===0||o){r?this.context.strokeText(t,e,n):this.context.fillText(t,e,n);return}let a=e;const c=er.graphemeSegmenter(t);let h=this.context.measureText(t).width,d=0;for(let m=0;m<c.length;++m){const f=c[m];r?this.context.strokeText(f,a,n):this.context.fillText(f,a,n);let y="";for(let v=m+1;v<c.length;++v)y+=c[v];d=this.context.measureText(y).width,a+=h-d+s,h=d}}updateTexture(){const t=this.canvas;if(this._style.trim){const s=ZL(t);s.data&&(t.width=s.width,t.height=s.height,this.context.putImageData(s.data,0,0))}const e=this._texture,n=this._style,r=n.trim?0:n.padding,i=e.baseTexture;e.trim.width=e._frame.width=t.width/this._resolution,e.trim.height=e._frame.height=t.height/this._resolution,e.trim.x=-r,e.trim.y=-r,e.orig.width=e._frame.width-r*2,e.orig.height=e._frame.height-r*2,this._onTextureUpdate(),i.setRealSize(t.width,t.height,this._resolution),e.updateUvs(),this.dirty=!1}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),super._render(t)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(t,e){return this.updateText(!0),this._textureID===-1&&(t=!1),super.getBounds(t,e)}getLocalBounds(t){return this.updateText(!0),super.getLocalBounds.call(this,t)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(t,e,n){const r=t.fill;if(Array.isArray(r)){if(r.length===1)return r[0]}else return r;let i;const s=t.dropShadow?t.dropShadowDistance:0,o=t.padding||0,a=this.canvas.width/this._resolution-s-o*2,c=this.canvas.height/this._resolution-s-o*2,h=r.slice(),d=t.fillGradientStops.slice();if(!d.length){const m=h.length+1;for(let f=1;f<m;++f)d.push(f/m)}if(h.unshift(r[0]),d.unshift(0),h.push(r[r.length-1]),d.push(1),t.fillGradientType===cy.LINEAR_VERTICAL){i=this.context.createLinearGradient(a/2,o,a/2,c+o);const m=n.fontProperties.fontSize+t.strokeThickness;for(let f=0;f<e.length;f++){const y=n.lineHeight*(f-1)+m,v=n.lineHeight*f;let S=v;f>0&&y>v&&(S=(v+y)/2);const C=v+m,_=n.lineHeight*(f+1);let b=C;f+1<e.length&&_<C&&(b=(C+_)/2);const w=(b-S)/c;for(let I=0;I<h.length;I++){let P=0;typeof d[I]=="number"?P=d[I]:P=I/h.length;let N=Math.min(1,Math.max(0,S/c+P*w));N=Number(N.toFixed(5)),i.addColorStop(N,h[I])}}}else{i=this.context.createLinearGradient(o,c/2,a+o,c/2);const m=h.length+1;let f=1;for(let y=0;y<h.length;y++){let v;typeof d[y]=="number"?v=d[y]:v=f/m,i.addColorStop(v,h[y]),f++}}return i}destroy(t){typeof t=="boolean"&&(t={children:t}),t=Object.assign({},EU,t),super.destroy(t),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(t){this.updateText(!0);const e=ja(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(t){this.updateText(!0);const e=ja(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}get style(){return this._style}set style(t){t=t||{},t instanceof Ns?this._style=t:this._style=new Ns(t),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(t){t=String(t??""),this._text!==t&&(this._text=t,this.dirty=!0)}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}};let hy=wx;hy.defaultAutoResolution=!0;class TU{constructor(e){this.maxItemsPerFrame=e,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function CU(t,e){var r;let n=!1;if((r=t==null?void 0:t._textures)!=null&&r.length){for(let i=0;i<t._textures.length;i++)if(t._textures[i]instanceof xe){const s=t._textures[i].baseTexture;e.includes(s)||(e.push(s),n=!0)}}return n}function IU(t,e){if(t.baseTexture instanceof Ge){const n=t.baseTexture;return e.includes(n)||e.push(n),!0}return!1}function AU(t,e){if(t._texture&&t._texture instanceof xe){const n=t._texture.baseTexture;return e.includes(n)||e.push(n),!0}return!1}function PU(t,e){return e instanceof hy?(e.updateText(!0),!0):!1}function kU(t,e){if(e instanceof Ns){const n=e.toFontString();return er.measureFont(n),!0}return!1}function RU(t,e){if(t instanceof hy){e.includes(t.style)||e.push(t.style),e.includes(t)||e.push(t);const n=t._texture.baseTexture;return e.includes(n)||e.push(n),!0}return!1}function MU(t,e){return t instanceof Ns?(e.includes(t)||e.push(t),!0):!1}const YP=class{constructor(t){this.limiter=new TU(YP.uploadsPerFrame),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(RU),this.registerFindHook(MU),this.registerFindHook(CU),this.registerFindHook(IU),this.registerFindHook(AU),this.registerUploadHook(PU),this.registerUploadHook(kU)}upload(t){return new Promise(e=>{t&&this.add(t),this.queue.length?(this.completes.push(e),this.ticking||(this.ticking=!0,mn.system.addOnce(this.tick,this,ll.UTILITY))):e()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const t=this.queue[0];let e=!1;if(t&&!t._destroyed){for(let n=0,r=this.uploadHooks.length;n<r;n++)if(this.uploadHooks[n](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}}e||this.queue.shift()}if(this.queue.length)mn.system.addOnce(this.tick,this,ll.UTILITY);else{this.ticking=!1;const t=this.completes.slice(0);this.completes.length=0;for(let e=0,n=t.length;e<n;e++)t[e]()}}registerFindHook(t){return t&&this.addHooks.push(t),this}registerUploadHook(t){return t&&this.uploadHooks.push(t),this}add(t){for(let e=0,n=this.addHooks.length;e<n&&!this.addHooks[e](t,this.queue);e++);if(t instanceof nr)for(let e=t.children.length-1;e>=0;e--)this.add(t.children[e]);return this}destroy(){this.ticking&&mn.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};let gg=YP;gg.uploadsPerFrame=4;Object.defineProperties(Se,{UPLOADS_PER_FRAME:{get(){return gg.uploadsPerFrame},set(t){ot("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),gg.uploadsPerFrame=t}}});function QP(t,e){return e instanceof Ge?(e._glTextures[t.CONTEXT_UID]||t.texture.bind(e),!0):!1}function OU(t,e){if(!(e instanceof nu))return!1;const{geometry:n}=e;e.finishPoly(),n.updateBatches();const{batches:r}=n;for(let i=0;i<r.length;i++){const{texture:s}=r[i].style;s&&QP(t,s.baseTexture)}return n.batchable||t.geometry.bind(n,e._resolveDirectShader(t)),!0}function DU(t,e){return t instanceof nu?(e.push(t),!0):!1}class KP extends gg{constructor(e){super(e),this.uploadHookHelper=this.renderer,this.registerFindHook(DU),this.registerUploadHook(QP),this.registerUploadHook(OU)}}KP.extension={name:"prepare",type:Ee.RendererSystem};Me.add(KP);class Xc extends Us{constructor(e,n=!0){super(e[0]instanceof xe?e[0]:e[0].texture),this._textures=null,this._durations=null,this._autoUpdate=n,this._isConnectedToTicker=!1,this.animationSpeed=1,this.loop=!0,this.updateAnchor=!1,this.onComplete=null,this.onFrameChange=null,this.onLoop=null,this._currentTime=0,this._playing=!1,this._previousFrame=null,this.textures=e}stop(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(mn.shared.remove(this.update,this),this._isConnectedToTicker=!1))}play(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(mn.shared.add(this.update,this,ll.HIGH),this._isConnectedToTicker=!0))}gotoAndStop(e){this.stop(),this.currentFrame=e}gotoAndPlay(e){this.currentFrame=e,this.play()}update(e){if(!this._playing)return;const n=this.animationSpeed*e,r=this.currentFrame;if(this._durations!==null){let i=this._currentTime%1*this._durations[this.currentFrame];for(i+=n/60*1e3;i<0;)this._currentTime--,i+=this._durations[this.currentFrame];const s=Math.sign(this.animationSpeed*e);for(this._currentTime=Math.floor(this._currentTime);i>=this._durations[this.currentFrame];)i-=this._durations[this.currentFrame]*s,this._currentTime+=s;this._currentTime+=i/this._durations[this.currentFrame]}else this._currentTime+=n;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):r!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<r||this.animationSpeed<0&&this.currentFrame>r)&&this.onLoop(),this.updateTexture())}updateTexture(){const e=this.currentFrame;this._previousFrame!==e&&(this._previousFrame=e,this._texture=this._textures[e],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))}destroy(e){this.stop(),super.destroy(e),this.onComplete=null,this.onFrameChange=null,this.onLoop=null}static fromFrames(e){const n=[];for(let r=0;r<e.length;++r)n.push(xe.from(e[r]));return new Xc(n)}static fromImages(e){const n=[];for(let r=0;r<e.length;++r)n.push(xe.from(e[r]));return new Xc(n)}get totalFrames(){return this._textures.length}get textures(){return this._textures}set textures(e){if(e[0]instanceof xe)this._textures=e,this._durations=null;else{this._textures=[],this._durations=[];for(let n=0;n<e.length;n++)this._textures.push(e[n].texture),this._durations.push(e[n].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()}get currentFrame(){let e=Math.floor(this._currentTime)%this._textures.length;return e<0&&(e+=this._textures.length),e}set currentFrame(e){if(e<0||e>this.totalFrames-1)throw new Error(`[AnimatedSprite]: Invalid frame index value ${e}, expected to be between 0 and totalFrames ${this.totalFrames}.`);const n=this.currentFrame;this._currentTime=e,n!==this.currentFrame&&this.updateTexture()}get playing(){return this._playing}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(mn.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(mn.shared.add(this.update,this),this._isConnectedToTicker=!0))}}const Gh=new Oe;class o_ extends Us{constructor(e,n=100,r=100){super(e),this.tileTransform=new ey,this._width=n,this._height=r,this.uvMatrix=this.texture.uvMatrix||new t_(e),this.pluginName="tilingSprite",this.uvRespectAnchor=!1}get clampMargin(){return this.uvMatrix.clampMargin}set clampMargin(e){this.uvMatrix.clampMargin=e,this.uvMatrix.update(!0)}get tileScale(){return this.tileTransform.scale}set tileScale(e){this.tileTransform.scale.copyFrom(e)}get tilePosition(){return this.tileTransform.position}set tilePosition(e){this.tileTransform.position.copyFrom(e)}_onTextureUpdate(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215}_render(e){const n=this._texture;!n||!n.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this))}_calculateBounds(){const e=this._width*-this._anchor._x,n=this._height*-this._anchor._y,r=this._width*(1-this._anchor._x),i=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,e,n,r,i)}getLocalBounds(e){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new Ye),e=this._localBoundsRect),this._bounds.getRectangle(e)):super.getLocalBounds.call(this,e)}containsPoint(e){this.worldTransform.applyInverse(e,Gh);const n=this._width,r=this._height,i=-n*this.anchor._x;if(Gh.x>=i&&Gh.x<i+n){const s=-r*this.anchor._y;if(Gh.y>=s&&Gh.y<s+r)return!0}return!1}destroy(e){super.destroy(e),this.tileTransform=null,this.uvMatrix=null}static from(e,n){const r=e instanceof xe?e:xe.from(e,n);return new o_(r,n.width,n.height)}get width(){return this._width}set width(e){this._width=e}get height(){return this._height}set height(e){this._height=e}}var NU=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,LU=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,FU=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,PT=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,BU=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;const Kp=new en;class ZP extends ty{constructor(e){super(e),e.runners.contextChange.add(this),this.quad=new pP,this.state=ua.for2d()}contextChange(){const e=this.renderer,n={globals:e.globalUniforms};this.simpleShader=Co.from(PT,BU,n),this.shader=e.context.webGLVersion>1?Co.from(LU,NU,n):Co.from(PT,FU,n)}render(e){const n=this.renderer,r=this.quad;let i=r.vertices;i[0]=i[6]=e._width*-e.anchor.x,i[1]=i[3]=e._height*-e.anchor.y,i[2]=i[4]=e._width*(1-e.anchor.x),i[5]=i[7]=e._height*(1-e.anchor.y);const s=e.uvRespectAnchor?e.anchor.x:0,o=e.uvRespectAnchor?e.anchor.y:0;i=r.uvs,i[0]=i[6]=-s,i[1]=i[3]=-o,i[2]=i[4]=1-s,i[5]=i[7]=1-o,r.invalidate();const a=e._texture,c=a.baseTexture,h=c.alphaMode>0,d=e.tileTransform.localTransform,m=e.uvMatrix;let f=c.isPowerOfTwo&&a.frame.width===c.width&&a.frame.height===c.height;f&&(c._glTextures[n.CONTEXT_UID]?f=c.wrapMode!==Jo.CLAMP:c.wrapMode===Jo.CLAMP&&(c.wrapMode=Jo.REPEAT));const y=f?this.simpleShader:this.shader,v=a.width,S=a.height,C=e._width,_=e._height;Kp.set(d.a*v/C,d.b*v/_,d.c*S/C,d.d*S/_,d.tx/C,d.ty/_),Kp.invert(),f?Kp.prepend(m.mapCoord):(y.uniforms.uMapCoord=m.mapCoord.toArray(!0),y.uniforms.uClampFrame=m.uClampFrame,y.uniforms.uClampOffset=m.uClampOffset),y.uniforms.uTransform=Kp.toArray(!0),y.uniforms.uColor=kt.shared.setValue(e.tint).premultiply(e.worldAlpha,h).toArray(y.uniforms.uColor),y.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),y.uniforms.uSampler=a,n.shader.bind(y),n.geometry.bind(r),this.state.blendMode=ZA(e.blendMode,h),n.state.set(this.state),n.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}ZP.extension={name:"tilingSprite",type:Ee.RendererPlugin};Me.add(ZP);const rd=class{constructor(t,e,n=null){this.linkedSheets=[],this._texture=t instanceof xe?t:null,this.baseTexture=t instanceof Ge?t:this._texture.baseTexture,this.textures={},this.animations={},this.data=e;const r=this.baseTexture.resource;this.resolution=this._updateResolution(n||(r?r.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(t=null){const{scale:e}=this.data.meta;let n=sl(t,null);return n===null&&(n=parseFloat(e??"1")),n!==1&&this.baseTexture.setResolution(n),n}parse(){return new Promise(t=>{this._callback=t,this._batchIndex=0,this._frameKeys.length<=rd.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(t){let e=t;const n=rd.BATCH_SIZE;for(;e-t<n&&e<this._frameKeys.length;){const r=this._frameKeys[e],i=this._frames[r],s=i.frame;if(s){let o=null,a=null;const c=i.trimmed!==!1&&i.sourceSize?i.sourceSize:i.frame,h=new Ye(0,0,Math.floor(c.w)/this.resolution,Math.floor(c.h)/this.resolution);i.rotated?o=new Ye(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.h)/this.resolution,Math.floor(s.w)/this.resolution):o=new Ye(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution),i.trimmed!==!1&&i.spriteSourceSize&&(a=new Ye(Math.floor(i.spriteSourceSize.x)/this.resolution,Math.floor(i.spriteSourceSize.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution)),this.textures[r]=new xe(this.baseTexture,o,h,a,i.rotated?2:0,i.anchor,i.borders),xe.addToCache(this.textures[r],r)}e++}}_processAnimations(){const t=this.data.animations||{};for(const e in t){this.animations[e]=[];for(let n=0;n<t[e].length;n++){const r=t[e][n];this.animations[e].push(this.textures[r])}}}_parseComplete(){const t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*rd.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*rd.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(t=!1){var e;for(const n in this.textures)this.textures[n].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&((e=this._texture)==null||e.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};let Jd=rd;Jd.BATCH_SIZE=1e3;const UU=["jpg","png","jpeg","avif","webp"];function JP(t,e,n){const r={};if(t.forEach(i=>{r[i]=e}),Object.keys(e.textures).forEach(i=>{r[i]=e.textures[i]}),!n){const i=Rr.dirname(t[0]);e.linkedSheets.forEach((s,o)=>{const a=JP([`${i}/${e.data.meta.related_multi_packs[o]}`],s,!0);Object.assign(r,a)})}return r}const zU={extension:Ee.Asset,cache:{test:t=>t instanceof Jd,getCacheableAssets:(t,e)=>JP(t,e,!1)},resolver:{test:t=>{const n=t.split("?")[0].split("."),r=n.pop(),i=n.pop();return r==="json"&&UU.includes(i)},parse:t=>{var n;const e=t.split(".");return{resolution:parseFloat(((n=Se.RETINA_PREFIX.exec(t))==null?void 0:n[1])??"1"),format:e[e.length-2],src:t}}},loader:{name:"spritesheetLoader",extension:{type:Ee.LoadParser,priority:ko.Normal},async testParse(t,e){return Rr.extname(e.src).toLowerCase()===".json"&&!!t.frames},async parse(t,e,n){var h,d;let r=Rr.dirname(e.src);r&&r.lastIndexOf("/")!==r.length-1&&(r+="/");let i=r+t.meta.image;i=vx(i,e.src);const o=(await n.load([i]))[i],a=new Jd(o.baseTexture,t,e.src);await a.parse();const c=(h=t==null?void 0:t.meta)==null?void 0:h.related_multi_packs;if(Array.isArray(c)){const m=[];for(const y of c){if(typeof y!="string")continue;let v=r+y;(d=e.data)!=null&&d.ignoreMultiPack||(v=vx(v,e.src),m.push(n.load({src:v,data:{ignoreMultiPack:!0}})))}const f=await Promise.all(m);a.linkedSheets=f,f.forEach(y=>{y.linkedSheets=[a].concat(a.linkedSheets.filter(v=>v!==y))})}return a},unload(t){t.destroy(!0)}}};Me.add(zU);class yg{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class Am{static test(e){return typeof e=="string"&&e.startsWith("info face=")}static parse(e){const n=e.match(/^[a-z]+\s+.+$/gm),r={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const s in n){const o=n[s].match(/^[a-z]+/gm)[0],a=n[s].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),c={};for(const h in a){const d=a[h].split("="),m=d[0],f=d[1].replace(/"/gm,""),y=parseFloat(f),v=isNaN(y)?f:y;c[m]=v}r[o].push(c)}const i=new yg;return r.info.forEach(s=>i.info.push({face:s.face,size:parseInt(s.size,10)})),r.common.forEach(s=>i.common.push({lineHeight:parseInt(s.lineHeight,10)})),r.page.forEach(s=>i.page.push({id:parseInt(s.id,10),file:s.file})),r.char.forEach(s=>i.char.push({id:parseInt(s.id,10),page:parseInt(s.page,10),x:parseInt(s.x,10),y:parseInt(s.y,10),width:parseInt(s.width,10),height:parseInt(s.height,10),xoffset:parseInt(s.xoffset,10),yoffset:parseInt(s.yoffset,10),xadvance:parseInt(s.xadvance,10)})),r.kerning.forEach(s=>i.kerning.push({first:parseInt(s.first,10),second:parseInt(s.second,10),amount:parseInt(s.amount,10)})),r.distanceField.forEach(s=>i.distanceField.push({distanceRange:parseInt(s.distanceRange,10),fieldType:s.fieldType})),i}}class _x{static test(e){const n=e;return"getElementsByTagName"in n&&n.getElementsByTagName("page").length&&n.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(e){const n=new yg,r=e.getElementsByTagName("info"),i=e.getElementsByTagName("common"),s=e.getElementsByTagName("page"),o=e.getElementsByTagName("char"),a=e.getElementsByTagName("kerning"),c=e.getElementsByTagName("distanceField");for(let h=0;h<r.length;h++)n.info.push({face:r[h].getAttribute("face"),size:parseInt(r[h].getAttribute("size"),10)});for(let h=0;h<i.length;h++)n.common.push({lineHeight:parseInt(i[h].getAttribute("lineHeight"),10)});for(let h=0;h<s.length;h++)n.page.push({id:parseInt(s[h].getAttribute("id"),10)||0,file:s[h].getAttribute("file")});for(let h=0;h<o.length;h++){const d=o[h];n.char.push({id:parseInt(d.getAttribute("id"),10),page:parseInt(d.getAttribute("page"),10)||0,x:parseInt(d.getAttribute("x"),10),y:parseInt(d.getAttribute("y"),10),width:parseInt(d.getAttribute("width"),10),height:parseInt(d.getAttribute("height"),10),xoffset:parseInt(d.getAttribute("xoffset"),10),yoffset:parseInt(d.getAttribute("yoffset"),10),xadvance:parseInt(d.getAttribute("xadvance"),10)})}for(let h=0;h<a.length;h++)n.kerning.push({first:parseInt(a[h].getAttribute("first"),10),second:parseInt(a[h].getAttribute("second"),10),amount:parseInt(a[h].getAttribute("amount"),10)});for(let h=0;h<c.length;h++)n.distanceField.push({fieldType:c[h].getAttribute("fieldType"),distanceRange:parseInt(c[h].getAttribute("distanceRange"),10)});return n}}class Sx{static test(e){return typeof e=="string"&&e.includes("<font>")?_x.test(Se.ADAPTER.parseXML(e)):!1}static parse(e){return _x.parse(Se.ADAPTER.parseXML(e))}}const Cv=[Am,_x,Sx];function $U(t){for(let e=0;e<Cv.length;e++)if(Cv[e].test(t))return Cv[e];return null}function HU(t,e,n,r,i,s){const o=n.fill;if(Array.isArray(o)){if(o.length===1)return o[0]}else return o;let a;const c=n.dropShadow?n.dropShadowDistance:0,h=n.padding||0,d=t.width/r-c-h*2,m=t.height/r-c-h*2,f=o.slice(),y=n.fillGradientStops.slice();if(!y.length){const v=f.length+1;for(let S=1;S<v;++S)y.push(S/v)}if(f.unshift(o[0]),y.unshift(0),f.push(o[o.length-1]),y.push(1),n.fillGradientType===cy.LINEAR_VERTICAL){a=e.createLinearGradient(d/2,h,d/2,m+h);let v=0;const C=(s.fontProperties.fontSize+n.strokeThickness)/m;for(let _=0;_<i.length;_++){const b=s.lineHeight*_;for(let w=0;w<f.length;w++){let I=0;typeof y[w]=="number"?I=y[w]:I=w/f.length;const P=b/m+I*C;let N=Math.max(v,P);N=Math.min(N,1),a.addColorStop(N,f[w]),v=N}}}else{a=e.createLinearGradient(h,m/2,d+h,m/2);const v=f.length+1;let S=1;for(let C=0;C<f.length;C++){let _;typeof y[C]=="number"?_=y[C]:_=S/v,a.addColorStop(_,f[C]),S++}}return a}function GU(t,e,n,r,i,s,o){const a=n.text,c=n.fontProperties;e.translate(r,i),e.scale(s,s);const h=o.strokeThickness/2,d=-(o.strokeThickness/2);if(e.font=o.toFontString(),e.lineWidth=o.strokeThickness,e.textBaseline=o.textBaseline,e.lineJoin=o.lineJoin,e.miterLimit=o.miterLimit,e.fillStyle=HU(t,e,o,s,[a],n),e.strokeStyle=o.stroke,o.dropShadow){const m=o.dropShadowColor,f=o.dropShadowBlur*s,y=o.dropShadowDistance*s;e.shadowColor=kt.shared.setValue(m).setAlpha(o.dropShadowAlpha).toRgbaString(),e.shadowBlur=f,e.shadowOffsetX=Math.cos(o.dropShadowAngle)*y,e.shadowOffsetY=Math.sin(o.dropShadowAngle)*y}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;o.stroke&&o.strokeThickness&&e.strokeText(a,h,d+n.lineHeight-c.descent),o.fill&&e.fillText(a,h,d+n.lineHeight-c.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}function Pm(t){return t.codePointAt?t.codePointAt(0):t.charCodeAt(0)}function e3(t){return Array.from?Array.from(t):t.split("")}function WU(t){typeof t=="string"&&(t=[t]);const e=[];for(let n=0,r=t.length;n<r;n++){const i=t[n];if(Array.isArray(i)){if(i.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${i.length}.`);const s=i[0].charCodeAt(0),o=i[1].charCodeAt(0);if(o<s)throw new Error("[BitmapFont]: Invalid character range.");for(let a=s,c=o;a<=c;a++)e.push(String.fromCharCode(a))}else e.push(...e3(i))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}const vs=class{constructor(t,e,n){var h;const[r]=t.info,[i]=t.common,[s]=t.page,[o]=t.distanceField,a=sl(s.file),c={};this._ownsTextures=n,this.font=r.face,this.size=r.size,this.lineHeight=i.lineHeight/a,this.chars={},this.pageTextures=c;for(let d=0;d<t.page.length;d++){const{id:m,file:f}=t.page[d];c[m]=e instanceof Array?e[d]:e[f],o!=null&&o.fieldType&&o.fieldType!=="none"&&(c[m].baseTexture.alphaMode=Bs.NO_PREMULTIPLIED_ALPHA,c[m].baseTexture.mipmap=Io.OFF)}for(let d=0;d<t.char.length;d++){const{id:m,page:f}=t.char[d];let{x:y,y:v,width:S,height:C,xoffset:_,yoffset:b,xadvance:w}=t.char[d];y/=a,v/=a,S/=a,C/=a,_/=a,b/=a,w/=a;const I=new Ye(y+c[f].frame.x/a,v+c[f].frame.y/a,S,C);this.chars[m]={xOffset:_,yOffset:b,xAdvance:w,kerning:{},texture:new xe(c[f].baseTexture,I),page:f}}for(let d=0;d<t.kerning.length;d++){let{first:m,second:f,amount:y}=t.kerning[d];m/=a,f/=a,y/=a,this.chars[f]&&(this.chars[f].kerning[m]=y)}this.distanceFieldRange=o==null?void 0:o.distanceRange,this.distanceFieldType=((h=o==null?void 0:o.fieldType)==null?void 0:h.toLowerCase())??"none"}destroy(){for(const t in this.chars)this.chars[t].texture.destroy(),this.chars[t].texture=null;for(const t in this.pageTextures)this._ownsTextures&&this.pageTextures[t].destroy(!0),this.pageTextures[t]=null;this.chars=null,this.pageTextures=null}static install(t,e,n){let r;if(t instanceof yg)r=t;else{const s=$U(t);if(!s)throw new Error("Unrecognized data format for font.");r=s.parse(t)}e instanceof xe&&(e=[e]);const i=new vs(r,e,n);return vs.available[i.font]=i,i}static uninstall(t){const e=vs.available[t];if(!e)throw new Error(`No font found named '${t}'`);e.destroy(),delete vs.available[t]}static from(t,e,n){if(!t)throw new Error("[BitmapFont] Property `name` is required.");const{chars:r,padding:i,resolution:s,textureWidth:o,textureHeight:a,...c}=Object.assign({},vs.defaultOptions,n),h=WU(r),d=e instanceof Ns?e:new Ns(e),m=o,f=new yg;f.info[0]={face:d.fontFamily,size:d.fontSize},f.common[0]={lineHeight:d.fontSize};let y=0,v=0,S,C,_,b=0;const w=[];for(let P=0;P<h.length;P++){S||(S=Se.ADAPTER.createCanvas(),S.width=o,S.height=a,C=S.getContext("2d"),_=new Ge(S,{resolution:s,...c}),w.push(new xe(_)),f.page.push({id:w.length-1,file:""}));const N=h[P],O=er.measureText(N,d,!1,S),D=O.width,V=Math.ceil(O.height),G=Math.ceil((d.fontStyle==="italic"?2:1)*D);if(v>=a-V*s){if(v===0)throw new Error(`[BitmapFont] textureHeight ${a}px is too small (fontFamily: '${d.fontFamily}', fontSize: ${d.fontSize}px, char: '${N}')`);--P,S=null,C=null,_=null,v=0,y=0,b=0;continue}if(b=Math.max(V+O.fontProperties.descent,b),G*s+y>=m){if(y===0)throw new Error(`[BitmapFont] textureWidth ${o}px is too small (fontFamily: '${d.fontFamily}', fontSize: ${d.fontSize}px, char: '${N}')`);--P,v+=b*s,v=Math.ceil(v),y=0,b=0;continue}GU(S,C,O,y,v,s,d);const F=Pm(O.text);f.char.push({id:F,page:w.length-1,x:y/s,y:v/s,width:G,height:V,xoffset:0,yoffset:0,xadvance:D-(d.dropShadow?d.dropShadowDistance:0)-(d.stroke?d.strokeThickness:0)}),y+=(G+2*i)*s,y=Math.ceil(y)}for(let P=0,N=h.length;P<N;P++){const O=h[P];for(let D=0;D<N;D++){const V=h[D],G=C.measureText(O).width,F=C.measureText(V).width,W=C.measureText(O+V).width-(G+F);W&&f.kerning.push({first:Pm(O),second:Pm(V),amount:W})}}const I=new vs(f,w,!0);return vs.available[t]!==void 0&&vs.uninstall(t),vs.available[t]=I,I}};let ni=vs;ni.ALPHA=[["a","z"],["A","Z"]," "];ni.NUMERIC=[["0","9"]];ni.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "];ni.ASCII=[[" ","~"]];ni.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:vs.ALPHANUMERIC};ni.available={};var jU=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // Gamma correction for coverage-like alpha\r
  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r
  float gamma = mix(1.0, 1.0 / 2.2, luma);\r
  float coverage = pow(uColor.a * alpha, gamma);  \r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, coverage);\r
}\r
`,VU=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;const kT=[],RT=[],MT=[],t3=class extends nr{constructor(t,e={}){super();const{align:n,tint:r,maxWidth:i,letterSpacing:s,fontName:o,fontSize:a}=Object.assign({},t3.styleDefaults,e);if(!ni.available[o])throw new Error(`Missing BitmapFont "${o}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=n,this._tintColor=new kt(r),this._font=void 0,this._fontName=o,this._fontSize=a,this.text=t,this._maxWidth=i,this._maxLineHeight=0,this._letterSpacing=s,this._anchor=new Ko(()=>{this.dirty=!0},this,0,0),this._roundPixels=Se.ROUND_PIXELS,this.dirty=!0,this._resolution=Se.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){var G;const t=ni.available[this._fontName],e=this.fontSize,n=e/t.size,r=new Oe,i=[],s=[],o=[],a=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",c=e3(a),h=this._maxWidth*t.size/e,d=t.distanceFieldType==="none"?kT:RT;let m=null,f=0,y=0,v=0,S=-1,C=0,_=0,b=0,w=0;for(let F=0;F<c.length;F++){const q=c[F],W=Pm(q);if(/(?:\s)/.test(q)&&(S=F,C=f,w++),q==="\r"||q===`
`){s.push(f),o.push(-1),y=Math.max(y,f),++v,++_,r.x=0,r.y+=t.lineHeight,m=null,w=0;continue}const H=t.chars[W];if(!H)continue;m&&H.kerning[m]&&(r.x+=H.kerning[m]);const se=MT.pop()||{texture:xe.EMPTY,line:0,charCode:0,prevSpaces:0,position:new Oe};se.texture=H.texture,se.line=v,se.charCode=W,se.position.x=Math.round(r.x+H.xOffset+this._letterSpacing/2),se.position.y=Math.round(r.y+H.yOffset),se.prevSpaces=w,i.push(se),f=se.position.x+Math.max(H.xAdvance-H.xOffset,H.texture.orig.width),r.x+=H.xAdvance+this._letterSpacing,b=Math.max(b,H.yOffset+H.texture.height),m=W,S!==-1&&h>0&&r.x>h&&(++_,Ic(i,1+S-_,1+F-S),F=S,S=-1,s.push(C),o.push(i.length>0?i[i.length-1].prevSpaces:0),y=Math.max(y,C),v++,r.x=0,r.y+=t.lineHeight,m=null,w=0)}const I=c[c.length-1];I!=="\r"&&I!==`
`&&(/(?:\s)/.test(I)&&(f=C),s.push(f),y=Math.max(y,f),o.push(-1));const P=[];for(let F=0;F<=v;F++){let q=0;this._align==="right"?q=y-s[F]:this._align==="center"?q=(y-s[F])/2:this._align==="justify"&&(q=o[F]<0?0:(y-s[F])/o[F]),P.push(q)}const N=i.length,O={},D=[],V=this._activePagesMeshData;d.push(...V);for(let F=0;F<N;F++){const q=i[F].texture,W=q.baseTexture.uid;if(!O[W]){let H=d.pop();if(!H){const ue=new uy;let K,$;t.distanceFieldType==="none"?(K=new Zd(xe.EMPTY),$=Ue.NORMAL):(K=new Zd(xe.EMPTY,{program:Is.from(VU,jU),uniforms:{uFWidth:0}}),$=Ue.NORMAL_NPM);const Q=new Vc(ue,K);Q.blendMode=$,H={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:Q,vertices:null,uvs:null,indices:null}}H.index=0,H.indexCount=0,H.vertexCount=0,H.uvsCount=0,H.total=0;const{_textureCache:se}=this;se[W]=se[W]||new xe(q.baseTexture),H.mesh.texture=se[W],H.mesh.tint=this._tintColor.value,D.push(H),O[W]=H}O[W].total++}for(let F=0;F<V.length;F++)D.includes(V[F])||this.removeChild(V[F].mesh);for(let F=0;F<D.length;F++)D[F].mesh.parent!==this&&this.addChild(D[F].mesh);this._activePagesMeshData=D;for(const F in O){const q=O[F],W=q.total;if(!(((G=q.indices)==null?void 0:G.length)>6*W)||q.vertices.length<Vc.BATCHABLE_SIZE*2)q.vertices=new Float32Array(4*2*W),q.uvs=new Float32Array(4*2*W),q.indices=new Uint16Array(6*W);else{const H=q.total,se=q.vertices;for(let ue=H*4*2;ue<se.length;ue++)se[ue]=0}q.mesh.size=6*W}for(let F=0;F<N;F++){const q=i[F];let W=q.position.x+P[q.line]*(this._align==="justify"?q.prevSpaces:1);this._roundPixels&&(W=Math.round(W));const H=W*n,se=q.position.y*n,ue=q.texture,K=O[ue.baseTexture.uid],$=ue.frame,Q=ue._uvs,L=K.index++;K.indices[L*6+0]=0+L*4,K.indices[L*6+1]=1+L*4,K.indices[L*6+2]=2+L*4,K.indices[L*6+3]=0+L*4,K.indices[L*6+4]=2+L*4,K.indices[L*6+5]=3+L*4,K.vertices[L*8+0]=H,K.vertices[L*8+1]=se,K.vertices[L*8+2]=H+$.width*n,K.vertices[L*8+3]=se,K.vertices[L*8+4]=H+$.width*n,K.vertices[L*8+5]=se+$.height*n,K.vertices[L*8+6]=H,K.vertices[L*8+7]=se+$.height*n,K.uvs[L*8+0]=Q.x0,K.uvs[L*8+1]=Q.y0,K.uvs[L*8+2]=Q.x1,K.uvs[L*8+3]=Q.y1,K.uvs[L*8+4]=Q.x2,K.uvs[L*8+5]=Q.y2,K.uvs[L*8+6]=Q.x3,K.uvs[L*8+7]=Q.y3}this._textWidth=y*n,this._textHeight=(r.y+t.lineHeight)*n;for(const F in O){const q=O[F];if(this.anchor.x!==0||this.anchor.y!==0){let ue=0;const K=this._textWidth*this.anchor.x,$=this._textHeight*this.anchor.y;for(let Q=0;Q<q.total;Q++)q.vertices[ue++]-=K,q.vertices[ue++]-=$,q.vertices[ue++]-=K,q.vertices[ue++]-=$,q.vertices[ue++]-=K,q.vertices[ue++]-=$,q.vertices[ue++]-=K,q.vertices[ue++]-=$}this._maxLineHeight=b*n;const W=q.mesh.geometry.getBuffer("aVertexPosition"),H=q.mesh.geometry.getBuffer("aTextureCoord"),se=q.mesh.geometry.getIndex();W.data=q.vertices,H.data=q.uvs,se.data=q.indices,W.update(),H.update(),se.update()}for(let F=0;F<i.length;F++)MT.push(i[F]);this._font=t,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0);const{distanceFieldRange:e,distanceFieldType:n,size:r}=ni.available[this._fontName];if(n!=="none"){const{a:i,b:s,c:o,d:a}=this.worldTransform,c=Math.sqrt(i*i+s*s),h=Math.sqrt(o*o+a*a),d=(Math.abs(c)+Math.abs(h))/2,m=this.fontSize/r,f=t._view.resolution;for(const y of this._activePagesMeshData)y.mesh.shader.uniforms.uFWidth=d*e*m*f}super._render(t)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const t=ni.available[this._fontName];if(!t)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==t&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(t){if(this.tint!==t){this._tintColor.setValue(t);for(let e=0;e<this._activePagesMeshData.length;e++)this._activePagesMeshData[e].mesh.tint=t}}get align(){return this._align}set align(t){this._align!==t&&(this._align=t,this.dirty=!0)}get fontName(){return this._fontName}set fontName(t){if(!ni.available[t])throw new Error(`Missing BitmapFont "${t}"`);this._fontName!==t&&(this._fontName=t,this.dirty=!0)}get fontSize(){return this._fontSize??ni.available[this._fontName].size}set fontSize(t){this._fontSize!==t&&(this._fontSize=t,this.dirty=!0)}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}get text(){return this._text}set text(t){t=String(t??""),this._text!==t&&(this._text=t,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(t){t!==this._roundPixels&&(this._roundPixels=t,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}destroy(t){const{_textureCache:e}=this,r=ni.available[this._fontName].distanceFieldType==="none"?kT:RT;r.push(...this._activePagesMeshData);for(const i of this._activePagesMeshData)this.removeChild(i.mesh);this._activePagesMeshData=[],r.filter(i=>e[i.mesh.texture.baseTexture.uid]).forEach(i=>{i.mesh.texture=xe.EMPTY});for(const i in e)e[i].destroy(),delete e[i];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(t)}};let n3=t3;n3.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};const XU=[".xml",".fnt"],qU={extension:{type:Ee.LoadParser,priority:ko.Normal},name:"loadBitmapFont",test(t){return XU.includes(Rr.extname(t).toLowerCase())},async testParse(t){return Am.test(t)||Sx.test(t)},async parse(t,e,n){const r=Am.test(t)?Am.parse(t):Sx.parse(t),{src:i}=e,{page:s}=r,o=[];for(let h=0;h<s.length;++h){const d=s[h].file;let m=Rr.join(Rr.dirname(i),d);m=vx(m,i),o.push(m)}const a=await n.load(o),c=o.map(h=>a[h]);return ni.install(r,c,!0)},async load(t,e){return(await Se.ADAPTER.fetch(t)).text()},unload(t){t.destroy()}};Me.add(qU);const Zu=class extends Ns{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(t){return new Zu(Object.keys(Zu.defaultOptions).reduce((e,n)=>({...e,[n]:t[n]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(t=>{URL.revokeObjectURL(t.src),t.refs--,t.refs===0&&(t.fontFace&&document.fonts.delete(t.fontFace),delete Zu.availableFonts[t.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(t,e={}){const{availableFonts:n}=Zu;if(n[t]){const r=n[t];return this._fonts.push(r),r.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return Se.ADAPTER.fetch(t).then(r=>r.blob()).then(async r=>new Promise((i,s)=>{const o=URL.createObjectURL(r),a=new FileReader;a.onload=()=>i([o,a.result]),a.onerror=s,a.readAsDataURL(r)})).then(async([r,i])=>{const s=Object.assign({family:Rr.basename(t,Rr.extname(t)),weight:"normal",style:"normal",src:r,dataSrc:i,refs:1,originalUrl:t,fontFace:null},e);n[t]=s,this._fonts.push(s),this.styleID++;const o=new FontFace(s.family,`url(${s.src})`,{weight:s.weight,style:s.style});s.fontFace=o,await o.load(),document.fonts.add(o),await document.fonts.ready,this.styleID++,this.fontsDirty=!0})}addOverride(...t){const e=t.filter(n=>!this._overrides.includes(n));e.length>0&&(this._overrides.push(...e),this.styleID++)}removeOverride(...t){const e=t.filter(n=>this._overrides.includes(n));e.length>0&&(this._overrides=this._overrides.filter(n=>!e.includes(n)),this.styleID++)}toCSS(t){return[`transform: scale(${t})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?[`word-wrap: ${this.breakWords?"break-all":"break-word"}`,`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((t,e)=>`${t}
            @font-face {
                font-family: "${e.family}";
                src: url('${e.dataSrc}');
                font-weight: ${e.weight};
                font-style: ${e.style}; 
            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(t){this._stylesheet!==t&&(this._stylesheet=t,this.styleID++)}normalizeColor(t){return Array.isArray(t)&&(t=VL(t)),typeof t=="number"?jL(t):t}dropShadowToCSS(){let t=this.normalizeColor(this.dropShadowColor);const e=this.dropShadowAlpha,n=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),r=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);t.startsWith("#")&&e<1&&(t+=(e*255|0).toString(16).padStart(2,"0"));const i=`${n}px ${r}px`;return this.dropShadowBlur>0?`text-shadow: ${i} ${this.dropShadowBlur}px ${t}`:`text-shadow: ${i} ${t}`}reset(){Object.assign(this,Zu.defaultOptions)}onBeforeDraw(){const{fontsDirty:t}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&t?new Promise(e=>setTimeout(e,100)):Promise.resolve()}get isSafari(){const{userAgent:t}=Se.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(t)}set fillGradientStops(t){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(t){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(t){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(t){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(t){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(t){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(t){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};let Sd=Zu;Sd.availableFonts={};Sd.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};const Ju=class extends Us{constructor(t="",e={}){super(xe.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this._loading=!1,this.localStyleID=-1,this.dirty=!1,this.ownsStyle=!1;const n=new Image,r=xe.from(n,{scaleMode:Se.SCALE_MODE,resourceOptions:{autoLoad:!1}});r.orig=new Ye,r.trim=new Ye,this.texture=r;const i="http://www.w3.org/2000/svg",s="http://www.w3.org/1999/xhtml",o=document.createElementNS(i,"svg"),a=document.createElementNS(i,"foreignObject"),c=document.createElementNS(s,"div"),h=document.createElementNS(s,"style");a.setAttribute("width","10000"),a.setAttribute("height","10000"),a.style.overflow="hidden",o.appendChild(a),this.maxWidth=Ju.defaultMaxWidth,this.maxHeight=Ju.defaultMaxHeight,this._domElement=c,this._styleElement=h,this._svgRoot=o,this._foreignObject=a,this._foreignObject.appendChild(h),this._foreignObject.appendChild(c),this._image=n,this._loadImage=new Image,this._autoResolution=Ju.defaultAutoResolution,this._resolution=Ju.defaultResolution??Se.RESOLUTION,this.text=t,this.style=e}measureText(t){var a,c;const{text:e,style:n,resolution:r}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},t);Object.assign(this._domElement,{innerHTML:e,style:n.toCSS(r)}),this._styleElement.textContent=n.toGlobalCSS(),document.body.appendChild(this._svgRoot);const i=this._domElement.getBoundingClientRect();this._svgRoot.remove();const s=Math.min(this.maxWidth,Math.ceil(i.width)),o=Math.min(this.maxHeight,Math.ceil(i.height));return this._svgRoot.setAttribute("width",s.toString()),this._svgRoot.setAttribute("height",o.toString()),e!==this._text&&(this._domElement.innerHTML=this._text),n!==this._style&&(Object.assign(this._domElement,{style:(a=this._style)==null?void 0:a.toCSS(r)}),this._styleElement.textContent=(c=this._style)==null?void 0:c.toGlobalCSS()),{width:s+n.padding*2,height:o+n.padding*2}}async updateText(t=!0){const{style:e,_image:n,_loadImage:r}=this;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),!this.dirty&&t)return;const{width:i,height:s}=this.measureText();n.width=r.width=Math.ceil(Math.max(1,i)),n.height=r.height=Math.ceil(Math.max(1,s)),this._loading||(this._loading=!0,await new Promise(o=>{r.onload=async()=>{await e.onBeforeDraw(),this._loading=!1,n.src=r.src,r.onload=null,r.src="",this.updateTexture(),o()};const a=new XMLSerializer().serializeToString(this._svgRoot);r.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(a)}`}))}get source(){return this._image}updateTexture(){const{style:t,texture:e,_image:n,resolution:r}=this,{padding:i}=t,{baseTexture:s}=e;e.trim.width=e._frame.width=n.width/r,e.trim.height=e._frame.height=n.height/r,e.trim.x=-i,e.trim.y=-i,e.orig.width=e._frame.width-i*2,e.orig.height=e._frame.height-i*2,this._onTextureUpdate(),s.setRealSize(n.width,n.height,r),this.dirty=!1}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),super._render(t)}_renderCanvas(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(t)}getLocalBounds(t){return this.updateText(!0),super.getLocalBounds(t)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(t){var n,r,i,s,o;typeof t=="boolean"&&(t={children:t}),t=Object.assign({},Ju.defaultDestroyOptions,t),super.destroy(t);const e=null;this.ownsStyle&&((n=this._style)==null||n.cleanFonts()),this._style=e,(r=this._svgRoot)==null||r.remove(),this._svgRoot=e,(i=this._domElement)==null||i.remove(),this._domElement=e,(s=this._foreignObject)==null||s.remove(),this._foreignObject=e,(o=this._styleElement)==null||o.remove(),this._styleElement=e,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=e,this._image.src="",this._image=e}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(t){this.updateText(!0);const e=ja(this.scale.x)||1;this.scale.x=e*t/this._image.width/this.resolution,this._width=t}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(t){this.updateText(!0);const e=ja(this.scale.y)||1;this.scale.y=e*t/this._image.height/this.resolution,this._height=t}get style(){return this._style}set style(t){this._style!==t&&(t=t||{},t instanceof Sd?(this.ownsStyle=!1,this._style=t):t instanceof Ns?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=Sd.from(t)):(this.ownsStyle=!0,this._style=new Sd(t)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(t){t=String(t===""||t===null||t===void 0?" ":t),t=this.sanitiseText(t),this._text!==t&&(this._text=t,this.dirty=!0)}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}sanitiseText(t){return t.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};let dy=Ju;dy.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0};dy.defaultMaxWidth=2024;dy.defaultMaxHeight=2024;dy.defaultAutoResolution=!0;var fy={exports:{}},r3={exports:{}},YU="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",QU=YU,KU=QU;function i3(){}function s3(){}s3.resetWarningCache=i3;var ZU=function(){function t(r,i,s,o,a,c){if(c!==KU){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:s3,resetWarningCache:i3};return n.PropTypes=n,n};r3.exports=ZU();var JU=r3.exports;const jt=uf(JU);function Ai(t){return Ai=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ai(t)}function o3(t){var e=function(n,r){if(Ai(n)!=="object"||n===null)return n;var i=n[Symbol.toPrimitive];if(i!==void 0){var s=i.call(n,r||"default");if(Ai(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(n)}(t,"string");return Ai(e)==="symbol"?e:String(e)}function xn(t,e,n){return(e=o3(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Iv(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function aa(t){return function(e){if(Array.isArray(e))return Iv(e)}(t)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(t)||function(e,n){if(e){if(typeof e=="string")return Iv(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Iv(e,n):void 0}}(t)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function gn(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i]}var ez=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function tz(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var nz=function(t){return t==null};function id(t){var e=[];if(t===void 0)return e;if(typeof t=="string")e=t.split(",");else if(typeof t=="number")e=[t];else if(Array.isArray(t))e=aa(t);else{if(t===null||Ai(t)!=="object")return e;e=[t&&(t==null?void 0:t.x)||0,t&&(t==null?void 0:t.y)||0]}return e.filter(function(n){return!nz(n)&&!isNaN(n)}).map(Number)}function OT(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Av(t){return t instanceof Oe||t instanceof Ko}var vg=["click","mousedown","mousemove","mouseout","mouseover","mouseup","mouseupoutside","tap","touchstart","touchmove","touchend","touchendoutside","pointercancel","pointerout","pointerover","pointertap","pointerdown","pointerup","pointerupoutside","pointermove","rightclick","rightdown","rightup","rightupoutside","touchcancel","touchendoutside","touchmove","touchstart"];function Pv(t,e,n){if(Av(t[e])&&Av(n))t[e].copyFrom(n);else if(Av(t[e])){var r=id(n);gn(r!==void 0&&r.length>0&&r.length<3,"The property `%s` is a `PIXI.Point` or `PIXI.ObservablePoint` and must be set to a comma-separated string of either 1 or 2 coordinates, a 1 or 2 element array containing coordinates, or a PIXI Point/ObservablePoint. If only one coordinate is given then X and Y will be set to the provided value. Received: `%s` of type `%s`.",e,JSON.stringify(n),Ai(n)),t[e].set(r.shift(),r.shift())}else t[e]=n}var Gu,a3=function(t){var e,n=t;if(!Array.isArray(n)){if(e=t,Object.prototype.toString.call(e)!=="[object Object]")throw new Error("collection needs to be an Array or Object");n=Object.keys(t)}var r={};return n.forEach(function(i){r[i]=!0}),function(i){return r[i]!==void 0}},l3=function(t){return function(){return!t.apply(void 0,arguments)}},bx="children",rz=(xn(Gu={},bx,!0),xn(Gu,"parent",!0),xn(Gu,"worldAlpha",!0),xn(Gu,"worldTransform",!0),xn(Gu,"worldVisible",!0),Gu),Ex={alpha:1,buttonMode:!1,cacheAsBitmap:!1,cursor:null,filterArea:null,filters:null,hitArea:null,interactive:!1,mask:null,pivot:0,position:0,renderable:!0,rotation:0,scale:1,skew:0,transform:null,visible:!0,x:0,y:0},Ao=function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=function(a){return requestAnimationFrame(function(){var c,h;a==null||(c=a.__reactpixi)===null||c===void 0||(h=c.root)===null||h===void 0||h.emit("__REACT_PIXI_REQUEST_RENDER__")})},i=function(a,c){if(n.hasOwnProperty(a))return gn(c.typeofs.some(function(h){return Ai(n[a])===h})||c.instanceofs.some(function(h){return n[a]instanceof h}),"".concat(t," ").concat(a," prop is invalid")),n[a]};if(n.texture)return gn(n.texture instanceof xe,"".concat(t," texture needs to be typeof `Texture`")),n.texture;var s=i("image",{typeofs:["string"],instanceofs:[HTMLImageElement]})||i("video",{typeofs:["string"],instanceofs:[HTMLVideoElement]})||i("source",{typeofs:["string","number"],instanceofs:[HTMLImageElement,HTMLVideoElement,HTMLCanvasElement,xe]});gn(!!s,"".concat(t," could not get texture from props"));var o=xe.from(s);return o.__reactpixi={root:e},o.once("update",r),o.once("loaded",r),o.valid&&r(o),o},iz=l3(a3([].concat(aa(Object.keys(rz)),aa(vg))));function Po(t,e,n){var r=!1;if(gn(tn.prototype.isPrototypeOf(t),"instance needs to be typeof `DisplayObject`, got `%s`",Ai(t)),!n.ignoreEvents)for(var i=typeof t.removeListener=="function",s=typeof t.on=="function",o=0;o<vg.length;o++){var a=vg[o];e[a]!==n[a]&&(r=!0,typeof e[a]=="function"&&i&&t.removeListener(a,e[a]),typeof n[a]=="function"&&s&&t.on(a,n[a]))}var c=Object.keys(n||{});if(n.overwriteProps){for(var h=0;h<c.length;h++){var d=c[h];e[d]!==n[d]&&(r=!0,Pv(t,d,n[d]))}return r}for(var m=c.filter(iz),f=0;f<m.length;f++){var y=m[f],v=n[y];n[y]!==e[y]&&(r=!0),v!==void 0?Pv(t,y,v):y in Ex?(console.warn("setting default value: ".concat(y,", from: ").concat(t[y]," to: ").concat(v," for"),t),r=!0,Pv(t,y,Ex[y])):console.warn("ignoring prop: ".concat(y,", from ").concat(t[y]," to ").concat(v," for"),t)}return r}var sz=function(t,e){var n=e.text,r=e.style;return new n3(n,r)},oz=function(){return new nr};function ml(t,e){if(t==null)return{};var n,r,i=function(o,a){if(o==null)return{};var c,h,d={},m=Object.keys(o);for(h=0;h<m.length;h++)c=m[h],a.indexOf(c)>=0||(d[c]=o[c]);return d}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var az=["draw","geometry"],lz=function(t,e){var n=e.geometry;gn(!n||n instanceof nu,"Graphics geometry needs to be a `PIXI.Graphics`");var r=n?new nu(n.geometry):new nu;return r.applyProps=function(i,s,o){var a=o.draw;o.geometry;var c=Po(i,s,ml(o,az));return s.draw!==a&&typeof a=="function"&&(c=!0,a.call(r,r)),c},r},uz=["image","texture"],cz=function(t,e){var n=e.leftWidth,r=n===void 0?10:n,i=e.topHeight,s=i===void 0?10:i,o=e.rightWidth,a=o===void 0?10:o,c=e.bottomHeight,h=c===void 0?10:c,d=Ao("NineSlicePlane",t,e),m=new gU(d,r,s,a,h);return m.applyProps=function(f,y,v){var S=v.image,C=v.texture,_=Po(f,y,ml(v,uz));return(S||C)&&(C!==y.texture&&(_=!0),f.texture=Ao("NineSlicePlane",t,v)),_},m};function DT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Zp(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DT(Object(n),!0).forEach(function(r){xn(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var hz=function(t,e){var n=e.maxSize,r=n===void 0?1500:n,i=e.batchSize,s=i===void 0?16384:i,o=e.autoResize,a=o!==void 0&&o,c=Zp(Zp({},{vertices:!1,scale:!0,position:!0,rotation:!0,uvs:!0,tint:!0}),e.properties||{}),h=Zp(Zp({},{children:!1,texture:!1,baseTexture:!1}),e.destroyOptions||{}),d=new xU(r,c,s,a);return d.willUnmount=function(m,f,y){m.destroy(h)},d},dz=["image","texture"],fz=function(t,e){var n=new Us(Ao("Sprite",t,e));return n.applyProps=function(r,i,s){var o=s.image,a=s.texture,c=Po(r,i,ml(s,dz));return(a&&i.texture!==s.texture||o&&i.image!==s.image)&&(i.texture!==s.texture&&(c=!0),r.texture=Ao("Sprite",t,s)),c},n},pz=["textures","isPlaying","initialFrame"],mz=function(t,e){var n=e.textures,r=e.images,i=e.isPlaying,s=i===void 0||i,o=e.initialFrame,a=function(h){return h.map(function(d){return gn(d instanceof xe||(d==null?void 0:d.texture),"AnimationSprite texture needs to be an array of `PIXI.Texture` or `{ texture: PIXI.Texture, time:\n                number }`"),d})},c=r?Xc.fromImages(r):new Xc(a(n));return c[s?"gotoAndPlay":"gotoAndStop"](o||0),c.applyProps=function(h,d,m){var f=m.textures,y=m.isPlaying,v=m.initialFrame,S=Po(h,d,ml(m,pz));if(f&&d.textures!==f&&(h.textures=a(f),S=!0),y!==d.isPlaying||v!==d.initialFrame){var C=typeof v=="number"?v:c.currentFrame||0;c[y?"gotoAndPlay":"gotoAndStop"](C),S=!0}return S},c},gz=function(t,e){var n=e.text,r=n===void 0?"":n,i=e.style,s=i===void 0?{}:i,o=e.isSprite,a=new hy(r,s);return o?(a.updateText(),new Us(a.texture)):a},yz=["tileScale","tilePosition","image","texture"],vz=function(t,e){var n=e.width,r=n===void 0?100:n,i=e.height,s=i===void 0?100:i,o=Ao("TilingSprite",t,e),a=new o_(o,r,s);return a.applyProps=function(c,h,d){var m=d.tileScale,f=d.tilePosition,y=d.image,v=d.texture,S=Po(c,h,ml(d,yz));if(f){var C,_=id(f);(C=c.tilePosition).set.apply(C,aa(_)),S=!OT(id(h.tilePosition),_)||S}if(m){var b,w=id(m);(b=c.tileScale).set.apply(b,aa(w)),S=!OT(id(h.tileScale),w)||S}return(y||v)&&(v!==h.texture&&(S=!0),c.texture=Ao("Sprite",t,d)),S},a},xz=["image","texture"],wz=function(t,e){var n=Ao("Mesh",t,e),r=e.vertices,i=e.uvs,s=e.indices,o=e.drawMode,a=o===void 0?Cs.TRIANGLES:o,c=new yU(n,r,i,s,a);return c.applyProps=function(h,d,m){var f=m.image,y=m.texture,v=Po(h,d,ml(m,xz));return(f||y)&&(y!==d.texture&&(v=!0),h.texture=Ao("Mesh",t,m)),v},c},_z=["image","texture"],Sz=function(t,e){var n=Ao("SimpleRope",t,e),r=e.points,i=new vU(n,r);return i.applyProps=function(s,o,a){var c=a.image,h=a.texture,d=ml(a,_z);gn(Array.isArray(a.points),"SimpleRope points needs to be %s","Array<PIXI.Point>");var m=Po(s,o,d);return(c||h)&&(h!==o.texture&&(m=!0),s.texture=Ao("SimpleRope",t,a)),m},i},bz=Object.freeze({__proto__:null,BitmapText:sz,Container:oz,Graphics:lz,NineSlicePlane:cz,ParticleContainer:hz,Sprite:fz,Text:gz,TilingSprite:vz,SimpleMesh:wz,SimpleRope:Sz,AnimatedSprite:mz});function NT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function LT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NT(Object(n),!0).forEach(function(r){xn(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var ui={BitmapText:"BitmapText",Container:"Container",Graphics:"Graphics",NineSlicePlane:"NineSlicePlane",ParticleContainer:"ParticleContainer",Sprite:"Sprite",AnimatedSprite:"AnimatedSprite",Text:"Text",TilingSprite:"TilingSprite",SimpleMesh:"SimpleMesh",SimpleRope:"SimpleRope"},Ez=Object.keys(ui).reduce(function(t,e){return LT(LT({},t),{},xn({},e,bz[e]))},{}),u3={};function Tz(t,e){return gn(!!t,"Expect type to be defined, got `%s`",t),gn(!ui[t],"Component `%s` could not be created, already exists in default components.",t),u3[t]=e,t}var FT,BT,UT,zT,Tx={},Cx={},Cz={get exports(){return Cx},set exports(t){Cx=t}},$T={};function Iz(){return BT||(BT=1,Cz.exports=(FT||(FT=1,function(t){function e($,Q){var L=$.length;$.push(Q);e:for(;0<L;){var te=L-1>>>1,Z=$[te];if(!(0<i(Z,Q)))break e;$[te]=Q,$[L]=Z,L=te}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var Q=$[0],L=$.pop();if(L!==Q){$[0]=L;e:for(var te=0,Z=$.length,Ie=Z>>>1;te<Ie;){var ge=2*(te+1)-1,je=$[ge],Ve=ge+1,Be=$[Ve];if(0>i(je,L))Ve<Z&&0>i(Be,je)?($[te]=Be,$[Ve]=L,te=Ve):($[te]=je,$[ge]=L,te=ge);else{if(!(Ve<Z&&0>i(Be,L)))break e;$[te]=Be,$[Ve]=L,te=Ve}}}return Q}function i($,Q){var L=$.sortIndex-Q.sortIndex;return L!==0?L:$.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],h=[],d=1,m=null,f=3,y=!1,v=!1,S=!1,C=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;function w($){for(var Q=n(h);Q!==null;){if(Q.callback===null)r(h);else{if(!(Q.startTime<=$))break;r(h),Q.sortIndex=Q.expirationTime,e(c,Q)}Q=n(h)}}function I($){if(S=!1,w($),!v)if(n(c)!==null)v=!0,ue(P);else{var Q=n(h);Q!==null&&K(I,Q.startTime-$)}}function P($,Q){v=!1,S&&(S=!1,_(V),V=-1),y=!0;var L=f;try{for(w(Q),m=n(c);m!==null&&(!(m.expirationTime>Q)||$&&!q());){var te=m.callback;if(typeof te=="function"){m.callback=null,f=m.priorityLevel;var Z=te(m.expirationTime<=Q);Q=t.unstable_now(),typeof Z=="function"?m.callback=Z:m===n(c)&&r(c),w(Q)}else r(c);m=n(c)}if(m!==null)var Ie=!0;else{var ge=n(h);ge!==null&&K(I,ge.startTime-Q),Ie=!1}return Ie}finally{m=null,f=L,y=!1}}typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var N,O=!1,D=null,V=-1,G=5,F=-1;function q(){return!(t.unstable_now()-F<G)}function W(){if(D!==null){var $=t.unstable_now();F=$;var Q=!0;try{Q=D(!0,$)}finally{Q?N():(O=!1,D=null)}}else O=!1}if(typeof b=="function")N=function(){b(W)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,se=H.port2;H.port1.onmessage=W,N=function(){se.postMessage(null)}}else N=function(){C(W,0)};function ue($){D=$,O||(O=!0,N())}function K($,Q){V=C(function(){$(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){v||y||(v=!0,ue(P))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function($){switch(f){case 1:case 2:case 3:var Q=3;break;default:Q=f}var L=f;f=Q;try{return $()}finally{f=L}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,Q){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var L=f;f=$;try{return Q()}finally{f=L}},t.unstable_scheduleCallback=function($,Q,L){var te=t.unstable_now();switch(L=typeof L=="object"&&L!==null&&typeof(L=L.delay)=="number"&&0<L?te+L:te,$){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return $={id:d++,callback:Q,priorityLevel:$,startTime:L,expirationTime:Z=L+Z,sortIndex:-1},L>te?($.sortIndex=L,e(h,$),n(c)===null&&$===n(h)&&(S?(_(V),V=-1):S=!0,K(I,L-te))):($.sortIndex=Z,e(c,$),v||y||(v=!0,ue(P))),$},t.unstable_shouldYield=q,t.unstable_wrapCallback=function($){var Q=f;return function(){var L=f;f=Q;try{return $.apply(this,arguments)}finally{f=L}}}}($T)),$T)),Cx}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function Az(){return zT||(zT=1,UT=function(t){var e={},n=rt,r=Iz(),i=Object.assign;function s(l){for(var u="https://reactjs.org/docs/error-decoder.html?invariant="+l,p=1;p<arguments.length;p++)u+="&args[]="+encodeURIComponent(arguments[p]);return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,a=Symbol.for("react.element"),c=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),m=Symbol.for("react.profiler"),f=Symbol.for("react.provider"),y=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),C=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),w=Symbol.for("react.offscreen"),I=Symbol.iterator;function P(l){return l===null||typeof l!="object"?null:typeof(l=I&&l[I]||l["@@iterator"])=="function"?l:null}function N(l){if(l==null)return null;if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case h:return"Fragment";case c:return"Portal";case m:return"Profiler";case d:return"StrictMode";case S:return"Suspense";case C:return"SuspenseList"}if(typeof l=="object")switch(l.$$typeof){case y:return(l.displayName||"Context")+".Consumer";case f:return(l._context.displayName||"Context")+".Provider";case v:var u=l.render;return(l=l.displayName)||(l=(l=u.displayName||u.name||"")!==""?"ForwardRef("+l+")":"ForwardRef"),l;case _:return(u=l.displayName||null)!==null?u:N(l.type)||"Memo";case b:u=l._payload,l=l._init;try{return N(l(u))}catch{}}return null}function O(l){var u=l.type;switch(l.tag){case 24:return"Cache";case 9:return(u.displayName||"Context")+".Consumer";case 10:return(u._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return l=(l=u.render).displayName||l.name||"",u.displayName||(l!==""?"ForwardRef("+l+")":"ForwardRef");case 7:return"Fragment";case 5:return u;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return N(u);case 8:return u===d?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u}return null}function D(l){var u=l,p=l;if(l.alternate)for(;u.return;)u=u.return;else{l=u;do 4098&(u=l).flags&&(p=u.return),l=u.return;while(l)}return u.tag===3?p:null}function V(l){if(D(l)!==l)throw Error(s(188))}function G(l){var u=l.alternate;if(!u){if((u=D(l))===null)throw Error(s(188));return u!==l?null:l}for(var p=l,g=u;;){var x=p.return;if(x===null)break;var T=x.alternate;if(T===null){if((g=x.return)!==null){p=g;continue}break}if(x.child===T.child){for(T=x.child;T;){if(T===p)return V(x),l;if(T===g)return V(x),u;T=T.sibling}throw Error(s(188))}if(p.return!==g.return)p=x,g=T;else{for(var k=!1,U=x.child;U;){if(U===p){k=!0,p=x,g=T;break}if(U===g){k=!0,g=x,p=T;break}U=U.sibling}if(!k){for(U=T.child;U;){if(U===p){k=!0,p=T,g=x;break}if(U===g){k=!0,g=T,p=x;break}U=U.sibling}if(!k)throw Error(s(189))}}if(p.alternate!==g)throw Error(s(190))}if(p.tag!==3)throw Error(s(188));return p.stateNode.current===p?l:u}function F(l){return(l=G(l))!==null?q(l):null}function q(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){var u=q(l);if(u!==null)return u;l=l.sibling}return null}function W(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){if(l.tag!==4){var u=W(l);if(u!==null)return u}l=l.sibling}return null}var H,se=Array.isArray,ue=t.getPublicInstance,K=t.getRootHostContext,$=t.getChildHostContext,Q=t.prepareForCommit,L=t.resetAfterCommit,te=t.createInstance,Z=t.appendInitialChild,Ie=t.finalizeInitialChildren,ge=t.prepareUpdate,je=t.shouldSetTextContent,Ve=t.createTextInstance,Be=t.scheduleTimeout,pt=t.cancelTimeout,St=t.noTimeout,Qe=t.isPrimaryRenderer,Ne=t.supportsMutation,ct=t.supportsPersistence,tt=t.supportsHydration,Sn=t.getInstanceFromNode,kn=t.preparePortalMount,ci=t.getCurrentEventPriority,hi=t.detachDeletedInstance,Rn=t.supportsMicrotasks,wu=t.scheduleMicrotask,yr=t.supportsTestSelectors,zs=t.findFiberRoot,Xe=t.getBoundingRect,Ke=t.getTextContent,dn=t.isHiddenSubtree,qe=t.matchAccessibilityRole,rr=t.setFocusIfFocusable,$s=t.setupIntersectionObserver,Ro=t.appendChild,Hs=t.appendChildToContainer,vr=t.commitTextUpdate,di=t.commitMount,Lr=t.commitUpdate,Vr=t.insertBefore,Ni=t.insertInContainerBefore,Gs=t.removeChild,ca=t.removeChildFromContainer,Ws=t.resetTextContent,_u=t.hideInstance,Xr=t.hideTextInstance,lh=t.unhideInstance,_f=t.unhideTextInstance,Ay=t.clearContainer,Py=t.cloneInstance,Sf=t.createContainerChildSet,bf=t.appendChildToContainerChildSet,ky=t.finalizeContainerChildren,Le=t.replaceContainerChildren,js=t.cloneHiddenInstance,Mn=t.cloneHiddenTextInstance,Vs=t.canHydrateInstance,ha=t.canHydrateTextInstance,da=t.canHydrateSuspenseInstance,Fr=t.isSuspenseInstancePending,Xs=t.isSuspenseInstanceFallback,fa=t.getSuspenseInstanceFallbackErrorDetails,Ef=t.registerSuspenseInstanceRetry,gl=t.getNextHydratableSibling,Ry=t.getFirstHydratableChild,My=t.getFirstHydratableChildWithinContainer,Mo=t.getFirstHydratableChildWithinSuspenseInstance,Oy=t.hydrateInstance,yl=t.hydrateTextInstance,Tf=t.hydrateSuspenseInstance,qs=t.getNextHydratableInstanceAfterSuspenseInstance,On=t.commitHydratedContainer,bn=t.commitHydratedSuspenseInstance,En=t.clearSuspenseBoundary,Su=t.clearSuspenseBoundaryFromContainer,fi=t.shouldDeleteUnhydratedTailInstances,vl=t.didNotMatchHydratedContainerTextInstance,Cf=t.didNotMatchHydratedTextInstance;function Oo(l){if(H===void 0)try{throw Error()}catch(p){var u=p.stack.trim().match(/\n( *(at )?)/);H=u&&u[1]||""}return`
`+H+l}var pa=!1;function Ys(l,u){if(!l||pa)return"";pa=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(u)if(u=function(){throw Error()},Object.defineProperty(u.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(u,[])}catch(ee){var g=ee}Reflect.construct(l,[],u)}else{try{u.call()}catch(ee){g=ee}l.call(u.prototype)}else{try{throw Error()}catch(ee){g=ee}l()}}catch(ee){if(ee&&g&&typeof ee.stack=="string"){for(var x=ee.stack.split(`
`),T=g.stack.split(`
`),k=x.length-1,U=T.length-1;1<=k&&0<=U&&x[k]!==T[U];)U--;for(;1<=k&&0<=U;k--,U--)if(x[k]!==T[U]){if(k!==1||U!==1)do if(k--,0>--U||x[k]!==T[U]){var Y=`
`+x[k].replace(" at new "," at ");return l.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",l.displayName)),Y}while(1<=k&&0<=U);break}}}finally{pa=!1,Error.prepareStackTrace=p}return(l=l?l.displayName||l.name:"")?Oo(l):""}var uh=Object.prototype.hasOwnProperty,xl=[],Qs=-1;function Li(l){return{current:l}}function Mt(l){0>Qs||(l.current=xl[Qs],xl[Qs]=null,Qs--)}function bt(l,u){Qs++,xl[Qs]=l.current,l.current=u}var Fi={},Bt=Li(Fi),ir=Li(!1),Ks=Fi;function Zs(l,u){var p=l.type.contextTypes;if(!p)return Fi;var g=l.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===u)return g.__reactInternalMemoizedMaskedChildContext;var x,T={};for(x in p)T[x]=u[x];return g&&((l=l.stateNode).__reactInternalMemoizedUnmaskedChildContext=u,l.__reactInternalMemoizedMaskedChildContext=T),T}function xr(l){return(l=l.childContextTypes)!=null}function ch(){Mt(ir),Mt(Bt)}function If(l,u,p){if(Bt.current!==Fi)throw Error(s(168));bt(Bt,u),bt(ir,p)}function Af(l,u,p){var g=l.stateNode;if(u=u.childContextTypes,typeof g.getChildContext!="function")return p;for(var x in g=g.getChildContext())if(!(x in u))throw Error(s(108,O(l)||"Unknown",x));return i({},p,g)}function wl(l){return l=(l=l.stateNode)&&l.__reactInternalMemoizedMergedChildContext||Fi,Ks=Bt.current,bt(Bt,l),bt(ir,ir.current),!0}function hh(l,u,p){var g=l.stateNode;if(!g)throw Error(s(169));p?(l=Af(l,u,Ks),g.__reactInternalMemoizedMergedChildContext=l,Mt(ir),Mt(Bt),bt(Bt,l)):Mt(ir),bt(ir,p)}var pi=Math.clz32?Math.clz32:function(l){return(l>>>=0)===0?32:31-(Pf(l)/dh|0)|0},Pf=Math.log,dh=Math.LN2,ma=64,ga=4194304;function _l(l){switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&l;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&l;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return l}}function ya(l,u){var p=l.pendingLanes;if(p===0)return 0;var g=0,x=l.suspendedLanes,T=l.pingedLanes,k=268435455&p;if(k!==0){var U=k&~x;U!==0?g=_l(U):(T&=k)!==0&&(g=_l(T))}else(k=p&~x)!==0?g=_l(k):T!==0&&(g=_l(T));if(g===0)return 0;if(u!==0&&u!==g&&!(u&x)&&((x=g&-g)>=(T=u&-u)||x===16&&4194240&T))return u;if(4&g&&(g|=16&p),(u=l.entangledLanes)!==0)for(l=l.entanglements,u&=g;0<u;)x=1<<(p=31-pi(u)),g|=l[p],u&=~x;return g}function Dy(l,u){switch(l){case 1:case 2:case 4:return u+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;default:return-1}}function fh(l){return(l=-1073741825&l.pendingLanes)!==0?l:1073741824&l?1073741824:0}function kf(){var l=ma;return!(4194240&(ma<<=1))&&(ma=64),l}function Js(l){for(var u=[],p=0;31>p;p++)u.push(l);return u}function eo(l,u,p){l.pendingLanes|=u,u!==536870912&&(l.suspendedLanes=0,l.pingedLanes=0),(l=l.eventTimes)[u=31-pi(u)]=p}function Sl(l,u){var p=l.entangledLanes|=u;for(l=l.entanglements;p;){var g=31-pi(p),x=1<<g;x&u|l[g]&u&&(l[g]|=u),p&=~x}}var nt=0;function Rf(l){return 1<(l&=-l)?4<l?268435455&l?16:536870912:4:1}var to=r.unstable_scheduleCallback,Mf=r.unstable_cancelCallback,Of=r.unstable_shouldYield,ph=r.unstable_requestPaint,fn=r.unstable_now,bl=r.unstable_ImmediatePriority,va=r.unstable_UserBlockingPriority,Do=r.unstable_NormalPriority,Df=r.unstable_IdlePriority,El=null,sr=null,jn=typeof Object.is=="function"?Object.is:function(l,u){return l===u&&(l!==0||1/l==1/u)||l!=l&&u!=u},Bi=null,Tl=!1,At=!1;function Dt(l){Bi===null?Bi=[l]:Bi.push(l)}function Dn(){if(!At&&Bi!==null){At=!0;var l=0,u=nt;try{var p=Bi;for(nt=1;l<p.length;l++){var g=p[l];do g=g(!0);while(g!==null)}Bi=null,Tl=!1}catch(x){throw Bi!==null&&(Bi=Bi.slice(l+1)),to(bl,Dn),x}finally{nt=u,At=!1}}return null}var Yt=[],Ht=0,nn=null,Et=0,Nn=[],or=0,No=null,Ln=1,Tn="";function Lo(l,u){Yt[Ht++]=Et,Yt[Ht++]=nn,nn=l,Et=u}function Nf(l,u,p){Nn[or++]=Ln,Nn[or++]=Tn,Nn[or++]=No,No=l;var g=Ln;l=Tn;var x=32-pi(g)-1;g&=~(1<<x),p+=1;var T=32-pi(u)+x;if(30<T){var k=x-x%5;T=(g&(1<<k)-1).toString(32),g>>=k,x-=k,Ln=1<<32-pi(u)+x|p<<x|g,Tn=T+l}else Ln=1<<T|p<<x|g,Tn=l}function mh(l){l.return!==null&&(Lo(l,1),Nf(l,1,0))}function gh(l){for(;l===nn;)nn=Yt[--Ht],Yt[Ht]=null,Et=Yt[--Ht],Yt[Ht]=null;for(;l===No;)No=Nn[--or],Nn[or]=null,Tn=Nn[--or],Nn[or]=null,Ln=Nn[--or],Nn[or]=null}var rn=null,yn=null,yt=!1,Ui=!1,mi=null;function gi(l,u){var p=ji(5,null,null,0);p.elementType="DELETED",p.stateNode=u,p.return=l,(u=l.deletions)===null?(l.deletions=[p],l.flags|=16):u.push(p)}function Lf(l,u){switch(l.tag){case 5:return(u=Vs(u,l.type,l.pendingProps))!==null&&(l.stateNode=u,rn=l,yn=Ry(u),!0);case 6:return(u=ha(u,l.pendingProps))!==null&&(l.stateNode=u,rn=l,yn=null,!0);case 13:if((u=da(u))!==null){var p=No!==null?{id:Ln,overflow:Tn}:null;return l.memoizedState={dehydrated:u,treeContext:p,retryLane:1073741824},(p=ji(18,null,null,0)).stateNode=u,p.return=l,l.child=p,rn=l,yn=null,!0}return!1;default:return!1}}function bu(l){return(1&l.mode)!=0&&(128&l.flags)==0}function Eu(l){if(yt){var u=yn;if(u){var p=u;if(!Lf(l,u)){if(bu(l))throw Error(s(418));u=gl(p);var g=rn;u&&Lf(l,u)?gi(g,p):(l.flags=-4097&l.flags|2,yt=!1,rn=l)}}else{if(bu(l))throw Error(s(418));l.flags=-4097&l.flags|2,yt=!1,rn=l}}}function xa(l){for(l=l.return;l!==null&&l.tag!==5&&l.tag!==3&&l.tag!==13;)l=l.return;rn=l}function no(l){if(!tt||l!==rn)return!1;if(!yt)return xa(l),yt=!0,!1;if(l.tag!==3&&(l.tag!==5||fi(l.type)&&!je(l.type,l.memoizedProps))){var u=yn;if(u){if(bu(l))throw Ff(),Error(s(418));for(;u;)gi(l,u),u=gl(u)}}if(xa(l),l.tag===13){if(!tt)throw Error(s(316));if(!(l=(l=l.memoizedState)!==null?l.dehydrated:null))throw Error(s(317));yn=qs(l)}else yn=rn?gl(l.stateNode):null;return!0}function Ff(){for(var l=yn;l;)l=gl(l)}function ro(){tt&&(yn=rn=null,Ui=yt=!1)}function yh(l){mi===null?mi=[l]:mi.push(l)}var Fo=o.ReactCurrentBatchConfig;function yi(l,u){if(jn(l,u))return!0;if(typeof l!="object"||l===null||typeof u!="object"||u===null)return!1;var p=Object.keys(l),g=Object.keys(u);if(p.length!==g.length)return!1;for(g=0;g<p.length;g++){var x=p[g];if(!uh.call(u,x)||!jn(l[x],u[x]))return!1}return!0}function Cl(l){switch(l.tag){case 5:return Oo(l.type);case 16:return Oo("Lazy");case 13:return Oo("Suspense");case 19:return Oo("SuspenseList");case 0:case 2:case 15:return l=Ys(l.type,!1);case 11:return l=Ys(l.type.render,!1);case 1:return l=Ys(l.type,!0);default:return""}}function qr(l,u){if(l&&l.defaultProps){for(var p in u=i({},u),l=l.defaultProps)u[p]===void 0&&(u[p]=l[p]);return u}return u}var wa=Li(null),_a=null,us=null,Tu=null;function Cu(){Tu=us=_a=null}function vh(l,u,p){Qe?(bt(wa,u._currentValue),u._currentValue=p):(bt(wa,u._currentValue2),u._currentValue2=p)}function Iu(l){var u=wa.current;Mt(wa),Qe?l._currentValue=u:l._currentValue2=u}function Au(l,u,p){for(;l!==null;){var g=l.alternate;if((l.childLanes&u)!==u?(l.childLanes|=u,g!==null&&(g.childLanes|=u)):g!==null&&(g.childLanes&u)!==u&&(g.childLanes|=u),l===p)break;l=l.return}}function Bo(l,u){_a=l,Tu=us=null,(l=l.dependencies)!==null&&l.firstContext!==null&&(l.lanes&u&&(Zr=!0),l.firstContext=null)}function Yr(l){var u=Qe?l._currentValue:l._currentValue2;if(Tu!==l)if(l={context:l,memoizedValue:u,next:null},us===null){if(_a===null)throw Error(s(308));us=l,_a.dependencies={lanes:0,firstContext:l}}else us=us.next=l;return u}var io=null;function Pu(l){io===null?io=[l]:io.push(l)}function Uo(l,u,p,g){var x=u.interleaved;return x===null?(p.next=p,Pu(u)):(p.next=x.next,x.next=p),u.interleaved=p,Br(l,g)}function Br(l,u){l.lanes|=u;var p=l.alternate;for(p!==null&&(p.lanes|=u),p=l,l=l.return;l!==null;)l.childLanes|=u,(p=l.alternate)!==null&&(p.childLanes|=u),p=l,l=l.return;return p.tag===3?p.stateNode:null}var Nt=!1;function ku(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function sn(l,u){l=l.updateQueue,u.updateQueue===l&&(u.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,effects:l.effects})}function zi(l,u){return{eventTime:l,lane:u,tag:0,payload:null,callback:null,next:null}}function $i(l,u,p){var g=l.updateQueue;if(g===null)return null;if(g=g.shared,(2&ut)!=0){var x=g.pending;return x===null?u.next=u:(u.next=x.next,x.next=u),g.pending=u,Br(l,p)}return(x=g.interleaved)===null?(u.next=u,Pu(g)):(u.next=x.next,x.next=u),g.interleaved=u,Br(l,p)}function so(l,u,p){if((u=u.updateQueue)!==null&&(u=u.shared,(4194240&p)!=0)){var g=u.lanes;p|=g&=l.pendingLanes,u.lanes=p,Sl(l,p)}}function Bf(l,u){var p=l.updateQueue,g=l.alternate;if(g!==null&&p===(g=g.updateQueue)){var x=null,T=null;if((p=p.firstBaseUpdate)!==null){do{var k={eventTime:p.eventTime,lane:p.lane,tag:p.tag,payload:p.payload,callback:p.callback,next:null};T===null?x=T=k:T=T.next=k,p=p.next}while(p!==null);T===null?x=T=u:T=T.next=u}else x=T=u;return p={baseState:g.baseState,firstBaseUpdate:x,lastBaseUpdate:T,shared:g.shared,effects:g.effects},void(l.updateQueue=p)}(l=p.lastBaseUpdate)===null?p.firstBaseUpdate=u:l.next=u,p.lastBaseUpdate=u}function Ru(l,u,p,g){var x=l.updateQueue;Nt=!1;var T=x.firstBaseUpdate,k=x.lastBaseUpdate,U=x.shared.pending;if(U!==null){x.shared.pending=null;var Y=U,ee=Y.next;Y.next=null,k===null?T=ee:k.next=ee,k=Y;var oe=l.alternate;oe!==null&&(U=(oe=oe.updateQueue).lastBaseUpdate)!==k&&(U===null?oe.firstBaseUpdate=ee:U.next=ee,oe.lastBaseUpdate=Y)}if(T!==null){var ye=x.baseState;for(k=0,oe=ee=Y=null,U=T;;){var ie=U.lane,fe=U.eventTime;if((g&ie)===ie){oe!==null&&(oe=oe.next={eventTime:fe,lane:0,tag:U.tag,payload:U.payload,callback:U.callback,next:null});e:{var Ae=l,et=U;switch(ie=u,fe=p,et.tag){case 1:if(typeof(Ae=et.payload)=="function"){ye=Ae.call(fe,ye,ie);break e}ye=Ae;break e;case 3:Ae.flags=-65537&Ae.flags|128;case 0:if((ie=typeof(Ae=et.payload)=="function"?Ae.call(fe,ye,ie):Ae)==null)break e;ye=i({},ye,ie);break e;case 2:Nt=!0}}U.callback!==null&&U.lane!==0&&(l.flags|=64,(ie=x.effects)===null?x.effects=[U]:ie.push(U))}else fe={eventTime:fe,lane:ie,tag:U.tag,payload:U.payload,callback:U.callback,next:null},oe===null?(ee=oe=fe,Y=ye):oe=oe.next=fe,k|=ie;if((U=U.next)===null){if((U=x.shared.pending)===null)break;U=(ie=U).next,ie.next=null,x.lastBaseUpdate=ie,x.shared.pending=null}}if(oe===null&&(Y=ye),x.baseState=Y,x.firstBaseUpdate=ee,x.lastBaseUpdate=oe,(u=x.shared.interleaved)!==null){x=u;do k|=x.lane,x=x.next;while(x!==u)}else T===null&&(x.shared.lanes=0);Il|=k,l.lanes=k,l.memoizedState=ye}}function Mu(l,u,p){if(l=u.effects,u.effects=null,l!==null)for(u=0;u<l.length;u++){var g=l[u],x=g.callback;if(x!==null){if(g.callback=null,g=p,typeof x!="function")throw Error(s(191,x));x.call(g)}}}var E=new n.Component().refs;function A(l,u,p,g){p=(p=p(g,u=l.memoizedState))==null?u:i({},u,p),l.memoizedState=p,l.lanes===0&&(l.updateQueue.baseState=p)}var R={isMounted:function(l){return!!(l=l._reactInternals)&&D(l)===l},enqueueSetState:function(l,u,p){l=l._reactInternals;var g=Er(),x=Ta(l),T=zi(g,x);T.payload=u,p!=null&&(T.callback=p),(u=$i(l,T,x))!==null&&(Wi(u,l,x,g),so(u,l,x))},enqueueReplaceState:function(l,u,p){l=l._reactInternals;var g=Er(),x=Ta(l),T=zi(g,x);T.tag=1,T.payload=u,p!=null&&(T.callback=p),(u=$i(l,T,x))!==null&&(Wi(u,l,x,g),so(u,l,x))},enqueueForceUpdate:function(l,u){l=l._reactInternals;var p=Er(),g=Ta(l),x=zi(p,g);x.tag=2,u!=null&&(x.callback=u),(u=$i(l,x,g))!==null&&(Wi(u,l,g,p),so(u,l,g))}};function M(l,u,p,g,x,T,k){return typeof(l=l.stateNode).shouldComponentUpdate=="function"?l.shouldComponentUpdate(g,T,k):!u.prototype||!u.prototype.isPureReactComponent||!yi(p,g)||!yi(x,T)}function B(l,u,p){var g=!1,x=Fi,T=u.contextType;return typeof T=="object"&&T!==null?T=Yr(T):(x=xr(u)?Ks:Bt.current,T=(g=(g=u.contextTypes)!=null)?Zs(l,x):Fi),u=new u(p,T),l.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=R,l.stateNode=u,u._reactInternals=l,g&&((l=l.stateNode).__reactInternalMemoizedUnmaskedChildContext=x,l.__reactInternalMemoizedMaskedChildContext=T),u}function X(l,u,p,g){l=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(p,g),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(p,g),u.state!==l&&R.enqueueReplaceState(u,u.state,null)}function ne(l,u,p,g){var x=l.stateNode;x.props=p,x.state=l.memoizedState,x.refs=E,ku(l);var T=u.contextType;typeof T=="object"&&T!==null?x.context=Yr(T):(T=xr(u)?Ks:Bt.current,x.context=Zs(l,T)),x.state=l.memoizedState,typeof(T=u.getDerivedStateFromProps)=="function"&&(A(l,u,T,p),x.state=l.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(u=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),u!==x.state&&R.enqueueReplaceState(x,x.state,null),Ru(l,p,x,g),x.state=l.memoizedState),typeof x.componentDidMount=="function"&&(l.flags|=4194308)}function le(l,u,p){if((l=p.ref)!==null&&typeof l!="function"&&typeof l!="object"){if(p._owner){if(p=p._owner){if(p.tag!==1)throw Error(s(309));var g=p.stateNode}if(!g)throw Error(s(147,l));var x=g,T=""+l;return u!==null&&u.ref!==null&&typeof u.ref=="function"&&u.ref._stringRef===T?u.ref:(u=function(k){var U=x.refs;U===E&&(U=x.refs={}),k===null?delete U[T]:U[T]=k},u._stringRef=T,u)}if(typeof l!="string")throw Error(s(284));if(!p._owner)throw Error(s(290,l))}return l}function de(l,u){throw l=Object.prototype.toString.call(u),Error(s(31,l==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":l))}function ve(l){return(0,l._init)(l._payload)}function we(l){function u(ae,j){if(l){var J=ae.deletions;J===null?(ae.deletions=[j],ae.flags|=16):J.push(j)}}function p(ae,j){if(!l)return null;for(;j!==null;)u(ae,j),j=j.sibling;return null}function g(ae,j){for(ae=new Map;j!==null;)j.key!==null?ae.set(j.key,j):ae.set(j.index,j),j=j.sibling;return ae}function x(ae,j){return(ae=Ia(ae,j)).index=0,ae.sibling=null,ae}function T(ae,j,J){return ae.index=J,l?(J=ae.alternate)!==null?(J=J.index)<j?(ae.flags|=2,j):J:(ae.flags|=2,j):(ae.flags|=1048576,j)}function k(ae){return l&&ae.alternate===null&&(ae.flags|=2),ae}function U(ae,j,J,ce){return j===null||j.tag!==6?((j=m0(J,ae.mode,ce)).return=ae,j):((j=x(j,J)).return=ae,j)}function Y(ae,j,J,ce){var De=J.type;return De===h?oe(ae,j,J.props.children,ce,J.key):j!==null&&(j.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===b&&ve(De)===j.type)?((ce=x(j,J.props)).ref=le(ae,j,J),ce.return=ae,ce):((ce=ap(J.type,J.key,J.props,null,ae.mode,ce)).ref=le(ae,j,J),ce.return=ae,ce)}function ee(ae,j,J,ce){return j===null||j.tag!==4||j.stateNode.containerInfo!==J.containerInfo||j.stateNode.implementation!==J.implementation?((j=g0(J,ae.mode,ce)).return=ae,j):((j=x(j,J.children||[])).return=ae,j)}function oe(ae,j,J,ce,De){return j===null||j.tag!==7?((j=kl(J,ae.mode,ce,De)).return=ae,j):((j=x(j,J)).return=ae,j)}function ye(ae,j,J){if(typeof j=="string"&&j!==""||typeof j=="number")return(j=m0(""+j,ae.mode,J)).return=ae,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case a:return(J=ap(j.type,j.key,j.props,null,ae.mode,J)).ref=le(ae,null,j),J.return=ae,J;case c:return(j=g0(j,ae.mode,J)).return=ae,j;case b:return ye(ae,(0,j._init)(j._payload),J)}if(se(j)||P(j))return(j=kl(j,ae.mode,J,null)).return=ae,j;de(ae,j)}return null}function ie(ae,j,J,ce){var De=j!==null?j.key:null;if(typeof J=="string"&&J!==""||typeof J=="number")return De!==null?null:U(ae,j,""+J,ce);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case a:return J.key===De?Y(ae,j,J,ce):null;case c:return J.key===De?ee(ae,j,J,ce):null;case b:return ie(ae,j,(De=J._init)(J._payload),ce)}if(se(J)||P(J))return De!==null?null:oe(ae,j,J,ce,null);de(ae,J)}return null}function fe(ae,j,J,ce,De){if(typeof ce=="string"&&ce!==""||typeof ce=="number")return U(j,ae=ae.get(J)||null,""+ce,De);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case a:return Y(j,ae=ae.get(ce.key===null?J:ce.key)||null,ce,De);case c:return ee(j,ae=ae.get(ce.key===null?J:ce.key)||null,ce,De);case b:return fe(ae,j,J,(0,ce._init)(ce._payload),De)}if(se(ce)||P(ce))return oe(j,ae=ae.get(J)||null,ce,De,null);de(j,ce)}return null}function Ae(ae,j,J,ce){for(var De=null,Tt=null,Pe=j,xt=j=0,lr=null;Pe!==null&&xt<J.length;xt++){Pe.index>xt?(lr=Pe,Pe=null):lr=Pe.sibling;var Ct=ie(ae,Pe,J[xt],ce);if(Ct===null){Pe===null&&(Pe=lr);break}l&&Pe&&Ct.alternate===null&&u(ae,Pe),j=T(Ct,j,xt),Tt===null?De=Ct:Tt.sibling=Ct,Tt=Ct,Pe=lr}if(xt===J.length)return p(ae,Pe),yt&&Lo(ae,xt),De;if(Pe===null){for(;xt<J.length;xt++)(Pe=ye(ae,J[xt],ce))!==null&&(j=T(Pe,j,xt),Tt===null?De=Pe:Tt.sibling=Pe,Tt=Pe);return yt&&Lo(ae,xt),De}for(Pe=g(ae,Pe);xt<J.length;xt++)(lr=fe(Pe,ae,xt,J[xt],ce))!==null&&(l&&lr.alternate!==null&&Pe.delete(lr.key===null?xt:lr.key),j=T(lr,j,xt),Tt===null?De=lr:Tt.sibling=lr,Tt=lr);return l&&Pe.forEach(function(Aa){return u(ae,Aa)}),yt&&Lo(ae,xt),De}function et(ae,j,J,ce){var De=P(J);if(typeof De!="function")throw Error(s(150));if((J=De.call(J))==null)throw Error(s(151));for(var Tt=De=null,Pe=j,xt=j=0,lr=null,Ct=J.next();Pe!==null&&!Ct.done;xt++,Ct=J.next()){Pe.index>xt?(lr=Pe,Pe=null):lr=Pe.sibling;var Aa=ie(ae,Pe,Ct.value,ce);if(Aa===null){Pe===null&&(Pe=lr);break}l&&Pe&&Aa.alternate===null&&u(ae,Pe),j=T(Aa,j,xt),Tt===null?De=Aa:Tt.sibling=Aa,Tt=Aa,Pe=lr}if(Ct.done)return p(ae,Pe),yt&&Lo(ae,xt),De;if(Pe===null){for(;!Ct.done;xt++,Ct=J.next())(Ct=ye(ae,Ct.value,ce))!==null&&(j=T(Ct,j,xt),Tt===null?De=Ct:Tt.sibling=Ct,Tt=Ct);return yt&&Lo(ae,xt),De}for(Pe=g(ae,Pe);!Ct.done;xt++,Ct=J.next())(Ct=fe(Pe,ae,xt,Ct.value,ce))!==null&&(l&&Ct.alternate!==null&&Pe.delete(Ct.key===null?xt:Ct.key),j=T(Ct,j,xt),Tt===null?De=Ct:Tt.sibling=Ct,Tt=Ct);return l&&Pe.forEach(function(CR){return u(ae,CR)}),yt&&Lo(ae,xt),De}return function ae(j,J,ce,De){if(typeof ce=="object"&&ce!==null&&ce.type===h&&ce.key===null&&(ce=ce.props.children),typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case a:e:{for(var Tt=ce.key,Pe=J;Pe!==null;){if(Pe.key===Tt){if((Tt=ce.type)===h){if(Pe.tag===7){p(j,Pe.sibling),(J=x(Pe,ce.props.children)).return=j,j=J;break e}}else if(Pe.elementType===Tt||typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===b&&ve(Tt)===Pe.type){p(j,Pe.sibling),(J=x(Pe,ce.props)).ref=le(j,Pe,ce),J.return=j,j=J;break e}p(j,Pe);break}u(j,Pe),Pe=Pe.sibling}ce.type===h?((J=kl(ce.props.children,j.mode,De,ce.key)).return=j,j=J):((De=ap(ce.type,ce.key,ce.props,null,j.mode,De)).ref=le(j,J,ce),De.return=j,j=De)}return k(j);case c:e:{for(Pe=ce.key;J!==null;){if(J.key===Pe){if(J.tag===4&&J.stateNode.containerInfo===ce.containerInfo&&J.stateNode.implementation===ce.implementation){p(j,J.sibling),(J=x(J,ce.children||[])).return=j,j=J;break e}p(j,J);break}u(j,J),J=J.sibling}(J=g0(ce,j.mode,De)).return=j,j=J}return k(j);case b:return ae(j,J,(Pe=ce._init)(ce._payload),De)}if(se(ce))return Ae(j,J,ce,De);if(P(ce))return et(j,J,ce,De);de(j,ce)}return typeof ce=="string"&&ce!==""||typeof ce=="number"?(ce=""+ce,J!==null&&J.tag===6?(p(j,J.sibling),(J=x(J,ce)).return=j,j=J):(p(j,J),(J=m0(ce,j.mode,De)).return=j,j=J),k(j)):p(j,J)}}var _e=we(!0),$e=we(!1),mt={},He=Li(mt),Ze=Li(mt),ze=Li(mt);function be(l){if(l===mt)throw Error(s(174));return l}function vt(l,u){bt(ze,u),bt(Ze,l),bt(He,mt),l=K(u),Mt(He),bt(He,l)}function Ot(){Mt(He),Mt(Ze),Mt(ze)}function Gt(l){var u=be(ze.current),p=be(He.current);p!==(u=$(p,l.type,u))&&(bt(Ze,l),bt(He,u))}function Pt(l){Ze.current===l&&(Mt(He),Mt(Ze))}var Je=Li(0);function Fn(l){for(var u=l;u!==null;){if(u.tag===13){var p=u.memoizedState;if(p!==null&&((p=p.dehydrated)===null||Fr(p)||Xs(p)))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if(128&u.flags)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var Vn=[];function wr(){for(var l=0;l<Vn.length;l++){var u=Vn[l];Qe?u._workInProgressVersionPrimary=null:u._workInProgressVersionSecondary=null}Vn.length=0}var _r=o.ReactCurrentDispatcher,Ur=o.ReactCurrentBatchConfig,on=0,ht=null,dt=null,ft=null,Xn=!1,Hi=!1,Qr=0,Kr=0;function Sr(){throw Error(s(321))}function Ny(l,u){if(u===null)return!1;for(var p=0;p<u.length&&p<l.length;p++)if(!jn(l[p],u[p]))return!1;return!0}function Ly(l,u,p,g,x,T){if(on=T,ht=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,_r.current=l===null||l.memoizedState===null?aR:lR,l=p(g,x),Hi){T=0;do{if(Hi=!1,Qr=0,25<=T)throw Error(s(301));T+=1,ft=dt=null,u.updateQueue=null,_r.current=uR,l=p(g,x)}while(Hi)}if(_r.current=$f,u=dt!==null&&dt.next!==null,on=0,ft=dt=ht=null,Xn=!1,u)throw Error(s(300));return l}function Fy(){var l=Qr!==0;return Qr=0,l}function oo(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ft===null?ht.memoizedState=ft=l:ft=ft.next=l,ft}function Gi(){if(dt===null){var l=ht.alternate;l=l!==null?l.memoizedState:null}else l=dt.next;var u=ft===null?ht.memoizedState:ft.next;if(u!==null)ft=u,dt=l;else{if(l===null)throw Error(s(310));l={memoizedState:(dt=l).memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},ft===null?ht.memoizedState=ft=l:ft=ft.next=l}return ft}function xh(l,u){return typeof u=="function"?u(l):u}function By(l){var u=Gi(),p=u.queue;if(p===null)throw Error(s(311));p.lastRenderedReducer=l;var g=dt,x=g.baseQueue,T=p.pending;if(T!==null){if(x!==null){var k=x.next;x.next=T.next,T.next=k}g.baseQueue=x=T,p.pending=null}if(x!==null){T=x.next,g=g.baseState;var U=k=null,Y=null,ee=T;do{var oe=ee.lane;if((on&oe)===oe)Y!==null&&(Y=Y.next={lane:0,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null}),g=ee.hasEagerState?ee.eagerState:l(g,ee.action);else{var ye={lane:oe,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null};Y===null?(U=Y=ye,k=g):Y=Y.next=ye,ht.lanes|=oe,Il|=oe}ee=ee.next}while(ee!==null&&ee!==T);Y===null?k=g:Y.next=U,jn(g,u.memoizedState)||(Zr=!0),u.memoizedState=g,u.baseState=k,u.baseQueue=Y,p.lastRenderedState=g}if((l=p.interleaved)!==null){x=l;do T=x.lane,ht.lanes|=T,Il|=T,x=x.next;while(x!==l)}else x===null&&(p.lanes=0);return[u.memoizedState,p.dispatch]}function Uy(l){var u=Gi(),p=u.queue;if(p===null)throw Error(s(311));p.lastRenderedReducer=l;var g=p.dispatch,x=p.pending,T=u.memoizedState;if(x!==null){p.pending=null;var k=x=x.next;do T=l(T,k.action),k=k.next;while(k!==x);jn(T,u.memoizedState)||(Zr=!0),u.memoizedState=T,u.baseQueue===null&&(u.baseState=T),p.lastRenderedState=T}return[T,g]}function U_(){}function z_(l,u){var p=ht,g=Gi(),x=u(),T=!jn(g.memoizedState,x);if(T&&(g.memoizedState=x,Zr=!0),g=g.queue,zy(G_.bind(null,p,g,l),[l]),g.getSnapshot!==u||T||ft!==null&&1&ft.memoizedState.tag){if(p.flags|=2048,wh(9,H_.bind(null,p,g,x,u),void 0,null),qn===null)throw Error(s(349));30&on||$_(p,u,x)}return x}function $_(l,u,p){l.flags|=16384,l={getSnapshot:u,value:p},(u=ht.updateQueue)===null?(u={lastEffect:null,stores:null},ht.updateQueue=u,u.stores=[l]):(p=u.stores)===null?u.stores=[l]:p.push(l)}function H_(l,u,p,g){u.value=p,u.getSnapshot=g,W_(u)&&j_(l)}function G_(l,u,p){return p(function(){W_(u)&&j_(l)})}function W_(l){var u=l.getSnapshot;l=l.value;try{var p=u();return!jn(l,p)}catch{return!0}}function j_(l){var u=Br(l,1);u!==null&&Wi(u,l,1,-1)}function V_(l){var u=oo();return typeof l=="function"&&(l=l()),u.memoizedState=u.baseState=l,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xh,lastRenderedState:l},u.queue=l,l=l.dispatch=oR.bind(null,ht,l),[u.memoizedState,l]}function wh(l,u,p,g){return l={tag:l,create:u,destroy:p,deps:g,next:null},(u=ht.updateQueue)===null?(u={lastEffect:null,stores:null},ht.updateQueue=u,u.lastEffect=l.next=l):(p=u.lastEffect)===null?u.lastEffect=l.next=l:(g=p.next,p.next=l,l.next=g,u.lastEffect=l),l}function X_(){return Gi().memoizedState}function Uf(l,u,p,g){var x=oo();ht.flags|=l,x.memoizedState=wh(1|u,p,void 0,g===void 0?null:g)}function zf(l,u,p,g){var x=Gi();g=g===void 0?null:g;var T=void 0;if(dt!==null){var k=dt.memoizedState;if(T=k.destroy,g!==null&&Ny(g,k.deps))return void(x.memoizedState=wh(u,p,T,g))}ht.flags|=l,x.memoizedState=wh(1|u,p,T,g)}function q_(l,u){return Uf(8390656,8,l,u)}function zy(l,u){return zf(2048,8,l,u)}function Y_(l,u){return zf(4,2,l,u)}function Q_(l,u){return zf(4,4,l,u)}function K_(l,u){return typeof u=="function"?(l=l(),u(l),function(){u(null)}):u!=null?(l=l(),u.current=l,function(){u.current=null}):void 0}function Z_(l,u,p){return p=p!=null?p.concat([l]):null,zf(4,4,K_.bind(null,u,l),p)}function $y(){}function J_(l,u){var p=Gi();u=u===void 0?null:u;var g=p.memoizedState;return g!==null&&u!==null&&Ny(u,g[1])?g[0]:(p.memoizedState=[l,u],l)}function eS(l,u){var p=Gi();u=u===void 0?null:u;var g=p.memoizedState;return g!==null&&u!==null&&Ny(u,g[1])?g[0]:(l=l(),p.memoizedState=[l,u],l)}function tS(l,u,p){return 21&on?(jn(p,u)||(p=kf(),ht.lanes|=p,Il|=p,l.baseState=!0),u):(l.baseState&&(l.baseState=!1,Zr=!0),l.memoizedState=p)}function iR(l,u){var p=nt;nt=p!==0&&4>p?p:4,l(!0);var g=Ur.transition;Ur.transition={};try{l(!1),u()}finally{nt=p,Ur.transition=g}}function nS(){return Gi().memoizedState}function sR(l,u,p){var g=Ta(l);p={lane:g,action:p,hasEagerState:!1,eagerState:null,next:null},rS(l)?iS(u,p):(p=Uo(l,u,p,g))!==null&&(Wi(p,l,g,Er()),sS(p,u,g))}function oR(l,u,p){var g=Ta(l),x={lane:g,action:p,hasEagerState:!1,eagerState:null,next:null};if(rS(l))iS(u,x);else{var T=l.alternate;if(l.lanes===0&&(T===null||T.lanes===0)&&(T=u.lastRenderedReducer)!==null)try{var k=u.lastRenderedState,U=T(k,p);if(x.hasEagerState=!0,x.eagerState=U,jn(U,k)){var Y=u.interleaved;return Y===null?(x.next=x,Pu(u)):(x.next=Y.next,Y.next=x),void(u.interleaved=x)}}catch{}(p=Uo(l,u,x,g))!==null&&(Wi(p,l,g,x=Er()),sS(p,u,g))}}function rS(l){var u=l.alternate;return l===ht||u!==null&&u===ht}function iS(l,u){Hi=Xn=!0;var p=l.pending;p===null?u.next=u:(u.next=p.next,p.next=u),l.pending=u}function sS(l,u,p){if(4194240&p){var g=u.lanes;p|=g&=l.pendingLanes,u.lanes=p,Sl(l,p)}}var $f={readContext:Yr,useCallback:Sr,useContext:Sr,useEffect:Sr,useImperativeHandle:Sr,useInsertionEffect:Sr,useLayoutEffect:Sr,useMemo:Sr,useReducer:Sr,useRef:Sr,useState:Sr,useDebugValue:Sr,useDeferredValue:Sr,useTransition:Sr,useMutableSource:Sr,useSyncExternalStore:Sr,useId:Sr,unstable_isNewReconciler:!1},aR={readContext:Yr,useCallback:function(l,u){return oo().memoizedState=[l,u===void 0?null:u],l},useContext:Yr,useEffect:q_,useImperativeHandle:function(l,u,p){return p=p!=null?p.concat([l]):null,Uf(4194308,4,K_.bind(null,u,l),p)},useLayoutEffect:function(l,u){return Uf(4194308,4,l,u)},useInsertionEffect:function(l,u){return Uf(4,2,l,u)},useMemo:function(l,u){var p=oo();return u=u===void 0?null:u,l=l(),p.memoizedState=[l,u],l},useReducer:function(l,u,p){var g=oo();return u=p!==void 0?p(u):u,g.memoizedState=g.baseState=u,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:u},g.queue=l,l=l.dispatch=sR.bind(null,ht,l),[g.memoizedState,l]},useRef:function(l){return l={current:l},oo().memoizedState=l},useState:V_,useDebugValue:$y,useDeferredValue:function(l){return oo().memoizedState=l},useTransition:function(){var l=V_(!1),u=l[0];return l=iR.bind(null,l[1]),oo().memoizedState=l,[u,l]},useMutableSource:function(){},useSyncExternalStore:function(l,u,p){var g=ht,x=oo();if(yt){if(p===void 0)throw Error(s(407));p=p()}else{if(p=u(),qn===null)throw Error(s(349));30&on||$_(g,u,p)}x.memoizedState=p;var T={value:p,getSnapshot:u};return x.queue=T,q_(G_.bind(null,g,T,l),[l]),g.flags|=2048,wh(9,H_.bind(null,g,T,p,u),void 0,null),p},useId:function(){var l=oo(),u=qn.identifierPrefix;if(yt){var p=Tn;u=":"+u+"R"+(p=(Ln&~(1<<32-pi(Ln)-1)).toString(32)+p),0<(p=Qr++)&&(u+="H"+p.toString(32)),u+=":"}else u=":"+u+"r"+(p=Kr++).toString(32)+":";return l.memoizedState=u},unstable_isNewReconciler:!1},lR={readContext:Yr,useCallback:J_,useContext:Yr,useEffect:zy,useImperativeHandle:Z_,useInsertionEffect:Y_,useLayoutEffect:Q_,useMemo:eS,useReducer:By,useRef:X_,useState:function(){return By(xh)},useDebugValue:$y,useDeferredValue:function(l){return tS(Gi(),dt.memoizedState,l)},useTransition:function(){return[By(xh)[0],Gi().memoizedState]},useMutableSource:U_,useSyncExternalStore:z_,useId:nS,unstable_isNewReconciler:!1},uR={readContext:Yr,useCallback:J_,useContext:Yr,useEffect:zy,useImperativeHandle:Z_,useInsertionEffect:Y_,useLayoutEffect:Q_,useMemo:eS,useReducer:Uy,useRef:X_,useState:function(){return Uy(xh)},useDebugValue:$y,useDeferredValue:function(l){var u=Gi();return dt===null?u.memoizedState=l:tS(u,dt.memoizedState,l)},useTransition:function(){return[Uy(xh)[0],Gi().memoizedState]},useMutableSource:U_,useSyncExternalStore:z_,useId:nS,unstable_isNewReconciler:!1};function Ou(l,u){try{var p="",g=u;do p+=Cl(g),g=g.return;while(g);var x=p}catch(T){x=`
Error generating stack: `+T.message+`
`+T.stack}return{value:l,source:u,stack:x,digest:null}}function Hy(l,u,p){return{value:l,source:null,stack:p??null,digest:u??null}}function Gy(l,u){try{console.error(u.value)}catch(p){setTimeout(function(){throw p})}}var cR=typeof WeakMap=="function"?WeakMap:Map;function oS(l,u,p){(p=zi(-1,p)).tag=3,p.payload={element:null};var g=u.value;return p.callback=function(){tp||(tp=!0,l0=g),Gy(0,u)},p}function aS(l,u,p){(p=zi(-1,p)).tag=3;var g=l.type.getDerivedStateFromError;if(typeof g=="function"){var x=u.value;p.payload=function(){return g(x)},p.callback=function(){Gy(0,u)}}var T=l.stateNode;return T!==null&&typeof T.componentDidCatch=="function"&&(p.callback=function(){Gy(0,u),typeof g!="function"&&(ba===null?ba=new Set([this]):ba.add(this));var k=u.stack;this.componentDidCatch(u.value,{componentStack:k!==null?k:""})}),p}function lS(l,u,p){var g=l.pingCache;if(g===null){g=l.pingCache=new cR;var x=new Set;g.set(u,x)}else(x=g.get(u))===void 0&&(x=new Set,g.set(u,x));x.has(p)||(x.add(p),l=xR.bind(null,l,u,p),u.then(l,l))}function uS(l){do{var u;if((u=l.tag===13)&&(u=(u=l.memoizedState)===null||u.dehydrated!==null),u)return l;l=l.return}while(l!==null);return null}function cS(l,u,p,g,x){return 1&l.mode?(l.flags|=65536,l.lanes=x,l):(l===u?l.flags|=65536:(l.flags|=128,p.flags|=131072,p.flags&=-52805,p.tag===1&&(p.alternate===null?p.tag=17:((u=zi(-1,1)).tag=2,$i(p,u,1))),p.lanes|=1),l)}var hR=o.ReactCurrentOwner,Zr=!1;function Jr(l,u,p,g){u.child=l===null?$e(u,null,p,g):_e(u,l.child,p,g)}function hS(l,u,p,g,x){p=p.render;var T=u.ref;return Bo(u,x),g=Ly(l,u,p,g,T,x),p=Fy(),l===null||Zr?(yt&&p&&mh(u),u.flags|=1,Jr(l,u,g,x),u.child):(u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~x,zo(l,u,x))}function dS(l,u,p,g,x){if(l===null){var T=p.type;return typeof T!="function"||p0(T)||T.defaultProps!==void 0||p.compare!==null||p.defaultProps!==void 0?((l=ap(p.type,null,g,u,u.mode,x)).ref=u.ref,l.return=u,u.child=l):(u.tag=15,u.type=T,fS(l,u,T,g,x))}if(T=l.child,(l.lanes&x)==0){var k=T.memoizedProps;if((p=(p=p.compare)!==null?p:yi)(k,g)&&l.ref===u.ref)return zo(l,u,x)}return u.flags|=1,(l=Ia(T,g)).ref=u.ref,l.return=u,u.child=l}function fS(l,u,p,g,x){if(l!==null){var T=l.memoizedProps;if(yi(T,g)&&l.ref===u.ref){if(Zr=!1,u.pendingProps=g=T,(l.lanes&x)==0)return u.lanes=l.lanes,zo(l,u,x);131072&l.flags&&(Zr=!0)}}return Wy(l,u,p,g,x)}function pS(l,u,p){var g=u.pendingProps,x=g.children,T=l!==null?l.memoizedState:null;if(g.mode==="hidden")if(!(1&u.mode))u.memoizedState={baseLanes:0,cachePool:null,transitions:null},bt(Nu,vi),vi|=p;else{if(!(1073741824&p))return l=T!==null?T.baseLanes|p:p,u.lanes=u.childLanes=1073741824,u.memoizedState={baseLanes:l,cachePool:null,transitions:null},u.updateQueue=null,bt(Nu,vi),vi|=l,null;u.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=T!==null?T.baseLanes:p,bt(Nu,vi),vi|=g}else T!==null?(g=T.baseLanes|p,u.memoizedState=null):g=p,bt(Nu,vi),vi|=g;return Jr(l,u,x,p),u.child}function mS(l,u){var p=u.ref;(l===null&&p!==null||l!==null&&l.ref!==p)&&(u.flags|=512,u.flags|=2097152)}function Wy(l,u,p,g,x){var T=xr(p)?Ks:Bt.current;return T=Zs(u,T),Bo(u,x),p=Ly(l,u,p,g,T,x),g=Fy(),l===null||Zr?(yt&&g&&mh(u),u.flags|=1,Jr(l,u,p,x),u.child):(u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~x,zo(l,u,x))}function gS(l,u,p,g,x){if(xr(p)){var T=!0;wl(u)}else T=!1;if(Bo(u,x),u.stateNode===null)jf(l,u),B(u,p,g),ne(u,p,g,x),g=!0;else if(l===null){var k=u.stateNode,U=u.memoizedProps;k.props=U;var Y=k.context,ee=p.contextType;typeof ee=="object"&&ee!==null?ee=Yr(ee):ee=Zs(u,ee=xr(p)?Ks:Bt.current);var oe=p.getDerivedStateFromProps,ye=typeof oe=="function"||typeof k.getSnapshotBeforeUpdate=="function";ye||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(U!==g||Y!==ee)&&X(u,k,g,ee),Nt=!1;var ie=u.memoizedState;k.state=ie,Ru(u,g,k,x),Y=u.memoizedState,U!==g||ie!==Y||ir.current||Nt?(typeof oe=="function"&&(A(u,p,oe,g),Y=u.memoizedState),(U=Nt||M(u,p,U,g,ie,Y,ee))?(ye||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount()),typeof k.componentDidMount=="function"&&(u.flags|=4194308)):(typeof k.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=g,u.memoizedState=Y),k.props=g,k.state=Y,k.context=ee,g=U):(typeof k.componentDidMount=="function"&&(u.flags|=4194308),g=!1)}else{k=u.stateNode,sn(l,u),U=u.memoizedProps,ee=u.type===u.elementType?U:qr(u.type,U),k.props=ee,ye=u.pendingProps,ie=k.context,typeof(Y=p.contextType)=="object"&&Y!==null?Y=Yr(Y):Y=Zs(u,Y=xr(p)?Ks:Bt.current);var fe=p.getDerivedStateFromProps;(oe=typeof fe=="function"||typeof k.getSnapshotBeforeUpdate=="function")||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(U!==ye||ie!==Y)&&X(u,k,g,Y),Nt=!1,ie=u.memoizedState,k.state=ie,Ru(u,g,k,x);var Ae=u.memoizedState;U!==ye||ie!==Ae||ir.current||Nt?(typeof fe=="function"&&(A(u,p,fe,g),Ae=u.memoizedState),(ee=Nt||M(u,p,ee,g,ie,Ae,Y)||!1)?(oe||typeof k.UNSAFE_componentWillUpdate!="function"&&typeof k.componentWillUpdate!="function"||(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(g,Ae,Y),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(g,Ae,Y)),typeof k.componentDidUpdate=="function"&&(u.flags|=4),typeof k.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof k.componentDidUpdate!="function"||U===l.memoizedProps&&ie===l.memoizedState||(u.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||U===l.memoizedProps&&ie===l.memoizedState||(u.flags|=1024),u.memoizedProps=g,u.memoizedState=Ae),k.props=g,k.state=Ae,k.context=Y,g=ee):(typeof k.componentDidUpdate!="function"||U===l.memoizedProps&&ie===l.memoizedState||(u.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||U===l.memoizedProps&&ie===l.memoizedState||(u.flags|=1024),g=!1)}return jy(l,u,p,g,T,x)}function jy(l,u,p,g,x,T){mS(l,u);var k=(128&u.flags)!=0;if(!g&&!k)return x&&hh(u,p,!1),zo(l,u,T);g=u.stateNode,hR.current=u;var U=k&&typeof p.getDerivedStateFromError!="function"?null:g.render();return u.flags|=1,l!==null&&k?(u.child=_e(u,l.child,null,T),u.child=_e(u,null,U,T)):Jr(l,u,U,T),u.memoizedState=g.state,x&&hh(u,p,!0),u.child}function yS(l){var u=l.stateNode;u.pendingContext?If(0,u.pendingContext,u.pendingContext!==u.context):u.context&&If(0,u.context,!1),vt(l,u.containerInfo)}function vS(l,u,p,g,x){return ro(),yh(x),u.flags|=256,Jr(l,u,p,g),u.child}var _h,Sh,Hf,Gf,Vy={dehydrated:null,treeContext:null,retryLane:0};function Xy(l){return{baseLanes:l,cachePool:null,transitions:null}}function xS(l,u,p){var g,x=u.pendingProps,T=Je.current,k=!1,U=(128&u.flags)!=0;if((g=U)||(g=(l===null||l.memoizedState!==null)&&(2&T)!=0),g?(k=!0,u.flags&=-129):l!==null&&l.memoizedState===null||(T|=1),bt(Je,1&T),l===null)return Eu(u),(l=u.memoizedState)!==null&&(l=l.dehydrated)!==null?(1&u.mode?Xs(l)?u.lanes=8:u.lanes=1073741824:u.lanes=1,null):(U=x.children,l=x.fallback,k?(x=u.mode,k=u.child,U={mode:"hidden",children:U},!(1&x)&&k!==null?(k.childLanes=0,k.pendingProps=U):k=lp(U,x,0,null),l=kl(l,x,p,null),k.return=u,l.return=u,k.sibling=l,u.child=k,u.child.memoizedState=Xy(p),u.memoizedState=Vy,l):qy(u,U));if((T=l.memoizedState)!==null&&(g=T.dehydrated)!==null)return function(ee,oe,ye,ie,fe,Ae,et){if(ye)return 256&oe.flags?(oe.flags&=-257,Wf(ee,oe,et,ie=Hy(Error(s(422))))):oe.memoizedState!==null?(oe.child=ee.child,oe.flags|=128,null):(Ae=ie.fallback,fe=oe.mode,ie=lp({mode:"visible",children:ie.children},fe,0,null),(Ae=kl(Ae,fe,et,null)).flags|=2,ie.return=oe,Ae.return=oe,ie.sibling=Ae,oe.child=ie,1&oe.mode&&_e(oe,ee.child,null,et),oe.child.memoizedState=Xy(et),oe.memoizedState=Vy,Ae);if(!(1&oe.mode))return Wf(ee,oe,et,null);if(Xs(fe))return ie=fa(fe).digest,Ae=Error(s(419)),ie=Hy(Ae,ie,void 0),Wf(ee,oe,et,ie);if(ye=(et&ee.childLanes)!=0,Zr||ye){if((ie=qn)!==null){switch(et&-et){case 4:fe=2;break;case 16:fe=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:fe=32;break;case 536870912:fe=268435456;break;default:fe=0}(fe=fe&(ie.suspendedLanes|et)?0:fe)!==0&&fe!==Ae.retryLane&&(Ae.retryLane=fe,Br(ee,fe),Wi(ie,ee,fe,-1))}return f0(),Wf(ee,oe,et,ie=Hy(Error(s(421))))}return Fr(fe)?(oe.flags|=128,oe.child=ee.child,oe=wR.bind(null,ee),Ef(fe,oe),null):(ee=Ae.treeContext,tt&&(yn=Mo(fe),rn=oe,yt=!0,mi=null,Ui=!1,ee!==null&&(Nn[or++]=Ln,Nn[or++]=Tn,Nn[or++]=No,Ln=ee.id,Tn=ee.overflow,No=oe)),oe=qy(oe,ie.children),oe.flags|=4096,oe)}(l,u,U,x,g,T,p);if(k){k=x.fallback,U=u.mode,g=(T=l.child).sibling;var Y={mode:"hidden",children:x.children};return!(1&U)&&u.child!==T?((x=u.child).childLanes=0,x.pendingProps=Y,u.deletions=null):(x=Ia(T,Y)).subtreeFlags=14680064&T.subtreeFlags,g!==null?k=Ia(g,k):(k=kl(k,U,p,null)).flags|=2,k.return=u,x.return=u,x.sibling=k,u.child=x,x=k,k=u.child,U=(U=l.child.memoizedState)===null?Xy(p):{baseLanes:U.baseLanes|p,cachePool:null,transitions:U.transitions},k.memoizedState=U,k.childLanes=l.childLanes&~p,u.memoizedState=Vy,x}return l=(k=l.child).sibling,x=Ia(k,{mode:"visible",children:x.children}),!(1&u.mode)&&(x.lanes=p),x.return=u,x.sibling=null,l!==null&&((p=u.deletions)===null?(u.deletions=[l],u.flags|=16):p.push(l)),u.child=x,u.memoizedState=null,x}function qy(l,u){return(u=lp({mode:"visible",children:u},l.mode,0,null)).return=l,l.child=u}function Wf(l,u,p,g){return g!==null&&yh(g),_e(u,l.child,null,p),(l=qy(u,u.pendingProps.children)).flags|=2,u.memoizedState=null,l}function wS(l,u,p){l.lanes|=u;var g=l.alternate;g!==null&&(g.lanes|=u),Au(l.return,u,p)}function Yy(l,u,p,g,x){var T=l.memoizedState;T===null?l.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:g,tail:p,tailMode:x}:(T.isBackwards=u,T.rendering=null,T.renderingStartTime=0,T.last=g,T.tail=p,T.tailMode=x)}function _S(l,u,p){var g=u.pendingProps,x=g.revealOrder,T=g.tail;if(Jr(l,u,g.children,p),(2&(g=Je.current))!=0)g=1&g|2,u.flags|=128;else{if(l!==null&&128&l.flags)e:for(l=u.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&wS(l,p,u);else if(l.tag===19)wS(l,p,u);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break e;for(;l.sibling===null;){if(l.return===null||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}g&=1}if(bt(Je,g),(1&u.mode)==0)u.memoizedState=null;else switch(x){case"forwards":for(p=u.child,x=null;p!==null;)(l=p.alternate)!==null&&Fn(l)===null&&(x=p),p=p.sibling;(p=x)===null?(x=u.child,u.child=null):(x=p.sibling,p.sibling=null),Yy(u,!1,x,p,T);break;case"backwards":for(p=null,x=u.child,u.child=null;x!==null;){if((l=x.alternate)!==null&&Fn(l)===null){u.child=x;break}l=x.sibling,x.sibling=p,p=x,x=l}Yy(u,!0,p,null,T);break;case"together":Yy(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function jf(l,u){!(1&u.mode)&&l!==null&&(l.alternate=null,u.alternate=null,u.flags|=2)}function zo(l,u,p){if(l!==null&&(u.dependencies=l.dependencies),Il|=u.lanes,(p&u.childLanes)==0)return null;if(l!==null&&u.child!==l.child)throw Error(s(153));if(u.child!==null){for(p=Ia(l=u.child,l.pendingProps),u.child=p,p.return=u;l.sibling!==null;)l=l.sibling,(p=p.sibling=Ia(l,l.pendingProps)).return=u;p.sibling=null}return u.child}function ao(l){l.flags|=4}function SS(l,u){if(l!==null&&l.child===u.child)return!0;if(16&u.flags)return!1;for(l=u.child;l!==null;){if(12854&l.flags||12854&l.subtreeFlags)return!1;l=l.sibling}return!0}if(Ne)_h=function(l,u){for(var p=u.child;p!==null;){if(p.tag===5||p.tag===6)Z(l,p.stateNode);else if(p.tag!==4&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===u)break;for(;p.sibling===null;){if(p.return===null||p.return===u)return;p=p.return}p.sibling.return=p.return,p=p.sibling}},Sh=function(){},Hf=function(l,u,p,g,x){if((l=l.memoizedProps)!==g){var T=u.stateNode,k=be(He.current);p=ge(T,p,l,g,x,k),(u.updateQueue=p)&&ao(u)}},Gf=function(l,u,p,g){p!==g&&ao(u)};else if(ct){_h=function(l,u,p,g){for(var x=u.child;x!==null;){if(x.tag===5){var T=x.stateNode;p&&g&&(T=js(T,x.type,x.memoizedProps,x)),Z(l,T)}else if(x.tag===6)T=x.stateNode,p&&g&&(T=Mn(T,x.memoizedProps,x)),Z(l,T);else if(x.tag!==4){if(x.tag===22&&x.memoizedState!==null)(T=x.child)!==null&&(T.return=x),_h(l,x,!0,!0);else if(x.child!==null){x.child.return=x,x=x.child;continue}}if(x===u)break;for(;x.sibling===null;){if(x.return===null||x.return===u)return;x=x.return}x.sibling.return=x.return,x=x.sibling}};var bS=function(l,u,p,g){for(var x=u.child;x!==null;){if(x.tag===5){var T=x.stateNode;p&&g&&(T=js(T,x.type,x.memoizedProps,x)),bf(l,T)}else if(x.tag===6)T=x.stateNode,p&&g&&(T=Mn(T,x.memoizedProps,x)),bf(l,T);else if(x.tag!==4){if(x.tag===22&&x.memoizedState!==null)(T=x.child)!==null&&(T.return=x),bS(l,x,!0,!0);else if(x.child!==null){x.child.return=x,x=x.child;continue}}if(x===u)break;for(;x.sibling===null;){if(x.return===null||x.return===u)return;x=x.return}x.sibling.return=x.return,x=x.sibling}};Sh=function(l,u){var p=u.stateNode;if(!SS(l,u)){l=p.containerInfo;var g=Sf(l);bS(g,u,!1,!1),p.pendingChildren=g,ao(u),ky(l,g)}},Hf=function(l,u,p,g,x){var T=l.stateNode,k=l.memoizedProps;if((l=SS(l,u))&&k===g)u.stateNode=T;else{var U=u.stateNode,Y=be(He.current),ee=null;k!==g&&(ee=ge(U,p,k,g,x,Y)),l&&ee===null?u.stateNode=T:(T=Py(T,ee,p,k,g,u,l,U),Ie(T,p,g,x,Y)&&ao(u),u.stateNode=T,l?ao(u):_h(T,u,!1,!1))}},Gf=function(l,u,p,g){p!==g?(l=be(ze.current),p=be(He.current),u.stateNode=Ve(g,l,p,u),ao(u)):u.stateNode=l.stateNode}}else Sh=function(){},Hf=function(){},Gf=function(){};function bh(l,u){if(!yt)switch(l.tailMode){case"hidden":u=l.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?l.tail=null:p.sibling=null;break;case"collapsed":p=l.tail;for(var g=null;p!==null;)p.alternate!==null&&(g=p),p=p.sibling;g===null?u||l.tail===null?l.tail=null:l.tail.sibling=null:g.sibling=null}}function zr(l){var u=l.alternate!==null&&l.alternate.child===l.child,p=0,g=0;if(u)for(var x=l.child;x!==null;)p|=x.lanes|x.childLanes,g|=14680064&x.subtreeFlags,g|=14680064&x.flags,x.return=l,x=x.sibling;else for(x=l.child;x!==null;)p|=x.lanes|x.childLanes,g|=x.subtreeFlags,g|=x.flags,x.return=l,x=x.sibling;return l.subtreeFlags|=g,l.childLanes=p,u}function dR(l,u,p){var g=u.pendingProps;switch(gh(u),u.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zr(u),null;case 1:case 17:return xr(u.type)&&ch(),zr(u),null;case 3:return p=u.stateNode,Ot(),Mt(ir),Mt(Bt),wr(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),l!==null&&l.child!==null||(no(u)?ao(u):l===null||l.memoizedState.isDehydrated&&!(256&u.flags)||(u.flags|=1024,mi!==null&&(h0(mi),mi=null))),Sh(l,u),zr(u),null;case 5:Pt(u),p=be(ze.current);var x=u.type;if(l!==null&&u.stateNode!=null)Hf(l,u,x,g,p),l.ref!==u.ref&&(u.flags|=512,u.flags|=2097152);else{if(!g){if(u.stateNode===null)throw Error(s(166));return zr(u),null}if(l=be(He.current),no(u)){if(!tt)throw Error(s(175));l=Oy(u.stateNode,u.type,u.memoizedProps,p,l,u,!Ui),u.updateQueue=l,l!==null&&ao(u)}else{var T=te(x,g,p,l,u);_h(T,u,!1,!1),u.stateNode=T,Ie(T,x,g,p,l)&&ao(u)}u.ref!==null&&(u.flags|=512,u.flags|=2097152)}return zr(u),null;case 6:if(l&&u.stateNode!=null)Gf(l,u,l.memoizedProps,g);else{if(typeof g!="string"&&u.stateNode===null)throw Error(s(166));if(l=be(ze.current),p=be(He.current),no(u)){if(!tt)throw Error(s(176));if(l=u.stateNode,p=u.memoizedProps,(g=yl(l,p,u,!Ui))&&(x=rn)!==null)switch(x.tag){case 3:vl(x.stateNode.containerInfo,l,p,(1&x.mode)!=0);break;case 5:Cf(x.type,x.memoizedProps,x.stateNode,l,p,(1&x.mode)!=0)}g&&ao(u)}else u.stateNode=Ve(g,l,p,u)}return zr(u),null;case 13:if(Mt(Je),g=u.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(yt&&yn!==null&&1&u.mode&&!(128&u.flags))Ff(),ro(),u.flags|=98560,x=!1;else if(x=no(u),g!==null&&g.dehydrated!==null){if(l===null){if(!x)throw Error(s(318));if(!tt)throw Error(s(344));if(!(x=(x=u.memoizedState)!==null?x.dehydrated:null))throw Error(s(317));Tf(x,u)}else ro(),!(128&u.flags)&&(u.memoizedState=null),u.flags|=4;zr(u),x=!1}else mi!==null&&(h0(mi),mi=null),x=!0;if(!x)return 65536&u.flags?u:null}return 128&u.flags?(u.lanes=p,u):((p=g!==null)!=(l!==null&&l.memoizedState!==null)&&p&&(u.child.flags|=8192,1&u.mode&&(l===null||1&Je.current?Bn===0&&(Bn=3):f0())),u.updateQueue!==null&&(u.flags|=4),zr(u),null);case 4:return Ot(),Sh(l,u),l===null&&kn(u.stateNode.containerInfo),zr(u),null;case 10:return Iu(u.type._context),zr(u),null;case 19:if(Mt(Je),(x=u.memoizedState)===null)return zr(u),null;if(g=(128&u.flags)!=0,(T=x.rendering)===null)if(g)bh(x,!1);else{if(Bn!==0||l!==null&&128&l.flags)for(l=u.child;l!==null;){if((T=Fn(l))!==null){for(u.flags|=128,bh(x,!1),(l=T.updateQueue)!==null&&(u.updateQueue=l,u.flags|=4),u.subtreeFlags=0,l=p,p=u.child;p!==null;)x=l,(g=p).flags&=14680066,(T=g.alternate)===null?(g.childLanes=0,g.lanes=x,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=T.childLanes,g.lanes=T.lanes,g.child=T.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=T.memoizedProps,g.memoizedState=T.memoizedState,g.updateQueue=T.updateQueue,g.type=T.type,x=T.dependencies,g.dependencies=x===null?null:{lanes:x.lanes,firstContext:x.firstContext}),p=p.sibling;return bt(Je,1&Je.current|2),u.child}l=l.sibling}x.tail!==null&&fn()>a0&&(u.flags|=128,g=!0,bh(x,!1),u.lanes=4194304)}else{if(!g)if((l=Fn(T))!==null){if(u.flags|=128,g=!0,(l=l.updateQueue)!==null&&(u.updateQueue=l,u.flags|=4),bh(x,!0),x.tail===null&&x.tailMode==="hidden"&&!T.alternate&&!yt)return zr(u),null}else 2*fn()-x.renderingStartTime>a0&&p!==1073741824&&(u.flags|=128,g=!0,bh(x,!1),u.lanes=4194304);x.isBackwards?(T.sibling=u.child,u.child=T):((l=x.last)!==null?l.sibling=T:u.child=T,x.last=T)}return x.tail!==null?(u=x.tail,x.rendering=u,x.tail=u.sibling,x.renderingStartTime=fn(),u.sibling=null,l=Je.current,bt(Je,g?1&l|2:1&l),u):(zr(u),null);case 22:case 23:return d0(),p=u.memoizedState!==null,l!==null&&l.memoizedState!==null!==p&&(u.flags|=8192),p&&1&u.mode?1073741824&vi&&(zr(u),Ne&&6&u.subtreeFlags&&(u.flags|=8192)):zr(u),null;case 24:case 25:return null}throw Error(s(156,u.tag))}function fR(l,u){switch(gh(u),u.tag){case 1:return xr(u.type)&&ch(),65536&(l=u.flags)?(u.flags=-65537&l|128,u):null;case 3:return Ot(),Mt(ir),Mt(Bt),wr(),65536&(l=u.flags)&&!(128&l)?(u.flags=-65537&l|128,u):null;case 5:return Pt(u),null;case 13:if(Mt(Je),(l=u.memoizedState)!==null&&l.dehydrated!==null){if(u.alternate===null)throw Error(s(340));ro()}return 65536&(l=u.flags)?(u.flags=-65537&l|128,u):null;case 19:return Mt(Je),null;case 4:return Ot(),null;case 10:return Iu(u.type._context),null;case 22:case 23:return d0(),null;default:return null}}var Vf=!1,br=!1,pR=typeof WeakSet=="function"?WeakSet:Set,Te=null;function Du(l,u){var p=l.ref;if(p!==null)if(typeof p=="function")try{p(null)}catch(g){Qt(l,u,g)}else p.current=null}function ES(l,u,p){try{p()}catch(g){Qt(l,u,g)}}var TS=!1;function Eh(l,u,p){var g=u.updateQueue;if((g=g!==null?g.lastEffect:null)!==null){var x=g=g.next;do{if((x.tag&l)===l){var T=x.destroy;x.destroy=void 0,T!==void 0&&ES(u,p,T)}x=x.next}while(x!==g)}}function Xf(l,u){if((u=(u=u.updateQueue)!==null?u.lastEffect:null)!==null){var p=u=u.next;do{if((p.tag&l)===l){var g=p.create;p.destroy=g()}p=p.next}while(p!==u)}}function Qy(l){var u=l.ref;if(u!==null){var p=l.stateNode;l.tag===5?l=ue(p):l=p,typeof u=="function"?u(l):u.current=l}}function CS(l){var u=l.alternate;u!==null&&(l.alternate=null,CS(u)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(u=l.stateNode)!==null&&hi(u),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function IS(l){return l.tag===5||l.tag===3||l.tag===4}function AS(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||IS(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(2&l.flags||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(2&l.flags))return l.stateNode}}function Ky(l,u,p){var g=l.tag;if(g===5||g===6)l=l.stateNode,u?Ni(p,l,u):Hs(p,l);else if(g!==4&&(l=l.child)!==null)for(Ky(l,u,p),l=l.sibling;l!==null;)Ky(l,u,p),l=l.sibling}function Zy(l,u,p){var g=l.tag;if(g===5||g===6)l=l.stateNode,u?Vr(p,l,u):Ro(p,l);else if(g!==4&&(l=l.child)!==null)for(Zy(l,u,p),l=l.sibling;l!==null;)Zy(l,u,p),l=l.sibling}var $r=null,lo=!1;function uo(l,u,p){for(p=p.child;p!==null;)Jy(l,u,p),p=p.sibling}function Jy(l,u,p){if(sr&&typeof sr.onCommitFiberUnmount=="function")try{sr.onCommitFiberUnmount(El,p)}catch{}switch(p.tag){case 5:br||Du(p,u);case 6:if(Ne){var g=$r,x=lo;$r=null,uo(l,u,p),lo=x,($r=g)!==null&&(lo?ca($r,p.stateNode):Gs($r,p.stateNode))}else uo(l,u,p);break;case 18:Ne&&$r!==null&&(lo?Su($r,p.stateNode):En($r,p.stateNode));break;case 4:Ne?(g=$r,x=lo,$r=p.stateNode.containerInfo,lo=!0,uo(l,u,p),$r=g,lo=x):(ct&&(g=p.stateNode.containerInfo,x=Sf(g),Le(g,x)),uo(l,u,p));break;case 0:case 11:case 14:case 15:if(!br&&(g=p.updateQueue)!==null&&(g=g.lastEffect)!==null){x=g=g.next;do{var T=x,k=T.destroy;T=T.tag,k!==void 0&&(2&T||4&T)&&ES(p,u,k),x=x.next}while(x!==g)}uo(l,u,p);break;case 1:if(!br&&(Du(p,u),typeof(g=p.stateNode).componentWillUnmount=="function"))try{g.props=p.memoizedProps,g.state=p.memoizedState,g.componentWillUnmount()}catch(U){Qt(p,u,U)}uo(l,u,p);break;case 21:uo(l,u,p);break;case 22:1&p.mode?(br=(g=br)||p.memoizedState!==null,uo(l,u,p),br=g):uo(l,u,p);break;default:uo(l,u,p)}}function PS(l){var u=l.updateQueue;if(u!==null){l.updateQueue=null;var p=l.stateNode;p===null&&(p=l.stateNode=new pR),u.forEach(function(g){var x=_R.bind(null,l,g);p.has(g)||(p.add(g),g.then(x,x))})}}function cs(l,u){var p=u.deletions;if(p!==null)for(var g=0;g<p.length;g++){var x=p[g];try{var T=l,k=u;if(Ne){var U=k;e:for(;U!==null;){switch(U.tag){case 5:$r=U.stateNode,lo=!1;break e;case 3:case 4:$r=U.stateNode.containerInfo,lo=!0;break e}U=U.return}if($r===null)throw Error(s(160));Jy(T,k,x),$r=null,lo=!1}else Jy(T,k,x);var Y=x.alternate;Y!==null&&(Y.return=null),x.return=null}catch(ee){Qt(x,u,ee)}}if(12854&u.subtreeFlags)for(u=u.child;u!==null;)kS(u,l),u=u.sibling}function kS(l,u){var p=l.alternate,g=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:if(cs(u,l),co(l),4&g){try{Eh(3,l,l.return),Xf(3,l)}catch(ie){Qt(l,l.return,ie)}try{Eh(5,l,l.return)}catch(ie){Qt(l,l.return,ie)}}break;case 1:cs(u,l),co(l),512&g&&p!==null&&Du(p,p.return);break;case 5:if(cs(u,l),co(l),512&g&&p!==null&&Du(p,p.return),Ne){if(32&l.flags){var x=l.stateNode;try{Ws(x)}catch(ie){Qt(l,l.return,ie)}}if(4&g&&(x=l.stateNode)!=null){var T=l.memoizedProps;if(p=p!==null?p.memoizedProps:T,g=l.type,u=l.updateQueue,l.updateQueue=null,u!==null)try{Lr(x,u,g,p,T,l)}catch(ie){Qt(l,l.return,ie)}}}break;case 6:if(cs(u,l),co(l),4&g&&Ne){if(l.stateNode===null)throw Error(s(162));x=l.stateNode,T=l.memoizedProps,p=p!==null?p.memoizedProps:T;try{vr(x,p,T)}catch(ie){Qt(l,l.return,ie)}}break;case 3:if(cs(u,l),co(l),4&g){if(Ne&&tt&&p!==null&&p.memoizedState.isDehydrated)try{On(u.containerInfo)}catch(ie){Qt(l,l.return,ie)}if(ct){x=u.containerInfo,T=u.pendingChildren;try{Le(x,T)}catch(ie){Qt(l,l.return,ie)}}}break;case 4:if(cs(u,l),co(l),4&g&&ct){x=(T=l.stateNode).containerInfo,T=T.pendingChildren;try{Le(x,T)}catch(ie){Qt(l,l.return,ie)}}break;case 13:cs(u,l),co(l),8192&(x=l.child).flags&&(T=x.memoizedState!==null,x.stateNode.isHidden=T,!T||x.alternate!==null&&x.alternate.memoizedState!==null||(o0=fn())),4&g&&PS(l);break;case 22:var k=p!==null&&p.memoizedState!==null;if(1&l.mode?(br=(p=br)||k,cs(u,l),br=p):cs(u,l),co(l),8192&g){if(p=l.memoizedState!==null,(l.stateNode.isHidden=p)&&!k&&(1&l.mode)!=0)for(Te=l,g=l.child;g!==null;){for(u=Te=g;Te!==null;){var U=(k=Te).child;switch(k.tag){case 0:case 11:case 14:case 15:Eh(4,k,k.return);break;case 1:Du(k,k.return);var Y=k.stateNode;if(typeof Y.componentWillUnmount=="function"){var ee=k,oe=k.return;try{var ye=ee;Y.props=ye.memoizedProps,Y.state=ye.memoizedState,Y.componentWillUnmount()}catch(ie){Qt(ee,oe,ie)}}break;case 5:Du(k,k.return);break;case 22:if(k.memoizedState!==null){OS(u);continue}}U!==null?(U.return=k,Te=U):OS(u)}g=g.sibling}if(Ne){e:if(g=null,Ne)for(u=l;;){if(u.tag===5){if(g===null){g=u;try{x=u.stateNode,p?_u(x):lh(u.stateNode,u.memoizedProps)}catch(ie){Qt(l,l.return,ie)}}}else if(u.tag===6){if(g===null)try{T=u.stateNode,p?Xr(T):_f(T,u.memoizedProps)}catch(ie){Qt(l,l.return,ie)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===l)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break e;for(;u.sibling===null;){if(u.return===null||u.return===l)break e;g===u&&(g=null),u=u.return}g===u&&(g=null),u.sibling.return=u.return,u=u.sibling}}}break;case 19:cs(u,l),co(l),4&g&&PS(l);break;case 21:break;default:cs(u,l),co(l)}}function co(l){var u=l.flags;if(2&u){try{if(Ne){e:{for(var p=l.return;p!==null;){if(IS(p)){var g=p;break e}p=p.return}throw Error(s(160))}switch(g.tag){case 5:var x=g.stateNode;32&g.flags&&(Ws(x),g.flags&=-33),Zy(l,AS(l),x);break;case 3:case 4:var T=g.stateNode.containerInfo;Ky(l,AS(l),T);break;default:throw Error(s(161))}}}catch(k){Qt(l,l.return,k)}l.flags&=-3}4096&u&&(l.flags&=-4097)}function mR(l,u,p){Te=l,RS(l)}function RS(l,u,p){for(var g=(1&l.mode)!=0;Te!==null;){var x=Te,T=x.child;if(x.tag===22&&g){var k=x.memoizedState!==null||Vf;if(!k){var U=x.alternate,Y=U!==null&&U.memoizedState!==null||br;U=Vf;var ee=br;if(Vf=k,(br=Y)&&!ee)for(Te=x;Te!==null;)Y=(k=Te).child,k.tag===22&&k.memoizedState!==null?DS(x):Y!==null?(Y.return=k,Te=Y):DS(x);for(;T!==null;)Te=T,RS(T),T=T.sibling;Te=x,Vf=U,br=ee}MS(l)}else 8772&x.subtreeFlags&&T!==null?(T.return=x,Te=T):MS(l)}}function MS(l){for(;Te!==null;){var u=Te;if(8772&u.flags){var p=u.alternate;try{if(8772&u.flags)switch(u.tag){case 0:case 11:case 15:br||Xf(5,u);break;case 1:var g=u.stateNode;if(4&u.flags&&!br)if(p===null)g.componentDidMount();else{var x=u.elementType===u.type?p.memoizedProps:qr(u.type,p.memoizedProps);g.componentDidUpdate(x,p.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var T=u.updateQueue;T!==null&&Mu(u,T,g);break;case 3:var k=u.updateQueue;if(k!==null){if(p=null,u.child!==null)switch(u.child.tag){case 5:p=ue(u.child.stateNode);break;case 1:p=u.child.stateNode}Mu(u,k,p)}break;case 5:var U=u.stateNode;p===null&&4&u.flags&&di(U,u.type,u.memoizedProps,u);break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(tt&&u.memoizedState===null){var Y=u.alternate;if(Y!==null){var ee=Y.memoizedState;if(ee!==null){var oe=ee.dehydrated;oe!==null&&bn(oe)}}}break;default:throw Error(s(163))}br||512&u.flags&&Qy(u)}catch(ye){Qt(u,u.return,ye)}}if(u===l){Te=null;break}if((p=u.sibling)!==null){p.return=u.return,Te=p;break}Te=u.return}}function OS(l){for(;Te!==null;){var u=Te;if(u===l){Te=null;break}var p=u.sibling;if(p!==null){p.return=u.return,Te=p;break}Te=u.return}}function DS(l){for(;Te!==null;){var u=Te;try{switch(u.tag){case 0:case 11:case 15:var p=u.return;try{Xf(4,u)}catch(Y){Qt(u,p,Y)}break;case 1:var g=u.stateNode;if(typeof g.componentDidMount=="function"){var x=u.return;try{g.componentDidMount()}catch(Y){Qt(u,x,Y)}}var T=u.return;try{Qy(u)}catch(Y){Qt(u,T,Y)}break;case 5:var k=u.return;try{Qy(u)}catch(Y){Qt(u,k,Y)}}}catch(Y){Qt(u,u.return,Y)}if(u===l){Te=null;break}var U=u.sibling;if(U!==null){U.return=u.return,Te=U;break}Te=u.return}}var qf=0,Yf=1,Qf=2,Kf=3,Zf=4;if(typeof Symbol=="function"&&Symbol.for){var Th=Symbol.for;qf=Th("selector.component"),Yf=Th("selector.has_pseudo_class"),Qf=Th("selector.role"),Kf=Th("selector.test_id"),Zf=Th("selector.text")}function e0(l){var u=Sn(l);if(u!=null){if(typeof u.memoizedProps["data-testname"]!="string")throw Error(s(364));return u}if((l=zs(l))===null)throw Error(s(362));return l.stateNode.current}function t0(l,u){switch(u.$$typeof){case qf:if(l.type===u.value)return!0;break;case Yf:e:{u=u.value,l=[l,0];for(var p=0;p<l.length;){var g=l[p++],x=l[p++],T=u[x];if(g.tag!==5||!dn(g)){for(;T!=null&&t0(g,T);)T=u[++x];if(x===u.length){u=!0;break e}for(g=g.child;g!==null;)l.push(g,x),g=g.sibling}}u=!1}return u;case Qf:if(l.tag===5&&qe(l.stateNode,u.value))return!0;break;case Zf:if((l.tag===5||l.tag===6)&&(l=Ke(l))!==null&&0<=l.indexOf(u.value))return!0;break;case Kf:if(l.tag===5&&typeof(l=l.memoizedProps["data-testname"])=="string"&&l.toLowerCase()===u.value.toLowerCase())return!0;break;default:throw Error(s(365))}return!1}function n0(l){switch(l.$$typeof){case qf:return"<"+(N(l.value)||"Unknown")+">";case Yf:return":has("+(n0(l)||"")+")";case Qf:return'[role="'+l.value+'"]';case Zf:return'"'+l.value+'"';case Kf:return'[data-testname="'+l.value+'"]';default:throw Error(s(365))}}function NS(l,u){var p=[];l=[l,0];for(var g=0;g<l.length;){var x=l[g++],T=l[g++],k=u[T];if(x.tag!==5||!dn(x)){for(;k!=null&&t0(x,k);)k=u[++T];if(T===u.length)p.push(x);else for(x=x.child;x!==null;)l.push(x,T),x=x.sibling}}return p}function r0(l,u){if(!yr)throw Error(s(363));l=NS(l=e0(l),u),u=[],l=Array.from(l);for(var p=0;p<l.length;){var g=l[p++];if(g.tag===5)dn(g)||u.push(g.stateNode);else for(g=g.child;g!==null;)l.push(g),g=g.sibling}return u}var gR=Math.ceil,Jf=o.ReactCurrentDispatcher,i0=o.ReactCurrentOwner,vn=o.ReactCurrentBatchConfig,ut=0,qn=null,Cn=null,ar=0,vi=0,Nu=Li(0),Bn=0,Ch=null,Il=0,ep=0,s0=0,Ih=null,xi=null,o0=0,a0=1/0,Sa=null;function Lu(){a0=fn()+500}var LS,tp=!1,l0=null,ba=null,np=!1,Ea=null,rp=0,Ah=0,u0=null,ip=-1,sp=0;function Er(){return 6&ut?fn():ip!==-1?ip:ip=fn()}function Ta(l){return 1&l.mode?2&ut&&ar!==0?ar&-ar:Fo.transition!==null?(sp===0&&(sp=kf()),sp):(l=nt)!==0?l:ci():1}function Wi(l,u,p,g){if(50<Ah)throw Ah=0,u0=null,Error(s(185));eo(l,p,g),2&ut&&l===qn||(l===qn&&(!(2&ut)&&(ep|=p),Bn===4&&Ca(l,ar)),ei(l,g),p===1&&ut===0&&!(1&u.mode)&&(Lu(),Tl&&Dn()))}function ei(l,u){var p=l.callbackNode;(function(x,T){for(var k=x.suspendedLanes,U=x.pingedLanes,Y=x.expirationTimes,ee=x.pendingLanes;0<ee;){var oe=31-pi(ee),ye=1<<oe,ie=Y[oe];ie===-1?ye&k&&!(ye&U)||(Y[oe]=Dy(ye,T)):ie<=T&&(x.expiredLanes|=ye),ee&=~ye}})(l,u);var g=ya(l,l===qn?ar:0);if(g===0)p!==null&&Mf(p),l.callbackNode=null,l.callbackPriority=0;else if(u=g&-g,l.callbackPriority!==u){if(p!=null&&Mf(p),u===1)l.tag===0?function(x){Tl=!0,Dt(x)}(BS.bind(null,l)):Dt(BS.bind(null,l)),Rn?wu(function(){!(6&ut)&&Dn()}):to(bl,Dn),p=null;else{switch(Rf(g)){case 1:p=bl;break;case 4:p=va;break;case 16:default:p=Do;break;case 536870912:p=Df}p=VS(p,FS.bind(null,l))}l.callbackPriority=u,l.callbackNode=p}}function FS(l,u){if(ip=-1,sp=0,(6&ut)!=0)throw Error(s(327));var p=l.callbackNode;if(Pl()&&l.callbackNode!==p)return null;var g=ya(l,l===qn?ar:0);if(g===0)return null;if(30&g||g&l.expiredLanes||u)u=op(l,g);else{u=g;var x=ut;ut|=2;var T=$S();for(qn===l&&ar===u||(Sa=null,Lu(),Al(l,u));;)try{vR();break}catch(U){zS(l,U)}Cu(),Jf.current=T,ut=x,Cn!==null?u=0:(qn=null,ar=0,u=Bn)}if(u!==0){if(u===2&&(x=fh(l))!==0&&(g=x,u=c0(l,x)),u===1)throw p=Ch,Al(l,0),Ca(l,g),ei(l,fn()),p;if(u===6)Ca(l,g);else{if(x=l.current.alternate,(30&g)==0&&!function(U){for(var Y=U;;){if(16384&Y.flags){var ee=Y.updateQueue;if(ee!==null&&(ee=ee.stores)!==null)for(var oe=0;oe<ee.length;oe++){var ye=ee[oe],ie=ye.getSnapshot;ye=ye.value;try{if(!jn(ie(),ye))return!1}catch{return!1}}}if(ee=Y.child,16384&Y.subtreeFlags&&ee!==null)ee.return=Y,Y=ee;else{if(Y===U)break;for(;Y.sibling===null;){if(Y.return===null||Y.return===U)return!0;Y=Y.return}Y.sibling.return=Y.return,Y=Y.sibling}}return!0}(x)&&((u=op(l,g))===2&&(T=fh(l))!==0&&(g=T,u=c0(l,T)),u===1))throw p=Ch,Al(l,0),Ca(l,g),ei(l,fn()),p;switch(l.finishedWork=x,l.finishedLanes=g,u){case 0:case 1:throw Error(s(345));case 2:case 5:Fu(l,xi,Sa);break;case 3:if(Ca(l,g),(130023424&g)===g&&10<(u=o0+500-fn())){if(ya(l,0)!==0)break;if(((x=l.suspendedLanes)&g)!==g){Er(),l.pingedLanes|=l.suspendedLanes&x;break}l.timeoutHandle=Be(Fu.bind(null,l,xi,Sa),u);break}Fu(l,xi,Sa);break;case 4:if(Ca(l,g),(4194240&g)===g)break;for(u=l.eventTimes,x=-1;0<g;){var k=31-pi(g);T=1<<k,(k=u[k])>x&&(x=k),g&=~T}if(g=x,10<(g=(120>(g=fn()-g)?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*gR(g/1960))-g)){l.timeoutHandle=Be(Fu.bind(null,l,xi,Sa),g);break}Fu(l,xi,Sa);break;default:throw Error(s(329))}}}return ei(l,fn()),l.callbackNode===p?FS.bind(null,l):null}function c0(l,u){var p=Ih;return l.current.memoizedState.isDehydrated&&(Al(l,u).flags|=256),(l=op(l,u))!==2&&(u=xi,xi=p,u!==null&&h0(u)),l}function h0(l){xi===null?xi=l:xi.push.apply(xi,l)}function Ca(l,u){for(u&=~s0,u&=~ep,l.suspendedLanes|=u,l.pingedLanes&=~u,l=l.expirationTimes;0<u;){var p=31-pi(u),g=1<<p;l[p]=-1,u&=~g}}function BS(l){if(6&ut)throw Error(s(327));Pl();var u=ya(l,0);if(!(1&u))return ei(l,fn()),null;var p=op(l,u);if(l.tag!==0&&p===2){var g=fh(l);g!==0&&(u=g,p=c0(l,g))}if(p===1)throw p=Ch,Al(l,0),Ca(l,u),ei(l,fn()),p;if(p===6)throw Error(s(345));return l.finishedWork=l.current.alternate,l.finishedLanes=u,Fu(l,xi,Sa),ei(l,fn()),null}function US(l){Ea!==null&&Ea.tag===0&&!(6&ut)&&Pl();var u=ut;ut|=1;var p=vn.transition,g=nt;try{if(vn.transition=null,nt=1,l)return l()}finally{nt=g,vn.transition=p,!(6&(ut=u))&&Dn()}}function d0(){vi=Nu.current,Mt(Nu)}function Al(l,u){l.finishedWork=null,l.finishedLanes=0;var p=l.timeoutHandle;if(p!==St&&(l.timeoutHandle=St,pt(p)),Cn!==null)for(p=Cn.return;p!==null;){var g=p;switch(gh(g),g.tag){case 1:(g=g.type.childContextTypes)!=null&&ch();break;case 3:Ot(),Mt(ir),Mt(Bt),wr();break;case 5:Pt(g);break;case 4:Ot();break;case 13:case 19:Mt(Je);break;case 10:Iu(g.type._context);break;case 22:case 23:d0()}p=p.return}if(qn=l,Cn=l=Ia(l.current,null),ar=vi=u,Bn=0,Ch=null,s0=ep=Il=0,xi=Ih=null,io!==null){for(u=0;u<io.length;u++)if((g=(p=io[u]).interleaved)!==null){p.interleaved=null;var x=g.next,T=p.pending;if(T!==null){var k=T.next;T.next=x,g.next=k}p.pending=g}io=null}return l}function zS(l,u){for(;;){var p=Cn;try{if(Cu(),_r.current=$f,Xn){for(var g=ht.memoizedState;g!==null;){var x=g.queue;x!==null&&(x.pending=null),g=g.next}Xn=!1}if(on=0,ft=dt=ht=null,Hi=!1,Qr=0,i0.current=null,p===null||p.return===null){Bn=1,Ch=u,Cn=null;break}e:{var T=l,k=p.return,U=p,Y=u;if(u=ar,U.flags|=32768,Y!==null&&typeof Y=="object"&&typeof Y.then=="function"){var ee=Y,oe=U,ye=oe.tag;if(!(1&oe.mode)&&(ye===0||ye===11||ye===15)){var ie=oe.alternate;ie?(oe.updateQueue=ie.updateQueue,oe.memoizedState=ie.memoizedState,oe.lanes=ie.lanes):(oe.updateQueue=null,oe.memoizedState=null)}var fe=uS(k);if(fe!==null){fe.flags&=-257,cS(fe,k,U,0,u),1&fe.mode&&lS(T,ee,u),Y=ee;var Ae=(u=fe).updateQueue;if(Ae===null){var et=new Set;et.add(Y),u.updateQueue=et}else Ae.add(Y);break e}if(!(1&u)){lS(T,ee,u),f0();break e}Y=Error(s(426))}else if(yt&&1&U.mode){var ae=uS(k);if(ae!==null){!(65536&ae.flags)&&(ae.flags|=256),cS(ae,k,U,0,u),yh(Ou(Y,U));break e}}T=Y=Ou(Y,U),Bn!==4&&(Bn=2),Ih===null?Ih=[T]:Ih.push(T),T=k;do{switch(T.tag){case 3:T.flags|=65536,u&=-u,T.lanes|=u,Bf(T,oS(0,Y,u));break e;case 1:U=Y;var j=T.type,J=T.stateNode;if(!(128&T.flags)&&(typeof j.getDerivedStateFromError=="function"||J!==null&&typeof J.componentDidCatch=="function"&&(ba===null||!ba.has(J)))){T.flags|=65536,u&=-u,T.lanes|=u,Bf(T,aS(T,U,u));break e}}T=T.return}while(T!==null)}GS(p)}catch(ce){u=ce,Cn===p&&p!==null&&(Cn=p=p.return);continue}break}}function $S(){var l=Jf.current;return Jf.current=$f,l===null?$f:l}function f0(){Bn!==0&&Bn!==3&&Bn!==2||(Bn=4),qn===null||!(268435455&Il)&&!(268435455&ep)||Ca(qn,ar)}function op(l,u){var p=ut;ut|=2;var g=$S();for(qn===l&&ar===u||(Sa=null,Al(l,u));;)try{yR();break}catch(x){zS(l,x)}if(Cu(),ut=p,Jf.current=g,Cn!==null)throw Error(s(261));return qn=null,ar=0,Bn}function yR(){for(;Cn!==null;)HS(Cn)}function vR(){for(;Cn!==null&&!Of();)HS(Cn)}function HS(l){var u=LS(l.alternate,l,vi);l.memoizedProps=l.pendingProps,u===null?GS(l):Cn=u,i0.current=null}function GS(l){var u=l;do{var p=u.alternate;if(l=u.return,(32768&u.flags)==0){if((p=dR(p,u,vi))!==null)return void(Cn=p)}else{if((p=fR(p,u))!==null)return p.flags&=32767,void(Cn=p);if(l===null)return Bn=6,void(Cn=null);l.flags|=32768,l.subtreeFlags=0,l.deletions=null}if((u=u.sibling)!==null)return void(Cn=u);Cn=u=l}while(u!==null);Bn===0&&(Bn=5)}function Fu(l,u,p){var g=nt,x=vn.transition;try{vn.transition=null,nt=1,function(T,k,U,Y){do Pl();while(Ea!==null);if(6&ut)throw Error(s(327));U=T.finishedWork;var ee=T.finishedLanes;if(U===null)return null;if(T.finishedWork=null,T.finishedLanes=0,U===T.current)throw Error(s(177));T.callbackNode=null,T.callbackPriority=0;var oe=U.lanes|U.childLanes;if(function(fe,Ae){var et=fe.pendingLanes&~Ae;fe.pendingLanes=Ae,fe.suspendedLanes=0,fe.pingedLanes=0,fe.expiredLanes&=Ae,fe.mutableReadLanes&=Ae,fe.entangledLanes&=Ae,Ae=fe.entanglements;var ae=fe.eventTimes;for(fe=fe.expirationTimes;0<et;){var j=31-pi(et),J=1<<j;Ae[j]=0,ae[j]=-1,fe[j]=-1,et&=~J}}(T,oe),T===qn&&(Cn=qn=null,ar=0),!(2064&U.subtreeFlags)&&!(2064&U.flags)||np||(np=!0,VS(Do,function(){return Pl(),null})),oe=(15990&U.flags)!=0,(15990&U.subtreeFlags)!=0||oe){oe=vn.transition,vn.transition=null;var ye=nt;nt=1;var ie=ut;ut|=4,i0.current=null,function(fe,Ae){for(Q(fe.containerInfo),Te=Ae;Te!==null;)if(Ae=(fe=Te).child,(1028&fe.subtreeFlags)!=0&&Ae!==null)Ae.return=fe,Te=Ae;else for(;Te!==null;){fe=Te;try{var et=fe.alternate;if(1024&fe.flags)switch(fe.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(et!==null){var ae=et.memoizedProps,j=et.memoizedState,J=fe.stateNode,ce=J.getSnapshotBeforeUpdate(fe.elementType===fe.type?ae:qr(fe.type,ae),j);J.__reactInternalSnapshotBeforeUpdate=ce}break;case 3:Ne&&Ay(fe.stateNode.containerInfo);break;default:throw Error(s(163))}}catch(De){Qt(fe,fe.return,De)}if((Ae=fe.sibling)!==null){Ae.return=fe.return,Te=Ae;break}Te=fe.return}et=TS,TS=!1}(T,U),kS(U,T),L(T.containerInfo),T.current=U,mR(U),ph(),ut=ie,nt=ye,vn.transition=oe}else T.current=U;if(np&&(np=!1,Ea=T,rp=ee),oe=T.pendingLanes,oe===0&&(ba=null),function(fe){if(sr&&typeof sr.onCommitFiberRoot=="function")try{sr.onCommitFiberRoot(El,fe,void 0,(128&fe.current.flags)==128)}catch{}}(U.stateNode),ei(T,fn()),k!==null)for(Y=T.onRecoverableError,U=0;U<k.length;U++)ee=k[U],Y(ee.value,{componentStack:ee.stack,digest:ee.digest});if(tp)throw tp=!1,T=l0,l0=null,T;1&rp&&T.tag!==0&&Pl(),oe=T.pendingLanes,1&oe?T===u0?Ah++:(Ah=0,u0=T):Ah=0,Dn()}(l,u,p,g)}finally{vn.transition=x,nt=g}return null}function Pl(){if(Ea!==null){var l=Rf(rp),u=vn.transition,p=nt;try{if(vn.transition=null,nt=16>l?16:l,Ea===null)var g=!1;else{if(l=Ea,Ea=null,rp=0,(6&ut)!=0)throw Error(s(331));var x=ut;for(ut|=4,Te=l.current;Te!==null;){var T=Te,k=T.child;if(16&Te.flags){var U=T.deletions;if(U!==null){for(var Y=0;Y<U.length;Y++){var ee=U[Y];for(Te=ee;Te!==null;){var oe=Te;switch(oe.tag){case 0:case 11:case 15:Eh(8,oe,T)}var ye=oe.child;if(ye!==null)ye.return=oe,Te=ye;else for(;Te!==null;){var ie=(oe=Te).sibling,fe=oe.return;if(CS(oe),oe===ee){Te=null;break}if(ie!==null){ie.return=fe,Te=ie;break}Te=fe}}}var Ae=T.alternate;if(Ae!==null){var et=Ae.child;if(et!==null){Ae.child=null;do{var ae=et.sibling;et.sibling=null,et=ae}while(et!==null)}}Te=T}}if(2064&T.subtreeFlags&&k!==null)k.return=T,Te=k;else e:for(;Te!==null;){if(2048&(T=Te).flags)switch(T.tag){case 0:case 11:case 15:Eh(9,T,T.return)}var j=T.sibling;if(j!==null){j.return=T.return,Te=j;break e}Te=T.return}}var J=l.current;for(Te=J;Te!==null;){var ce=(k=Te).child;if(2064&k.subtreeFlags&&ce!==null)ce.return=k,Te=ce;else e:for(k=J;Te!==null;){if(2048&(U=Te).flags)try{switch(U.tag){case 0:case 11:case 15:Xf(9,U)}}catch(Tt){Qt(U,U.return,Tt)}if(U===k){Te=null;break e}var De=U.sibling;if(De!==null){De.return=U.return,Te=De;break e}Te=U.return}}if(ut=x,Dn(),sr&&typeof sr.onPostCommitFiberRoot=="function")try{sr.onPostCommitFiberRoot(El,l)}catch{}g=!0}return g}finally{nt=p,vn.transition=u}}return!1}function WS(l,u,p){l=$i(l,u=oS(0,u=Ou(p,u),1),1),u=Er(),l!==null&&(eo(l,1,u),ei(l,u))}function Qt(l,u,p){if(l.tag===3)WS(l,l,p);else for(;u!==null;){if(u.tag===3){WS(u,l,p);break}if(u.tag===1){var g=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(ba===null||!ba.has(g))){u=$i(u,l=aS(u,l=Ou(p,l),1),1),l=Er(),u!==null&&(eo(u,1,l),ei(u,l));break}}u=u.return}}function xR(l,u,p){var g=l.pingCache;g!==null&&g.delete(u),u=Er(),l.pingedLanes|=l.suspendedLanes&p,qn===l&&(ar&p)===p&&(Bn===4||Bn===3&&(130023424&ar)===ar&&500>fn()-o0?Al(l,0):s0|=p),ei(l,u)}function jS(l,u){u===0&&(1&l.mode?(u=ga,!(130023424&(ga<<=1))&&(ga=4194304)):u=1);var p=Er();(l=Br(l,u))!==null&&(eo(l,u,p),ei(l,p))}function wR(l){var u=l.memoizedState,p=0;u!==null&&(p=u.retryLane),jS(l,p)}function _R(l,u){var p=0;switch(l.tag){case 13:var g=l.stateNode,x=l.memoizedState;x!==null&&(p=x.retryLane);break;case 19:g=l.stateNode;break;default:throw Error(s(314))}g!==null&&g.delete(u),jS(l,p)}function VS(l,u){return to(l,u)}function SR(l,u,p,g){this.tag=l,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ji(l,u,p,g){return new SR(l,u,p,g)}function p0(l){return!(!(l=l.prototype)||!l.isReactComponent)}function Ia(l,u){var p=l.alternate;return p===null?((p=ji(l.tag,u,l.key,l.mode)).elementType=l.elementType,p.type=l.type,p.stateNode=l.stateNode,p.alternate=l,l.alternate=p):(p.pendingProps=u,p.type=l.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=14680064&l.flags,p.childLanes=l.childLanes,p.lanes=l.lanes,p.child=l.child,p.memoizedProps=l.memoizedProps,p.memoizedState=l.memoizedState,p.updateQueue=l.updateQueue,u=l.dependencies,p.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},p.sibling=l.sibling,p.index=l.index,p.ref=l.ref,p}function ap(l,u,p,g,x,T){var k=2;if(g=l,typeof l=="function")p0(l)&&(k=1);else if(typeof l=="string")k=5;else e:switch(l){case h:return kl(p.children,x,T,u);case d:k=8,x|=8;break;case m:return(l=ji(12,p,u,2|x)).elementType=m,l.lanes=T,l;case S:return(l=ji(13,p,u,x)).elementType=S,l.lanes=T,l;case C:return(l=ji(19,p,u,x)).elementType=C,l.lanes=T,l;case w:return lp(p,x,T,u);default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case f:k=10;break e;case y:k=9;break e;case v:k=11;break e;case _:k=14;break e;case b:k=16,g=null;break e}throw Error(s(130,l==null?l:typeof l,""))}return(u=ji(k,p,u,x)).elementType=l,u.type=g,u.lanes=T,u}function kl(l,u,p,g){return(l=ji(7,l,g,u)).lanes=p,l}function lp(l,u,p,g){return(l=ji(22,l,g,u)).elementType=w,l.lanes=p,l.stateNode={isHidden:!1},l}function m0(l,u,p){return(l=ji(6,l,null,u)).lanes=p,l}function g0(l,u,p){return(u=ji(4,l.children!==null?l.children:[],l.key,u)).lanes=p,u.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},u}function bR(l,u,p,g,x){this.tag=u,this.containerInfo=l,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=St,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Js(0),this.expirationTimes=Js(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Js(0),this.identifierPrefix=g,this.onRecoverableError=x,tt&&(this.mutableSourceEagerHydrationData=null)}function XS(l,u,p,g,x,T,k,U,Y){return l=new bR(l,u,p,U,Y),u===1?(u=1,T===!0&&(u|=8)):u=0,T=ji(3,null,null,u),l.current=T,T.stateNode=l,T.memoizedState={element:g,isDehydrated:p,cache:null,transitions:null,pendingSuspenseBoundaries:null},ku(T),l}function qS(l){if(!l)return Fi;e:{if(D(l=l._reactInternals)!==l||l.tag!==1)throw Error(s(170));var u=l;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(xr(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(u!==null);throw Error(s(171))}if(l.tag===1){var p=l.type;if(xr(p))return Af(l,p,u)}return u}function YS(l){var u=l._reactInternals;if(u===void 0)throw typeof l.render=="function"?Error(s(188)):(l=Object.keys(l).join(","),Error(s(268,l)));return(l=F(u))===null?null:l.stateNode}function QS(l,u){if((l=l.memoizedState)!==null&&l.dehydrated!==null){var p=l.retryLane;l.retryLane=p!==0&&p<u?p:u}}function up(l,u){QS(l,u),(l=l.alternate)&&QS(l,u)}function ER(l){return(l=F(l))===null?null:l.stateNode}function TR(){return null}return LS=function(l,u,p){if(l!==null)if(l.memoizedProps!==u.pendingProps||ir.current)Zr=!0;else{if(!(l.lanes&p)&&!(128&u.flags))return Zr=!1,function(ye,ie,fe){switch(ie.tag){case 3:yS(ie),ro();break;case 5:Gt(ie);break;case 1:xr(ie.type)&&wl(ie);break;case 4:vt(ie,ie.stateNode.containerInfo);break;case 10:vh(0,ie.type._context,ie.memoizedProps.value);break;case 13:var Ae=ie.memoizedState;if(Ae!==null)return Ae.dehydrated!==null?(bt(Je,1&Je.current),ie.flags|=128,null):fe&ie.child.childLanes?xS(ye,ie,fe):(bt(Je,1&Je.current),(ye=zo(ye,ie,fe))!==null?ye.sibling:null);bt(Je,1&Je.current);break;case 19:if(Ae=(fe&ie.childLanes)!=0,(128&ye.flags)!=0){if(Ae)return _S(ye,ie,fe);ie.flags|=128}var et=ie.memoizedState;if(et!==null&&(et.rendering=null,et.tail=null,et.lastEffect=null),bt(Je,Je.current),Ae)break;return null;case 22:case 23:return ie.lanes=0,pS(ye,ie,fe)}return zo(ye,ie,fe)}(l,u,p);Zr=(131072&l.flags)!=0}else Zr=!1,yt&&1048576&u.flags&&Nf(u,Et,u.index);switch(u.lanes=0,u.tag){case 2:var g=u.type;jf(l,u),l=u.pendingProps;var x=Zs(u,Bt.current);Bo(u,p),x=Ly(null,u,g,l,x,p);var T=Fy();return u.flags|=1,typeof x=="object"&&x!==null&&typeof x.render=="function"&&x.$$typeof===void 0?(u.tag=1,u.memoizedState=null,u.updateQueue=null,xr(g)?(T=!0,wl(u)):T=!1,u.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,ku(u),x.updater=R,u.stateNode=x,x._reactInternals=u,ne(u,g,l,p),u=jy(null,u,g,!0,T,p)):(u.tag=0,yt&&T&&mh(u),Jr(null,u,x,p),u=u.child),u;case 16:g=u.elementType;e:{switch(jf(l,u),l=u.pendingProps,g=(x=g._init)(g._payload),u.type=g,x=u.tag=function(ye){if(typeof ye=="function")return p0(ye)?1:0;if(ye!=null){if((ye=ye.$$typeof)===v)return 11;if(ye===_)return 14}return 2}(g),l=qr(g,l),x){case 0:u=Wy(null,u,g,l,p);break e;case 1:u=gS(null,u,g,l,p);break e;case 11:u=hS(null,u,g,l,p);break e;case 14:u=dS(null,u,g,qr(g.type,l),p);break e}throw Error(s(306,g,""))}return u;case 0:return g=u.type,x=u.pendingProps,Wy(l,u,g,x=u.elementType===g?x:qr(g,x),p);case 1:return g=u.type,x=u.pendingProps,gS(l,u,g,x=u.elementType===g?x:qr(g,x),p);case 3:e:{if(yS(u),l===null)throw Error(s(387));g=u.pendingProps,x=(T=u.memoizedState).element,sn(l,u),Ru(u,g,null,p);var k=u.memoizedState;if(g=k.element,tt&&T.isDehydrated){if(T={element:g,isDehydrated:!1,cache:k.cache,pendingSuspenseBoundaries:k.pendingSuspenseBoundaries,transitions:k.transitions},u.updateQueue.baseState=T,u.memoizedState=T,256&u.flags){u=vS(l,u,g,p,x=Ou(Error(s(423)),u));break e}if(g!==x){u=vS(l,u,g,p,x=Ou(Error(s(424)),u));break e}for(tt&&(yn=My(u.stateNode.containerInfo),rn=u,yt=!0,mi=null,Ui=!1),p=$e(u,null,g,p),u.child=p;p;)p.flags=-3&p.flags|4096,p=p.sibling}else{if(ro(),g===x){u=zo(l,u,p);break e}Jr(l,u,g,p)}u=u.child}return u;case 5:return Gt(u),l===null&&Eu(u),g=u.type,x=u.pendingProps,T=l!==null?l.memoizedProps:null,k=x.children,je(g,x)?k=null:T!==null&&je(g,T)&&(u.flags|=32),mS(l,u),Jr(l,u,k,p),u.child;case 6:return l===null&&Eu(u),null;case 13:return xS(l,u,p);case 4:return vt(u,u.stateNode.containerInfo),g=u.pendingProps,l===null?u.child=_e(u,null,g,p):Jr(l,u,g,p),u.child;case 11:return g=u.type,x=u.pendingProps,hS(l,u,g,x=u.elementType===g?x:qr(g,x),p);case 7:return Jr(l,u,u.pendingProps,p),u.child;case 8:case 12:return Jr(l,u,u.pendingProps.children,p),u.child;case 10:e:{if(g=u.type._context,x=u.pendingProps,T=u.memoizedProps,vh(0,g,k=x.value),T!==null)if(jn(T.value,k)){if(T.children===x.children&&!ir.current){u=zo(l,u,p);break e}}else for((T=u.child)!==null&&(T.return=u);T!==null;){var U=T.dependencies;if(U!==null){k=T.child;for(var Y=U.firstContext;Y!==null;){if(Y.context===g){if(T.tag===1){(Y=zi(-1,p&-p)).tag=2;var ee=T.updateQueue;if(ee!==null){var oe=(ee=ee.shared).pending;oe===null?Y.next=Y:(Y.next=oe.next,oe.next=Y),ee.pending=Y}}T.lanes|=p,(Y=T.alternate)!==null&&(Y.lanes|=p),Au(T.return,p,u),U.lanes|=p;break}Y=Y.next}}else if(T.tag===10)k=T.type===u.type?null:T.child;else if(T.tag===18){if((k=T.return)===null)throw Error(s(341));k.lanes|=p,(U=k.alternate)!==null&&(U.lanes|=p),Au(k,p,u),k=T.sibling}else k=T.child;if(k!==null)k.return=T;else for(k=T;k!==null;){if(k===u){k=null;break}if((T=k.sibling)!==null){T.return=k.return,k=T;break}k=k.return}T=k}Jr(l,u,x.children,p),u=u.child}return u;case 9:return x=u.type,g=u.pendingProps.children,Bo(u,p),g=g(x=Yr(x)),u.flags|=1,Jr(l,u,g,p),u.child;case 14:return x=qr(g=u.type,u.pendingProps),dS(l,u,g,x=qr(g.type,x),p);case 15:return fS(l,u,u.type,u.pendingProps,p);case 17:return g=u.type,x=u.pendingProps,x=u.elementType===g?x:qr(g,x),jf(l,u),u.tag=1,xr(g)?(l=!0,wl(u)):l=!1,Bo(u,p),B(u,g,x),ne(u,g,x,p),jy(null,u,g,!0,l,p);case 19:return _S(l,u,p);case 22:return pS(l,u,p)}throw Error(s(156,u.tag))},e.attemptContinuousHydration=function(l){if(l.tag===13){var u=Br(l,134217728);u!==null&&Wi(u,l,134217728,Er()),up(l,134217728)}},e.attemptDiscreteHydration=function(l){if(l.tag===13){var u=Br(l,1);u!==null&&Wi(u,l,1,Er()),up(l,1)}},e.attemptHydrationAtCurrentPriority=function(l){if(l.tag===13){var u=Ta(l),p=Br(l,u);p!==null&&Wi(p,l,u,Er()),up(l,u)}},e.attemptSynchronousHydration=function(l){switch(l.tag){case 3:var u=l.stateNode;if(u.current.memoizedState.isDehydrated){var p=_l(u.pendingLanes);p!==0&&(Sl(u,1|p),ei(u,fn()),!(6&ut)&&(Lu(),Dn()))}break;case 13:US(function(){var g=Br(l,1);if(g!==null){var x=Er();Wi(g,l,1,x)}}),up(l,1)}},e.batchedUpdates=function(l,u){var p=ut;ut|=1;try{return l(u)}finally{(ut=p)===0&&(Lu(),Tl&&Dn())}},e.createComponentSelector=function(l){return{$$typeof:qf,value:l}},e.createContainer=function(l,u,p,g,x,T,k){return XS(l,u,!1,null,0,g,0,T,k)},e.createHasPseudoClassSelector=function(l){return{$$typeof:Yf,value:l}},e.createHydrationContainer=function(l,u,p,g,x,T,k,U,Y){return(l=XS(p,g,!0,l,0,T,0,U,Y)).context=qS(null),p=l.current,(T=zi(g=Er(),x=Ta(p))).callback=u??null,$i(p,T,x),l.current.lanes=x,eo(l,x,g),ei(l,g),l},e.createPortal=function(l,u,p){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:g==null?null:""+g,children:l,containerInfo:u,implementation:p}},e.createRoleSelector=function(l){return{$$typeof:Qf,value:l}},e.createTestNameSelector=function(l){return{$$typeof:Kf,value:l}},e.createTextSelector=function(l){return{$$typeof:Zf,value:l}},e.deferredUpdates=function(l){var u=nt,p=vn.transition;try{return vn.transition=null,nt=16,l()}finally{nt=u,vn.transition=p}},e.discreteUpdates=function(l,u,p,g,x){var T=nt,k=vn.transition;try{return vn.transition=null,nt=1,l(u,p,g,x)}finally{nt=T,vn.transition=k,ut===0&&Lu()}},e.findAllNodes=r0,e.findBoundingRects=function(l,u){if(!yr)throw Error(s(363));u=r0(l,u),l=[];for(var p=0;p<u.length;p++)l.push(Xe(u[p]));for(u=l.length-1;0<u;u--)for(var g=(p=l[u]).x,x=g+p.width,T=p.y,k=T+p.height,U=u-1;0<=U;U--)if(u!==U){var Y=l[U],ee=Y.x,oe=ee+Y.width,ye=Y.y,ie=ye+Y.height;if(g>=ee&&T>=ye&&x<=oe&&k<=ie){l.splice(u,1);break}if(!(g!==ee||p.width!==Y.width||ie<T||ye>k)){ye>T&&(Y.height+=ye-T,Y.y=T),ie<k&&(Y.height=k-ye),l.splice(u,1);break}if(!(T!==ye||p.height!==Y.height||oe<g||ee>x)){ee>g&&(Y.width+=ee-g,Y.x=g),oe<x&&(Y.width=x-ee),l.splice(u,1);break}}return l},e.findHostInstance=YS,e.findHostInstanceWithNoPortals=function(l){return(l=(l=G(l))!==null?W(l):null)===null?null:l.stateNode},e.findHostInstanceWithWarning=function(l){return YS(l)},e.flushControlled=function(l){var u=ut;ut|=1;var p=vn.transition,g=nt;try{vn.transition=null,nt=1,l()}finally{nt=g,vn.transition=p,(ut=u)===0&&(Lu(),Dn())}},e.flushPassiveEffects=Pl,e.flushSync=US,e.focusWithin=function(l,u){if(!yr)throw Error(s(363));for(u=NS(l=e0(l),u),u=Array.from(u),l=0;l<u.length;){var p=u[l++];if(!dn(p)){if(p.tag===5&&rr(p.stateNode))return!0;for(p=p.child;p!==null;)u.push(p),p=p.sibling}}return!1},e.getCurrentUpdatePriority=function(){return nt},e.getFindAllNodesFailureDescription=function(l,u){if(!yr)throw Error(s(363));var p=0,g=[];l=[e0(l),0];for(var x=0;x<l.length;){var T=l[x++],k=l[x++],U=u[k];if((T.tag!==5||!dn(T))&&(t0(T,U)&&(g.push(n0(U)),++k>p&&(p=k)),k<u.length))for(T=T.child;T!==null;)l.push(T,k),T=T.sibling}if(p<u.length){for(l=[];p<u.length;p++)l.push(n0(u[p]));return`findAllNodes was able to match part of the selector:
  `+g.join(" > ")+`

No matching component was found for:
  `+l.join(" > ")}return null},e.getPublicRootInstance=function(l){return(l=l.current).child?l.child.tag===5?ue(l.child.stateNode):l.child.stateNode:null},e.injectIntoDevTools=function(l){if(l={bundleType:l.bundleType,version:l.version,rendererPackageName:l.rendererPackageName,rendererConfig:l.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:o.ReactCurrentDispatcher,findHostInstanceByFiber:ER,findFiberByHostInstance:l.findFiberByHostInstance||TR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")l=!1;else{var u=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(u.isDisabled||!u.supportsFiber)l=!0;else{try{El=u.inject(l),sr=u}catch{}l=!!u.checkDCE}}return l},e.isAlreadyRendering=function(){return!1},e.observeVisibleRects=function(l,u,p,g){if(!yr)throw Error(s(363));l=r0(l,u);var x=$s(l,p,g).disconnect;return{disconnect:function(){x()}}},e.registerMutableSourceForHydration=function(l,u){var p=u._getVersion;p=p(u._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[u,p]:l.mutableSourceEagerHydrationData.push(u,p)},e.runWithPriority=function(l,u){var p=nt;try{return nt=l,u()}finally{nt=p}},e.shouldError=function(){return null},e.shouldSuspend=function(){return!1},e.updateContainer=function(l,u,p,g){var x=u.current,T=Er(),k=Ta(x);return p=qS(p),u.context===null?u.context=p:u.pendingContext=p,(u=zi(T,k)).payload={element:l},(g=g===void 0?null:g)!==null&&(u.callback=g),(l=$i(x,u,k))!==null&&(Wi(l,x,k,T),so(l,x,k)),k},e}),UT}({get exports(){return Tx},set exports(t){Tx=t}}).exports=Az();var Pz=tz(Tx),c3={name:"root",private:!0,workspaces:["packages/*"],scripts:{build:"nx run-many --target=build --all --parallel","build:force":"nx run-many --target=build --all --parallel --skip-nx-cache","build:docs":"nx run @pixi/react-docs:deploy",clean:"rimraf packages/*/dist packages/*/build",lint:"eslint .",prepare:"husky install",prerelease:"./scripts/checkReleaseBranch.mjs && npm run lint && npm run test:force && npm run build:force",release:"lerna publish --no-private",test:"nx run-many --target=test --all --parallel","test:force":"nx run-many --target=test --all --parallel --skip-nx-cache","test:ci":"nx run-many --target=test:ci --all --parallel","test:ci:force":"nx run-many --target=test:ci --all --parallel --skip-nx-cache","test:types":"nx run-many --target=test:types --all --parallel","test:types:force":"nx run-many --target=test:types --all --parallel --skip-nx-cache"},husky:{hooks:{"pre-commit":"lint-staged"}},"lint-staged":{"*.{ts,js,mjs}":["eslint --cache --fix"]},resolutions:{"get-pkg-repo":"4.1.1","hosted-git-info":"^2.1.4"},dependencies:{"@babel/runtime":"^7.14.8","@pixi/app":"^7.1.1","@pixi/constants":"^7.1.1","@pixi/core":"^7.1.1","@pixi/display":"^7.1.1","@pixi/extensions":"^7.1.1","@pixi/graphics":"^7.1.1","@pixi/math":"^7.1.1","@pixi/mesh":"^7.1.1","@pixi/mesh-extras":"^7.1.1","@pixi/particle-container":"^7.1.1","@pixi/sprite":"^7.1.1","@pixi/sprite-animated":"^7.1.1","@pixi/sprite-tiling":"^7.1.1","@pixi/text":"^7.1.1","@pixi/text-bitmap":"^7.1.1","@pixi/ticker":"^7.1.1","@react-spring/animated":"^9.6.1","@react-spring/types":"^9.6.1",react:"^18.0.0","react-dom":"^18.0.0","react-reconciler":"0.29.0","react-spring":"^9.6.1"},devDependencies:{"@babel/cli":"^7.20.7","@babel/core":"^7.20.7","@babel/eslint-parser":"^7.19.1","@babel/plugin-transform-runtime":"^7.19.6","@babel/preset-env":"^7.20.2","@babel/preset-react":"^7.18.6","@nrwl/nx-cloud":"latest","@pixi/eslint-config":"^4.0.1","@rollup/plugin-alias":"^4.0.2","@rollup/plugin-babel":"^6.0.3","@rollup/plugin-commonjs":"^24.0.0","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.0.1","@rollup/plugin-replace":"^5.0.2","@rollup/plugin-terser":"^0.2.1","@rollup/plugin-typescript":"^10.0.1","@types/jest":"^29.2.4","@types/react":"17.0.15","@types/react-dom":"17.0.9","@types/react-reconciler":"0.28.2","babel-jest":"^29.3.1","babel-plugin-module-resolver":"4.1.0","cross-env":"^7.0.3",eslint:"^8.29.0","eslint-plugin-react":"^7.31.11",husky:"^8.0.2",jest:"^29.3.1","jest-environment-jsdom":"^29.3.1","jest-extended":"^3.2.0","jest-watch-typeahead":"^2.2.1",lerna:"^6.0.3","lint-staged":"^13.1.0",nx:"15.3.0",rimraf:"^3.0.2",rollup:"^3.7.0","rollup-plugin-filesize":"^9.1.2","rollup-plugin-visualizer":"^5.9.0","ts-jest":"^29.0.3","ts-node":"^10.9.1",typescript:"^4.9.4"}},Ix={},Jp={get exports(){return Ix},set exports(t){Ix=t}};(function(){var t,e,n,r,i,s;typeof performance<"u"&&performance!==null&&performance.now?Jp.exports=function(){return performance.now()}:typeof process<"u"&&process!==null&&process.hrtime?(Jp.exports=function(){return(t()-i)/1e6},e=process.hrtime,r=(t=function(){var o;return 1e9*(o=e())[0]+o[1]})(),s=1e9*process.uptime(),i=r-s):Date.now?(Jp.exports=function(){return Date.now()-n},n=Date.now()):(Jp.exports=function(){return new Date().getTime()-n},n=new Date().getTime())}).call(ez);var HT,mc={},Ol={};({get exports(){return mc},set exports(t){mc=t}}).exports=(HT||(HT=1,Ol.ConcurrentRoot=1,Ol.ContinuousEventPriority=4,Ol.DefaultEventPriority=16,Ol.DiscreteEventPriority=1,Ol.IdleEventPriority=536870912,Ol.LegacyRoot=0),Ol);var kz={};function kv(t,e){t.addChild&&(t.addChild(e),typeof e.didMount=="function"&&e.didMount(e,t))}function h3(t,e){var n,r,i;(n=t.willUnmount)===null||n===void 0||n.call(t,t,e),((r=t.config)===null||r===void 0?void 0:r.destroyChildren)!==!1&&(i=t.children)!==null&&i!==void 0&&i.length&&aa(t.children).forEach(function(s){h3(s,t)})}function GT(t,e){var n;h3(e,t),t.removeChild(e);var r=(n=e.config)!==null&&n!==void 0?n:{},i=r.destroy,s=i===void 0||i,o=r.destroyChildren,a=o===void 0||o,c=r.destroyTexture,h=c!==void 0&&c,d=r.destroyBaseTexture,m=d!==void 0&&d;s&&e.destroy({children:a,texture:h,baseTexture:m})}function WT(t,e,n){gn(e!==n,"pixi-react: PixiFiber cannot insert node before itself"),t.children.indexOf(e)!==-1&&t.removeChild(e);var r=t.getChildIndex(n);t.addChildAt(e,r)}var jT=null,As=Pz({getRootHostContext:function(){return kz},getChildHostContext:function(t){return t},getChildHostContextForEventComponent:function(t){return t},getPublicInstance:function(t){return t},getCurrentEventPriority:function(){return function(){var t,e;if(typeof window>"u")return mc.DefaultEventPriority;switch((t=window)===null||t===void 0||(e=t.event)===null||e===void 0?void 0:e.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return mc.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return mc.ContinuousEventPriority;default:return mc.DefaultEventPriority}}()},prepareForCommit:function(){return null},resetAfterCommit:function(){},createInstance:function(t){var e,n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,s=Ez[t];if(typeof s=="function"&&(e=s(i,r)),!e){var o=u3[t];o&&((e=o.create(r,{root:i})).didMount=o.didMount?o.didMount.bind(e):void 0,e.willUnmount=o.willUnmount?o.willUnmount.bind(e):void 0,e.applyProps=o.applyProps?o.applyProps.bind(e):void 0,e.config=o.config)}return e&&(e.__reactpixi={root:i},(typeof((n=e)===null||n===void 0?void 0:n.applyProps)=="function"?e.applyProps:Po)(e,{},r)),e},hideInstance:function(t){t.visible=!1},unhideInstance:function(t,e){var n=e==null||!e.hasOwnProperty("visible")||e.visible;t.visible=n},finalizeInitialChildren:function(t,e,n){return!1},prepareUpdate:function(t,e,n,r,i,s){return jT=function(o,a,c,h){var d=null;for(var m in c)!h.hasOwnProperty(m)&&c.hasOwnProperty(m)&&c[m]!==null&&(m===bx||(d||(d=[]),d.push(m,null)));for(var f in h){var y=h[f],v=c!==null?c[f]:void 0;!h.hasOwnProperty(f)||y===v||y===null&&v===null||f===bx||(d||(d=[]),d.push(f,y))}return d}(0,0,n,r)},shouldSetTextContent:function(t,e){return!1},shouldDeprioritizeSubtree:function(t,e){var n=e.alpha===void 0||e.alpha>0,r=e.renderable===void 0||e.renderable===!0,i=e.visible===void 0||e.visible===!0;return!(n&&r&&i)},createTextInstance:function(t,e,n){gn(!1,'pixi-react: Error trying to add text node "'.concat(t,'"'),"PixiFiber does not support text nodes as children of a Pixi component. To pass a string value to your component, use a property other than children. If you wish to display some text, you can use &lt;Text text={string} /&gt; instead.")},unhideTextInstance:function(t,e){},mountEventComponent:function(){},updateEventComponent:function(){},handleEventTarget:function(){},scheduleTimeout:setTimeout,cancelTimeout:clearTimeout,noTimeout:-1,warnsIfNotActing:!1,now:Ix,isPrimaryRenderer:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,supportsMicrotasks:!0,scheduleMicrotask:queueMicrotask,appendInitialChild:function(){for(var t,e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=kv.apply(null,r);return(t=r[0].__reactpixi)===null||t===void 0||(e=t.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendInitialChild"}),s},appendChild:function(){for(var t,e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=kv.apply(null,r);return(t=r[0].__reactpixi)===null||t===void 0||(e=t.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendChild"}),s},appendChildToContainer:function(){for(var t,e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=kv.apply(null,r);return(t=r[0].__reactpixi)===null||t===void 0||(e=t.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendChildToContainer"}),s},removeChild:function(){for(var t,e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=GT.apply(null,r);return(t=r[0].__reactpixi)===null||t===void 0||(e=t.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"removeChild"}),s},removeChildFromContainer:function(){for(var t,e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=GT.apply(null,r);return(t=r[0].__reactpixi)===null||t===void 0||(e=t.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"removeChildFromContainer"}),s},insertBefore:WT,insertInContainerBefore:function(){for(var t,e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=WT.apply(null,r);return(t=r[0].__reactpixi)===null||t===void 0||(e=t.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"insertInContainerBefore"}),s},commitUpdate:function(t,e,n,r,i){var s,o,a=t&&t.applyProps;typeof a!="function"&&(a=Po),(a(t,r,i)||jT)&&((s=t.__reactpixi)===null||s===void 0||(o=s.root)===null||o===void 0||o.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"commitUpdate"}))},commitMount:function(t,e,n,r,i){},commitTextUpdate:function(t,e,n){},resetTextContent:function(t){},clearContainer:function(t){},getFundamentalComponentInstance:function(t){throw new Error("Not yet implemented.")},mountFundamentalComponent:function(t){throw new Error("Not yet implemented.")},shouldUpdateFundamentalComponent:function(t){throw new Error("Not yet implemented.")},unmountFundamentalComponent:function(t){throw new Error("Not yet implemented.")},getInstanceFromNode:function(t){throw new Error("Not yet implemented.")},isOpaqueHydratingObject:function(t){throw new Error("Not yet implemented")},makeOpaqueHydratingObject:function(t){throw new Error("Not yet implemented.")},makeClientIdInDEV:function(t){throw new Error("Not yet implemented")},beforeActiveInstanceBlur:function(t){},afterActiveInstanceBlur:function(){},detachDeletedInstance:function(){},preparePortalMount:function(t){}}),Rz=c3.dependencies["react-dom"].replace(/[^0-9.]/g,""),Mz=c3.name;As.injectIntoDevTools({bundleType:0,version:Rz,rendererPackageName:Mz,findHostInstanceByFiber:As.findHostInstance});var tl=new Map;function d3(t){if(gn(nr.prototype.isPrototypeOf(t),"Invalid argument `container`, expected instance of `PIXI.Container`."),tl.has(t)){var e=tl.get(t).pixiFiberContainer;As.updateContainer(null,e,void 0,function(){tl.delete(t)})}}function f3(t){gn(nr.prototype.isPrototypeOf(t),"Invalid argument `container`, expected instance of `PIXI.Container`.");var e=tl.get(t);if(gn(!e,"Pixi React: createRoot should only be called once"),!e){var n=As.createContainer(t);e={pixiFiberContainer:n,reactRoot:{render:function(r){return As.updateContainer(r,n,void 0),As.getPublicRootInstance(n)},unmount:function(){d3(t),tl.delete(t)}}},tl.set(t,e)}return e.reactRoot}function Oz(t,e,n){var r;return console.warn("Pixi React Deprecation Warning: render is deprecated, use createRoot instead"),n!==void 0&&console.warn("Pixi React Deprecation Warning: render callback no longer exists in React 18"),tl.has(e)?r=tl.get(e).reactRoot:r=f3(e),r.render(t)}function Dz(t){d3(t)}function ef(){return ef=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ef.apply(this,arguments)}function Nz(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Lz(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,o3(r.key),r)}}function Wo(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xg(t,e){return xg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},xg(t,e)}function Fz(t,e){if(e&&(Ai(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Wo(t)}function wg(t){return wg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},wg(t)}var py=rt.createContext(null),p3=py.Provider,m3=py.Consumer,Bz=function(t){var e=rt.forwardRef(function(n,r){return rt.createElement(m3,null,function(i){return rt.createElement(t,ef({},n,{ref:r,app:i}))})});return e.displayName="withPIXIApp(".concat(t.displayName||t.name,")"),e};function Uz(t){var e=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=wg(t);if(e){var i=wg(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Fz(this,n)}}function VT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function em(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VT(Object(n),!0).forEach(function(r){xn(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var XT=function(){},g3={width:jt.number,height:jt.number,onMount:jt.func,onUnmount:jt.func,raf:jt.bool,renderOnComponentChange:jt.bool,children:jt.node,options:jt.shape({autoStart:jt.bool,width:jt.number,height:jt.number,useContextAlpha:jt.bool,backgroundAlpha:jt.number,autoDensity:jt.bool,antialias:jt.bool,preserveDrawingBuffer:jt.bool,resolution:jt.number,forceCanvas:jt.bool,backgroundColor:jt.number,clearBeforeRender:jt.bool,powerPreference:jt.string,sharedTicker:jt.bool,sharedLoader:jt.bool,resizeTo:function(t,e){var n=t[e];n&&gn(n===window||n instanceof HTMLElement,"Invalid prop `resizeTo` of type ".concat(Ai(n),", expect `window` or an `HTMLElement`."))},view:function(t,e,n){var r=t[e];r&&gn(r instanceof HTMLCanvasElement,"Invalid prop `view` of type ".concat(Ai(r),", supplied to ").concat(n,", expected `<canvas> Element`"))}})},zz={width:800,height:600,onMount:XT,onUnmount:XT,raf:!0,renderOnComponentChange:!0},Ax=function(t){(function(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(o&&o.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),o&&xg(s,o)})(i,rt.Component);var e,n,r=Uz(i);function i(){var s;Nz(this,i);for(var o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];return xn(Wo(s=r.call.apply(r,[this].concat(a))),"_canvas",null),xn(Wo(s),"_mediaQuery",null),xn(Wo(s),"_ticker",null),xn(Wo(s),"_needsUpdate",!0),xn(Wo(s),"app",null),xn(Wo(s),"updateSize",function(){var h=s.props,d=h.width,m=h.height,f=h.options;f!=null&&f.resolution||(s.app.renderer.resolution=window.devicePixelRatio,s.resetInteractionManager()),s.app.renderer.resize(d,m)}),xn(Wo(s),"needsRenderUpdate",function(){s._needsUpdate=!0}),xn(Wo(s),"renderStage",function(){var h=s.props,d=h.renderOnComponentChange;!h.raf&&d&&s._needsUpdate&&(s._needsUpdate=!1,s.app.renderer.render(s.app.stage))}),s}return e=i,(n=[{key:"componentDidMount",value:function(){var s=this.props,o=s.onMount,a=s.width,c=s.height,h=s.options,d=s.raf,m=s.renderOnComponentChange;this.app=new xf(em(em({width:a,height:c,view:this._canvas},h),{},{autoDensity:(h==null?void 0:h.autoDensity)!==!1})),this.app.ticker.autoStart=!1,this.app.ticker[d?"start":"stop"](),this.app.stage.__reactpixi={root:this.app.stage},this.mountNode=As.createContainer(this.app.stage),As.updateContainer(this.getChildren(),this.mountNode,this),o(this.app),h!=null&&h.autoDensity&&window.matchMedia&&(h==null?void 0:h.resolution)===void 0&&(this._mediaQuery=window.matchMedia("(-webkit-min-device-pixel-ratio: 1.3), (min-resolution: 120dpi)"),this._mediaQuery.addListener(this.updateSize)),m&&!d&&(this._ticker=new mn,this._ticker.autoStart=!0,this._ticker.add(this.renderStage),this.app.stage.on("__REACT_PIXI_REQUEST_RENDER__",this.needsRenderUpdate)),this.updateSize(),this.renderStage()}},{key:"componentDidUpdate",value:function(s,o,a){var c,h=this.props,d=h.width,m=h.height,f=h.raf,y=h.renderOnComponentChange,v=h.options;(v==null?void 0:v.resolution)!==void 0&&(s==null?void 0:s.options.resolution)!==(v==null?void 0:v.resolution)&&(this.app.renderer.resolution=v.resolution,this.resetInteractionManager()),s.height===m&&s.width===d&&((c=s.options)===null||c===void 0?void 0:c.resolution)===(v==null?void 0:v.resolution)||this.updateSize(),s.raf!==f&&this.app.ticker[f?"start":"stop"](),As.updateContainer(this.getChildren(),this.mountNode,this),s.width===d&&s.height===m&&s.raf===f&&s.renderOnComponentChange===y&&s.options===v||(this._needsUpdate=!0,this.renderStage())}},{key:"resetInteractionManager",value:function(){var s=this.app.renderer.plugins.interaction;s!=null&&s.resolution&&(s.resolution=this.app.renderer.resolution)}},{key:"getChildren",value:function(){var s=this.props.children;return rt.createElement(p3,{value:this.app},s)}},{key:"componentDidCatch",value:function(s,o){console.error("Error occurred in `Stage`."),console.error(s),console.error(o)}},{key:"componentWillUnmount",value:function(){this.props.onUnmount(this.app),this._ticker&&(this._ticker.remove(this.renderStage),this._ticker.destroy()),this.app.stage.off("__REACT_PIXI_REQUEST_RENDER__",this.needsRenderUpdate),As.updateContainer(null,this.mountNode,this),this._mediaQuery&&(this._mediaQuery.removeListener(this.updateSize),this._mediaQuery=null),this.app.destroy()}},{key:"render",value:function(){var s,o,a=this,c=this.props.options;return c&&c.view?(gn(c.view instanceof HTMLCanvasElement,"options.view needs to be a `HTMLCanvasElement`"),null):rt.createElement("canvas",ef({},(s=this.props,o=[].concat(aa(Object.keys(g3)),aa(Object.keys(Ex))),Object.keys(s).filter(function(h){return!o.includes(h)}).reduce(function(h,d){return em(em({},h),{},xn({},d,s[d]))},{})),{ref:function(h){return a._canvas=h}}))}}])&&Lz(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();Ax.propTypes=g3,Ax.defaultProps=zz;var $z=Ax;function y3(){var t=pe.useContext(py);return gn(t instanceof xf,"No Context found with `%s`. Make sure to wrap component with `%s`","PIXI.Application","AppProvider"),t}function Hz(t){var e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],n=y3();gn(typeof t=="function","`useTick` needs a callback function."),gn(n instanceof xf,"No Context found with `%s`. Make sure to wrap component with `%s`","PIXI.Application","AppProvider");var r=pe.useRef(null);pe.useEffect(function(){r.current=t},[t]),pe.useEffect(function(){if(e){var i=function(s){return r.current.apply(n.ticker,[s,n.ticker])};return n.ticker.add(i),function(){n.ticker&&n.ticker.remove(i)}}},[e])}function Gz(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Px(t,e,n){return Px=Gz()?Reflect.construct.bind():function(r,i,s){var o=[null];o.push.apply(o,i);var a=new(Function.bind.apply(r,o));return s&&xg(a,s.prototype),a},Px.apply(null,arguments)}var Wz=["children","apply"];function qT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function tm(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qT(Object(n),!0).forEach(function(r){xn(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var jz=function(t,e){gn(Ai(e)==="object","Second argument needs to be an indexed object with { prop: Filter }");var n=Object.keys(e),r=function(i){var s=i.children,o=i.apply,a=ml(i,Wz),c=pe.useRef(pe.useMemo(function(){return n.map(function(m){var f,y=(a==null||(f=a[m])===null||f===void 0?void 0:f.construct)||[];return Px(e[m],aa(y))})},[n])),h=pe.useMemo(function(){return n.reduce(function(m,f,y){return tm(tm({},m),{},xn({},f,c.current[y]))},{})},[n]),d=pe.useMemo(function(){return Object.keys(a).filter(l3(a3(n))).reduce(function(m,f){return tm(tm({},m),{},xn({},f,a[f]))},{})},[a,n]);return n.forEach(function(m,f){return Object.assign(c.current[f],a[m])}),o&&function(){for(var m=arguments.length,f=new Array(m),y=0;y<m;y++)f[y]=arguments[y];return f.every(function(v){return typeof v=="function"})}(o)&&o.call(t,h),rt.createElement(t,ef({},d,{filters:c.current}),s)};return r.displayName="FilterWrapper",r.propTypes={children:jt.node,apply:jt.func},r},Vz=ui.BitmapText,Xz=ui.Container,qz=ui.Graphics,Yz=ui.NineSlicePlane,Qz=ui.ParticleContainer,Kz=ui.Sprite,Zz=ui.AnimatedSprite,Jz=ui.Text,e5=ui.TilingSprite,t5=ui.SimpleMesh,n5=ui.SimpleRope;const r5=Object.freeze(Object.defineProperty({__proto__:null,AnimatedSprite:Zz,AppConsumer:m3,AppContext:py,AppProvider:p3,BitmapText:Vz,Container:Xz,Graphics:qz,NineSlicePlane:Yz,ParticleContainer:Qz,PixiComponent:Tz,PixiFiber:As,SimpleMesh:t5,SimpleRope:n5,Sprite:Kz,Stage:$z,TYPES:ui,Text:Jz,TilingSprite:e5,applyDefaultProps:Po,createRoot:f3,eventHandlers:vg,render:Oz,unmountComponentAtNode:Dz,useApp:y3,useTick:Hz,withFilters:jz,withPixiApp:Bz},Symbol.toStringTag,{value:"Module"})),i5=dC(r5);fy.exports=i5;var hr=fy.exports;const s5=({textureUrl:t,spritesheetData:e,x:n,y:r,orientation:i,isMoving:s=!1,isThinking:o=!1,isSpeaking:a=!1,emoji:c="",isViewer:h=!1,speed:d=.1,onClick:m,name:f,speechText:y,speechColor:v})=>{const[S,C]=pe.useState();pe.useEffect(()=>{(async()=>{const P=new Jd(Ge.from(t,{scaleMode:ns.NEAREST}),e);await P.parse(),C(P)})()},[]);const _=Math.floor(i/90),b=["right","down","left","up"][_],w=pe.useRef(null);return pe.useEffect(()=>{var I;s&&((I=w.current)==null||I.play())},[b,s]),S?Re.jsxs(hr.Container,{x:n,y:r,interactive:!0,pointerdown:m,cursor:"pointer",sortableChildren:!0,children:[o&&Re.jsx(hr.Text,{x:-20,y:-10,scale:{x:-.8,y:.8},text:"",anchor:{x:.5,y:.5}}),a&&Re.jsx(hr.Text,{x:18,y:-10,scale:.8,text:"",anchor:{x:.5,y:.5}}),h&&Re.jsx(o5,{}),Re.jsx(hr.AnimatedSprite,{zIndex:10,ref:w,isPlaying:s,textures:S.animations[b],animationSpeed:d,anchor:{x:.5,y:.5}}),c&&Re.jsx(hr.Text,{zIndex:15,x:0,y:-24,scale:{x:-.8,y:.8},text:c,anchor:{x:.5,y:.5}}),y&&(()=>{const D=new Ns({fill:0,fontSize:12,stroke:16777215,strokeThickness:0,wordWrap:!0,wordWrapWidth:164,breakWords:!0}),V=er.measureText(y,D),G=Math.max(12+6*2,V.height+6*2);return Re.jsxs(hr.Container,{x:0,y:-36,zIndex:20,children:[Re.jsx(hr.Graphics,{draw:F=>{F.clear(),F.beginFill(16777215,.95),F.lineStyle(2,v??0,.6),F.drawRoundedRect(-180/2,-G,180,G,6),F.endFill()}}),Re.jsx(hr.Text,{zIndex:21,x:0,y:-G/2,text:y,anchor:{x:.5,y:.5},style:D})]})})(),f&&Re.jsx(hr.Text,{zIndex:30,x:0,y:-16,text:f,anchor:{x:.5,y:.5},style:new Ns({fill:16777215,fontSize:10,stroke:0,strokeThickness:3})})]}):null};function o5(){const t=pe.useCallback(e=>{e.clear(),e.beginFill(16776971,.5),e.drawRoundedRect(-10,10,20,10,100),e.endFill()},[]);return Re.jsx(hr.Graphics,{draw:t})}var So=[],Xi=[],a5=Uint8Array,Rv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Wu=0,l5=Rv.length;Wu<l5;++Wu)So[Wu]=Rv[Wu],Xi[Rv.charCodeAt(Wu)]=Wu;Xi["-".charCodeAt(0)]=62;Xi["_".charCodeAt(0)]=63;function u5(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function c5(t,e,n){return(e+n)*3/4-n}function tf(t){var e,n=u5(t),r=n[0],i=n[1],s=new a5(c5(t,r,i)),o=0,a=i>0?r-4:r,c;for(c=0;c<a;c+=4)e=Xi[t.charCodeAt(c)]<<18|Xi[t.charCodeAt(c+1)]<<12|Xi[t.charCodeAt(c+2)]<<6|Xi[t.charCodeAt(c+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=Xi[t.charCodeAt(c)]<<2|Xi[t.charCodeAt(c+1)]>>4,s[o++]=e&255),i===1&&(e=Xi[t.charCodeAt(c)]<<10|Xi[t.charCodeAt(c+1)]<<4|Xi[t.charCodeAt(c+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function h5(t){return So[t>>18&63]+So[t>>12&63]+So[t>>6&63]+So[t&63]}function d5(t,e,n){for(var r,i=[],s=e;s<n;s+=3)r=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),i.push(h5(r));return i.join("")}function nf(t){for(var e,n=t.length,r=n%3,i=[],s=16383,o=0,a=n-r;o<a;o+=s)i.push(d5(t,o,o+s>a?a:o+s));return r===1?(e=t[n-1],i.push(So[e>>2]+So[e<<4&63]+"==")):r===2&&(e=(t[n-2]<<8)+t[n-1],i.push(So[e>>10]+So[e>>4&63]+So[e<<2&63]+"=")),i.join("")}function Zi(t){if(t===void 0)return{};if(!v3(t))throw new Error(`The arguments to a Convex function must be an object. Received: ${t}`);return t}function f5(t){if(typeof t>"u")throw new Error("Client created with undefined deployment address. If you used an environment variable, check that it's set.");if(typeof t!="string")throw new Error(`Invalid deployment address: found ${t}".`);if(!(t.startsWith("http:")||t.startsWith("https:")))throw new Error(`Invalid deployment address: Must start with "https://" or "http://". Found "${t}".`);try{new URL(t)}catch{throw new Error(`Invalid deployment address: "${t}" is not a valid URL. If you believe this URL is correct, use the \`skipConvexDeploymentUrlCheck\` option to bypass this.`)}if(t.endsWith(".convex.site"))throw new Error(`Invalid deployment address: "${t}" ends with .convex.site, which is used for HTTP Actions. Convex deployment URLs typically end with .convex.cloud? If you believe this URL is correct, use the \`skipConvexDeploymentUrlCheck\` option to bypass this.`)}function v3(t){var i;const e=typeof t=="object",n=Object.getPrototypeOf(t),r=n===null||n===Object.prototype||((i=n==null?void 0:n.constructor)==null?void 0:i.name)==="Object";return e&&r}const x3=!0,qc=BigInt("-9223372036854775808"),a_=BigInt("9223372036854775807"),kx=BigInt("0"),p5=BigInt("8"),m5=BigInt("256");function w3(t){return Number.isNaN(t)||!Number.isFinite(t)||Object.is(t,-0)}function g5(t){t<kx&&(t-=qc+qc);let e=t.toString(16);e.length%2===1&&(e="0"+e);const n=new Uint8Array(new ArrayBuffer(8));let r=0;for(const i of e.match(/.{2}/g).reverse())n.set([parseInt(i,16)],r++),t>>=p5;return nf(n)}function y5(t){const e=tf(t);if(e.byteLength!==8)throw new Error(`Received ${e.byteLength} bytes, expected 8 for $integer`);let n=kx,r=kx;for(const i of e)n+=BigInt(i)*m5**r,r++;return n>a_&&(n+=qc+qc),n}function v5(t){if(t<qc||a_<t)throw new Error(`BigInt ${t} does not fit into a 64-bit signed integer.`);const e=new ArrayBuffer(8);return new DataView(e).setBigInt64(0,t,!0),nf(new Uint8Array(e))}function x5(t){const e=tf(t);if(e.byteLength!==8)throw new Error(`Received ${e.byteLength} bytes, expected 8 for $integer`);return new DataView(e.buffer).getBigInt64(0,!0)}const w5=DataView.prototype.setBigInt64?v5:g5,_5=DataView.prototype.getBigInt64?x5:y5,YT=1024;function Rx(t){if(t.length>YT)throw new Error(`Field name ${t} exceeds maximum field name length ${YT}.`);if(t.startsWith("$"))throw new Error(`Field name ${t} starts with a '$', which is reserved.`);for(let e=0;e<t.length;e+=1){const n=t.charCodeAt(e);if(n<32||n>=127)throw new Error(`Field name ${t} has invalid character '${t[e]}': Field names can only contain non-control ASCII characters`)}}function Nr(t){if(t===null||typeof t=="boolean"||typeof t=="number"||typeof t=="string")return t;if(Array.isArray(t))return t.map(r=>Nr(r));if(typeof t!="object")throw new Error(`Unexpected type of ${t}`);const e=Object.entries(t);if(e.length===1){const r=e[0][0];if(r==="$bytes"){if(typeof t.$bytes!="string")throw new Error(`Malformed $bytes field on ${t}`);return tf(t.$bytes).buffer}if(r==="$integer"){if(typeof t.$integer!="string")throw new Error(`Malformed $integer field on ${t}`);return _5(t.$integer)}if(r==="$float"){if(typeof t.$float!="string")throw new Error(`Malformed $float field on ${t}`);const i=tf(t.$float);if(i.byteLength!==8)throw new Error(`Received ${i.byteLength} bytes, expected 8 for $float`);const o=new DataView(i.buffer).getFloat64(0,x3);if(!w3(o))throw new Error(`Float ${o} should be encoded as a number`);return o}if(r==="$set")throw new Error("Received a Set which is no longer supported as a Convex type.");if(r==="$map")throw new Error("Received a Map which is no longer supported as a Convex type.")}const n={};for(const[r,i]of Object.entries(t))Rx(r),n[r]=Nr(i);return n}function kc(t){return JSON.stringify(t,(e,n)=>n===void 0?"undefined":typeof n=="bigint"?`${n.toString()}n`:n)}function rf(t,e,n,r){var o;if(t===void 0){const a=n&&` (present at path ${n} in original object ${kc(e)})`;throw new Error(`undefined is not a valid Convex value${a}. To learn about Convex's supported types, see https://docs.convex.dev/using/types.`)}if(t===null)return t;if(typeof t=="bigint"){if(t<qc||a_<t)throw new Error(`BigInt ${t} does not fit into a 64-bit signed integer.`);return{$integer:w5(t)}}if(typeof t=="number")if(w3(t)){const a=new ArrayBuffer(8);return new DataView(a).setFloat64(0,t,x3),{$float:nf(new Uint8Array(a))}}else return t;if(typeof t=="boolean"||typeof t=="string")return t;if(t instanceof ArrayBuffer)return{$bytes:nf(new Uint8Array(t))};if(Array.isArray(t))return t.map((a,c)=>rf(a,e,n+`[${c}]`,!1));if(t instanceof Set)throw new Error(Mv(n,"Set",[...t],e));if(t instanceof Map)throw new Error(Mv(n,"Map",[...t],e));if(!v3(t)){const a=(o=t==null?void 0:t.constructor)==null?void 0:o.name,c=a?`${a} `:"";throw new Error(Mv(n,c,t,e))}const i={},s=Object.entries(t);s.sort(([a,c],[h,d])=>a===h?0:a<h?-1:1);for(const[a,c]of s)c!==void 0?(Rx(a),i[a]=rf(c,e,n+`.${a}`,!1)):r&&(Rx(a),i[a]=_3(c,e,n+`.${a}`));return i}function Mv(t,e,n,r){return t?`${e}${kc(n)} is not a supported Convex type (present at path ${t} in original object ${kc(r)}). To learn about Convex's supported types, see https://docs.convex.dev/using/types.`:`${e}${kc(n)} is not a supported Convex type.`}function _3(t,e,n){if(t===void 0)return{$undefined:null};if(e===void 0)throw new Error(`Programming error. Current value is ${kc(t)} but original value is undefined`);return rf(t,e,n,!1)}function $t(t){return rf(t,t,"",!1)}function l_(t){return _3(t,t,"")}function S5(t){return rf(t,t,"",!0)}var b5=Object.defineProperty,E5=(t,e,n)=>e in t?b5(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Jt=(t,e,n)=>E5(t,typeof e!="symbol"?e+"":e,n);class Oi{constructor({isOptional:e}){Jt(this,"type"),Jt(this,"fieldPaths"),Jt(this,"isOptional"),Jt(this,"isConvexValidator"),this.isOptional=e,this.isConvexValidator=!0}get optional(){return this.isOptional==="optional"}}class u_ extends Oi{constructor({isOptional:e,tableName:n}){super({isOptional:e}),Jt(this,"tableName"),Jt(this,"kind","id"),this.tableName=n}get json(){return{type:"id",tableName:this.tableName}}asOptional(){return new u_({isOptional:"optional",tableName:this.tableName})}}class _g extends Oi{constructor(){super(...arguments),Jt(this,"kind","float64")}get json(){return{type:"number"}}asOptional(){return new _g({isOptional:"optional"})}}class Sg extends Oi{constructor(){super(...arguments),Jt(this,"kind","int64")}get json(){return{type:"bigint"}}asOptional(){return new Sg({isOptional:"optional"})}}class c_ extends Oi{constructor(){super(...arguments),Jt(this,"kind","boolean")}get json(){return{type:this.kind}}asOptional(){return new c_({isOptional:"optional"})}}class h_ extends Oi{constructor(){super(...arguments),Jt(this,"kind","bytes")}get json(){return{type:this.kind}}asOptional(){return new h_({isOptional:"optional"})}}class d_ extends Oi{constructor(){super(...arguments),Jt(this,"kind","string")}get json(){return{type:this.kind}}asOptional(){return new d_({isOptional:"optional"})}}class f_ extends Oi{constructor(){super(...arguments),Jt(this,"kind","null")}get json(){return{type:this.kind}}asOptional(){return new f_({isOptional:"optional"})}}class p_ extends Oi{constructor(){super(...arguments),Jt(this,"kind","any")}get json(){return{type:this.kind}}asOptional(){return new p_({isOptional:"optional"})}}class m_ extends Oi{constructor({isOptional:e,fields:n}){super({isOptional:e}),Jt(this,"fields"),Jt(this,"kind","object"),this.fields=n}get json(){return{type:this.kind,value:globalThis.Object.fromEntries(globalThis.Object.entries(this.fields).map(([e,n])=>[e,{fieldType:n.json,optional:n.isOptional==="optional"}]))}}asOptional(){return new m_({isOptional:"optional",fields:this.fields})}}class g_ extends Oi{constructor({isOptional:e,value:n}){super({isOptional:e}),Jt(this,"value"),Jt(this,"kind","literal"),this.value=n}get json(){return{type:this.kind,value:$t(this.value)}}asOptional(){return new g_({isOptional:"optional",value:this.value})}}class y_ extends Oi{constructor({isOptional:e,element:n}){super({isOptional:e}),Jt(this,"element"),Jt(this,"kind","array"),this.element=n}get json(){return{type:this.kind,value:this.element.json}}asOptional(){return new y_({isOptional:"optional",element:this.element})}}class v_ extends Oi{constructor({isOptional:e,key:n,value:r}){if(super({isOptional:e}),Jt(this,"key"),Jt(this,"value"),Jt(this,"kind","record"),n.isOptional==="optional")throw new Error("Record validator cannot have optional keys");if(r.isOptional==="optional")throw new Error("Record validator cannot have optional values");this.key=n,this.value=r}get json(){return{type:this.kind,keys:this.key.json,values:{fieldType:this.value.json,optional:!1}}}asOptional(){return new v_({isOptional:"optional",key:this.key,value:this.value})}}class x_ extends Oi{constructor({isOptional:e,members:n}){super({isOptional:e}),Jt(this,"members"),Jt(this,"kind","union"),this.members=n}get json(){return{type:this.kind,value:this.members.map(e=>e.json)}}asOptional(){return new x_({isOptional:"optional",members:this.members})}}function S3(t){return!!t.isConvexValidator}function b3(t){return S3(t)?t:z.object(t)}const z={id:t=>new u_({isOptional:"required",tableName:t}),null:()=>new f_({isOptional:"required"}),number:()=>new _g({isOptional:"required"}),float64:()=>new _g({isOptional:"required"}),bigint:()=>new Sg({isOptional:"required"}),int64:()=>new Sg({isOptional:"required"}),boolean:()=>new c_({isOptional:"required"}),string:()=>new d_({isOptional:"required"}),bytes:()=>new h_({isOptional:"required"}),literal:t=>new g_({isOptional:"required",value:t}),array:t=>new y_({isOptional:"required",element:t}),object:t=>new m_({isOptional:"required",fields:t}),record:(t,e)=>new v_({isOptional:"required",key:t,value:e}),union:(...t)=>new x_({isOptional:"required",members:t}),any:()=>new p_({isOptional:"required"}),optional:t=>t.asOptional()};var T5=Object.defineProperty,C5=(t,e,n)=>e in t?T5(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ov=(t,e,n)=>C5(t,typeof e!="symbol"?e+"":e,n),QT,KT;const I5=Symbol.for("ConvexError");class bg extends(KT=Error,QT=I5,KT){constructor(e){super(typeof e=="string"?e:kc(e)),Ov(this,"name","ConvexError"),Ov(this,"data"),Ov(this,QT,!0),this.data=e}}const w_=z.object({x:z.number(),y:z.number()}),A5=z.object({dx:z.number(),dy:z.number()}),P5=z.array(z.array(z.number()));function nm(t,e){return E3(t[e])}function Dl(t){return[t.position.x,t.position.y,t.facing.dx,t.facing.dy,t.t]}function E3(t){return{position:{x:t[0],y:t[1]},facing:{dx:t[2],dy:t[3]},t:t[4]}}function Ji(t,e){const n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)}function __(t,e){return t.x==e.x&&t.y==e.y}function rm(t,e){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)}function T3(t,e){if(t.length<2)throw new Error(`Invalid path: ${JSON.stringify(t)}`);const n=nm(t,0);if(e<n.t)return{position:n.position,facing:n.facing,velocity:0};const r=nm(t,t.length-1);if(r.t<e)return{position:r.position,facing:r.facing,velocity:0};for(let i=0;i<t.length-1;i++){const s=nm(t,i),o=nm(t,i+1);if(s.t<=e&&e<=o.t){const a=(e-s.t)/(o.t-s.t);return{position:{x:s.position.x+a*(o.position.x-s.position.x),y:s.position.y+a*(o.position.y-s.position.y)},facing:s.facing,velocity:Ji(s.position,o.position)/(o.t-s.t)}}}throw new Error("Timestamp checks not exhaustive?")}const Eg=1e-4;function k5(t,e){const n=e.x-t.x,r=e.y-t.y;return{dx:n,dy:r}}function C3(t){return Math.sqrt(t.dx*t.dx+t.dy*t.dy)}function R5(t){const e=C3(t);if(e<Eg)return null;const{dx:n,dy:r}=t;return{dx:n/e,dy:r/e}}function M5(t){if(Math.sqrt(t.dx*t.dx+t.dy*t.dy)<Eg)throw new Error(`Can't compute the orientation of too small vector ${JSON.stringify(t)}`);const e=2*Math.PI;return(Math.atan2(t.dy,t.dx)+e)%e/e*360}function O5(t){if(t.map(Dl),t.length<=2)return t.map(Dl);const e=[Dl(t[0])];let n=t[0],r;for(const i of t.slice(1)){if(!r){r=i;continue}const{position:s,facing:o}=T3([Dl(n),Dl(i)],r.t),a=Ji(s,r.position)<Eg,c={dx:o.dx-r.facing.dx,dy:o.dy-r.facing.dy},h=C3(c)<Eg;if(a&&h){r=i;continue}e.push(Dl(r)),n=r,r=i}return r&&e.push(Dl(r)),e}const D5={frames:{left:{frame:{x:0,y:32,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},left2:{frame:{x:32,y:32,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},left3:{frame:{x:64,y:32,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},right:{frame:{x:0,y:64,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},right2:{frame:{x:32,y:64,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},right3:{frame:{x:64,y:64,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},up:{frame:{x:0,y:96,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},up2:{frame:{x:32,y:96,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},up3:{frame:{x:64,y:96,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},down:{frame:{x:0,y:0,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},down2:{frame:{x:32,y:0,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},down3:{frame:{x:64,y:0,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}}},meta:{scale:"1"},animations:{left:["left","left2","left3"],right:["right","right2","right3"],up:["up","up2","up3"],down:["down","down2","down3"]}},N5={frames:{down:{frame:{x:96,y:0,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},down2:{frame:{x:128,y:0,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},down3:{frame:{x:160,y:0,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},left:{frame:{x:96,y:32,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},left2:{frame:{x:128,y:32,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},left3:{frame:{x:160,y:32,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},right:{frame:{x:96,y:64,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},right2:{frame:{x:128,y:64,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},right3:{frame:{x:160,y:64,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},up:{frame:{x:96,y:96,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},up2:{frame:{x:128,y:96,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},up3:{frame:{x:160,y:96,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}}},meta:{scale:"1"},animations:{left:["left","left2","left3"],right:["right","right2","right3"],up:["up","up2","up3"],down:["down","down2","down3"]}},L5={frames:{down:{frame:{x:192,y:0,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},down2:{frame:{x:224,y:0,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},down3:{frame:{x:256,y:0,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},left:{frame:{x:192,y:32,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},left2:{frame:{x:224,y:32,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},left3:{frame:{x:256,y:32,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},right:{frame:{x:192,y:65,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},right2:{frame:{x:224,y:65,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},right3:{frame:{x:256,y:65,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},up:{frame:{x:192,y:96,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},up2:{frame:{x:224,y:96,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},up3:{frame:{x:256,y:96,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}}},meta:{scale:"1"},animations:{left:["left","left2","left3"],right:["right","right2","right3"],up:["up","up2","up3"],down:["down","down2","down3"]}},F5={frames:{down:{frame:{x:288,y:0,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},down2:{frame:{x:320,y:0,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},down3:{frame:{x:352,y:0,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},left:{frame:{x:288,y:32,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},left2:{frame:{x:320,y:32,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},left3:{frame:{x:352,y:32,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},right:{frame:{x:288,y:64,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},right2:{frame:{x:320,y:64,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},right3:{frame:{x:352,y:64,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},up:{frame:{x:288,y:96,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},up2:{frame:{x:320,y:96,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},up3:{frame:{x:352,y:96,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}}},meta:{scale:"1"},animations:{left:["left","left2","left3"],right:["right","right2","right3"],up:["up","up2","up3"],down:["down","down2","down3"]}},B5={frames:{down:{frame:{x:0,y:128,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},down2:{frame:{x:32,y:128,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},down3:{frame:{x:64,y:128,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},left:{frame:{x:0,y:160,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},left2:{frame:{x:32,y:160,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},left3:{frame:{x:64,y:160,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},right:{frame:{x:0,y:192,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},right2:{frame:{x:32,y:192,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},right3:{frame:{x:64,y:192,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},up:{frame:{x:0,y:224,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},up2:{frame:{x:32,y:224,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},up3:{frame:{x:64,y:224,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}}},meta:{scale:"1"},animations:{left:["left","left2","left3"],right:["right","right2","right3"],up:["up","up2","up3"],down:["down","down2","down3"]}},U5={frames:{down:{frame:{x:96,y:128,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},down2:{frame:{x:128,y:128,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},down3:{frame:{x:160,y:128,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},left:{frame:{x:96,y:160,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},left2:{frame:{x:128,y:160,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},left3:{frame:{x:160,y:160,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},right:{frame:{x:96,y:192,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},right2:{frame:{x:128,y:192,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},right3:{frame:{x:160,y:192,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},up:{frame:{x:96,y:224,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},up2:{frame:{x:128,y:224,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},up3:{frame:{x:160,y:224,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}}},meta:{scale:"1"},animations:{left:["left","left2","left3"],right:["right","right2","right3"],up:["up","up2","up3"],down:["down","down2","down3"]}},z5={frames:{down:{frame:{x:192,y:128,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},down2:{frame:{x:224,y:128,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},down3:{frame:{x:256,y:128,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},left:{frame:{x:192,y:160,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},left2:{frame:{x:224,y:160,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},left3:{frame:{x:256,y:160,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},right:{frame:{x:192,y:192,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},right2:{frame:{x:224,y:192,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},right3:{frame:{x:256,y:192,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},up:{frame:{x:192,y:224,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},up2:{frame:{x:224,y:224,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},up3:{frame:{x:256,y:224,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}}},meta:{scale:"1"},animations:{left:["left","left2","left3"],right:["right","right2","right3"],up:["up","up2","up3"],down:["down","down2","down3"]}},$5={frames:{down:{frame:{x:288,y:128,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},down2:{frame:{x:320,y:128,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},down3:{frame:{x:352,y:128,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},left:{frame:{x:288,y:160,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},left2:{frame:{x:320,y:160,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},left3:{frame:{x:352,y:160,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},right:{frame:{x:288,y:192,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},right2:{frame:{x:320,y:192,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},right3:{frame:{x:352,y:192,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},up:{frame:{x:288,y:224,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},up2:{frame:{x:320,y:224,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},up3:{frame:{x:352,y:224,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}}},meta:{scale:"1"},animations:{left:["left","left2","left3"],right:["right","right2","right3"],up:["up","up2","up3"],down:["down","down2","down3"]}},I3=[{name:"f1",textureUrl:"/ai-town/assets/32x32folk.png",spritesheetData:D5,speed:.1},{name:"f2",textureUrl:"/ai-town/assets/32x32folk.png",spritesheetData:N5,speed:.1},{name:"f3",textureUrl:"/ai-town/assets/32x32folk.png",spritesheetData:L5,speed:.1},{name:"f4",textureUrl:"/ai-town/assets/32x32folk.png",spritesheetData:F5,speed:.1},{name:"f5",textureUrl:"/ai-town/assets/32x32folk.png",spritesheetData:B5,speed:.1},{name:"f6",textureUrl:"/ai-town/assets/32x32folk.png",spritesheetData:U5,speed:.1},{name:"f7",textureUrl:"/ai-town/assets/32x32folk.png",spritesheetData:z5,speed:.1},{name:"f8",textureUrl:"/ai-town/assets/32x32folk.png",spritesheetData:$5,speed:.1}],H5=.75;function A3(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=A3(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function Va(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=A3(t))&&(r&&(r+=" "),r+=e);return r}const bd=t=>typeof t=="number"&&!isNaN(t),du=t=>typeof t=="string",si=t=>typeof t=="function",km=t=>du(t)||si(t)?t:null,Dv=t=>pe.isValidElement(t)||du(t)||si(t)||bd(t);function G5(t,e,n){n===void 0&&(n=300);const{scrollHeight:r,style:i}=t;requestAnimationFrame(()=>{i.minHeight="initial",i.height=r+"px",i.transition=`all ${n}ms`,requestAnimationFrame(()=>{i.height="0",i.padding="0",i.margin="0",setTimeout(e,n)})})}function my(t){let{enter:e,exit:n,appendPosition:r=!1,collapse:i=!0,collapseDuration:s=300}=t;return function(o){let{children:a,position:c,preventExitTransition:h,done:d,nodeRef:m,isIn:f}=o;const y=r?`${e}--${c}`:e,v=r?`${n}--${c}`:n,S=pe.useRef(0);return pe.useLayoutEffect(()=>{const C=m.current,_=y.split(" "),b=w=>{w.target===m.current&&(C.dispatchEvent(new Event("d")),C.removeEventListener("animationend",b),C.removeEventListener("animationcancel",b),S.current===0&&w.type!=="animationcancel"&&C.classList.remove(..._))};C.classList.add(..._),C.addEventListener("animationend",b),C.addEventListener("animationcancel",b)},[]),pe.useEffect(()=>{const C=m.current,_=()=>{C.removeEventListener("animationend",_),i?G5(C,d,s):d()};f||(h?_():(S.current=1,C.className+=` ${v}`,C.addEventListener("animationend",_)))},[f]),rt.createElement(rt.Fragment,null,a)}}function ZT(t,e){return t!=null?{content:t.content,containerId:t.props.containerId,id:t.props.toastId,theme:t.props.theme,type:t.props.type,data:t.props.data||{},isLoading:t.props.isLoading,icon:t.props.icon,status:e}:{}}const qi={list:new Map,emitQueue:new Map,on(t,e){return this.list.has(t)||this.list.set(t,[]),this.list.get(t).push(e),this},off(t,e){if(e){const n=this.list.get(t).filter(r=>r!==e);return this.list.set(t,n),this}return this.list.delete(t),this},cancelEmit(t){const e=this.emitQueue.get(t);return e&&(e.forEach(clearTimeout),this.emitQueue.delete(t)),this},emit(t){this.list.has(t)&&this.list.get(t).forEach(e=>{const n=setTimeout(()=>{e(...[].slice.call(arguments,1))},0);this.emitQueue.has(t)||this.emitQueue.set(t,[]),this.emitQueue.get(t).push(n)})}},im=t=>{let{theme:e,type:n,...r}=t;return rt.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:e==="colored"?"currentColor":`var(--toastify-icon-color-${n})`,...r})},Nv={info:function(t){return rt.createElement(im,{...t},rt.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(t){return rt.createElement(im,{...t},rt.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(t){return rt.createElement(im,{...t},rt.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(t){return rt.createElement(im,{...t},rt.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return rt.createElement("div",{className:"Toastify__spinner"})}};function W5(t){const[,e]=pe.useReducer(y=>y+1,0),[n,r]=pe.useState([]),i=pe.useRef(null),s=pe.useRef(new Map).current,o=y=>n.indexOf(y)!==-1,a=pe.useRef({toastKey:1,displayedToast:0,count:0,queue:[],props:t,containerId:null,isToastActive:o,getToast:y=>s.get(y)}).current;function c(y){let{containerId:v}=y;const{limit:S}=a.props;!S||v&&a.containerId!==v||(a.count-=a.queue.length,a.queue=[])}function h(y){r(v=>y==null?[]:v.filter(S=>S!==y))}function d(){const{toastContent:y,toastProps:v,staleId:S}=a.queue.shift();f(y,v,S)}function m(y,v){let{delay:S,staleId:C,..._}=v;if(!Dv(y)||function(q){return!i.current||a.props.enableMultiContainer&&q.containerId!==a.props.containerId||s.has(q.toastId)&&q.updateId==null}(_))return;const{toastId:b,updateId:w,data:I}=_,{props:P}=a,N=()=>h(b),O=w==null;O&&a.count++;const D={...P,style:P.toastStyle,key:a.toastKey++,...Object.fromEntries(Object.entries(_).filter(q=>{let[W,H]=q;return H!=null})),toastId:b,updateId:w,data:I,closeToast:N,isIn:!1,className:km(_.className||P.toastClassName),bodyClassName:km(_.bodyClassName||P.bodyClassName),progressClassName:km(_.progressClassName||P.progressClassName),autoClose:!_.isLoading&&(V=_.autoClose,G=P.autoClose,V===!1||bd(V)&&V>0?V:G),deleteToast(){const q=ZT(s.get(b),"removed");s.delete(b),qi.emit(4,q);const W=a.queue.length;if(a.count=b==null?a.count-a.displayedToast:a.count-1,a.count<0&&(a.count=0),W>0){const H=b==null?a.props.limit:1;if(W===1||H===1)a.displayedToast++,d();else{const se=H>W?W:H;a.displayedToast=se;for(let ue=0;ue<se;ue++)d()}}else e()}};var V,G;D.iconOut=function(q){let{theme:W,type:H,isLoading:se,icon:ue}=q,K=null;const $={theme:W,type:H};return ue===!1||(si(ue)?K=ue($):pe.isValidElement(ue)?K=pe.cloneElement(ue,$):du(ue)||bd(ue)?K=ue:se?K=Nv.spinner():(Q=>Q in Nv)(H)&&(K=Nv[H]($))),K}(D),si(_.onOpen)&&(D.onOpen=_.onOpen),si(_.onClose)&&(D.onClose=_.onClose),D.closeButton=P.closeButton,_.closeButton===!1||Dv(_.closeButton)?D.closeButton=_.closeButton:_.closeButton===!0&&(D.closeButton=!Dv(P.closeButton)||P.closeButton);let F=y;pe.isValidElement(y)&&!du(y.type)?F=pe.cloneElement(y,{closeToast:N,toastProps:D,data:I}):si(y)&&(F=y({closeToast:N,toastProps:D,data:I})),P.limit&&P.limit>0&&a.count>P.limit&&O?a.queue.push({toastContent:F,toastProps:D,staleId:C}):bd(S)?setTimeout(()=>{f(F,D,C)},S):f(F,D,C)}function f(y,v,S){const{toastId:C}=v;S&&s.delete(S);const _={content:y,props:v};s.set(C,_),r(b=>[...b,C].filter(w=>w!==S)),qi.emit(4,ZT(_,_.props.updateId==null?"added":"updated"))}return pe.useEffect(()=>(a.containerId=t.containerId,qi.cancelEmit(3).on(0,m).on(1,y=>i.current&&h(y)).on(5,c).emit(2,a),()=>{s.clear(),qi.emit(3,a)}),[]),pe.useEffect(()=>{a.props=t,a.isToastActive=o,a.displayedToast=n.length}),{getToastToRender:function(y){const v=new Map,S=Array.from(s.values());return t.newestOnTop&&S.reverse(),S.forEach(C=>{const{position:_}=C.props;v.has(_)||v.set(_,[]),v.get(_).push(C)}),Array.from(v,C=>y(C[0],C[1]))},containerRef:i,isToastActive:o}}function JT(t){return t.targetTouches&&t.targetTouches.length>=1?t.targetTouches[0].clientX:t.clientX}function e2(t){return t.targetTouches&&t.targetTouches.length>=1?t.targetTouches[0].clientY:t.clientY}function j5(t){const[e,n]=pe.useState(!1),[r,i]=pe.useState(!1),s=pe.useRef(null),o=pe.useRef({start:0,x:0,y:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,boundingRect:null,didMove:!1}).current,a=pe.useRef(t),{autoClose:c,pauseOnHover:h,closeToast:d,onClick:m,closeOnClick:f}=t;function y(I){if(t.draggable){I.nativeEvent.type==="touchstart"&&I.nativeEvent.preventDefault(),o.didMove=!1,document.addEventListener("mousemove",_),document.addEventListener("mouseup",b),document.addEventListener("touchmove",_),document.addEventListener("touchend",b);const P=s.current;o.canCloseOnClick=!0,o.canDrag=!0,o.boundingRect=P.getBoundingClientRect(),P.style.transition="",o.x=JT(I.nativeEvent),o.y=e2(I.nativeEvent),t.draggableDirection==="x"?(o.start=o.x,o.removalDistance=P.offsetWidth*(t.draggablePercent/100)):(o.start=o.y,o.removalDistance=P.offsetHeight*(t.draggablePercent===80?1.5*t.draggablePercent:t.draggablePercent/100))}}function v(I){if(o.boundingRect){const{top:P,bottom:N,left:O,right:D}=o.boundingRect;I.nativeEvent.type!=="touchend"&&t.pauseOnHover&&o.x>=O&&o.x<=D&&o.y>=P&&o.y<=N?C():S()}}function S(){n(!0)}function C(){n(!1)}function _(I){const P=s.current;o.canDrag&&P&&(o.didMove=!0,e&&C(),o.x=JT(I),o.y=e2(I),o.delta=t.draggableDirection==="x"?o.x-o.start:o.y-o.start,o.start!==o.x&&(o.canCloseOnClick=!1),P.style.transform=`translate${t.draggableDirection}(${o.delta}px)`,P.style.opacity=""+(1-Math.abs(o.delta/o.removalDistance)))}function b(){document.removeEventListener("mousemove",_),document.removeEventListener("mouseup",b),document.removeEventListener("touchmove",_),document.removeEventListener("touchend",b);const I=s.current;if(o.canDrag&&o.didMove&&I){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance)return i(!0),void t.closeToast();I.style.transition="transform 0.2s, opacity 0.2s",I.style.transform=`translate${t.draggableDirection}(0)`,I.style.opacity="1"}}pe.useEffect(()=>{a.current=t}),pe.useEffect(()=>(s.current&&s.current.addEventListener("d",S,{once:!0}),si(t.onOpen)&&t.onOpen(pe.isValidElement(t.children)&&t.children.props),()=>{const I=a.current;si(I.onClose)&&I.onClose(pe.isValidElement(I.children)&&I.children.props)}),[]),pe.useEffect(()=>(t.pauseOnFocusLoss&&(document.hasFocus()||C(),window.addEventListener("focus",S),window.addEventListener("blur",C)),()=>{t.pauseOnFocusLoss&&(window.removeEventListener("focus",S),window.removeEventListener("blur",C))}),[t.pauseOnFocusLoss]);const w={onMouseDown:y,onTouchStart:y,onMouseUp:v,onTouchEnd:v};return c&&h&&(w.onMouseEnter=C,w.onMouseLeave=S),f&&(w.onClick=I=>{m&&m(I),o.canCloseOnClick&&d()}),{playToast:S,pauseToast:C,isRunning:e,preventExitTransition:r,toastRef:s,eventHandlers:w}}function P3(t){let{closeToast:e,theme:n,ariaLabel:r="close"}=t;return rt.createElement("button",{className:`Toastify__close-button Toastify__close-button--${n}`,type:"button",onClick:i=>{i.stopPropagation(),e(i)},"aria-label":r},rt.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},rt.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function V5(t){let{delay:e,isRunning:n,closeToast:r,type:i="default",hide:s,className:o,style:a,controlledProgress:c,progress:h,rtl:d,isIn:m,theme:f}=t;const y=s||c&&h===0,v={...a,animationDuration:`${e}ms`,animationPlayState:n?"running":"paused",opacity:y?0:1};c&&(v.transform=`scaleX(${h})`);const S=Va("Toastify__progress-bar",c?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${f}`,`Toastify__progress-bar--${i}`,{"Toastify__progress-bar--rtl":d}),C=si(o)?o({rtl:d,type:i,defaultClassName:S}):Va(S,o);return rt.createElement("div",{role:"progressbar","aria-hidden":y?"true":"false","aria-label":"notification timer",className:C,style:v,[c&&h>=1?"onTransitionEnd":"onAnimationEnd"]:c&&h<1?null:()=>{m&&r()}})}const X5=t=>{const{isRunning:e,preventExitTransition:n,toastRef:r,eventHandlers:i}=j5(t),{closeButton:s,children:o,autoClose:a,onClick:c,type:h,hideProgressBar:d,closeToast:m,transition:f,position:y,className:v,style:S,bodyClassName:C,bodyStyle:_,progressClassName:b,progressStyle:w,updateId:I,role:P,progress:N,rtl:O,toastId:D,deleteToast:V,isIn:G,isLoading:F,iconOut:q,closeOnClick:W,theme:H}=t,se=Va("Toastify__toast",`Toastify__toast-theme--${H}`,`Toastify__toast--${h}`,{"Toastify__toast--rtl":O},{"Toastify__toast--close-on-click":W}),ue=si(v)?v({rtl:O,position:y,type:h,defaultClassName:se}):Va(se,v),K=!!N||!a,$={closeToast:m,type:h,theme:H};let Q=null;return s===!1||(Q=si(s)?s($):pe.isValidElement(s)?pe.cloneElement(s,$):P3($)),rt.createElement(f,{isIn:G,done:V,position:y,preventExitTransition:n,nodeRef:r},rt.createElement("div",{id:D,onClick:c,className:ue,...i,style:S,ref:r},rt.createElement("div",{...G&&{role:P},className:si(C)?C({type:h}):Va("Toastify__toast-body",C),style:_},q!=null&&rt.createElement("div",{className:Va("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!F})},q),rt.createElement("div",null,o)),Q,rt.createElement(V5,{...I&&!K?{key:`pb-${I}`}:{},rtl:O,theme:H,delay:a,isRunning:e,isIn:G,closeToast:m,hide:d,type:h,style:w,className:b,controlledProgress:K,progress:N||0})))},gy=function(t,e){return e===void 0&&(e=!1),{enter:`Toastify--animate Toastify__${t}-enter`,exit:`Toastify--animate Toastify__${t}-exit`,appendPosition:e}},q5=my(gy("bounce",!0));my(gy("slide",!0));my(gy("zoom"));my(gy("flip"));const t2=pe.forwardRef((t,e)=>{const{getToastToRender:n,containerRef:r,isToastActive:i}=W5(t),{className:s,style:o,rtl:a,containerId:c}=t;function h(d){const m=Va("Toastify__toast-container",`Toastify__toast-container--${d}`,{"Toastify__toast-container--rtl":a});return si(s)?s({position:d,rtl:a,defaultClassName:m}):Va(m,km(s))}return pe.useEffect(()=>{e&&(e.current=r.current)},[]),rt.createElement("div",{ref:r,className:"Toastify",id:c},n((d,m)=>{const f=m.length?{...o}:{...o,pointerEvents:"none"};return rt.createElement("div",{className:h(d),style:f,key:`container-${d}`},m.map((y,v)=>{let{content:S,props:C}=y;return rt.createElement(X5,{...C,isIn:i(C.toastId),style:{...C.style,"--nth":v+1,"--len":m.length},key:`toast-${C.key}`},S)}))}))});t2.displayName="ToastContainer",t2.defaultProps={position:"top-right",transition:q5,autoClose:5e3,closeButton:P3,pauseOnHover:!0,pauseOnFocusLoss:!0,closeOnClick:!0,draggable:!0,draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};let Lv,$l=new Map,sd=[],Y5=1;function k3(){return""+Y5++}function Q5(t){return t&&(du(t.toastId)||bd(t.toastId))?t.toastId:k3()}function Ed(t,e){return $l.size>0?qi.emit(0,t,e):sd.push({content:t,options:e}),e.toastId}function Tg(t,e){return{...e,type:e&&e.type||t,toastId:Q5(e)}}function sm(t){return(e,n)=>Ed(e,Tg(t,n))}function Vt(t,e){return Ed(t,Tg("default",e))}Vt.loading=(t,e)=>Ed(t,Tg("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e})),Vt.promise=function(t,e,n){let r,{pending:i,error:s,success:o}=e;i&&(r=du(i)?Vt.loading(i,n):Vt.loading(i.render,{...n,...i}));const a={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},c=(d,m,f)=>{if(m==null)return void Vt.dismiss(r);const y={type:d,...a,...n,data:f},v=du(m)?{render:m}:m;return r?Vt.update(r,{...y,...v}):Vt(v.render,{...y,...v}),f},h=si(t)?t():t;return h.then(d=>c("success",o,d)).catch(d=>c("error",s,d)),h},Vt.success=sm("success"),Vt.info=sm("info"),Vt.error=sm("error"),Vt.warning=sm("warning"),Vt.warn=Vt.warning,Vt.dark=(t,e)=>Ed(t,Tg("default",{theme:"dark",...e})),Vt.dismiss=t=>{$l.size>0?qi.emit(1,t):sd=sd.filter(e=>t!=null&&e.options.toastId!==t)},Vt.clearWaitingQueue=function(t){return t===void 0&&(t={}),qi.emit(5,t)},Vt.isActive=t=>{let e=!1;return $l.forEach(n=>{n.isToastActive&&n.isToastActive(t)&&(e=!0)}),e},Vt.update=function(t,e){e===void 0&&(e={}),setTimeout(()=>{const n=function(r,i){let{containerId:s}=i;const o=$l.get(s||Lv);return o&&o.getToast(r)}(t,e);if(n){const{props:r,content:i}=n,s={delay:100,...r,...e,toastId:e.toastId||t,updateId:k3()};s.toastId!==t&&(s.staleId=t);const o=s.render||i;delete s.render,Ed(o,s)}},0)},Vt.done=t=>{Vt.update(t,{progress:1})},Vt.onChange=t=>(qi.on(4,t),()=>{qi.off(4,t)}),Vt.POSITION={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",TOP_CENTER:"top-center",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",BOTTOM_CENTER:"bottom-center"},Vt.TYPE={INFO:"info",SUCCESS:"success",WARNING:"warning",ERROR:"error",DEFAULT:"default"},qi.on(2,t=>{Lv=t.containerId||t,$l.set(Lv,t),sd.forEach(e=>{qi.emit(0,e.content,e.options)}),sd=[]}).on(3,t=>{$l.delete(t.containerId||t),$l.size===0&&qi.off(0).off(1).off(5)});const Ls="1.19.2";var K5=Object.defineProperty,Z5=(t,e,n)=>e in t?K5(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,n2=(t,e,n)=>Z5(t,typeof e!="symbol"?e+"":e,n);const J5="color:rgb(0, 145, 255)";function R3(t){switch(t){case"query":return"Q";case"mutation":return"M";case"action":return"A";case"any":return"?"}}class e6{constructor(e){n2(this,"_onLogLineFuncs"),n2(this,"_verbose"),this._onLogLineFuncs={},this._verbose=e.verbose}addLogLineListener(e){let n=Math.random().toString(36).substring(2,15);for(let r=0;r<10&&this._onLogLineFuncs[n]!==void 0;r++)n=Math.random().toString(36).substring(2,15);return this._onLogLineFuncs[n]=e,()=>{delete this._onLogLineFuncs[n]}}logVerbose(...e){if(this._verbose)for(const n of Object.values(this._onLogLineFuncs))n("debug",`${new Date().toISOString()}`,...e)}log(...e){for(const n of Object.values(this._onLogLineFuncs))n("info",...e)}warn(...e){for(const n of Object.values(this._onLogLineFuncs))n("warn",...e)}error(...e){for(const n of Object.values(this._onLogLineFuncs))n("error",...e)}}function M3(t){const e=new e6(t);return e.addLogLineListener((n,...r)=>{switch(n){case"debug":console.debug(...r);break;case"info":console.log(...r);break;case"warn":console.warn(...r);break;case"error":console.error(...r);break;default:console.log(...r)}}),e}function Cg(t,e,n,r,i){const s=R3(n);if(typeof i=="object"&&(i=`ConvexError ${JSON.stringify(i.errorData,null,2)}`),e==="info"){const o=i.match(/^\[.*?\] /);if(o===null){t.error(`[CONVEX ${s}(${r})] Could not parse console.log`);return}const a=i.slice(1,o[0].length-2),c=i.slice(o[0].length);t.log(`%c[CONVEX ${s}(${r})] [${a}]`,J5,c)}else t.error(`[CONVEX ${s}(${r})] ${i}`)}function t6(t,e){const n=`[CONVEX FATAL ERROR] ${e}`;return t.error(n),new Error(n)}function gc(t,e,n){return`[CONVEX ${R3(t)}(${e})] ${n.errorMessage}
  Called by client`}function Mx(t,e){return e.data=t.errorData,e}function Ig(t){const e=t.split(":");let n,r;return e.length===1?(n=e[0],r="default"):(n=e.slice(0,e.length-1).join(":"),r=e[e.length-1]),n.endsWith(".js")&&(n=n.slice(0,-3)),`${n}:${r}`}function ru(t,e){return JSON.stringify({udfPath:Ig(t),args:$t(e)})}var n6=Object.defineProperty,r6=(t,e,n)=>e in t?n6(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,po=(t,e,n)=>r6(t,typeof e!="symbol"?e+"":e,n);class i6{constructor(){po(this,"nextQueryId"),po(this,"querySetVersion"),po(this,"querySet"),po(this,"queryIdToToken"),po(this,"identityVersion"),po(this,"auth"),po(this,"outstandingQueriesOlderThanRestart"),po(this,"outstandingAuthOlderThanRestart"),po(this,"paused"),po(this,"pendingQuerySetModifications"),this.nextQueryId=0,this.querySetVersion=0,this.identityVersion=0,this.querySet=new Map,this.queryIdToToken=new Map,this.outstandingQueriesOlderThanRestart=new Set,this.outstandingAuthOlderThanRestart=!1,this.paused=!1,this.pendingQuerySetModifications=new Map}hasSyncedPastLastReconnect(){return this.outstandingQueriesOlderThanRestart.size===0&&!this.outstandingAuthOlderThanRestart}markAuthCompletion(){this.outstandingAuthOlderThanRestart=!1}subscribe(e,n,r,i){const s=Ig(e),o=ru(s,n),a=this.querySet.get(o);if(a!==void 0)return a.numSubscribers+=1,{queryToken:o,modification:null,unsubscribe:()=>this.removeSubscriber(o)};{const c=this.nextQueryId++,h={id:c,canonicalizedUdfPath:s,args:n,numSubscribers:1,journal:r,componentPath:i};this.querySet.set(o,h),this.queryIdToToken.set(c,o);const d=this.querySetVersion,m=this.querySetVersion+1,f={type:"Add",queryId:c,udfPath:s,args:[$t(n)],journal:r,componentPath:i};return this.paused?this.pendingQuerySetModifications.set(c,f):this.querySetVersion=m,{queryToken:o,modification:{type:"ModifyQuerySet",baseVersion:d,newVersion:m,modifications:[f]},unsubscribe:()=>this.removeSubscriber(o)}}}transition(e){for(const n of e.modifications)switch(n.type){case"QueryUpdated":case"QueryFailed":{this.outstandingQueriesOlderThanRestart.delete(n.queryId);const r=n.journal;if(r!==void 0){const i=this.queryIdToToken.get(n.queryId);i!==void 0&&(this.querySet.get(i).journal=r)}break}case"QueryRemoved":{this.outstandingQueriesOlderThanRestart.delete(n.queryId);break}default:throw new Error(`Invalid modification ${n.type}`)}}queryId(e,n){const r=Ig(e),i=ru(r,n),s=this.querySet.get(i);return s!==void 0?s.id:null}isCurrentOrNewerAuthVersion(e){return e>=this.identityVersion}setAuth(e){this.auth={tokenType:"User",value:e};const n=this.identityVersion;return this.paused||(this.identityVersion=n+1),{type:"Authenticate",baseVersion:n,...this.auth}}setAdminAuth(e,n){const r={tokenType:"Admin",value:e,impersonating:n};this.auth=r;const i=this.identityVersion;return this.paused||(this.identityVersion=i+1),{type:"Authenticate",baseVersion:i,...r}}clearAuth(){this.auth=void 0,this.markAuthCompletion();const e=this.identityVersion;return this.paused||(this.identityVersion=e+1),{type:"Authenticate",tokenType:"None",baseVersion:e}}hasAuth(){return!!this.auth}isNewAuth(e){var n;return((n=this.auth)==null?void 0:n.value)!==e}queryPath(e){const n=this.queryIdToToken.get(e);return n?this.querySet.get(n).canonicalizedUdfPath:null}queryArgs(e){const n=this.queryIdToToken.get(e);return n?this.querySet.get(n).args:null}queryToken(e){return this.queryIdToToken.get(e)??null}queryJournal(e){var n;return(n=this.querySet.get(e))==null?void 0:n.journal}restart(e){this.unpause(),this.outstandingQueriesOlderThanRestart.clear();const n=[];for(const s of this.querySet.values()){const o={type:"Add",queryId:s.id,udfPath:s.canonicalizedUdfPath,args:[$t(s.args)],journal:s.journal,componentPath:s.componentPath};n.push(o),e.has(s.id)||this.outstandingQueriesOlderThanRestart.add(s.id)}this.querySetVersion=1;const r={type:"ModifyQuerySet",baseVersion:0,newVersion:1,modifications:n};if(!this.auth)return this.identityVersion=0,[r,void 0];this.outstandingAuthOlderThanRestart=!0;const i={type:"Authenticate",baseVersion:0,...this.auth};return this.identityVersion=1,[r,i]}pause(){this.paused=!0}resume(){const e=this.pendingQuerySetModifications.size>0?{type:"ModifyQuerySet",baseVersion:this.querySetVersion,newVersion:++this.querySetVersion,modifications:Array.from(this.pendingQuerySetModifications.values())}:void 0,n=this.auth!==void 0?{type:"Authenticate",baseVersion:this.identityVersion++,...this.auth}:void 0;return this.unpause(),[e,n]}unpause(){this.paused=!1,this.pendingQuerySetModifications.clear()}removeSubscriber(e){const n=this.querySet.get(e);if(n.numSubscribers>1)return n.numSubscribers-=1,null;{this.querySet.delete(e),this.queryIdToToken.delete(n.id),this.outstandingQueriesOlderThanRestart.delete(n.id);const r=this.querySetVersion,i=this.querySetVersion+1,s={type:"Remove",queryId:n.id};return this.paused?this.pendingQuerySetModifications.has(n.id)?this.pendingQuerySetModifications.delete(n.id):this.pendingQuerySetModifications.set(n.id,s):this.querySetVersion=i,{type:"ModifyQuerySet",baseVersion:r,newVersion:i,modifications:[s]}}}}var s6=Object.defineProperty,o6=(t,e,n)=>e in t?s6(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,r2=(t,e,n)=>o6(t,typeof e!="symbol"?e+"":e,n);class a6{constructor(e){this.logger=e,r2(this,"inflightRequests"),r2(this,"requestsOlderThanRestart"),this.inflightRequests=new Map,this.requestsOlderThanRestart=new Set}request(e,n){return new Promise(i=>{const s=n?"Requested":"NotSent";this.inflightRequests.set(e.requestId,{message:e,status:{status:s,requestedAt:new Date,onResult:i}})})}onResponse(e){const n=this.inflightRequests.get(e.requestId);if(n===void 0||n.status.status==="Completed")return null;const r=n.message.type==="Mutation"?"mutation":"action",i=n.message.udfPath;for(const c of e.logLines)Cg(this.logger,"info",r,i,c);const s=n.status;let o,a;if(e.success)o={success:!0,logLines:e.logLines,value:Nr(e.result)},a=()=>s.onResult(o);else{const c=e.result,{errorData:h}=e;Cg(this.logger,"error",r,i,c),o={success:!1,errorMessage:c,errorData:h!==void 0?Nr(h):void 0,logLines:e.logLines},a=()=>s.onResult(o)}return e.type==="ActionResponse"||!e.success?(a(),this.inflightRequests.delete(e.requestId),this.requestsOlderThanRestart.delete(e.requestId),{requestId:e.requestId,result:o}):(n.status={status:"Completed",result:o,ts:e.ts,onResolve:a},null)}removeCompleted(e){const n=new Map;for(const[r,i]of this.inflightRequests.entries()){const s=i.status;s.status==="Completed"&&s.ts.lessThanOrEqual(e)&&(s.onResolve(),n.set(r,s.result),this.inflightRequests.delete(r),this.requestsOlderThanRestart.delete(r))}return n}restart(){this.requestsOlderThanRestart=new Set(this.inflightRequests.keys());const e=[];for(const[n,r]of this.inflightRequests){if(r.status.status==="NotSent"){r.status.status="Requested",e.push(r.message);continue}if(r.message.type==="Mutation")e.push(r.message);else{if(this.inflightRequests.delete(n),this.requestsOlderThanRestart.delete(n),r.status.status==="Completed")throw new Error("Action should never be in 'Completed' state");r.status.onResult({success:!1,errorMessage:"Connection lost while action was in flight",logLines:[]})}}return e}resume(){const e=[];for(const[,n]of this.inflightRequests)if(n.status.status==="NotSent"){n.status.status="Requested",e.push(n.message);continue}return e}hasIncompleteRequests(){for(const e of this.inflightRequests.values())if(e.status.status==="Requested")return!0;return!1}hasInflightRequests(){return this.inflightRequests.size>0}hasSyncedPastLastReconnect(){return this.requestsOlderThanRestart.size===0}timeOfOldestInflightRequest(){if(this.inflightRequests.size===0)return null;let e=Date.now();for(const n of this.inflightRequests.values())n.status.status!=="Completed"&&n.status.requestedAt.getTime()<e&&(e=n.status.requestedAt.getTime());return new Date(e)}}const sf=Symbol.for("functionName"),l6=Symbol.for("toReferencePath");function u6(t){return t[l6]??null}function c6(t){return t.startsWith("function://")}function yy(t){let e;if(typeof t=="string")c6(t)?e={functionHandle:t}:e={name:t};else if(t[sf])e={name:t[sf]};else{const n=u6(t);if(!n)throw new Error(`${t} is not a functionReference`);e={reference:n}}return e}function Ci(t){const e=yy(t);if(e.name===void 0)throw e.functionHandle!==void 0?new Error(`Expected function reference like "api.file.func" or "internal.file.func", but received function handle ${e.functionHandle}`):e.reference!==void 0?new Error(`Expected function reference in the current component like "api.file.func" or "internal.file.func", but received reference ${e.reference}`):new Error(`Expected function reference like "api.file.func" or "internal.file.func", but received ${JSON.stringify(e)}`);if(typeof t=="string")return t;const n=t[sf];if(!n)throw new Error(`${t} is not a functionReference`);return n}function O3(t){return{[sf]:t}}function D3(t=[]){const e={get(n,r){if(typeof r=="string"){const i=[...t,r];return D3(i)}else if(r===sf){if(t.length<2){const o=["api",...t].join(".");throw new Error(`API path is expected to be of the form \`api.moduleName.functionName\`. Found: \`${o}\``)}const i=t.slice(0,-1).join("/"),s=t[t.length-1];return s==="default"?i:i+":"+s}else return r===Symbol.toStringTag?"FunctionReference":void 0}};return new Proxy({},e)}const h6=D3();var d6=Object.defineProperty,f6=(t,e,n)=>e in t?d6(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ag=(t,e,n)=>f6(t,typeof e!="symbol"?e+"":e,n);class of{constructor(e){Ag(this,"queryResults"),Ag(this,"modifiedQueries"),this.queryResults=e,this.modifiedQueries=[]}getQuery(e,...n){const r=Zi(n[0]),i=Ci(e),s=this.queryResults.get(ru(i,r));if(s!==void 0)return of.queryValue(s.result)}getAllQueries(e){const n=[],r=Ci(e);for(const i of this.queryResults.values())i.udfPath===Ig(r)&&n.push({args:i.args,value:of.queryValue(i.result)});return n}setQuery(e,n,r){const i=Zi(n),s=Ci(e),o=ru(s,i);let a;r===void 0?a=void 0:a={success:!0,value:r,logLines:[]};const c={udfPath:s,args:i,result:a};this.queryResults.set(o,c),this.modifiedQueries.push(o)}static queryValue(e){if(e!==void 0)return e.success?e.value:void 0}}class p6{constructor(){Ag(this,"queryResults"),Ag(this,"optimisticUpdates"),this.queryResults=new Map,this.optimisticUpdates=[]}ingestQueryResultsFromServer(e,n){this.optimisticUpdates=this.optimisticUpdates.filter(o=>!n.has(o.mutationId));const r=this.queryResults;this.queryResults=new Map(e);const i=new of(this.queryResults);for(const o of this.optimisticUpdates)o.update(i);const s=[];for(const[o,a]of this.queryResults){const c=r.get(o);(c===void 0||c.result!==a.result)&&s.push(o)}return s}applyOptimisticUpdate(e,n){this.optimisticUpdates.push({update:e,mutationId:n});const r=new of(this.queryResults);return e(r),r.modifiedQueries}queryResult(e){const n=this.queryResults.get(e);if(n===void 0)return;const r=n.result;if(r!==void 0){if(r.success)return r.value;throw r.errorData!==void 0?Mx(r,new bg(gc("query",n.udfPath,r))):new Error(gc("query",n.udfPath,r))}}hasQueryResult(e){return this.queryResults.get(e)!==void 0}queryLogs(e){var r;const n=this.queryResults.get(e);return(r=n==null?void 0:n.result)==null?void 0:r.logLines}}var m6=Object.defineProperty,g6=(t,e,n)=>e in t?m6(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Fv=(t,e,n)=>g6(t,typeof e!="symbol"?e+"":e,n);class Ei{constructor(e,n){Fv(this,"low"),Fv(this,"high"),Fv(this,"__isUnsignedLong__"),this.low=e|0,this.high=n|0,this.__isUnsignedLong__=!0}static isLong(e){return(e&&e.__isUnsignedLong__)===!0}static fromBytesLE(e){return new Ei(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24)}toBytesLE(){const e=this.high,n=this.low;return[n&255,n>>>8&255,n>>>16&255,n>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]}static fromNumber(e){return isNaN(e)||e<0?i2:e>=y6?v6:new Ei(e%Td|0,e/Td|0)}toString(){return(BigInt(this.high)*BigInt(Td)+BigInt(this.low)).toString()}equals(e){return Ei.isLong(e)||(e=Ei.fromValue(e)),this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low}notEquals(e){return!this.equals(e)}comp(e){return Ei.isLong(e)||(e=Ei.fromValue(e)),this.equals(e)?0:e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1}lessThanOrEqual(e){return this.comp(e)<=0}static fromValue(e){return typeof e=="number"?Ei.fromNumber(e):new Ei(e.low,e.high)}}const i2=new Ei(0,0),s2=65536,Td=s2*s2,y6=Td*Td,v6=new Ei(-1,-1);var x6=Object.defineProperty,w6=(t,e,n)=>e in t?x6(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,om=(t,e,n)=>w6(t,typeof e!="symbol"?e+"":e,n);class o2{constructor(e,n){om(this,"version"),om(this,"remoteQuerySet"),om(this,"queryPath"),om(this,"logger"),this.version={querySet:0,ts:Ei.fromNumber(0),identity:0},this.remoteQuerySet=new Map,this.queryPath=e,this.logger=n}transition(e){const n=e.startVersion;if(this.version.querySet!==n.querySet||this.version.ts.notEquals(n.ts)||this.version.identity!==n.identity)throw new Error(`Invalid start version: ${n.ts.toString()}:${n.querySet}`);for(const r of e.modifications)switch(r.type){case"QueryUpdated":{const i=this.queryPath(r.queryId);if(i)for(const o of r.logLines)Cg(this.logger,"info","query",i,o);const s=Nr(r.value??null);this.remoteQuerySet.set(r.queryId,{success:!0,value:s,logLines:r.logLines});break}case"QueryFailed":{const i=this.queryPath(r.queryId);if(i)for(const o of r.logLines)Cg(this.logger,"info","query",i,o);const{errorData:s}=r;this.remoteQuerySet.set(r.queryId,{success:!1,errorMessage:r.errorMessage,errorData:s!==void 0?Nr(s):void 0,logLines:r.logLines});break}case"QueryRemoved":{this.remoteQuerySet.delete(r.queryId);break}default:throw new Error(`Invalid modification ${r.type}`)}this.version=e.endVersion}remoteQueryResults(){return this.remoteQuerySet}timestamp(){return this.version.ts}}function Bv(t){const e=tf(t);return Ei.fromBytesLE(Array.from(e))}function _6(t){const e=new Uint8Array(t.toBytesLE());return nf(e)}function S6(t){switch(t.type){case"FatalError":case"AuthError":case"ActionResponse":case"Ping":return{...t};case"MutationResponse":return t.success?{...t,ts:Bv(t.ts)}:{...t};case"Transition":return{...t,startVersion:{...t.startVersion,ts:Bv(t.startVersion.ts)},endVersion:{...t.endVersion,ts:Bv(t.endVersion.ts)}}}}function b6(t){switch(t.type){case"Authenticate":case"ModifyQuerySet":case"Mutation":case"Action":case"Event":return{...t};case"Connect":return t.maxObservedTimestamp!==void 0?{...t,maxObservedTimestamp:_6(t.maxObservedTimestamp)}:{...t,maxObservedTimestamp:void 0}}}var E6=Object.defineProperty,T6=(t,e,n)=>e in t?E6(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ti=(t,e,n)=>T6(t,typeof e!="symbol"?e+"":e,n);const C6=1e3,I6=1001,A6=1005,P6=4040;class k6{constructor(e,n,r,i){ti(this,"socket"),ti(this,"connectionCount"),ti(this,"lastCloseReason"),ti(this,"initialBackoff"),ti(this,"maxBackoff"),ti(this,"retries"),ti(this,"serverInactivityThreshold"),ti(this,"reconnectDueToServerInactivityTimeout"),ti(this,"uri"),ti(this,"onOpen"),ti(this,"onResume"),ti(this,"onMessage"),ti(this,"webSocketConstructor"),ti(this,"logger"),this.webSocketConstructor=r,this.socket={state:"disconnected"},this.connectionCount=0,this.lastCloseReason="InitialConnect",this.initialBackoff=100,this.maxBackoff=16e3,this.retries=0,this.serverInactivityThreshold=3e4,this.reconnectDueToServerInactivityTimeout=null,this.uri=e,this.onOpen=n.onOpen,this.onResume=n.onResume,this.onMessage=n.onMessage,this.logger=i,this.connect()}connect(){if(this.socket.state==="terminated")return;if(this.socket.state!=="disconnected"&&this.socket.state!=="stopped")throw new Error("Didn't start connection from disconnected state: "+this.socket.state);const e=new this.webSocketConstructor(this.uri);this._logVerbose("constructed WebSocket"),this.socket={state:"connecting",ws:e,paused:"no"},this.resetServerInactivityTimeout(),e.onopen=()=>{if(this.logger.logVerbose("begin ws.onopen"),this.socket.state!=="connecting")throw new Error("onopen called with socket not in connecting state");this.socket={state:"ready",ws:e,paused:this.socket.paused==="yes"?"uninitialized":"no"},this.resetServerInactivityTimeout(),this.socket.paused==="no"&&this.onOpen({connectionCount:this.connectionCount,lastCloseReason:this.lastCloseReason}),this.lastCloseReason!=="InitialConnect"&&this.logger.log("WebSocket reconnected"),this.connectionCount+=1,this.lastCloseReason=null},e.onerror=n=>{const r=n.message;this.logger.log(`WebSocket error: ${r}`)},e.onmessage=n=>{this.resetServerInactivityTimeout();const r=S6(JSON.parse(n.data));this._logVerbose(`received ws message with type ${r.type}`),this.onMessage(r).hasSyncedPastLastReconnect&&(this.retries=0)},e.onclose=n=>{if(this._logVerbose("begin ws.onclose"),this.lastCloseReason===null&&(this.lastCloseReason=n.reason??"OnCloseInvoked"),n.code!==C6&&n.code!==I6&&n.code!==A6&&n.code!==P6){let r=`WebSocket closed with code ${n.code}`;n.reason&&(r+=`: ${n.reason}`),this.logger.log(r)}this.scheduleReconnect()}}socketState(){return this.socket.state}sendMessage(e){if(this._logVerbose(`sending message with type ${e.type}`),this.socket.state==="ready"&&this.socket.paused==="no"){const n=b6(e),r=JSON.stringify(n);try{this.socket.ws.send(r)}catch(i){this.logger.log(`Failed to send message on WebSocket, reconnecting: ${i}`),this.closeAndReconnect("FailedToSendMessage")}return!0}return!1}resetServerInactivityTimeout(){this.socket.state!=="terminated"&&(this.reconnectDueToServerInactivityTimeout!==null&&(clearTimeout(this.reconnectDueToServerInactivityTimeout),this.reconnectDueToServerInactivityTimeout=null),this.reconnectDueToServerInactivityTimeout=setTimeout(()=>{this.closeAndReconnect("InactiveServer")},this.serverInactivityThreshold))}scheduleReconnect(){this.socket={state:"disconnected"};const e=this.nextBackoff();this.logger.log(`Attempting reconnect in ${e}ms`),setTimeout(()=>this.connect(),e)}closeAndReconnect(e){switch(this._logVerbose(`begin closeAndReconnect with reason ${e}`),this.socket.state){case"disconnected":case"terminated":case"stopped":return;case"connecting":case"ready":{this.lastCloseReason=e,this.close(),this.scheduleReconnect();return}default:this.socket}}close(){switch(this.socket.state){case"disconnected":case"terminated":case"stopped":return Promise.resolve();case"connecting":{const e=this.socket.ws;return new Promise(n=>{e.onclose=()=>{this._logVerbose("Closed after connecting"),n()},e.onopen=()=>{this._logVerbose("Opened after connecting"),e.close()}})}case"ready":{this._logVerbose("ws.close called");const e=this.socket.ws,n=new Promise(r=>{e.onclose=()=>{r()}});return e.close(),n}default:return this.socket,Promise.resolve()}}terminate(){switch(this.reconnectDueToServerInactivityTimeout&&clearTimeout(this.reconnectDueToServerInactivityTimeout),this.socket.state){case"terminated":case"stopped":case"disconnected":case"connecting":case"ready":{const e=this.close();return this.socket={state:"terminated"},e}default:throw this.socket,new Error(`Invalid websocket state: ${this.socket.state}`)}}stop(){switch(this.socket.state){case"terminated":return Promise.resolve();case"connecting":case"stopped":case"disconnected":case"ready":{const e=this.close();return this.socket={state:"stopped"},e}default:return this.socket,Promise.resolve()}}restart(){switch(this.socket.state){case"stopped":break;case"terminated":return;case"connecting":case"ready":case"disconnected":throw new Error("`restart()` is only valid after `stop()`");default:this.socket}this.connect()}pause(){switch(this.socket.state){case"disconnected":case"stopped":case"terminated":return;case"connecting":case"ready":{this.socket={...this.socket,paused:"yes"};return}default:{this.socket;return}}}resume(){switch(this.socket.state){case"connecting":this.socket={...this.socket,paused:"no"};return;case"ready":this.socket.paused==="uninitialized"?(this.socket={...this.socket,paused:"no"},this.onOpen({connectionCount:this.connectionCount,lastCloseReason:this.lastCloseReason})):this.socket.paused==="yes"&&(this.socket={...this.socket,paused:"no"},this.onResume());return;case"terminated":case"stopped":case"disconnected":return;default:this.socket}this.connect()}_logVerbose(e){this.logger.logVerbose(e)}nextBackoff(){const e=this.initialBackoff*Math.pow(2,this.retries);this.retries+=1;const n=Math.min(e,this.maxBackoff),r=n*(Math.random()-.5);return n+r}}function R6(){return M6()}function M6(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function Ox(t){this.message=t}Ox.prototype=new Error,Ox.prototype.name="InvalidCharacterError";var a2=typeof window<"u"&&window.atob&&window.atob.bind(window)||function(t){var e=String(t).replace(/=+$/,"");if(e.length%4==1)throw new Ox("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,r,i=0,s=0,o="";r=e.charAt(s++);~r&&(n=i%4?64*n+r:r,i++%4)?o+=String.fromCharCode(255&n>>(-2*i&6)):0)r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(r);return o};function O6(t){var e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Illegal base64url string!"}try{return function(n){return decodeURIComponent(a2(n).replace(/(.)/g,function(r,i){var s=i.charCodeAt(0).toString(16).toUpperCase();return s.length<2&&(s="0"+s),"%"+s}))}(e)}catch{return a2(e)}}function Pg(t){this.message=t}function D6(t,e){if(typeof t!="string")throw new Pg("Invalid token specified");var n=(e=e||{}).header===!0?0:1;try{return JSON.parse(O6(t.split(".")[n]))}catch(r){throw new Pg("Invalid token specified: "+r.message)}}Pg.prototype=new Error,Pg.prototype.name="InvalidTokenError";var N6=Object.defineProperty,L6=(t,e,n)=>e in t?N6(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ps=(t,e,n)=>L6(t,typeof e!="symbol"?e+"":e,n);const F6=20*24*60*60*1e3;class B6{constructor(e,n,r){ps(this,"authState",{state:"noAuth"}),ps(this,"configVersion",0),ps(this,"syncState"),ps(this,"authenticate"),ps(this,"stopSocket"),ps(this,"restartSocket"),ps(this,"pauseSocket"),ps(this,"resumeSocket"),ps(this,"clearAuth"),ps(this,"logger"),ps(this,"refreshTokenLeewaySeconds"),this.syncState=e,this.authenticate=n.authenticate,this.stopSocket=n.stopSocket,this.restartSocket=n.restartSocket,this.pauseSocket=n.pauseSocket,this.resumeSocket=n.resumeSocket,this.clearAuth=n.clearAuth,this.logger=r.logger,this.refreshTokenLeewaySeconds=r.refreshTokenLeewaySeconds}async setConfig(e,n){this.resetAuthState(),this._logVerbose("pausing WS for auth token fetch"),this.pauseSocket();const r=await this.fetchTokenAndGuardAgainstRace(e,{forceRefreshToken:!1});r.isFromOutdatedConfig||(r.value?(this.setAuthState({state:"waitingForServerConfirmationOfCachedToken",config:{fetchToken:e,onAuthChange:n},hasRetried:!1}),this.authenticate(r.value),this._logVerbose("resuming WS after auth token fetch"),this.resumeSocket()):(this.setAuthState({state:"initialRefetch",config:{fetchToken:e,onAuthChange:n}}),await this.refetchToken()))}onTransition(e){if(this.syncState.isCurrentOrNewerAuthVersion(e.endVersion.identity)&&!(e.endVersion.identity<=e.startVersion.identity)){if(this.authState.state==="waitingForServerConfirmationOfCachedToken"){this._logVerbose("server confirmed auth token is valid"),this.refetchToken(),this.authState.config.onAuthChange(!0);return}this.authState.state==="waitingForServerConfirmationOfFreshToken"&&(this._logVerbose("server confirmed new auth token is valid"),this.scheduleTokenRefetch(this.authState.token),this.authState.hadAuth||this.authState.config.onAuthChange(!0))}}onAuthError(e){const{baseVersion:n}=e;if(n!=null){if(!this.syncState.isCurrentOrNewerAuthVersion(n+1)){this._logVerbose("ignoring auth error for previous auth attempt");return}this.tryToReauthenticate(e);return}this.tryToReauthenticate(e)}async tryToReauthenticate(e){if(this.authState.state==="noAuth"||this.authState.state==="waitingForServerConfirmationOfFreshToken"){this.logger.error(`Failed to authenticate: "${e.error}", check your server auth config`),this.syncState.hasAuth()&&this.syncState.clearAuth(),this.authState.state!=="noAuth"&&this.setAndReportAuthFailed(this.authState.config.onAuthChange);return}this._logVerbose("attempting to reauthenticate"),await this.stopSocket();const n=await this.fetchTokenAndGuardAgainstRace(this.authState.config.fetchToken,{forceRefreshToken:!0});n.isFromOutdatedConfig||(n.value&&this.syncState.isNewAuth(n.value)?(this.authenticate(n.value),this.setAuthState({state:"waitingForServerConfirmationOfFreshToken",config:this.authState.config,token:n.value,hadAuth:this.authState.state==="notRefetching"||this.authState.state==="waitingForScheduledRefetch"})):(this._logVerbose("reauthentication failed, could not fetch a new token"),this.syncState.hasAuth()&&this.syncState.clearAuth(),this.setAndReportAuthFailed(this.authState.config.onAuthChange)),this.restartSocket())}async refetchToken(){if(this.authState.state==="noAuth")return;this._logVerbose("refetching auth token");const e=await this.fetchTokenAndGuardAgainstRace(this.authState.config.fetchToken,{forceRefreshToken:!0});e.isFromOutdatedConfig||(e.value?this.syncState.isNewAuth(e.value)?(this.setAuthState({state:"waitingForServerConfirmationOfFreshToken",hadAuth:this.syncState.hasAuth(),token:e.value,config:this.authState.config}),this.authenticate(e.value)):this.setAuthState({state:"notRefetching",config:this.authState.config}):(this._logVerbose("refetching token failed"),this.syncState.hasAuth()&&this.clearAuth(),this.setAndReportAuthFailed(this.authState.config.onAuthChange)),this._logVerbose("resuming WS after auth token fetch (if currently paused)"),this.resumeSocket())}scheduleTokenRefetch(e){if(this.authState.state==="noAuth")return;const n=this.decodeToken(e);if(!n){this.logger.error("Auth token is not a valid JWT, cannot refetch the token");return}const{iat:r,exp:i}=n;if(!r||!i){this.logger.error("Auth token does not have required fields, cannot refetch the token");return}const s=i-r;if(s<=2){this.logger.error("Auth token does not live long enough, cannot refetch the token");return}let o=Math.min(F6,(s-this.refreshTokenLeewaySeconds)*1e3);o<=0&&(this.logger.warn(`Refetching auth token immediately, configured leeway ${this.refreshTokenLeewaySeconds}s is larger than the token's lifetime ${s}s`),o=0);const a=setTimeout(()=>{this.refetchToken()},o);this.setAuthState({state:"waitingForScheduledRefetch",refetchTokenTimeoutId:a,config:this.authState.config}),this._logVerbose(`scheduled preemptive auth token refetching in ${o}ms`)}async fetchTokenAndGuardAgainstRace(e,n){const r=++this.configVersion,i=await e(n);return this.configVersion!==r?{isFromOutdatedConfig:!0}:{isFromOutdatedConfig:!1,value:i}}stop(){this.resetAuthState(),this.configVersion++}setAndReportAuthFailed(e){e(!1),this.resetAuthState()}resetAuthState(){this.setAuthState({state:"noAuth"})}setAuthState(e){this.authState.state==="waitingForScheduledRefetch"&&(clearTimeout(this.authState.refetchTokenTimeoutId),this.syncState.markAuthCompletion()),this.authState=e}decodeToken(e){try{return D6(e)}catch(n){return this._logVerbose(`Error decoding token: ${n instanceof Error?n.message:"Unknown error"}`),null}}_logVerbose(e){this.logger.logVerbose(`${e} [v${this.configVersion}]`)}}const U6=["convexClientConstructed","convexWebSocketOpen","convexFirstMessageReceived"];function z6(t,e){const n={sessionId:e};typeof performance>"u"||!performance.mark||performance.mark(t,{detail:n})}function $6(t){let e=t.name.slice(6);return e=e.charAt(0).toLowerCase()+e.slice(1),{name:e,startTime:t.startTime}}function H6(t){if(typeof performance>"u"||!performance.getEntriesByName)return[];const e=[];for(const n of U6){const r=performance.getEntriesByName(n).filter(i=>i.entryType==="mark").filter(i=>i.detail.sessionId===t);e.push(...r)}return e.map($6)}var G6=Object.defineProperty,W6=(t,e,n)=>e in t?G6(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ir=(t,e,n)=>W6(t,typeof e!="symbol"?e+"":e,n);class j6{constructor(e,n,r){if(Ir(this,"address"),Ir(this,"state"),Ir(this,"requestManager"),Ir(this,"webSocketManager"),Ir(this,"authenticationManager"),Ir(this,"remoteQuerySet"),Ir(this,"optimisticQueryResults"),Ir(this,"_transitionHandlerCounter",0),Ir(this,"_nextRequestId"),Ir(this,"_onTransitionFns",new Map),Ir(this,"_sessionId"),Ir(this,"firstMessageReceived",!1),Ir(this,"debug"),Ir(this,"logger"),Ir(this,"maxObservedTimestamp"),Ir(this,"mark",f=>{this.debug&&z6(f,this.sessionId)}),typeof e=="object")throw new Error("Passing a ClientConfig object is no longer supported. Pass the URL of the Convex deployment as a string directly.");(r==null?void 0:r.skipConvexDeploymentUrlCheck)!==!0&&f5(e),r={...r};const i=r.authRefreshTokenLeewaySeconds??2;let s=r.webSocketConstructor;if(!s&&typeof WebSocket>"u")throw new Error("No WebSocket global variable defined! To use Convex in an environment without WebSocket try the HTTP client: https://docs.convex.dev/api/classes/browser.ConvexHttpClient");s=s||WebSocket,this.debug=r.reportDebugInfoToConvex??!1,this.address=e,this.logger=r.logger??M3({verbose:r.verbose??!1});const o=e.search("://");if(o===-1)throw new Error("Provided address was not an absolute URL.");const a=e.substring(o+3),c=e.substring(0,o);let h;if(c==="http")h="ws";else if(c==="https")h="wss";else throw new Error(`Unknown parent protocol ${c}`);const d=`${h}://${a}/api/${Ls}/sync`;this.state=new i6,this.remoteQuerySet=new o2(f=>this.state.queryPath(f),this.logger),this.requestManager=new a6(this.logger),this.authenticationManager=new B6(this.state,{authenticate:f=>{const y=this.state.setAuth(f);this.webSocketManager.sendMessage(y)},stopSocket:()=>this.webSocketManager.stop(),restartSocket:()=>this.webSocketManager.restart(),pauseSocket:()=>{this.webSocketManager.pause(),this.state.pause()},resumeSocket:()=>this.webSocketManager.resume(),clearAuth:()=>{this.clearAuth()}},{logger:this.logger,refreshTokenLeewaySeconds:i}),this.optimisticQueryResults=new p6,this.addOnTransitionHandler(f=>{n(f.queries.map(y=>y.token))}),this._nextRequestId=0,this._sessionId=R6();const{unsavedChangesWarning:m}=r;if(typeof window>"u"||typeof window.addEventListener>"u"){if(m===!0)throw new Error("unsavedChangesWarning requested, but window.addEventListener not found! Remove {unsavedChangesWarning: true} from Convex client options.")}else m!==!1&&window.addEventListener("beforeunload",f=>{if(this.requestManager.hasIncompleteRequests()){f.preventDefault();const y="Are you sure you want to leave? Your changes may not be saved.";return(f||window.event).returnValue=y,y}});this.webSocketManager=new k6(d,{onOpen:f=>{this.mark("convexWebSocketOpen"),this.webSocketManager.sendMessage({...f,type:"Connect",sessionId:this._sessionId,maxObservedTimestamp:this.maxObservedTimestamp});const y=new Set(this.remoteQuerySet.remoteQueryResults().keys());this.remoteQuerySet=new o2(C=>this.state.queryPath(C),this.logger);const[v,S]=this.state.restart(y);S&&this.webSocketManager.sendMessage(S),this.webSocketManager.sendMessage(v);for(const C of this.requestManager.restart())this.webSocketManager.sendMessage(C)},onResume:()=>{const[f,y]=this.state.resume();y&&this.webSocketManager.sendMessage(y),f&&this.webSocketManager.sendMessage(f);for(const v of this.requestManager.resume())this.webSocketManager.sendMessage(v)},onMessage:f=>{switch(this.firstMessageReceived||(this.firstMessageReceived=!0,this.mark("convexFirstMessageReceived"),this.reportMarks()),f.type){case"Transition":{this.observedTimestamp(f.endVersion.ts),this.authenticationManager.onTransition(f),this.remoteQuerySet.transition(f),this.state.transition(f);const y=this.requestManager.removeCompleted(this.remoteQuerySet.timestamp());this.notifyOnQueryResultChanges(y);break}case"MutationResponse":{f.success&&this.observedTimestamp(f.ts);const y=this.requestManager.onResponse(f);y!==null&&this.notifyOnQueryResultChanges(new Map([[y.requestId,y.result]]));break}case"ActionResponse":{this.requestManager.onResponse(f);break}case"AuthError":{this.authenticationManager.onAuthError(f);break}case"FatalError":{const y=t6(this.logger,f.error);throw this.webSocketManager.terminate(),y}}return{hasSyncedPastLastReconnect:this.hasSyncedPastLastReconnect()}}},s,this.logger),this.mark("convexClientConstructed")}hasSyncedPastLastReconnect(){return this.requestManager.hasSyncedPastLastReconnect()||this.state.hasSyncedPastLastReconnect()}observedTimestamp(e){(this.maxObservedTimestamp===void 0||this.maxObservedTimestamp.lessThanOrEqual(e))&&(this.maxObservedTimestamp=e)}getMaxObservedTimestamp(){return this.maxObservedTimestamp}notifyOnQueryResultChanges(e){const n=this.remoteQuerySet.remoteQueryResults(),r=new Map;for(const[s,o]of n){const a=this.state.queryToken(s);if(a!==null){const c={result:o,udfPath:this.state.queryPath(s),args:this.state.queryArgs(s)};r.set(a,c)}}const i=this.optimisticQueryResults.ingestQueryResultsFromServer(r,new Set(e.keys()));this.handleTransition({queries:i.map(s=>({token:s,modification:{kind:"Updated",result:r.get(s).result}})),reflectedMutations:Array.from(e).map(([s,o])=>({requestId:s,result:o})),timestamp:this.remoteQuerySet.timestamp()})}handleTransition(e){for(const n of this._onTransitionFns.values())n(e)}addOnTransitionHandler(e){const n=this._transitionHandlerCounter++;return this._onTransitionFns.set(n,e),()=>this._onTransitionFns.delete(n)}setAuth(e,n){this.authenticationManager.setConfig(e,n)}hasAuth(){return this.state.hasAuth()}setAdminAuth(e,n){const r=this.state.setAdminAuth(e,n);this.webSocketManager.sendMessage(r)}clearAuth(){const e=this.state.clearAuth();this.webSocketManager.sendMessage(e)}subscribe(e,n,r){const i=Zi(n),{modification:s,queryToken:o,unsubscribe:a}=this.state.subscribe(e,i,r==null?void 0:r.journal,r==null?void 0:r.componentPath);return s!==null&&this.webSocketManager.sendMessage(s),{queryToken:o,unsubscribe:()=>{const c=a();c&&this.webSocketManager.sendMessage(c)}}}localQueryResult(e,n){const r=Zi(n),i=ru(e,r);return this.optimisticQueryResults.queryResult(i)}localQueryResultByToken(e){return this.optimisticQueryResults.queryResult(e)}hasLocalQueryResultByToken(e){return this.optimisticQueryResults.hasQueryResult(e)}localQueryLogs(e,n){const r=Zi(n),i=ru(e,r);return this.optimisticQueryResults.queryLogs(i)}queryJournal(e,n){const r=Zi(n),i=ru(e,r);return this.state.queryJournal(i)}connectionState(){return{hasInflightRequests:this.requestManager.hasInflightRequests(),isWebSocketConnected:this.webSocketManager.socketState()==="ready",timeOfOldestInflightRequest:this.requestManager.timeOfOldestInflightRequest()}}async mutation(e,n,r){const i=await this.mutationInternal(e,n,r);if(!i.success)throw i.errorData!==void 0?Mx(i,new bg(gc("mutation",e,i))):new Error(gc("mutation",e,i));return i.value}async mutationInternal(e,n,r,i){const{mutationPromise:s}=this.enqueueMutation(e,n,r,i);return s}enqueueMutation(e,n,r,i){const s=Zi(n);this.tryReportLongDisconnect();const o=this.nextRequestId;if(this._nextRequestId++,r!==void 0){const d=r.optimisticUpdate;if(d!==void 0){const m=v=>{d(v,s)},y=this.optimisticQueryResults.applyOptimisticUpdate(m,o).map(v=>{const S=this.localQueryResultByToken(v);return{token:v,modification:{kind:"Updated",result:S===void 0?void 0:{success:!0,value:S,logLines:[]}}}});this.handleTransition({queries:y,reflectedMutations:[],timestamp:this.remoteQuerySet.timestamp()})}}const a={type:"Mutation",requestId:o,udfPath:e,componentPath:i,args:[$t(s)]},c=this.webSocketManager.sendMessage(a),h=this.requestManager.request(a,c);return{requestId:o,mutationPromise:h}}async action(e,n){const r=await this.actionInternal(e,n);if(!r.success)throw r.errorData!==void 0?Mx(r,new bg(gc("action",e,r))):new Error(gc("action",e,r));return r.value}async actionInternal(e,n,r){const i=Zi(n),s=this.nextRequestId;this._nextRequestId++,this.tryReportLongDisconnect();const o={type:"Action",requestId:s,udfPath:e,componentPath:r,args:[$t(i)]},a=this.webSocketManager.sendMessage(o);return this.requestManager.request(o,a)}async close(){return this.authenticationManager.stop(),this.webSocketManager.terminate()}get url(){return this.address}get nextRequestId(){return this._nextRequestId}get sessionId(){return this._sessionId}reportMarks(){if(this.debug){const e=H6(this.sessionId);this.webSocketManager.sendMessage({type:"Event",eventType:"ClientConnect",event:e})}}tryReportLongDisconnect(){if(!this.debug)return;const e=this.connectionState().timeOfOldestInflightRequest;if(e===null||Date.now()-e.getTime()<=60*1e3)return;const n=`${this.address}/api/debug_event`;fetch(n,{method:"POST",headers:{"Content-Type":"application/json","Convex-Client":`npm-${Ls}`},body:JSON.stringify({event:"LongWebsocketDisconnect"})}).then(r=>{r.ok||this.logger.warn("Analytics request failed with response:",r.body)}).catch(r=>{this.logger.warn("Analytics response failed with error:",r)})}}var V6=Object.defineProperty,X6=(t,e,n)=>e in t?V6(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ra=(t,e,n)=>X6(t,typeof e!="symbol"?e+"":e,n);if(typeof rt>"u")throw new Error("Required dependency 'react' not found");if(typeof IA>"u")throw new Error("Required dependency 'react-dom' not found");function N3(t,e,n){function r(i){return Q6(i),e.mutation(t,i,{optimisticUpdate:n})}return r.withOptimisticUpdate=function(s){if(n!==void 0)throw new Error(`Already specified optimistic update for mutation ${Ci(t)}`);return N3(t,e,s)},r}class q6{constructor(e,n){if(Ra(this,"address"),Ra(this,"cachedSync"),Ra(this,"listeners"),Ra(this,"options"),Ra(this,"closed",!1),Ra(this,"_logger"),Ra(this,"adminAuth"),Ra(this,"fakeUserIdentity"),e===void 0)throw new Error("No address provided to ConvexReactClient.\nIf trying to deploy to production, make sure to follow all the instructions found at https://docs.convex.dev/production/hosting/\nIf running locally, make sure to run `convex dev` and ensure the .env.local file is populated.");if(typeof e!="string")throw new Error(`ConvexReactClient requires a URL like 'https://happy-otter-123.convex.cloud', received something of type ${typeof e} instead.`);if(!e.includes("://"))throw new Error("Provided address was not an absolute URL.");this.address=e,this.listeners=new Map,this._logger=(n==null?void 0:n.logger)??M3({verbose:(n==null?void 0:n.verbose)??!1}),this.options={...n,logger:this._logger}}get sync(){if(this.closed)throw new Error("ConvexReactClient has already been closed.");return this.cachedSync?this.cachedSync:(this.cachedSync=new j6(this.address,e=>this.transition(e),this.options),this.adminAuth&&this.cachedSync.setAdminAuth(this.adminAuth,this.fakeUserIdentity),this.cachedSync)}setAuth(e,n){if(typeof e=="string")throw new Error("Passing a string to ConvexReactClient.setAuth is no longer supported, please upgrade to passing in an async function to handle reauthentication.");this.sync.setAuth(e,n??(()=>{}))}clearAuth(){this.sync.clearAuth()}setAdminAuth(e,n){if(this.adminAuth=e,this.fakeUserIdentity=n,this.closed)throw new Error("ConvexReactClient has already been closed.");this.cachedSync&&this.sync.setAdminAuth(e,n)}watchQuery(e,...n){const[r,i]=n,s=Ci(e);return{onUpdate:o=>{const{queryToken:a,unsubscribe:c}=this.sync.subscribe(s,r,i),h=this.listeners.get(a);return h!==void 0?h.add(o):this.listeners.set(a,new Set([o])),()=>{if(this.closed)return;const d=this.listeners.get(a);d.delete(o),d.size===0&&this.listeners.delete(a),c()}},localQueryResult:()=>{if(this.cachedSync)return this.cachedSync.localQueryResult(s,r)},localQueryLogs:()=>{if(this.cachedSync)return this.cachedSync.localQueryLogs(s,r)},journal:()=>{if(this.cachedSync)return this.cachedSync.queryJournal(s,r)}}}mutation(e,...n){const[r,i]=n,s=Ci(e);return this.sync.mutation(s,r,i)}action(e,...n){const r=Ci(e);return this.sync.action(r,...n)}query(e,...n){const r=this.watchQuery(e,...n),i=r.localQueryResult();return i!==void 0?Promise.resolve(i):new Promise((s,o)=>{const a=r.onUpdate(()=>{a();try{s(r.localQueryResult())}catch(c){o(c)}})})}connectionState(){return this.sync.connectionState()}get logger(){return this._logger}async close(){if(this.closed=!0,this.listeners=new Map,this.cachedSync){const e=this.cachedSync;this.cachedSync=void 0,await e.close()}}transition(e){IA.unstable_batchedUpdates(()=>{for(const n of e){const r=this.listeners.get(n);if(r)for(const i of r)i()}})}}const S_=rt.createContext(void 0);function b_(){return pe.useContext(S_)}const L3=({client:t,children:e})=>rt.createElement(S_.Provider,{value:t},e);function ul(t,...e){const n=e[0]==="skip",r=e[0]==="skip"?{}:Zi(e[0]),i=typeof t=="string"?O3(t):t,s=Ci(i),o=pe.useMemo(()=>n?{}:{query:{query:i,args:r}},[JSON.stringify($t(r)),s,n]),c=t8(o).query;if(c instanceof Error)throw c;return c}function Y6(t){const e=typeof t=="string"?O3(t):t,n=pe.useContext(S_);if(n===void 0)throw new Error("Could not find Convex client! `useMutation` must be used in the React component tree under `ConvexProvider`. Did you forget it? See https://docs.convex.dev/quick-start#set-up-convex-in-your-react-app");return pe.useMemo(()=>N3(e,n),[n,Ci(e)])}function Q6(t){if(typeof t=="object"&&t!==null&&"bubbles"in t&&"persist"in t&&"isDefaultPrevented"in t)throw new Error("Convex function called with SyntheticEvent object. Did you use a Convex function as an event handler directly? Event handlers like onClick receive an event object as their first argument. These SyntheticEvent objects are not valid Convex values. Try wrapping the function like `const handler = () => myMutation();` and using `handler` in the event handler.")}var K6=Object.defineProperty,Z6=(t,e,n)=>e in t?K6(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Uv=(t,e,n)=>Z6(t,typeof e!="symbol"?e+"":e,n);class J6{constructor(e){Uv(this,"createWatch"),Uv(this,"queries"),Uv(this,"listeners"),this.createWatch=e,this.queries={},this.listeners=new Set}setQueries(e){for(const n of Object.keys(e)){const{query:r,args:i}=e[n];if(Ci(r),this.queries[n]===void 0)this.addQuery(n,r,i);else{const s=this.queries[n];(Ci(r)!==Ci(s.query)||JSON.stringify($t(i))!==JSON.stringify($t(s.args)))&&(this.removeQuery(n),this.addQuery(n,r,i))}}for(const n of Object.keys(this.queries))e[n]===void 0&&this.removeQuery(n)}subscribe(e){return this.listeners.add(e),()=>{this.listeners.delete(e)}}getLocalResults(e){const n={};for(const r of Object.keys(e)){const{query:i,args:s}=e[r];Ci(i);const o=this.createWatch(i,s);let a;try{a=o.localQueryResult()}catch(c){if(c instanceof Error)a=c;else throw c}n[r]=a}return n}setCreateWatch(e){this.createWatch=e;for(const n of Object.keys(this.queries)){const{query:r,args:i,watch:s}=this.queries[n],o=s.journal();this.removeQuery(n),this.addQuery(n,r,i,o)}}destroy(){for(const e of Object.keys(this.queries))this.removeQuery(e);this.listeners=new Set}addQuery(e,n,r,i){if(this.queries[e]!==void 0)throw new Error(`Tried to add a new query with identifier ${e} when it already exists.`);const s=this.createWatch(n,r,i),o=s.onUpdate(()=>this.notifyListeners());this.queries[e]={query:n,args:r,watch:s,unsubscribe:o}}removeQuery(e){const n=this.queries[e];if(n===void 0)throw new Error(`No query found with identifier ${e}.`);n.unsubscribe(),delete this.queries[e]}notifyListeners(){for(const e of this.listeners)e()}}function e8({getCurrentValue:t,subscribe:e}){const[n,r]=pe.useState(()=>({getCurrentValue:t,subscribe:e,value:t()}));let i=n.value;return(n.getCurrentValue!==t||n.subscribe!==e)&&(i=t(),r({getCurrentValue:t,subscribe:e,value:i})),pe.useEffect(()=>{let s=!1;const o=()=>{s||r(c=>{if(c.getCurrentValue!==t||c.subscribe!==e)return c;const h=t();return c.value===h?c:{...c,value:h}})},a=e(o);return o(),()=>{s=!0,a()}},[t,e]),i}function t8(t){const e=b_();if(e===void 0)throw new Error("Could not find Convex client! `useQuery` must be used in the React component tree under `ConvexProvider`. Did you forget it? See https://docs.convex.dev/quick-start#set-up-convex-in-your-react-app");const n=pe.useMemo(()=>(r,i,s)=>e.watchQuery(r,i,{journal:s}),[e]);return n8(t,n)}function n8(t,e){const[n]=pe.useState(()=>new J6(e));n.createWatch!==e&&n.setCreateWatch(e),pe.useEffect(()=>()=>n.destroy(),[n]);const r=pe.useMemo(()=>({getCurrentValue:()=>n.getLocalResults(t),subscribe:i=>(n.setQueries(t),n.subscribe(i))}),[n,t]);return e8(r)}function Dx(t,e){if(typeof Convex>"u"||Convex.syscall===void 0)throw new Error("The Convex database and auth objects are being used outside of a Convex backend. Did you mean to use `useQuery` or `useMutation` to call a Convex function?");const n=Convex.syscall(t,JSON.stringify(e));return JSON.parse(n)}async function mr(t,e){if(typeof Convex>"u"||Convex.asyncSyscall===void 0)throw new Error("The Convex database and auth objects are being used outside of a Convex backend. Did you mean to use `useQuery` or `useMutation` to call a Convex function?");let n;try{n=await Convex.asyncSyscall(t,JSON.stringify(e))}catch(r){if(r.data!==void 0){const i=new bg(r.message);throw i.data=Nr(r.data),i}throw new Error(r.message)}return JSON.parse(n)}function Zt(t,e,n,r){if(t===void 0)throw new TypeError(`Must provide arg ${e} \`${r}\` to \`${n}\``)}function r8(t,e,n,r){if(!Number.isInteger(t)||t<0)throw new TypeError(`Arg ${e} \`${r}\` to \`${n}\` must be a non-negative integer`)}function F3(t){return{getUserIdentity:async()=>await mr("1.0/getUserIdentity",{requestId:t})}}var i8=Object.defineProperty,s8=(t,e,n)=>e in t?i8(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,l2=(t,e,n)=>s8(t,typeof e!="symbol"?e+"":e,n);class o8{constructor(){l2(this,"_isExpression"),l2(this,"_value")}}var a8=Object.defineProperty,l8=(t,e,n)=>e in t?a8(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,u8=(t,e,n)=>l8(t,typeof e!="symbol"?e+"":e,n);class ur extends o8{constructor(e){super(),u8(this,"inner"),this.inner=e}serialize(){return this.inner}}function Lt(t){return t instanceof ur?t.serialize():{$literal:l_(t)}}const c8={eq(t,e){return new ur({$eq:[Lt(t),Lt(e)]})},neq(t,e){return new ur({$neq:[Lt(t),Lt(e)]})},lt(t,e){return new ur({$lt:[Lt(t),Lt(e)]})},lte(t,e){return new ur({$lte:[Lt(t),Lt(e)]})},gt(t,e){return new ur({$gt:[Lt(t),Lt(e)]})},gte(t,e){return new ur({$gte:[Lt(t),Lt(e)]})},add(t,e){return new ur({$add:[Lt(t),Lt(e)]})},sub(t,e){return new ur({$sub:[Lt(t),Lt(e)]})},mul(t,e){return new ur({$mul:[Lt(t),Lt(e)]})},div(t,e){return new ur({$div:[Lt(t),Lt(e)]})},mod(t,e){return new ur({$mod:[Lt(t),Lt(e)]})},neg(t){return new ur({$neg:Lt(t)})},and(...t){return new ur({$and:t.map(Lt)})},or(...t){return new ur({$or:t.map(Lt)})},not(t){return new ur({$not:Lt(t)})},field(t){return new ur({$field:t})}};var h8=Object.defineProperty,d8=(t,e,n)=>e in t?h8(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,f8=(t,e,n)=>d8(t,typeof e!="symbol"?e+"":e,n);class p8{constructor(){f8(this,"_isIndexRange")}}var m8=Object.defineProperty,g8=(t,e,n)=>e in t?m8(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,u2=(t,e,n)=>g8(t,typeof e!="symbol"?e+"":e,n);class La extends p8{constructor(e){super(),u2(this,"rangeExpressions"),u2(this,"isConsumed"),this.rangeExpressions=e,this.isConsumed=!1}static new(){return new La([])}consume(){if(this.isConsumed)throw new Error("IndexRangeBuilder has already been used! Chain your method calls like `q => q.eq(...).eq(...)`. See https://docs.convex.dev/using/indexes");this.isConsumed=!0}eq(e,n){return this.consume(),new La(this.rangeExpressions.concat({type:"Eq",fieldPath:e,value:l_(n)}))}gt(e,n){return this.consume(),new La(this.rangeExpressions.concat({type:"Gt",fieldPath:e,value:$t(n)}))}gte(e,n){return this.consume(),new La(this.rangeExpressions.concat({type:"Gte",fieldPath:e,value:$t(n)}))}lt(e,n){return this.consume(),new La(this.rangeExpressions.concat({type:"Lt",fieldPath:e,value:$t(n)}))}lte(e,n){return this.consume(),new La(this.rangeExpressions.concat({type:"Lte",fieldPath:e,value:$t(n)}))}export(){return this.consume(),this.rangeExpressions}}var y8=Object.defineProperty,v8=(t,e,n)=>e in t?y8(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,x8=(t,e,n)=>v8(t,typeof e!="symbol"?e+"":e,n);class w8{constructor(){x8(this,"_isSearchFilter")}}var _8=Object.defineProperty,S8=(t,e,n)=>e in t?_8(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,c2=(t,e,n)=>S8(t,typeof e!="symbol"?e+"":e,n);class Cd extends w8{constructor(e){super(),c2(this,"filters"),c2(this,"isConsumed"),this.filters=e,this.isConsumed=!1}static new(){return new Cd([])}consume(){if(this.isConsumed)throw new Error("SearchFilterBuilder has already been used! Chain your method calls like `q => q.search(...).eq(...)`.");this.isConsumed=!0}search(e,n){return Zt(e,1,"search","fieldName"),Zt(n,2,"search","query"),this.consume(),new Cd(this.filters.concat({type:"Search",fieldPath:e,value:n}))}eq(e,n){return Zt(e,1,"eq","fieldName"),arguments.length!==2&&Zt(n,2,"search","value"),this.consume(),new Cd(this.filters.concat({type:"Eq",fieldPath:e,value:l_(n)}))}export(){return this.consume(),this.filters}}var b8=Object.defineProperty,E8=(t,e,n)=>e in t?b8(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,B3=(t,e,n)=>E8(t,typeof e!="symbol"?e+"":e,n);class U3{constructor(e){B3(this,"tableName"),this.tableName=e}withIndex(e,n){Zt(e,1,"withIndex","indexName");let r=La.new();return n!==void 0&&(r=n(r)),new nl({source:{type:"IndexRange",indexName:this.tableName+"."+e,range:r.export(),order:null},operators:[]})}withSearchIndex(e,n){Zt(e,1,"withSearchIndex","indexName"),Zt(n,2,"withSearchIndex","searchFilter");const r=Cd.new();return new nl({source:{type:"Search",indexName:this.tableName+"."+e,filters:n(r).export()},operators:[]})}fullTableScan(){return new nl({source:{type:"FullTableScan",tableName:this.tableName,order:null},operators:[]})}order(e){return this.fullTableScan().order(e)}async count(){const e=await mr("1.0/count",{table:this.tableName});return Nr(e)}filter(e){return this.fullTableScan().filter(e)}limit(e){return this.fullTableScan().limit(e)}collect(){return this.fullTableScan().collect()}take(e){return this.fullTableScan().take(e)}paginate(e){return this.fullTableScan().paginate(e)}first(){return this.fullTableScan().first()}unique(){return this.fullTableScan().unique()}[Symbol.asyncIterator](){return this.fullTableScan()[Symbol.asyncIterator]()}}function h2(t){throw new Error(t==="consumed"?"This query is closed and can't emit any more values.":"This query has been chained with another operator and can't be reused.")}class nl{constructor(e){B3(this,"state"),this.state={type:"preparing",query:e}}takeQuery(){if(this.state.type!=="preparing")throw new Error("A query can only be chained once and can't be chained after iteration begins.");const e=this.state.query;return this.state={type:"closed"},e}startQuery(){if(this.state.type==="executing")throw new Error("Iteration can only begin on a query once.");(this.state.type==="closed"||this.state.type==="consumed")&&h2(this.state.type);const e=this.state.query,{queryId:n}=Dx("1.0/queryStream",{query:e,version:Ls});return this.state={type:"executing",queryId:n},n}closeQuery(){if(this.state.type==="executing"){const e=this.state.queryId;Dx("1.0/queryCleanup",{queryId:e})}this.state={type:"consumed"}}order(e){Zt(e,1,"order","order");const n=this.takeQuery();if(n.source.type==="Search")throw new Error("Search queries must always be in relevance order. Can not set order manually.");if(n.source.order!==null)throw new Error("Queries may only specify order at most once");return n.source.order=e,new nl(n)}filter(e){Zt(e,1,"filter","predicate");const n=this.takeQuery();return n.operators.push({filter:Lt(e(c8))}),new nl(n)}limit(e){Zt(e,1,"limit","n");const n=this.takeQuery();return n.operators.push({limit:e}),new nl(n)}[Symbol.asyncIterator](){return this.startQuery(),this}async next(){(this.state.type==="closed"||this.state.type==="consumed")&&h2(this.state.type);const e=this.state.type==="preparing"?this.startQuery():this.state.queryId,{value:n,done:r}=await mr("1.0/queryStreamNext",{queryId:e});return r&&this.closeQuery(),{value:Nr(n),done:r}}return(){return this.closeQuery(),Promise.resolve({done:!0,value:void 0})}async paginate(e){if(Zt(e,1,"paginate","options"),typeof(e==null?void 0:e.numItems)!="number"||e.numItems<0)throw new Error(`\`options.numItems\` must be a positive number. Received \`${e==null?void 0:e.numItems}\`.`);const n=this.takeQuery(),r=e.numItems,i=e.cursor,s=(e==null?void 0:e.endCursor)??null,o=e.maximumRowsRead??null,{page:a,isDone:c,continueCursor:h,splitCursor:d,pageStatus:m}=await mr("1.0/queryPage",{query:n,cursor:i,endCursor:s,pageSize:r,maximumRowsRead:o,maximumBytesRead:e.maximumBytesRead,version:Ls});return{page:a.map(f=>Nr(f)),isDone:c,continueCursor:h,splitCursor:d,pageStatus:m}}async collect(){const e=[];for await(const n of this)e.push(n);return e}async take(e){return Zt(e,1,"take","n"),r8(e,1,"take","n"),this.limit(e).collect()}async first(){const e=await this.take(1);return e.length===0?null:e[0]}async unique(){const e=await this.take(2);if(e.length===0)return null;if(e.length===2)throw new Error("unique() query returned more than one result");return e[0]}}async function z3(t,e){if(Zt(t,1,"get","id"),typeof t!="string")throw new Error(`Invalid argument \`id\` for \`db.get\`, expected string but got '${typeof t}': ${t}`);const n={id:$t(t),isSystem:e,version:Ls},r=await mr("1.0/get",n);return Nr(r)}function $3(){const t=(i=!1)=>({get:async s=>await z3(s,i),query:s=>new Nx(s,i).query(),normalizeId:(s,o)=>{Zt(s,1,"normalizeId","tableName"),Zt(o,2,"normalizeId","id");const a=s.startsWith("_");if(a!==i)throw new Error(`${a?"System":"User"} tables can only be accessed from db.${i?"":"system."}normalizeId().`);const c=Dx("1.0/db/normalizeId",{table:s,idString:o});return Nr(c).id},system:null,table:s=>new Nx(s,i)}),{system:e,...n}=t(!0),r=t();return r.system=n,r}async function H3(t,e){if(t.startsWith("_"))throw new Error("System tables (prefixed with `_`) are read-only.");Zt(t,1,"insert","table"),Zt(e,2,"insert","value");const n=await mr("1.0/insert",{table:t,value:$t(e)});return Nr(n)._id}async function G3(t,e){Zt(t,1,"patch","id"),Zt(e,2,"patch","value"),await mr("1.0/shallowMerge",{id:$t(t),value:S5(e)})}async function W3(t,e){Zt(t,1,"replace","id"),Zt(e,2,"replace","value"),await mr("1.0/replace",{id:$t(t),value:$t(e)})}async function j3(t){Zt(t,1,"delete","id"),await mr("1.0/remove",{id:$t(t)})}function T8(){const t=$3();return{get:t.get,query:t.query,normalizeId:t.normalizeId,system:t.system,insert:async(e,n)=>await H3(e,n),patch:async(e,n)=>await G3(e,n),replace:async(e,n)=>await W3(e,n),delete:async e=>await j3(e),table:e=>new C8(e,!1)}}class Nx{constructor(e,n){this.tableName=e,this.isSystem=n}async get(e){return z3(e,this.isSystem)}query(){const e=this.tableName.startsWith("_");if(e!==this.isSystem)throw new Error(`${e?"System":"User"} tables can only be accessed from db.${this.isSystem?"":"system."}query().`);return new U3(this.tableName)}}class C8 extends Nx{async insert(e){return H3(this.tableName,e)}async patch(e,n){return G3(e,n)}async replace(e,n){return W3(e,n)}async delete(e){return j3(e)}}function I8(){return{runAfter:async(t,e,n)=>{const r=A8(t,e,n);return await mr("1.0/schedule",r)},runAt:async(t,e,n)=>{const r=P8(t,e,n);return await mr("1.0/schedule",r)},cancel:async t=>{Zt(t,1,"cancel","id");const e={id:$t(t)};await mr("1.0/cancel_job",e)}}}function A8(t,e,n){if(typeof t!="number")throw new Error("`delayMs` must be a number");if(!isFinite(t))throw new Error("`delayMs` must be a finite number");if(t<0)throw new Error("`delayMs` must be non-negative");const r=Zi(n),i=yy(e),s=(Date.now()+t)/1e3;return{...i,ts:s,args:$t(r),version:Ls}}function P8(t,e,n){let r;if(t instanceof Date)r=t.valueOf()/1e3;else if(typeof t=="number")r=t/1e3;else throw new Error("The invoke time must a Date or a timestamp");const i=yy(e),s=Zi(n);return{...i,ts:r,args:$t(s),version:Ls}}function V3(t){return{getUrl:async e=>(Zt(e,1,"getUrl","storageId"),await mr("1.0/storageGetUrl",{requestId:t,version:Ls,storageId:e})),getMetadata:async e=>await mr("1.0/storageGetMetadata",{requestId:t,version:Ls,storageId:e})}}function k8(t){const e=V3(t);return{generateUploadUrl:async()=>await mr("1.0/storageGenerateUploadUrl",{requestId:t,version:Ls}),delete:async n=>{await mr("1.0/storageDelete",{requestId:t,version:Ls,storageId:n})},getUrl:e.getUrl,getMetadata:e.getMetadata}}async function R8(t,e){const n="",r=Nr(JSON.parse(e)),i={db:T8(),auth:F3(n),storage:k8(n),scheduler:I8(),runQuery:(o,a)=>Lx("query",o,a),runMutation:(o,a)=>Lx("mutation",o,a)},s=await q3(t,i,r);return X3(s),JSON.stringify($t(s===void 0?null:s))}function X3(t){if(t instanceof U3||t instanceof nl)throw new Error("Return value is a Query. Results must be retrieved with `.collect()`, `.take(n), `.unique()`, or `.first()`.")}async function q3(t,e,n){let r;try{r=await Promise.resolve(t(e,...n))}catch(i){throw M8(i)}return r}function Y3(t,e){return(n,r)=>(globalThis.console.warn(`Convex functions should not directly call other Convex functions. Consider calling a helper function instead. e.g. \`export const foo = ${t}(...); await foo(ctx);\` is not supported. See https://docs.convex.dev/production/best-practices/#use-helper-functions-to-write-shared-code`),e(n,r))}function M8(t){if(typeof t=="object"&&t!==null&&Symbol.for("ConvexError")in t){const e=t;return e.data=JSON.stringify($t(e.data===void 0?null:e.data)),e.ConvexErrorSymbol=Symbol.for("ConvexError"),e}else return t}function Q3(){var e,n;if(typeof window>"u"||!window.__convexAllowFunctionsInBrowser)return;if(((n=(e=Object.getOwnPropertyDescriptor(globalThis,"window"))==null?void 0:e.get)==null?void 0:n.toString().includes("[native code]"))??!1)throw new Error("Convex functions should not be imported in the browser.")}function K3(t){return()=>{let e=z.any();return typeof t=="object"&&t.args!==void 0&&(e=b3(t.args)),JSON.stringify(e.json)}}function Z3(t){return()=>{let e;return typeof t=="object"&&t.returns!==void 0&&(e=b3(t.returns)),JSON.stringify(e?e.json:null)}}const O8=t=>{const e=typeof t=="function"?t:t.handler,n=Y3("internalMutation",e);return Q3(),n.isMutation=!0,n.isInternal=!0,n.invokeMutation=r=>R8(e,r),n.exportArgs=K3(t),n.exportReturns=Z3(t),n._handler=e,n};async function D8(t,e){const n="",r=Nr(JSON.parse(e)),i={db:$3(),auth:F3(n),storage:V3(n),runQuery:(o,a)=>Lx("query",o,a)},s=await q3(t,i,r);return X3(s),JSON.stringify($t(s===void 0?null:s))}const N8=t=>{const e=typeof t=="function"?t:t.handler,n=Y3("internalQuery",e);return Q3(),n.isQuery=!0,n.isInternal=!0,n.invokeQuery=r=>D8(e,r),n.exportArgs=K3(t),n.exportReturns=Z3(t),n._handler=e,n};async function Lx(t,e,n){const r=Zi(n),i={udfType:t,args:$t(r),...yy(e)},s=await mr("1.0/runUdf",i);return Nr(s)}var L8=Object.defineProperty,F8=(t,e,n)=>e in t?L8(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ql=(t,e,n)=>F8(t,typeof e!="symbol"?e+"":e,n);class d2{constructor(e){Ql(this,"indexes"),Ql(this,"searchIndexes"),Ql(this,"vectorIndexes"),Ql(this,"validator"),this.indexes=[],this.searchIndexes=[],this.vectorIndexes=[],this.validator=e}index(e,n){return this.indexes.push({indexDescriptor:e,fields:n}),this}searchIndex(e,n){return this.searchIndexes.push({indexDescriptor:e,searchField:n.searchField,filterFields:n.filterFields||[]}),this}vectorIndex(e,n){return this.vectorIndexes.push({indexDescriptor:e,vectorField:n.vectorField,dimensions:n.dimensions,filterFields:n.filterFields||[]}),this}self(){return this}export(){return{indexes:this.indexes,searchIndexes:this.searchIndexes,vectorIndexes:this.vectorIndexes,documentType:this.validator.json}}}function kg(t){return S3(t)?new d2(t):new d2(z.object(t))}class B8{constructor(e,n){Ql(this,"tables"),Ql(this,"strictTableNameTypes"),Ql(this,"schemaValidation"),this.tables=e,this.schemaValidation=(n==null?void 0:n.schemaValidation)===void 0?!0:n.schemaValidation}export(){return JSON.stringify({tables:Object.entries(this.tables).map(([e,n])=>{const{indexes:r,searchIndexes:i,vectorIndexes:s,documentType:o}=n.export();return{tableName:e,indexes:r,searchIndexes:i,vectorIndexes:s,documentType:o}}),schemaValidation:this.schemaValidation})}}function U8(t,e){return new B8(t,e)}U8({_scheduled_functions:kg({name:z.string(),args:z.array(z.any()),scheduledTime:z.float64(),completedTime:z.optional(z.float64()),state:z.union(z.object({kind:z.literal("pending")}),z.object({kind:z.literal("inProgress")}),z.object({kind:z.literal("success")}),z.object({kind:z.literal("failed"),error:z.string()}),z.object({kind:z.literal("canceled")}))}),_storage:kg({sha256:z.string(),size:z.float64(),contentType:z.optional(z.string())})});const Fs=h6,z8=[{name:"x",precision:8},{name:"y",precision:8},{name:"dx",precision:8},{name:"dy",precision:8},{name:"speed",precision:16}];function $8(t){return{x:t.position.x,y:t.position.y,dx:t.facing.dx,dy:t.facing.dy,speed:t.speed}}const ju=2654435761,Vu=2246822519,am=3266489917,f2=668265263,p2=374761393;function H8(t){const e=[];for(let n=0,r=t.length;n<r;++n){const i=t.charCodeAt(n);if(i<128)e.push(i);else if(i<2048)e.push(192|i>>6,128|i&63);else if(i<55296||i>=57344)e.push(224|i>>12,128|i>>6&63,128|i&63);else{const s=65536+((i&1023)<<10|t.charCodeAt(++n)&1023);e.push(240|s>>18&7,128|s>>12&63,128|s>>6&63,128|s&63)}}return new Uint8Array(e)}function G8(t,e=0){t=typeof t=="string"?H8(t):t;const n=t;let r=e+p2&4294967295,i=0;if(n.length>=16){const o=[e+ju+Vu&4294967295,e+Vu&4294967295,e+0&4294967295,e-ju&4294967295],a=t,c=a.length-16;let h=0;for(i=0;(i&4294967280)<=c;i+=4){const d=i,m=a[d+0]+(a[d+1]<<8),f=a[d+2]+(a[d+3]<<8),y=m*Vu+(f*Vu<<16);let v=o[h]+y&4294967295;v=v<<13|v>>>19;const S=v&65535,C=v>>>16;o[h]=S*ju+(C*ju<<16)&4294967295,h=h+1&3}r=(o[0]<<1|o[0]>>>31)+(o[1]<<7|o[1]>>>25)+(o[2]<<12|o[2]>>>20)+(o[3]<<18|o[3]>>>14)&4294967295}r=r+t.length&4294967295;const s=t.length-4;for(;i<=s;i+=4){const o=i,a=n[o+0]+(n[o+1]<<8),c=n[o+2]+(n[o+3]<<8),h=a*am+(c*am<<16);r=r+h&4294967295,r=r<<17|r>>>15,r=(r&65535)*f2+((r>>>16)*f2<<16)&4294967295}for(;i<n.length;++i){const o=n[i];r=r+o*p2,r=r<<11|r>>>21,r=(r&65535)*ju+((r>>>16)*ju<<16)&4294967295}return r=r^r>>>15,r=((r&65535)*Vu&4294967295)+((r>>>16)*Vu<<16),r=r^r>>>13,r=((r&65535)*am&4294967295)+((r>>>16)*am<<16),r=r^r>>>16,r<0?r+4294967296:r}function Wh(t){return t>>1^-(t&1)}function m2(t){for(var e=[],n=new Int8Array(t),r=n.length,i=0;r>i;){var s=n[i++],o=s&127;if(s>=0){e.push(Wh(o));continue}if(s=n[i++],o|=(s&127)<<7,s>=0){e.push(Wh(o));continue}if(s=n[i++],o|=(s&127)<<14,s>=0){e.push(Wh(o));continue}if(s=n[i++],o|=(s&127)<<21,s>=0){e.push(Wh(o));continue}s=n[i++],o|=s<<28,e.push(Wh(o))}return e}function W8(t,e){const n=1/(1<<e);return t.map(r=>r*n)}function g2(t,e=0){let n=e;const r=[];for(const i of t){const s=n+i;r.push(s),n=s}return r}function y2(t){if(t.length%2!==0)throw new Error(`Invalid RLE encoded length: ${t.length}`);const e=[];for(let n=0;n<t.length;n+=2){const r=t[n],i=t[n+1];for(let s=0;s<i;s++)e.push(r)}return e}const j8=1;function V8(t){const e=new ArrayBuffer(1024),n=new DataView(e);let r=0;n.setUint8(r,j8),r+=1;const i=new TextEncoder;for(const s of t){const o=i.encode(s.name);n.setUint8(r,o.length),r+=1,new Uint8Array(e,r,o.length).set(o),r+=o.length,n.setUint8(r,s.precision),r+=1}return e.slice(0,r)}function X8(t,e){const n=new DataView(e);let r=0;const i=q8(t),s=G8(new Uint8Array(V8(i))),o=n.getUint32(r,!0);if(r+=4,o!==s)throw new Error(`Config hash mismatch: ${o} !== ${s}`);const a={};for(;r<e.byteLength;){const c=n.getUint8(r);r+=1;const h=c&15,d=(c&16)!==0,m=i[h];if(!m)throw new Error(`Invalid field number: ${h}`);const f=Number(n.getBigUint64(r,!0));r+=8;const y=n.getUint16(r,!0);r+=2;const v=e.slice(r,r+y);r+=y;const S=[f,...g2(y2(m2(v)),f)],C=n.getUint16(r,!0);r+=2;const _=e.slice(r,r+C);r+=C;const b=m2(_),w=d?y2(b):b,I=g2(w),P=W8(I,m.precision);if(S.length+1!==P.length)throw new Error(`Invalid sample record: ${S.length} + 1 !== ${P.length}`);const N=P[0],O=[];for(let V=0;V<S.length;V++){const G=S[V],F=P[V+1];O.push({value:F,time:G})}const D={initialValue:N,samples:O};a[m.name]=D}return a}function q8(t){return t.map(e=>typeof e=="string"?{name:e,precision:0}:e)}function Y8(t,e,n,r){const i=pe.useRef(new Q8),s=pe.useMemo(()=>{if(!(!n||!r)){if(!(r instanceof ArrayBuffer))throw new Error(`Expected ArrayBuffer, found ${typeof r}`);return X8(t,r)}},[n&&r]);if(s&&i.current.receive(s),n===void 0)return;if(!e)return n;const o=i.current.query(e);return{...n,...o}}class Q8{constructor(){this.histories={}}receive(e){for(const[n,r]of Object.entries(e)){let i=this.histories[n];i||(i=[],this.histories[n]=i),i[i.length-1]!=r&&i.push(r)}}query(e){const n={};for(const[r,i]of Object.entries(this.histories)){if(i.length==0)continue;let s=null,o=i[0].initialValue;for(let a=0;a<i.length;a++){const c=i[a];for(const h of c.samples){if(h.time>e){s=a;break}o=h.value}if(s!==null)break}s!==null&&(this.histories[r]=i.slice(s)),n[r]=o}return n}}const v2=new Set,K8=({game:t,isViewer:e,player:n,onClick:r,historicalTime:i,worldId:s})=>{var w,I,P,N;const o=(w=t.playerDescriptions.get(n.id))==null?void 0:w.character,a=(I=t.playerDescriptions.get(n.id))==null?void 0:I.name;if(!o)throw new Error(`Player ${n.id} has no character`);const c=I3.find(O=>O.name===o),h=(P=t.world.historicalLocations)==null?void 0:P.get(n.id),d=Y8(z8,i,$8(n),h);if(!c)return v2.has(o)||(v2.add(o),Vt.error(` ${o}`)),null;if(!d)return null;const m=!![...t.world.conversations.values()].find(O=>{var D;return((D=O.isTyping)==null?void 0:D.playerId)===n.id}),f=!m&&!![...t.world.agents.values()].find(O=>O.playerId===n.id&&!!O.inProgressOperation),y=t.world.playerConversation(n);let v,S=3355443;{const O=[15037299,6600182,16766287,8505220,12216520,10586239];let D=0;for(let V=0;V<n.id.length;V++)D+=n.id.charCodeAt(V);S=O[D%O.length]}const C=ul(Fs.messages.listMessages,y?{worldId:s,conversationId:y.id}:"skip");if(C&&C.length>0){const O=C.slice().sort((V,G)=>V._creationTime-G._creationTime),D=O[O.length-1];D.author===n.id&&Date.now()-D._creationTime<12e3&&(v=D.text.trim())}const _=t.worldMap.tileDim,b={dx:d.dx,dy:d.dy};return Re.jsx(Re.Fragment,{children:Re.jsx(s5,{x:d.x*_+_/2,y:d.y*_+_/2,orientation:M5(b),isMoving:d.speed>0,isThinking:f,isSpeaking:m,emoji:n.activity&&n.activity.until>(i??Date.now())?(N=n.activity)==null?void 0:N.emoji:void 0,isViewer:e,textureUrl:c.textureUrl,spritesheetData:c.spritesheetData,speed:c.speed,onClick:()=>{r({kind:"player",id:n.id})},speechText:v,speechColor:S,name:a})})},J3={"pixels_large1.png":{frame:{x:0,y:0,w:32,h:32},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:32,h:32},sourceSize:{w:32,h:32}},"pixels_large2.png":{frame:{x:32,y:0,w:32,h:32},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:32,h:32},sourceSize:{w:32,h:32}},"pixels_large3.png":{frame:{x:64,y:0,w:32,h:32},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:32,h:32},sourceSize:{w:32,h:32}},"pixels_large4.png":{frame:{x:96,y:0,w:32,h:32},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:32,h:32},sourceSize:{w:32,h:32}}},ek={pixels_large:["pixels_large1.png","pixels_large2.png","pixels_large3.png","pixels_large4.png"]},tk={image:"./spritesheets/campfire.png",format:"RGBA8888",size:{w:128,h:32},scale:"1"},Z8={frames:J3,animations:ek,meta:tk},J8=Object.freeze(Object.defineProperty({__proto__:null,animations:ek,default:Z8,frames:J3,meta:tk},Symbol.toStringTag,{value:"Module"})),nk={"pixels_large1.png":{frame:{x:0,y:0,w:32,h:32},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:32,h:32},sourceSize:{w:32,h:32}},"pixels_large2.png":{frame:{x:32,y:0,w:32,h:32},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:32,h:32},sourceSize:{w:32,h:32}},"pixels_large3.png":{frame:{x:64,y:0,w:32,h:32},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:32,h:32},sourceSize:{w:32,h:32}}},rk={pixels_large:["pixels_large1.png","pixels_large2.png","pixels_large3.png"]},ik={image:"./spritesheets/gentlesparkle32.png",format:"RGBA8888",size:{w:192,h:320},scale:"1"},e$={frames:nk,animations:rk,meta:ik},t$=Object.freeze(Object.defineProperty({__proto__:null,animations:rk,default:e$,frames:nk,meta:ik},Symbol.toStringTag,{value:"Module"})),sk={"pixels_large1.png":{frame:{x:0,y:32,w:32,h:96},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:32,h:96},sourceSize:{w:32,h:96}},"pixels_large2.png":{frame:{x:32,y:32,w:32,h:96},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:32,h:96},sourceSize:{w:32,h:96}},"pixels_large3.png":{frame:{x:64,y:32,w:32,h:96},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:32,h:96},sourceSize:{w:32,h:96}},"pixels_large4.png":{frame:{x:96,y:32,w:32,h:96},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:32,h:96},sourceSize:{w:32,h:96}},"pixels_large5.png":{frame:{x:128,y:32,w:32,h:96},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:32,h:96},sourceSize:{w:32,h:96}},"pixels_large6.png":{frame:{x:160,y:32,w:32,h:96},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:32,h:96},sourceSize:{w:32,h:96}}},ok={pixels_large:["pixels_large1.png","pixels_large2.png","pixels_large3.png","pixels_large4.png","pixels_large5.png","pixels_large6.png"]},ak={image:"./spritesheets/gentlewaterfall32.png",format:"RGBA8888",size:{w:192,h:320},scale:"1"},n$={frames:sk,animations:ok,meta:ak},r$=Object.freeze(Object.defineProperty({__proto__:null,animations:ok,default:n$,frames:sk,meta:ak},Symbol.toStringTag,{value:"Module"})),lk={"pixels_large1.png":{frame:{x:0,y:192,w:32,h:64},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:32,h:64},sourceSize:{w:32,h:64}},"pixels_large2.png":{frame:{x:32,y:192,w:32,h:64},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:32,h:64},sourceSize:{w:32,h:64}},"pixels_large3.png":{frame:{x:64,y:192,w:32,h:64},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:32,h:64},sourceSize:{w:32,h:64}},"pixels_large4.png":{frame:{x:64,y:192,w:32,h:64},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:32,h:64},sourceSize:{w:32,h:64}},"pixels_large5.png":{frame:{x:128,y:192,w:32,h:64},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:32,h:64},sourceSize:{w:32,h:64}},"pixels_large6.png":{frame:{x:160,y:192,w:32,h:64},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:32,h:64},sourceSize:{w:32,h:64}}},uk={pixels_large:["pixels_large1.png","pixels_large2.png","pixels_large3.png","pixels_large4.png","pixels_large5.png","pixels_large6.png"]},ck={image:"./spritesheets/gentlewaterfall32.png",format:"RGBA8888",size:{w:192,h:320},scale:"1"},i$={frames:lk,animations:uk,meta:ck},s$=Object.freeze(Object.defineProperty({__proto__:null,animations:uk,default:i$,frames:lk,meta:ck},Symbol.toStringTag,{value:"Module"})),hk={"pixels_large1.png":{frame:{x:0,y:0,w:208,h:208},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:208,h:208},sourceSize:{w:208,h:208}},"pixels_large2.png":{frame:{x:208,y:0,w:208,h:208},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:208,h:208},sourceSize:{w:208,h:208}},"pixels_large3.png":{frame:{x:416,y:0,w:208,h:208},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:208,h:208},sourceSize:{w:208,h:208}},"pixels_large4.png":{frame:{x:0,y:208,w:208,h:208},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:208,h:208},sourceSize:{w:208,h:208}},"pixels_large5.png":{frame:{x:208,y:208,w:208,h:208},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:208,h:208},sourceSize:{w:208,h:208}},"pixels_large6.png":{frame:{x:416,y:208,w:208,h:208},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:208,h:208},sourceSize:{w:208,h:208}},"pixels_large7.png":{frame:{x:0,y:416,w:208,h:208},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:208,h:208},sourceSize:{w:208,h:208}},"pixels_large8.png":{frame:{x:208,y:416,w:208,h:208},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:208,h:208},sourceSize:{w:208,h:208}}},dk={pixels_large:["pixels_large1.png","pixels_large2.png","pixels_large3.png","pixels_large4.png","pixels_large5.png","pixels_large6.png","pixels_large7.png","pixels_large8.png"]},fk={image:"./spritesheets/windmill.png",format:"RGBA8888",size:{w:624,h:624},scale:"1"},o$={frames:hk,animations:dk,meta:fk},a$=Object.freeze(Object.defineProperty({__proto__:null,animations:dk,default:o$,frames:hk,meta:fk},Symbol.toStringTag,{value:"Module"})),l$={"campfire.json":{spritesheet:J8,url:"/ai-town/assets/spritesheets/campfire.png"},"gentlesparkle.json":{spritesheet:t$,url:"/ai-town/assets/spritesheets/gentlesparkle32.png"},"gentlewaterfall.json":{spritesheet:r$,url:"/ai-town/assets/spritesheets/gentlewaterfall32.png"},"windmill.json":{spritesheet:a$,url:"/ai-town/assets/spritesheets/windmill.png"},"gentlesplash.json":{spritesheet:s$,url:"/ai-town/assets/spritesheets/gentlewaterfall32.png"}},u$=hr.PixiComponent("StaticMap",{create:t=>{const e=t.map,n=Math.floor(e.tileSetDimX/e.tileDim),r=Math.floor(e.tileSetDimY/e.tileDim),i=Ge.from(e.tileSetUrl,{scaleMode:ns.NEAREST}),s=[];for(let m=0;m<n;m++)for(let f=0;f<r;f++)s[m+f*n]=new xe(i,new Ye(m*e.tileDim,f*e.tileDim,e.tileDim,e.tileDim));const o=e.bgTiles[0].length,a=e.bgTiles[0][0].length,c=new nr,h=[...e.bgTiles,...e.objectTiles];for(let m=0;m<o*a;m++){const f=m%o,y=Math.floor(m/o),v=f*e.tileDim,S=y*e.tileDim;for(const C of h){const _=C[f][y];if(_===-1)continue;const b=new Us(s[_]);b.x=v,b.y=S,c.addChild(b)}}const d=new Map;for(const m of e.animatedSprites){const f=m.sheet;d.has(f)||d.set(f,[]),d.get(f).push(m)}for(const[m,f]of d.entries()){const y=l$[m];if(!y){console.error("Could not find animation",m);continue}const{spritesheet:v,url:S}=y,C=Ge.from(S,{scaleMode:ns.NEAREST}),_=new Jd(C,v);_.parse().then(()=>{for(const b of f){const w=_.animations[b.animation];if(!w){console.error("Failed to load animation",b);continue}const I=new Xc(w);I.animationSpeed=.1,I.autoUpdate=!0,I.x=b.x,I.y=b.y,I.width=b.w,I.height=b.h,c.addChild(I),I.play()}})}return c.x=0,c.y=0,c.interactive=!0,c.hitArea=new Ye(0,0,o*e.tileDim,a*e.tileDim),c},applyProps:(t,e,n)=>{hr.applyDefaultProps(t,e,n)}});var c$=Object.defineProperty,h$=(t,e,n)=>e in t?c$(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,re=(t,e,n)=>(h$(t,typeof e!="symbol"?e+"":e,n),n);class ls{constructor(e){re(this,"parent"),re(this,"paused"),this.parent=e,this.paused=!1}destroy(){}down(e){return!1}move(e){return!1}up(e){return!1}wheel(e){return!1}update(e){}resize(){}reset(){}pause(){this.paused=!0}resume(){this.paused=!1}}var d$=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},pk={exports:{}};(function(t,e){(function(){var n,r;r=function(i){return t.exports=i},n={linear:function(i,s,o,a){return o*i/a+s},easeInQuad:function(i,s,o,a){return o*(i/=a)*i+s},easeOutQuad:function(i,s,o,a){return-o*(i/=a)*(i-2)+s},easeInOutQuad:function(i,s,o,a){return(i/=a/2)<1?o/2*i*i+s:-o/2*(--i*(i-2)-1)+s},easeInCubic:function(i,s,o,a){return o*(i/=a)*i*i+s},easeOutCubic:function(i,s,o,a){return o*((i=i/a-1)*i*i+1)+s},easeInOutCubic:function(i,s,o,a){return(i/=a/2)<1?o/2*i*i*i+s:o/2*((i-=2)*i*i+2)+s},easeInQuart:function(i,s,o,a){return o*(i/=a)*i*i*i+s},easeOutQuart:function(i,s,o,a){return-o*((i=i/a-1)*i*i*i-1)+s},easeInOutQuart:function(i,s,o,a){return(i/=a/2)<1?o/2*i*i*i*i+s:-o/2*((i-=2)*i*i*i-2)+s},easeInQuint:function(i,s,o,a){return o*(i/=a)*i*i*i*i+s},easeOutQuint:function(i,s,o,a){return o*((i=i/a-1)*i*i*i*i+1)+s},easeInOutQuint:function(i,s,o,a){return(i/=a/2)<1?o/2*i*i*i*i*i+s:o/2*((i-=2)*i*i*i*i+2)+s},easeInSine:function(i,s,o,a){return-o*Math.cos(i/a*(Math.PI/2))+o+s},easeOutSine:function(i,s,o,a){return o*Math.sin(i/a*(Math.PI/2))+s},easeInOutSine:function(i,s,o,a){return-o/2*(Math.cos(Math.PI*i/a)-1)+s},easeInExpo:function(i,s,o,a){return i===0?s:o*Math.pow(2,10*(i/a-1))+s},easeOutExpo:function(i,s,o,a){return i===a?s+o:o*(-Math.pow(2,-10*i/a)+1)+s},easeInOutExpo:function(i,s,o,a){return(i/=a/2)<1?o/2*Math.pow(2,10*(i-1))+s:o/2*(-Math.pow(2,-10*--i)+2)+s},easeInCirc:function(i,s,o,a){return-o*(Math.sqrt(1-(i/=a)*i)-1)+s},easeOutCirc:function(i,s,o,a){return o*Math.sqrt(1-(i=i/a-1)*i)+s},easeInOutCirc:function(i,s,o,a){return(i/=a/2)<1?-o/2*(Math.sqrt(1-i*i)-1)+s:o/2*(Math.sqrt(1-(i-=2)*i)+1)+s},easeInElastic:function(i,s,o,a){var c,h,d;return d=1.70158,h=0,c=o,i===0||(i/=a),h||(h=a*.3),c<Math.abs(o)?(c=o,d=h/4):d=h/(2*Math.PI)*Math.asin(o/c),-(c*Math.pow(2,10*(i-=1))*Math.sin((i*a-d)*(2*Math.PI)/h))+s},easeOutElastic:function(i,s,o,a){var c,h,d;return d=1.70158,h=0,c=o,i===0||(i/=a),h||(h=a*.3),c<Math.abs(o)?(c=o,d=h/4):d=h/(2*Math.PI)*Math.asin(o/c),c*Math.pow(2,-10*i)*Math.sin((i*a-d)*(2*Math.PI)/h)+o+s},easeInOutElastic:function(i,s,o,a){var c,h,d;return d=1.70158,h=0,c=o,i===0||(i/=a/2),h||(h=a*(.3*1.5)),c<Math.abs(o)?(c=o,d=h/4):d=h/(2*Math.PI)*Math.asin(o/c),i<1?-.5*(c*Math.pow(2,10*(i-=1))*Math.sin((i*a-d)*(2*Math.PI)/h))+s:c*Math.pow(2,-10*(i-=1))*Math.sin((i*a-d)*(2*Math.PI)/h)*.5+o+s},easeInBack:function(i,s,o,a,c){return c===void 0&&(c=1.70158),o*(i/=a)*i*((c+1)*i-c)+s},easeOutBack:function(i,s,o,a,c){return c===void 0&&(c=1.70158),o*((i=i/a-1)*i*((c+1)*i+c)+1)+s},easeInOutBack:function(i,s,o,a,c){return c===void 0&&(c=1.70158),(i/=a/2)<1?o/2*(i*i*(((c*=1.525)+1)*i-c))+s:o/2*((i-=2)*i*(((c*=1.525)+1)*i+c)+2)+s},easeInBounce:function(i,s,o,a){var c;return c=n.easeOutBounce(a-i,0,o,a),o-c+s},easeOutBounce:function(i,s,o,a){return(i/=a)<1/2.75?o*(7.5625*i*i)+s:i<2/2.75?o*(7.5625*(i-=1.5/2.75)*i+.75)+s:i<2.5/2.75?o*(7.5625*(i-=2.25/2.75)*i+.9375)+s:o*(7.5625*(i-=2.625/2.75)*i+.984375)+s},easeInOutBounce:function(i,s,o,a){var c;return i<a/2?(c=n.easeInBounce(i*2,0,o,a),c*.5+s):(c=n.easeOutBounce(i*2-a,0,o,a),c*.5+o*.5+s)}},r(n)}).call(d$)})(pk);const x2=pk.exports;function vy(t,e){if(t){if(typeof t=="function")return t;if(typeof t=="string")return x2[t]}else return x2[e]}const f$={removeOnInterrupt:!1,ease:"linear",time:1e3};class p$ extends ls{constructor(e,n={}){super(e),re(this,"options"),re(this,"startX"),re(this,"startY"),re(this,"deltaX"),re(this,"deltaY"),re(this,"keepCenter"),re(this,"startWidth",null),re(this,"startHeight",null),re(this,"deltaWidth",null),re(this,"deltaHeight",null),re(this,"width",null),re(this,"height",null),re(this,"time",0),this.options=Object.assign({},f$,n),this.options.ease=vy(this.options.ease),this.setupPosition(),this.setupZoom(),this.time=0}setupPosition(){typeof this.options.position<"u"?(this.startX=this.parent.center.x,this.startY=this.parent.center.y,this.deltaX=this.options.position.x-this.parent.center.x,this.deltaY=this.options.position.y-this.parent.center.y,this.keepCenter=!1):this.keepCenter=!0}setupZoom(){this.width=null,this.height=null,typeof this.options.scale<"u"?this.width=this.parent.screenWidth/this.options.scale:typeof this.options.scaleX<"u"||typeof this.options.scaleY<"u"?(typeof this.options.scaleX<"u"&&(this.width=this.parent.screenWidth/this.options.scaleX),typeof this.options.scaleY<"u"&&(this.height=this.parent.screenHeight/this.options.scaleY)):(typeof this.options.width<"u"&&(this.width=this.options.width),typeof this.options.height<"u"&&(this.height=this.options.height)),this.width!==null&&(this.startWidth=this.parent.screenWidthInWorldPixels,this.deltaWidth=this.width-this.startWidth),this.height!==null&&(this.startHeight=this.parent.screenHeightInWorldPixels,this.deltaHeight=this.height-this.startHeight)}down(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("animate"),!1}complete(){this.parent.plugins.remove("animate"),this.width!==null&&this.parent.fitWidth(this.width,this.keepCenter,this.height===null),this.height!==null&&this.parent.fitHeight(this.height,this.keepCenter,this.width===null),!this.keepCenter&&this.options.position&&this.parent.moveCenter(this.options.position),this.parent.emit("animate-end",this.parent),this.options.callbackOnComplete&&this.options.callbackOnComplete(this.parent)}update(e){if(this.paused)return;this.time+=e;const n=new Oe(this.parent.scale.x,this.parent.scale.y);if(this.time>=this.options.time){const r=this.parent.width,i=this.parent.height;this.complete(),(r!==this.parent.width||i!==this.parent.height)&&this.parent.emit("zoomed",{viewport:this.parent,original:n,type:"animate"})}else{const r=this.options.ease(this.time,0,1,this.options.time);if(this.width!==null){const i=this.startWidth,s=this.deltaWidth;this.parent.fitWidth(i+s*r,this.keepCenter,this.height===null)}if(this.height!==null){const i=this.startHeight,s=this.deltaHeight;this.parent.fitHeight(i+s*r,this.keepCenter,this.width===null)}if(this.width===null?this.parent.scale.x=this.parent.scale.y:this.height===null&&(this.parent.scale.y=this.parent.scale.x),!this.keepCenter){const i=this.startX,s=this.startY,o=this.deltaX,a=this.deltaY,c=new Oe(this.parent.x,this.parent.y);this.parent.moveCenter(i+o*r,s+a*r),this.parent.emit("moved",{viewport:this.parent,original:c,type:"animate"})}(this.width||this.height)&&this.parent.emit("zoomed",{viewport:this.parent,original:n,type:"animate"})}}}const m$={sides:"all",friction:.5,time:150,ease:"easeInOutSine",underflow:"center",bounceBox:null};class g$ extends ls{constructor(e,n={}){super(e),re(this,"options"),re(this,"left"),re(this,"top"),re(this,"right"),re(this,"bottom"),re(this,"underflowX"),re(this,"underflowY"),re(this,"ease"),re(this,"toX"),re(this,"toY"),this.options=Object.assign({},m$,n),this.ease=vy(this.options.ease,"easeInOutSine"),this.options.sides?this.options.sides==="all"?this.top=this.bottom=this.left=this.right=!0:this.options.sides==="horizontal"?(this.right=this.left=!0,this.top=this.bottom=!1):this.options.sides==="vertical"?(this.left=this.right=!1,this.top=this.bottom=!0):(this.top=this.options.sides.indexOf("top")!==-1,this.bottom=this.options.sides.indexOf("bottom")!==-1,this.left=this.options.sides.indexOf("left")!==-1,this.right=this.options.sides.indexOf("right")!==-1):this.left=this.top=this.right=this.bottom=!1;const r=this.options.underflow.toLowerCase();r==="center"?(this.underflowX=0,this.underflowY=0):(this.underflowX=r.indexOf("left")!==-1?-1:r.indexOf("right")!==-1?1:0,this.underflowY=r.indexOf("top")!==-1?-1:r.indexOf("bottom")!==-1?1:0),this.reset()}isActive(){return this.toX!==null||this.toY!==null}down(){return this.toX=this.toY=null,!1}up(){return this.bounce(),!1}update(e){if(!this.paused){if(this.bounce(),this.toX){const n=this.toX;n.time+=e,this.parent.emit("moved",{viewport:this.parent,type:"bounce-x"}),n.time>=this.options.time?(this.parent.x=n.end,this.toX=null,this.parent.emit("bounce-x-end",this.parent)):this.parent.x=this.ease(n.time,n.start,n.delta,this.options.time)}if(this.toY){const n=this.toY;n.time+=e,this.parent.emit("moved",{viewport:this.parent,type:"bounce-y"}),n.time>=this.options.time?(this.parent.y=n.end,this.toY=null,this.parent.emit("bounce-y-end",this.parent)):this.parent.y=this.ease(n.time,n.start,n.delta,this.options.time)}}}calcUnderflowX(){let e;switch(this.underflowX){case-1:e=0;break;case 1:e=this.parent.screenWidth-this.parent.screenWorldWidth;break;default:e=(this.parent.screenWidth-this.parent.screenWorldWidth)/2}return e}calcUnderflowY(){let e;switch(this.underflowY){case-1:e=0;break;case 1:e=this.parent.screenHeight-this.parent.screenWorldHeight;break;default:e=(this.parent.screenHeight-this.parent.screenWorldHeight)/2}return e}oob(){const e=this.options.bounceBox;if(e){const n=typeof e.x>"u"?0:e.x,r=typeof e.y>"u"?0:e.y,i=typeof e.width>"u"?this.parent.worldWidth:e.width,s=typeof e.height>"u"?this.parent.worldHeight:e.height;return{left:this.parent.left<n,right:this.parent.right>i,top:this.parent.top<r,bottom:this.parent.bottom>s,topLeft:new Oe(n*this.parent.scale.x,r*this.parent.scale.y),bottomRight:new Oe(i*this.parent.scale.x-this.parent.screenWidth,s*this.parent.scale.y-this.parent.screenHeight)}}return{left:this.parent.left<0,right:this.parent.right>this.parent.worldWidth,top:this.parent.top<0,bottom:this.parent.bottom>this.parent.worldHeight,topLeft:new Oe(0,0),bottomRight:new Oe(this.parent.worldWidth*this.parent.scale.x-this.parent.screenWidth,this.parent.worldHeight*this.parent.scale.y-this.parent.screenHeight)}}bounce(){var e,n;if(this.paused)return;let r,i=this.parent.plugins.get("decelerate",!0);i&&(i.x||i.y)&&(i.x&&i.percentChangeX===((e=i.options)==null?void 0:e.friction)||i.y&&i.percentChangeY===((n=i.options)==null?void 0:n.friction))&&(r=this.oob(),(r.left&&this.left||r.right&&this.right)&&(i.percentChangeX=this.options.friction),(r.top&&this.top||r.bottom&&this.bottom)&&(i.percentChangeY=this.options.friction));const s=this.parent.plugins.get("drag",!0)||{},o=this.parent.plugins.get("pinch",!0)||{};if(i=i||{},!(s!=null&&s.active)&&!(o!=null&&o.active)&&(!this.toX||!this.toY)&&(!i.x||!i.y)){r=r||this.oob();const a=r.topLeft,c=r.bottomRight;if(!this.toX&&!i.x){let h=null;r.left&&this.left?h=this.parent.screenWorldWidth<this.parent.screenWidth?this.calcUnderflowX():-a.x:r.right&&this.right&&(h=this.parent.screenWorldWidth<this.parent.screenWidth?this.calcUnderflowX():-c.x),h!==null&&this.parent.x!==h&&(this.toX={time:0,start:this.parent.x,delta:h-this.parent.x,end:h},this.parent.emit("bounce-x-start",this.parent))}if(!this.toY&&!i.y){let h=null;r.top&&this.top?h=this.parent.screenWorldHeight<this.parent.screenHeight?this.calcUnderflowY():-a.y:r.bottom&&this.bottom&&(h=this.parent.screenWorldHeight<this.parent.screenHeight?this.calcUnderflowY():-c.y),h!==null&&this.parent.y!==h&&(this.toY={time:0,start:this.parent.y,delta:h-this.parent.y,end:h},this.parent.emit("bounce-y-start",this.parent))}}}reset(){this.toX=this.toY=null,this.bounce()}}const y$={left:!1,right:!1,top:!1,bottom:!1,direction:null,underflow:"center"};class v$ extends ls{constructor(e,n={}){super(e),re(this,"options"),re(this,"last"),re(this,"noUnderflow"),re(this,"underflowX"),re(this,"underflowY"),this.options=Object.assign({},y$,n),this.options.direction&&(this.options.left=this.options.direction==="x"||this.options.direction==="all"?!0:null,this.options.right=this.options.direction==="x"||this.options.direction==="all"?!0:null,this.options.top=this.options.direction==="y"||this.options.direction==="all"?!0:null,this.options.bottom=this.options.direction==="y"||this.options.direction==="all"?!0:null),this.parseUnderflow(),this.last={x:null,y:null,scaleX:null,scaleY:null},this.update()}parseUnderflow(){const e=this.options.underflow.toLowerCase();e==="none"?this.noUnderflow=!0:e==="center"?(this.underflowX=this.underflowY=0,this.noUnderflow=!1):(this.underflowX=e.indexOf("left")!==-1?-1:e.indexOf("right")!==-1?1:0,this.underflowY=e.indexOf("top")!==-1?-1:e.indexOf("bottom")!==-1?1:0,this.noUnderflow=!1)}move(){return this.update(),!1}update(){if(this.paused||this.parent.x===this.last.x&&this.parent.y===this.last.y&&this.parent.scale.x===this.last.scaleX&&this.parent.scale.y===this.last.scaleY)return;const e=new Oe(this.parent.x,this.parent.y),n=this.parent.plugins.decelerate||{};if(this.options.left!==null||this.options.right!==null){let r=!1;if(!this.noUnderflow&&this.parent.screenWorldWidth<this.parent.screenWidth)switch(this.underflowX){case-1:this.parent.x!==0&&(this.parent.x=0,r=!0);break;case 1:this.parent.x!==this.parent.screenWidth-this.parent.screenWorldWidth&&(this.parent.x=this.parent.screenWidth-this.parent.screenWorldWidth,r=!0);break;default:this.parent.x!==(this.parent.screenWidth-this.parent.screenWorldWidth)/2&&(this.parent.x=(this.parent.screenWidth-this.parent.screenWorldWidth)/2,r=!0)}else this.options.left!==null&&this.parent.left<(this.options.left===!0?0:this.options.left)&&(this.parent.x=-(this.options.left===!0?0:this.options.left)*this.parent.scale.x,n.x=0,r=!0),this.options.right!==null&&this.parent.right>(this.options.right===!0?this.parent.worldWidth:this.options.right)&&(this.parent.x=-(this.options.right===!0?this.parent.worldWidth:this.options.right)*this.parent.scale.x+this.parent.screenWidth,n.x=0,r=!0);r&&this.parent.emit("moved",{viewport:this.parent,original:e,type:"clamp-x"})}if(this.options.top!==null||this.options.bottom!==null){let r=!1;if(!this.noUnderflow&&this.parent.screenWorldHeight<this.parent.screenHeight)switch(this.underflowY){case-1:this.parent.y!==0&&(this.parent.y=0,r=!0);break;case 1:this.parent.y!==this.parent.screenHeight-this.parent.screenWorldHeight&&(this.parent.y=this.parent.screenHeight-this.parent.screenWorldHeight,r=!0);break;default:this.parent.y!==(this.parent.screenHeight-this.parent.screenWorldHeight)/2&&(this.parent.y=(this.parent.screenHeight-this.parent.screenWorldHeight)/2,r=!0)}else this.options.top!==null&&this.parent.top<(this.options.top===!0?0:this.options.top)&&(this.parent.y=-(this.options.top===!0?0:this.options.top)*this.parent.scale.y,n.y=0,r=!0),this.options.bottom!==null&&this.parent.bottom>(this.options.bottom===!0?this.parent.worldHeight:this.options.bottom)&&(this.parent.y=-(this.options.bottom===!0?this.parent.worldHeight:this.options.bottom)*this.parent.scale.y+this.parent.screenHeight,n.y=0,r=!0);r&&this.parent.emit("moved",{viewport:this.parent,original:e,type:"clamp-y"})}this.last.x=this.parent.x,this.last.y=this.parent.y,this.last.scaleX=this.parent.scale.x,this.last.scaleY=this.parent.scale.y}reset(){this.update()}}const x$={minWidth:null,minHeight:null,maxWidth:null,maxHeight:null,minScale:null,maxScale:null};class w$ extends ls{constructor(e,n={}){super(e),re(this,"options"),this.options=Object.assign({},x$,n),this.clamp()}resize(){this.clamp()}clamp(){if(!this.paused){if(this.options.minWidth||this.options.minHeight||this.options.maxWidth||this.options.maxHeight){let e=this.parent.worldScreenWidth,n=this.parent.worldScreenHeight;if(this.options.minWidth!==null&&e<this.options.minWidth){const r=this.parent.scale.x;this.parent.fitWidth(this.options.minWidth,!1,!1,!0),this.parent.scale.y*=this.parent.scale.x/r,e=this.parent.worldScreenWidth,n=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(this.options.maxWidth!==null&&e>this.options.maxWidth){const r=this.parent.scale.x;this.parent.fitWidth(this.options.maxWidth,!1,!1,!0),this.parent.scale.y*=this.parent.scale.x/r,e=this.parent.worldScreenWidth,n=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(this.options.minHeight!==null&&n<this.options.minHeight){const r=this.parent.scale.y;this.parent.fitHeight(this.options.minHeight,!1,!1,!0),this.parent.scale.x*=this.parent.scale.y/r,e=this.parent.worldScreenWidth,n=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(this.options.maxHeight!==null&&n>this.options.maxHeight){const r=this.parent.scale.y;this.parent.fitHeight(this.options.maxHeight,!1,!1,!0),this.parent.scale.x*=this.parent.scale.y/r,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}}else if(this.options.minScale||this.options.maxScale){const e={x:null,y:null},n={x:null,y:null};if(typeof this.options.minScale=="number")e.x=this.options.minScale,e.y=this.options.minScale;else if(this.options.minScale!==null){const s=this.options.minScale;e.x=typeof s.x>"u"?null:s.x,e.y=typeof s.y>"u"?null:s.y}if(typeof this.options.maxScale=="number")n.x=this.options.maxScale,n.y=this.options.maxScale;else if(this.options.maxScale!==null){const s=this.options.maxScale;n.x=typeof s.x>"u"?null:s.x,n.y=typeof s.y>"u"?null:s.y}let r=this.parent.scale.x,i=this.parent.scale.y;e.x!==null&&r<e.x&&(r=e.x),n.x!==null&&r>n.x&&(r=n.x),e.y!==null&&i<e.y&&(i=e.y),n.y!==null&&i>n.y&&(i=n.y),(r!==this.parent.scale.x||i!==this.parent.scale.y)&&(this.parent.scale.set(r,i),this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"}))}}}reset(){this.clamp()}}const _$={friction:.98,bounce:.8,minSpeed:.01},Ma=16;class S$ extends ls{constructor(e,n={}){super(e),re(this,"options"),re(this,"x"),re(this,"y"),re(this,"percentChangeX"),re(this,"percentChangeY"),re(this,"saved"),re(this,"timeSinceRelease"),this.options=Object.assign({},_$,n),this.saved=[],this.timeSinceRelease=0,this.reset(),this.parent.on("moved",r=>this.handleMoved(r))}down(){return this.saved=[],this.x=this.y=null,!1}isActive(){return!!(this.x||this.y)}move(){if(this.paused)return!1;const e=this.parent.input.count();return(e===1||e>1&&!this.parent.plugins.get("pinch",!0))&&(this.saved.push({x:this.parent.x,y:this.parent.y,time:performance.now()}),this.saved.length>60&&this.saved.splice(0,30)),!1}handleMoved(e){if(this.saved.length){const n=this.saved[this.saved.length-1];e.type==="clamp-x"&&e.original?n.x===e.original.x&&(n.x=this.parent.x):e.type==="clamp-y"&&e.original&&n.y===e.original.y&&(n.y=this.parent.y)}}up(){if(this.parent.input.count()===0&&this.saved.length){const e=performance.now();for(const n of this.saved)if(n.time>=e-100){const r=e-n.time;this.x=(this.parent.x-n.x)/r,this.y=(this.parent.y-n.y)/r,this.percentChangeX=this.percentChangeY=this.options.friction,this.timeSinceRelease=0;break}}return!1}activate(e){e=e||{},typeof e.x<"u"&&(this.x=e.x,this.percentChangeX=this.options.friction),typeof e.y<"u"&&(this.y=e.y,this.percentChangeY=this.options.friction)}update(e){if(this.paused)return;const n=this.x||this.y,r=this.timeSinceRelease,i=this.timeSinceRelease+e;if(this.x){const s=this.percentChangeX,o=Math.log(s);this.parent.x+=this.x*Ma/o*(Math.pow(s,i/Ma)-Math.pow(s,r/Ma)),this.x*=Math.pow(this.percentChangeX,e/Ma)}if(this.y){const s=this.percentChangeY,o=Math.log(s);this.parent.y+=this.y*Ma/o*(Math.pow(s,i/Ma)-Math.pow(s,r/Ma)),this.y*=Math.pow(this.percentChangeY,e/Ma)}this.timeSinceRelease+=e,this.x&&this.y?Math.abs(this.x)<this.options.minSpeed&&Math.abs(this.y)<this.options.minSpeed&&(this.x=0,this.y=0):(Math.abs(this.x||0)<this.options.minSpeed&&(this.x=0),Math.abs(this.y||0)<this.options.minSpeed&&(this.y=0)),n&&this.parent.emit("moved",{viewport:this.parent,type:"decelerate"})}reset(){this.x=this.y=null}}const b$={direction:"all",pressDrag:!0,wheel:!0,wheelScroll:1,reverse:!1,clampWheel:!1,underflow:"center",factor:1,mouseButtons:"all",keyToPress:null,ignoreKeyToPressOnTouch:!1,lineHeight:20,wheelSwapAxes:!1};class E$ extends ls{constructor(e,n={}){super(e),re(this,"options"),re(this,"moved"),re(this,"reverse"),re(this,"xDirection"),re(this,"yDirection"),re(this,"keyIsPressed"),re(this,"mouse"),re(this,"underflowX"),re(this,"underflowY"),re(this,"last"),re(this,"current"),re(this,"windowEventHandlers",[]),this.options=Object.assign({},b$,n),this.moved=!1,this.reverse=this.options.reverse?1:-1,this.xDirection=!this.options.direction||this.options.direction==="all"||this.options.direction==="x",this.yDirection=!this.options.direction||this.options.direction==="all"||this.options.direction==="y",this.keyIsPressed=!1,this.parseUnderflow(),this.mouseButtons(this.options.mouseButtons),this.options.keyToPress&&this.handleKeyPresses(this.options.keyToPress)}handleKeyPresses(e){const n=i=>{e.includes(i.code)&&(this.keyIsPressed=!0)},r=i=>{e.includes(i.code)&&(this.keyIsPressed=!1)};this.addWindowEventHandler("keyup",r),this.addWindowEventHandler("keydown",n)}addWindowEventHandler(e,n){window.addEventListener(e,n),this.windowEventHandlers.push({event:e,handler:n})}destroy(){this.windowEventHandlers.forEach(({event:e,handler:n})=>{window.removeEventListener(e,n)})}mouseButtons(e){!e||e==="all"?this.mouse=[!0,!0,!0]:this.mouse=[e.indexOf("left")!==-1,e.indexOf("middle")!==-1,e.indexOf("right")!==-1]}parseUnderflow(){const e=this.options.underflow.toLowerCase();e==="center"?(this.underflowX=0,this.underflowY=0):(e.includes("left")?this.underflowX=-1:e.includes("right")?this.underflowX=1:this.underflowX=0,e.includes("top")?this.underflowY=-1:e.includes("bottom")?this.underflowY=1:this.underflowY=0)}checkButtons(e){const n=e.pointerType==="mouse",r=this.parent.input.count();return!!((r===1||r>1&&!this.parent.plugins.get("pinch",!0))&&(!n||this.mouse[e.button]))}checkKeyPress(e){return!this.options.keyToPress||this.keyIsPressed||this.options.ignoreKeyToPressOnTouch&&e.data.pointerType==="touch"}down(e){return this.paused||!this.options.pressDrag?!1:this.checkButtons(e)&&this.checkKeyPress(e)?(this.last={x:e.global.x,y:e.global.y},this.current=e.pointerId,!0):(this.last=null,!1)}get active(){return this.moved}move(e){if(this.paused||!this.options.pressDrag)return!1;if(this.last&&this.current===e.data.pointerId){const n=e.global.x,r=e.global.y,i=this.parent.input.count();if(i===1||i>1&&!this.parent.plugins.get("pinch",!0)){const s=n-this.last.x,o=r-this.last.y;if(this.moved||this.xDirection&&this.parent.input.checkThreshold(s)||this.yDirection&&this.parent.input.checkThreshold(o)){const a={x:n,y:r};return this.xDirection&&(this.parent.x+=(a.x-this.last.x)*this.options.factor),this.yDirection&&(this.parent.y+=(a.y-this.last.y)*this.options.factor),this.last=a,this.moved||this.parent.emit("drag-start",{event:e,screen:new Oe(this.last.x,this.last.y),world:this.parent.toWorld(new Oe(this.last.x,this.last.y)),viewport:this.parent}),this.moved=!0,this.parent.emit("moved",{viewport:this.parent,type:"drag"}),!0}}else this.moved=!1}return!1}up(e){if(this.paused)return!1;const n=this.parent.input.touches;if(n.length===1){const r=n[0];return r.last&&(this.last={x:r.last.x,y:r.last.y},this.current=r.id),this.moved=!1,!0}else if(this.last&&this.moved){const r=new Oe(this.last.x,this.last.y);return this.parent.emit("drag-end",{event:e,screen:r,world:this.parent.toWorld(r),viewport:this.parent}),this.last=null,this.moved=!1,!0}return!1}wheel(e){if(this.paused)return!1;if(this.options.wheel){const n=this.parent.plugins.get("wheel",!0);if(!n||!n.options.wheelZoom&&!e.ctrlKey){const r=e.deltaMode?this.options.lineHeight:1,i=[e.deltaX,e.deltaY],[s,o]=this.options.wheelSwapAxes?i.reverse():i;return this.xDirection&&(this.parent.x+=s*r*this.options.wheelScroll*this.reverse),this.yDirection&&(this.parent.y+=o*r*this.options.wheelScroll*this.reverse),this.options.clampWheel&&this.clamp(),this.parent.emit("wheel-scroll",this.parent),this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.options.passiveWheel||e.preventDefault(),this.parent.options.stopPropagation&&e.stopPropagation(),!0}}return!1}resume(){this.last=null,this.paused=!1}clamp(){const e=this.parent.plugins.get("decelerate",!0)||{};if(this.options.clampWheel!=="y")if(this.parent.screenWorldWidth<this.parent.screenWidth)switch(this.underflowX){case-1:this.parent.x=0;break;case 1:this.parent.x=this.parent.screenWidth-this.parent.screenWorldWidth;break;default:this.parent.x=(this.parent.screenWidth-this.parent.screenWorldWidth)/2}else this.parent.left<0?(this.parent.x=0,e.x=0):this.parent.right>this.parent.worldWidth&&(this.parent.x=-this.parent.worldWidth*this.parent.scale.x+this.parent.screenWidth,e.x=0);if(this.options.clampWheel!=="x")if(this.parent.screenWorldHeight<this.parent.screenHeight)switch(this.underflowY){case-1:this.parent.y=0;break;case 1:this.parent.y=this.parent.screenHeight-this.parent.screenWorldHeight;break;default:this.parent.y=(this.parent.screenHeight-this.parent.screenWorldHeight)/2}else this.parent.top<0&&(this.parent.y=0,e.y=0),this.parent.bottom>this.parent.worldHeight&&(this.parent.y=-this.parent.worldHeight*this.parent.scale.y+this.parent.screenHeight,e.y=0)}}const T$={speed:0,acceleration:null,radius:null};class C$ extends ls{constructor(e,n,r={}){super(e),re(this,"options"),re(this,"target"),re(this,"velocity"),this.target=n,this.options=Object.assign({},T$,r),this.velocity={x:0,y:0}}update(e){if(this.paused)return;const n=this.parent.center;let r=this.target.x,i=this.target.y;if(this.options.radius)if(Math.sqrt(Math.pow(this.target.y-n.y,2)+Math.pow(this.target.x-n.x,2))>this.options.radius){const a=Math.atan2(this.target.y-n.y,this.target.x-n.x);r=this.target.x-Math.cos(a)*this.options.radius,i=this.target.y-Math.sin(a)*this.options.radius}else return;const s=r-n.x,o=i-n.y;if(s||o)if(this.options.speed)if(this.options.acceleration){const a=Math.atan2(i-n.y,r-n.x),c=Math.sqrt(Math.pow(s,2)+Math.pow(o,2));if(c){const h=(Math.pow(this.velocity.x,2)+Math.pow(this.velocity.y,2))/(2*this.options.acceleration);c>h?this.velocity={x:Math.min(this.velocity.x+(this.options.acceleration*e,this.options.speed)),y:Math.min(this.velocity.y+(this.options.acceleration*e,this.options.speed))}:this.velocity={x:Math.max(this.velocity.x-this.options.acceleration*this.options.speed,0),y:Math.max(this.velocity.y-this.options.acceleration*this.options.speed,0)};const d=Math.cos(a)*this.velocity.x,m=Math.sin(a)*this.velocity.y,f=Math.abs(d)>Math.abs(s)?r:n.x+d,y=Math.abs(m)>Math.abs(o)?i:n.y+m;this.parent.moveCenter(f,y),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}}else{const a=Math.atan2(i-n.y,r-n.x),c=Math.cos(a)*this.options.speed,h=Math.sin(a)*this.options.speed,d=Math.abs(c)>Math.abs(s)?r:n.x+c,m=Math.abs(h)>Math.abs(o)?i:n.y+h;this.parent.moveCenter(d,m),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}else this.parent.moveCenter(r,i),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}}const I$={radius:null,distance:null,top:null,bottom:null,left:null,right:null,speed:8,reverse:!1,noDecelerate:!1,linear:!1,allowButtons:!1};class A$ extends ls{constructor(e,n={}){super(e),re(this,"options"),re(this,"reverse"),re(this,"radiusSquared"),re(this,"left"),re(this,"top"),re(this,"right"),re(this,"bottom"),re(this,"horizontal"),re(this,"vertical"),this.options=Object.assign({},I$,n),this.reverse=this.options.reverse?1:-1,this.radiusSquared=typeof this.options.radius=="number"?Math.pow(this.options.radius,2):null,this.resize()}resize(){const e=this.options.distance;e!==null?(this.left=e,this.top=e,this.right=this.parent.screenWidth-e,this.bottom=this.parent.screenHeight-e):this.options.radius||(this.left=this.options.left,this.top=this.options.top,this.right=this.options.right===null?null:this.parent.screenWidth-this.options.right,this.bottom=this.options.bottom===null?null:this.parent.screenHeight-this.options.bottom)}down(){return this.paused||this.options.allowButtons||(this.horizontal=this.vertical=null),!1}move(e){if(this.paused||e.pointerType!=="mouse"&&e.pointerId!==1||!this.options.allowButtons&&e.buttons!==0)return!1;const n=e.global.x,r=e.global.y;if(this.radiusSquared){const i=this.parent.toScreen(this.parent.center);if(Math.pow(i.x-n,2)+Math.pow(i.y-r,2)>=this.radiusSquared){const s=Math.atan2(i.y-r,i.x-n);this.options.linear?(this.horizontal=Math.round(Math.cos(s))*this.options.speed*this.reverse*(60/1e3),this.vertical=Math.round(Math.sin(s))*this.options.speed*this.reverse*(60/1e3)):(this.horizontal=Math.cos(s)*this.options.speed*this.reverse*(60/1e3),this.vertical=Math.sin(s)*this.options.speed*this.reverse*(60/1e3))}else this.horizontal&&this.decelerateHorizontal(),this.vertical&&this.decelerateVertical(),this.horizontal=this.vertical=0}else this.left!==null&&n<this.left?this.horizontal=Number(this.reverse)*this.options.speed*(60/1e3):this.right!==null&&n>this.right?this.horizontal=-1*this.reverse*this.options.speed*(60/1e3):(this.decelerateHorizontal(),this.horizontal=0),this.top!==null&&r<this.top?this.vertical=Number(this.reverse)*this.options.speed*(60/1e3):this.bottom!==null&&r>this.bottom?this.vertical=-1*this.reverse*this.options.speed*(60/1e3):(this.decelerateVertical(),this.vertical=0);return!1}decelerateHorizontal(){const e=this.parent.plugins.get("decelerate",!0);this.horizontal&&e&&!this.options.noDecelerate&&e.activate({x:this.horizontal*this.options.speed*this.reverse/(1e3/60)})}decelerateVertical(){const e=this.parent.plugins.get("decelerate",!0);this.vertical&&e&&!this.options.noDecelerate&&e.activate({y:this.vertical*this.options.speed*this.reverse/(1e3/60)})}up(){return this.paused||(this.horizontal&&this.decelerateHorizontal(),this.vertical&&this.decelerateVertical(),this.horizontal=this.vertical=null),!1}update(){if(!this.paused&&(this.horizontal||this.vertical)){const e=this.parent.center;this.horizontal&&(e.x+=this.horizontal*this.options.speed),this.vertical&&(e.y+=this.vertical*this.options.speed),this.parent.moveCenter(e),this.parent.emit("moved",{viewport:this.parent,type:"mouse-edges"})}}}const P$={noDrag:!1,percent:1,center:null,factor:1,axis:"all"};class k$ extends ls{constructor(e,n={}){super(e),re(this,"options"),re(this,"active",!1),re(this,"pinching",!1),re(this,"moved",!1),re(this,"lastCenter"),this.options=Object.assign({},P$,n)}down(){return this.parent.input.count()>=2?(this.active=!0,!0):!1}isAxisX(){return["all","x"].includes(this.options.axis)}isAxisY(){return["all","y"].includes(this.options.axis)}move(e){if(this.paused||!this.active)return!1;const n=e.global.x,r=e.global.y,i=this.parent.input.touches;if(i.length>=2){const s=i[0],o=i[1],a=s.last&&o.last?Math.sqrt(Math.pow(o.last.x-s.last.x,2)+Math.pow(o.last.y-s.last.y,2)):null;if(s.id===e.pointerId?s.last={x:n,y:r,data:e}:o.id===e.pointerId&&(o.last={x:n,y:r,data:e}),a){let c;const h=new Oe(s.last.x+(o.last.x-s.last.x)/2,s.last.y+(o.last.y-s.last.y)/2);this.options.center||(c=this.parent.toLocal(h));let d=Math.sqrt(Math.pow(o.last.x-s.last.x,2)+Math.pow(o.last.y-s.last.y,2));d=d===0?d=1e-10:d;const m=(1-a/d)*this.options.percent*(this.isAxisX()?this.parent.scale.x:this.parent.scale.y);this.isAxisX()&&(this.parent.scale.x+=m),this.isAxisY()&&(this.parent.scale.y+=m),this.parent.emit("zoomed",{viewport:this.parent,type:"pinch",center:h});const f=this.parent.plugins.get("clamp-zoom",!0);if(f&&f.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const y=this.parent.toGlobal(c);this.parent.x+=(h.x-y.x)*this.options.factor,this.parent.y+=(h.y-y.y)*this.options.factor,this.parent.emit("moved",{viewport:this.parent,type:"pinch"})}!this.options.noDrag&&this.lastCenter&&(this.parent.x+=(h.x-this.lastCenter.x)*this.options.factor,this.parent.y+=(h.y-this.lastCenter.y)*this.options.factor,this.parent.emit("moved",{viewport:this.parent,type:"pinch"})),this.lastCenter=h,this.moved=!0}else this.pinching||(this.parent.emit("pinch-start",this.parent),this.pinching=!0);return!0}return!1}up(){return this.pinching&&this.parent.input.touches.length<=1?(this.active=!1,this.lastCenter=null,this.pinching=!1,this.moved=!1,this.parent.emit("pinch-end",this.parent),!0):!1}}const R$={topLeft:!1,friction:.8,time:1e3,ease:"easeInOutSine",interrupt:!0,removeOnComplete:!1,removeOnInterrupt:!1,forceStart:!1};class M$ extends ls{constructor(e,n,r,i={}){super(e),re(this,"options"),re(this,"ease"),re(this,"x"),re(this,"y"),re(this,"percent"),re(this,"snapping"),re(this,"deltaX"),re(this,"deltaY"),re(this,"startX"),re(this,"startY"),this.options=Object.assign({},R$,i),this.ease=vy(i.ease,"easeInOutSine"),this.x=n,this.y=r,this.options.forceStart&&this.snapStart()}snapStart(){this.percent=0,this.snapping={time:0};const e=this.options.topLeft?this.parent.corner:this.parent.center;this.deltaX=this.x-e.x,this.deltaY=this.y-e.y,this.startX=e.x,this.startY=e.y,this.parent.emit("snap-start",this.parent)}wheel(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("snap"),!1}down(){return this.options.removeOnInterrupt?this.parent.plugins.remove("snap"):this.options.interrupt&&(this.snapping=null),!1}up(){if(this.parent.input.count()===0){const e=this.parent.plugins.get("decelerate",!0);e&&(e.x||e.y)&&(e.percentChangeX=e.percentChangeY=this.options.friction)}return!1}update(e){if(!this.paused&&!(this.options.interrupt&&this.parent.input.count()!==0))if(this.snapping){const n=this.snapping;n.time+=e;let r,i,s;const o=this.startX,a=this.startY,c=this.deltaX,h=this.deltaY;if(n.time>this.options.time)r=!0,i=o+c,s=a+h;else{const d=this.ease(n.time,0,1,this.options.time);i=o+c*d,s=a+h*d}this.options.topLeft?this.parent.moveCorner(i,s):this.parent.moveCenter(i,s),this.parent.emit("moved",{viewport:this.parent,type:"snap"}),r&&(this.options.removeOnComplete&&this.parent.plugins.remove("snap"),this.parent.emit("snap-end",this.parent),this.snapping=null)}else{const n=this.options.topLeft?this.parent.corner:this.parent.center;(n.x!==this.x||n.y!==this.y)&&this.snapStart()}}}const O$={width:0,height:0,time:1e3,ease:"easeInOutSine",center:null,interrupt:!0,removeOnComplete:!1,removeOnInterrupt:!1,forceStart:!1,noMove:!1};class D$ extends ls{constructor(e,n={}){super(e),re(this,"options"),re(this,"ease"),re(this,"xScale"),re(this,"yScale"),re(this,"xIndependent"),re(this,"yIndependent"),re(this,"snapping"),this.options=Object.assign({},O$,n),this.ease=vy(this.options.ease),this.xIndependent=!1,this.yIndependent=!1,this.xScale=0,this.yScale=0,this.options.width>0&&(this.xScale=e.screenWidth/this.options.width,this.xIndependent=!0),this.options.height>0&&(this.yScale=e.screenHeight/this.options.height,this.yIndependent=!0),this.xScale=this.xIndependent?this.xScale:this.yScale,this.yScale=this.yIndependent?this.yScale:this.xScale,this.options.time===0?(e.container.scale.x=this.xScale,e.container.scale.y=this.yScale,this.options.removeOnComplete&&this.parent.plugins.remove("snap-zoom")):n.forceStart&&this.createSnapping()}createSnapping(){const e=this.parent.worldScreenWidth,n=this.parent.worldScreenHeight,r=this.parent.screenWidth/this.xScale,i=this.parent.screenHeight/this.yScale;this.snapping={time:0,startX:e,startY:n,deltaX:r-e,deltaY:i-n},this.parent.emit("snap-zoom-start",this.parent)}resize(){this.snapping=null,this.options.width>0&&(this.xScale=this.parent.screenWidth/this.options.width),this.options.height>0&&(this.yScale=this.parent.screenHeight/this.options.height),this.xScale=this.xIndependent?this.xScale:this.yScale,this.yScale=this.yIndependent?this.yScale:this.xScale}wheel(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("snap-zoom"),!1}down(){return this.options.removeOnInterrupt?this.parent.plugins.remove("snap-zoom"):this.options.interrupt&&(this.snapping=null),!1}update(e){if(this.paused||this.options.interrupt&&this.parent.input.count()!==0)return;let n;if(!this.options.center&&!this.options.noMove&&(n=this.parent.center),!this.snapping)(this.parent.scale.x!==this.xScale||this.parent.scale.y!==this.yScale)&&this.createSnapping();else if(this.snapping){const r=this.snapping;if(r.time+=e,r.time>=this.options.time)this.parent.scale.set(this.xScale,this.yScale),this.options.removeOnComplete&&this.parent.plugins.remove("snap-zoom"),this.parent.emit("snap-zoom-end",this.parent),this.snapping=null;else{const s=this.snapping,o=this.ease(s.time,s.startX,s.deltaX,this.options.time),a=this.ease(s.time,s.startY,s.deltaY,this.options.time);this.parent.scale.x=this.parent.screenWidth/o,this.parent.scale.y=this.parent.screenHeight/a}const i=this.parent.plugins.get("clamp-zoom",!0);i&&i.clamp(),this.options.noMove||(this.options.center?this.parent.moveCenter(this.options.center):this.parent.moveCenter(n))}}resume(){this.snapping=null,super.resume()}}const N$={percent:.1,smooth:!1,interrupt:!0,reverse:!1,center:null,lineHeight:20,axis:"all",keyToPress:null,trackpadPinch:!1,wheelZoom:!0};class L$ extends ls{constructor(e,n={}){super(e),re(this,"options"),re(this,"smoothing"),re(this,"smoothingCenter"),re(this,"smoothingCount"),re(this,"keyIsPressed"),this.options=Object.assign({},N$,n),this.keyIsPressed=!1,this.options.keyToPress&&this.handleKeyPresses(this.options.keyToPress)}handleKeyPresses(e){window.addEventListener("keydown",n=>{e.includes(n.code)&&(this.keyIsPressed=!0)}),window.addEventListener("keyup",n=>{e.includes(n.code)&&(this.keyIsPressed=!1)})}checkKeyPress(){return!this.options.keyToPress||this.keyIsPressed}down(){return this.options.interrupt&&(this.smoothing=null),!1}isAxisX(){return["all","x"].includes(this.options.axis)}isAxisY(){return["all","y"].includes(this.options.axis)}update(){if(this.smoothing){const e=this.smoothingCenter,n=this.smoothing;let r;this.options.center||(r=this.parent.toLocal(e)),this.isAxisX()&&(this.parent.scale.x+=n.x),this.isAxisY()&&(this.parent.scale.y+=n.y),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const i=this.parent.plugins.get("clamp-zoom",!0);if(i&&i.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const s=this.parent.toGlobal(r);this.parent.x+=e.x-s.x,this.parent.y+=e.y-s.y}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.smoothingCount++,this.smoothingCount>=this.options.smooth&&(this.smoothing=null)}}pinch(e){if(this.paused)return;const n=this.parent.input.getPointerPosition(e),r=-e.deltaY*(e.deltaMode?this.options.lineHeight:1)/200,i=Math.pow(2,(1+this.options.percent)*r);let s;this.options.center||(s=this.parent.toLocal(n)),this.isAxisX()&&(this.parent.scale.x*=i),this.isAxisY()&&(this.parent.scale.y*=i),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const o=this.parent.plugins.get("clamp-zoom",!0);if(o&&o.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const a=this.parent.toGlobal(s);this.parent.x+=n.x-a.x,this.parent.y+=n.y-a.y}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.emit("wheel-start",{event:e,viewport:this.parent})}wheel(e){if(this.paused||!this.checkKeyPress())return!1;if(e.ctrlKey&&this.options.trackpadPinch)this.pinch(e);else if(this.options.wheelZoom){const n=this.parent.input.getPointerPosition(e),r=(this.options.reverse?-1:1)*-e.deltaY*(e.deltaMode?this.options.lineHeight:1)/500,i=Math.pow(2,(1+this.options.percent)*r);if(this.options.smooth){const s={x:this.smoothing?this.smoothing.x*(this.options.smooth-this.smoothingCount):0,y:this.smoothing?this.smoothing.y*(this.options.smooth-this.smoothingCount):0};this.smoothing={x:((this.parent.scale.x+s.x)*i-this.parent.scale.x)/this.options.smooth,y:((this.parent.scale.y+s.y)*i-this.parent.scale.y)/this.options.smooth},this.smoothingCount=0,this.smoothingCenter=n}else{let s;this.options.center||(s=this.parent.toLocal(n)),this.isAxisX()&&(this.parent.scale.x*=i),this.isAxisY()&&(this.parent.scale.y*=i),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const o=this.parent.plugins.get("clamp-zoom",!0);if(o&&o.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const a=this.parent.toGlobal(s);this.parent.x+=n.x-a.x,this.parent.y+=n.y-a.y}}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.emit("wheel-start",{event:e,viewport:this.parent})}return!this.parent.options.passiveWheel}}class F${constructor(e){re(this,"viewport"),re(this,"clickedAvailable"),re(this,"isMouseDown"),re(this,"last"),re(this,"wheelFunction"),re(this,"touches"),this.viewport=e,this.touches=[],this.addListeners()}addListeners(){this.viewport.interactive=!0,this.viewport.forceHitArea||(this.viewport.hitArea=new Ye(0,0,this.viewport.worldWidth,this.viewport.worldHeight)),this.viewport.on("pointerdown",this.down,this),this.viewport.options.allowPreserveDragOutside?this.viewport.on("globalpointermove",this.move,this):this.viewport.on("pointermove",this.move,this),this.viewport.on("pointerup",this.up,this),this.viewport.on("pointerupoutside",this.up,this),this.viewport.on("pointercancel",this.up,this),this.viewport.options.allowPreserveDragOutside||this.viewport.on("pointerleave",this.up,this),this.wheelFunction=e=>this.handleWheel(e),this.viewport.options.events.domElement.addEventListener("wheel",this.wheelFunction,{passive:this.viewport.options.passiveWheel}),this.isMouseDown=!1}destroy(){this.viewport.options.events.domElement.removeEventListener("wheel",this.wheelFunction)}down(e){if(!(this.viewport.pause||!this.viewport.worldVisible)){if(e.pointerType==="mouse"?this.isMouseDown=!0:this.get(e.pointerId)||this.touches.push({id:e.pointerId,last:null}),this.count()===1){this.last=e.global.clone();const n=this.viewport.plugins.get("decelerate",!0),r=this.viewport.plugins.get("bounce",!0);(!n||!n.isActive())&&(!r||!r.isActive())?this.clickedAvailable=!0:this.clickedAvailable=!1}else this.clickedAvailable=!1;this.viewport.plugins.down(e)&&this.viewport.options.stopPropagation&&e.stopPropagation()}}clear(){this.isMouseDown=!1,this.touches=[],this.last=null}checkThreshold(e){return Math.abs(e)>=this.viewport.threshold}move(e){if(this.viewport.pause||!this.viewport.worldVisible)return;const n=this.viewport.plugins.move(e);if(this.clickedAvailable&&this.last){const r=e.global.x-this.last.x,i=e.global.y-this.last.y;(this.checkThreshold(r)||this.checkThreshold(i))&&(this.clickedAvailable=!1)}n&&this.viewport.options.stopPropagation&&e.stopPropagation()}up(e){if(this.viewport.pause||!this.viewport.worldVisible)return;e.pointerType==="mouse"&&(this.isMouseDown=!1),e.pointerType!=="mouse"&&this.remove(e.pointerId);const n=this.viewport.plugins.up(e);this.clickedAvailable&&this.count()===0&&this.last&&(this.viewport.emit("clicked",{event:e,screen:this.last,world:this.viewport.toWorld(this.last),viewport:this.viewport}),this.clickedAvailable=!1),n&&this.viewport.options.stopPropagation&&e.stopPropagation()}getPointerPosition(e){const n=new Oe;return this.viewport.options.events.mapPositionToPoint(n,e.clientX,e.clientY),n}handleWheel(e){if(this.viewport.pause||!this.viewport.worldVisible)return;const n=this.viewport.toLocal(this.getPointerPosition(e));this.viewport.left<=n.x&&n.x<=this.viewport.right&&this.viewport.top<=n.y&&n.y<=this.viewport.bottom&&this.viewport.plugins.wheel(e)&&!this.viewport.options.passiveWheel&&e.preventDefault()}pause(){this.touches=[],this.isMouseDown=!1}get(e){for(const n of this.touches)if(n.id===e)return n;return null}remove(e){for(let n=0;n<this.touches.length;n++)if(this.touches[n].id===e){this.touches.splice(n,1);return}}count(){return(this.isMouseDown?1:0)+this.touches.length}}const jh=["drag","pinch","wheel","follow","mouse-edges","decelerate","animate","bounce","snap-zoom","clamp-zoom","snap","clamp"];class B${constructor(e){re(this,"plugins"),re(this,"list"),re(this,"viewport"),this.viewport=e,this.list=[],this.plugins={}}add(e,n,r=jh.length){const i=this.plugins[e];i&&i.destroy(),this.plugins[e]=n;const s=jh.indexOf(e);s!==-1&&jh.splice(s,1),jh.splice(r,0,e),this.sort()}get(e,n){var r;return n&&(r=this.plugins[e])!=null&&r.paused?null:this.plugins[e]}update(e){for(const n of this.list)n.update(e)}resize(){for(const e of this.list)e.resize()}reset(){for(const e of this.list)e.reset()}removeAll(){this.list.forEach(e=>{e.destroy()}),this.plugins={},this.sort()}remove(e){var n;this.plugins[e]&&((n=this.plugins[e])==null||n.destroy(),delete this.plugins[e],this.viewport.emit("plugin-remove",e),this.sort())}pause(e){var n;(n=this.plugins[e])==null||n.pause()}resume(e){var n;(n=this.plugins[e])==null||n.resume()}sort(){this.list=[];for(const e of jh)this.plugins[e]&&this.list.push(this.plugins[e])}down(e){let n=!1;for(const r of this.list)r.down(e)&&(n=!0);return n}move(e){let n=!1;for(const r of this.viewport.plugins.list)r.move(e)&&(n=!0);return n}up(e){let n=!1;for(const r of this.list)r.up(e)&&(n=!0);return n}wheel(e){let n=!1;for(const r of this.list)r.wheel(e)&&(n=!0);return n}}const U$={screenWidth:window.innerWidth,screenHeight:window.innerHeight,worldWidth:null,worldHeight:null,threshold:5,passiveWheel:!0,stopPropagation:!1,forceHitArea:null,noTicker:!1,disableOnContextMenu:!1,ticker:mn.shared,allowPreserveDragOutside:!1};class z$ extends nr{constructor(e){super(),re(this,"moving"),re(this,"screenWidth"),re(this,"screenHeight"),re(this,"threshold"),re(this,"input"),re(this,"plugins"),re(this,"zooming"),re(this,"lastViewport"),re(this,"options"),re(this,"_dirty"),re(this,"_forceHitArea"),re(this,"_hitAreaDefault"),re(this,"_pause"),re(this,"tickerFunction"),re(this,"_worldWidth"),re(this,"_worldHeight"),re(this,"_disableOnContextMenu",n=>n.preventDefault()),this.options={...U$,...e},this.screenWidth=this.options.screenWidth,this.screenHeight=this.options.screenHeight,this._worldWidth=this.options.worldWidth,this._worldHeight=this.options.worldHeight,this.forceHitArea=this.options.forceHitArea,this.threshold=this.options.threshold,this.options.disableOnContextMenu&&this.options.events.domElement.addEventListener("contextmenu",this._disableOnContextMenu),this.options.noTicker||(this.tickerFunction=()=>this.update(this.options.ticker.elapsedMS),this.options.ticker.add(this.tickerFunction)),this.input=new F$(this),this.plugins=new B$(this)}destroy(e){!this.options.noTicker&&this.tickerFunction&&this.options.ticker.remove(this.tickerFunction),this.options.disableOnContextMenu&&this.options.events.domElement.removeEventListener("contextmenu",this._disableOnContextMenu),this.input.destroy(),super.destroy(e)}update(e){this.pause||(this.plugins.update(e),this.lastViewport&&(this.lastViewport.x!==this.x||this.lastViewport.y!==this.y?this.moving=!0:this.moving&&(this.emit("moved-end",this),this.moving=!1),this.lastViewport.scaleX!==this.scale.x||this.lastViewport.scaleY!==this.scale.y?this.zooming=!0:this.zooming&&(this.emit("zoomed-end",this),this.zooming=!1)),this.forceHitArea||(this._hitAreaDefault=new Ye(this.left,this.top,this.worldScreenWidth,this.worldScreenHeight),this.hitArea=this._hitAreaDefault),this._dirty=this._dirty||!this.lastViewport||this.lastViewport.x!==this.x||this.lastViewport.y!==this.y||this.lastViewport.scaleX!==this.scale.x||this.lastViewport.scaleY!==this.scale.y,this.lastViewport={x:this.x,y:this.y,scaleX:this.scale.x,scaleY:this.scale.y},this.emit("frame-end",this))}resize(e=window.innerWidth,n=window.innerHeight,r,i){this.screenWidth=e,this.screenHeight=n,typeof r<"u"&&(this._worldWidth=r),typeof i<"u"&&(this._worldHeight=i),this.plugins.resize(),this.dirty=!0}get worldWidth(){return this._worldWidth?this._worldWidth:this.width/this.scale.x}set worldWidth(e){this._worldWidth=e,this.plugins.resize()}get worldHeight(){return this._worldHeight?this._worldHeight:this.height/this.scale.y}set worldHeight(e){this._worldHeight=e,this.plugins.resize()}getVisibleBounds(){return new Ye(this.left,this.top,this.worldScreenWidth,this.worldScreenHeight)}toWorld(e,n){return arguments.length===2?this.toLocal(new Oe(e,n)):this.toLocal(e)}toScreen(e,n){return arguments.length===2?this.toGlobal(new Oe(e,n)):this.toGlobal(e)}get worldScreenWidth(){return this.screenWidth/this.scale.x}get worldScreenHeight(){return this.screenHeight/this.scale.y}get screenWorldWidth(){return this.worldWidth*this.scale.x}get screenWorldHeight(){return this.worldHeight*this.scale.y}get center(){return new Oe(this.worldScreenWidth/2-this.x/this.scale.x,this.worldScreenHeight/2-this.y/this.scale.y)}set center(e){this.moveCenter(e)}moveCenter(...e){let n,r;typeof e[0]=="number"?(n=e[0],r=e[1]):(n=e[0].x,r=e[0].y);const i=(this.worldScreenWidth/2-n)*this.scale.x,s=(this.worldScreenHeight/2-r)*this.scale.y;return(this.x!==i||this.y!==s)&&(this.position.set(i,s),this.plugins.reset(),this.dirty=!0),this}get corner(){return new Oe(-this.x/this.scale.x,-this.y/this.scale.y)}set corner(e){this.moveCorner(e)}moveCorner(...e){let n,r;return e.length===1?(n=-e[0].x*this.scale.x,r=-e[0].y*this.scale.y):(n=-e[0]*this.scale.x,r=-e[1]*this.scale.y),(n!==this.x||r!==this.y)&&(this.position.set(n,r),this.plugins.reset(),this.dirty=!0),this}get screenWidthInWorldPixels(){return this.screenWidth/this.scale.x}get screenHeightInWorldPixels(){return this.screenHeight/this.scale.y}findFitWidth(e){return this.screenWidth/e}findFitHeight(e){return this.screenHeight/e}findFit(e,n){const r=this.screenWidth/e,i=this.screenHeight/n;return Math.min(r,i)}findCover(e,n){const r=this.screenWidth/e,i=this.screenHeight/n;return Math.max(r,i)}fitWidth(e=this.worldWidth,n,r=!0,i){let s;n&&(s=this.center),this.scale.x=this.screenWidth/e,r&&(this.scale.y=this.scale.x);const o=this.plugins.get("clamp-zoom",!0);return!i&&o&&o.clamp(),n&&s&&this.moveCenter(s),this}fitHeight(e=this.worldHeight,n,r=!0,i){let s;n&&(s=this.center),this.scale.y=this.screenHeight/e,r&&(this.scale.x=this.scale.y);const o=this.plugins.get("clamp-zoom",!0);return!i&&o&&o.clamp(),n&&s&&this.moveCenter(s),this}fitWorld(e){let n;e&&(n=this.center),this.scale.x=this.screenWidth/this.worldWidth,this.scale.y=this.screenHeight/this.worldHeight,this.scale.x<this.scale.y?this.scale.y=this.scale.x:this.scale.x=this.scale.y;const r=this.plugins.get("clamp-zoom",!0);return r&&r.clamp(),e&&n&&this.moveCenter(n),this}fit(e,n=this.worldWidth,r=this.worldHeight){let i;e&&(i=this.center),this.scale.x=this.screenWidth/n,this.scale.y=this.screenHeight/r,this.scale.x<this.scale.y?this.scale.y=this.scale.x:this.scale.x=this.scale.y;const s=this.plugins.get("clamp-zoom",!0);return s&&s.clamp(),e&&i&&this.moveCenter(i),this}setZoom(e,n){let r;n&&(r=this.center),this.scale.set(e);const i=this.plugins.get("clamp-zoom",!0);return i&&i.clamp(),n&&r&&this.moveCenter(r),this}zoomPercent(e,n){return this.setZoom(this.scale.x+this.scale.x*e,n)}zoom(e,n){return this.fitWidth(e+this.worldScreenWidth,n),this}get scaled(){return this.scale.x}set scaled(e){this.setZoom(e,!0)}snapZoom(e){return this.plugins.add("snap-zoom",new D$(this,e)),this}OOB(){return{left:this.left<0,right:this.right>this.worldWidth,top:this.top<0,bottom:this.bottom>this.worldHeight,cornerPoint:new Oe(this.worldWidth*this.scale.x-this.screenWidth,this.worldHeight*this.scale.y-this.screenHeight)}}get right(){return-this.x/this.scale.x+this.worldScreenWidth}set right(e){this.x=-e*this.scale.x+this.screenWidth,this.plugins.reset()}get left(){return-this.x/this.scale.x}set left(e){this.x=-e*this.scale.x,this.plugins.reset()}get top(){return-this.y/this.scale.y}set top(e){this.y=-e*this.scale.y,this.plugins.reset()}get bottom(){return-this.y/this.scale.y+this.worldScreenHeight}set bottom(e){this.y=-e*this.scale.y+this.screenHeight,this.plugins.reset()}get dirty(){return!!this._dirty}set dirty(e){this._dirty=e}get forceHitArea(){return this._forceHitArea}set forceHitArea(e){e?(this._forceHitArea=e,this.hitArea=e):(this._forceHitArea=null,this.hitArea=new Ye(0,0,this.worldWidth,this.worldHeight))}drag(e){return this.plugins.add("drag",new E$(this,e)),this}clamp(e){return this.plugins.add("clamp",new v$(this,e)),this}decelerate(e){return this.plugins.add("decelerate",new S$(this,e)),this}bounce(e){return this.plugins.add("bounce",new g$(this,e)),this}pinch(e){return this.plugins.add("pinch",new k$(this,e)),this}snap(e,n,r){return this.plugins.add("snap",new M$(this,e,n,r)),this}follow(e,n){return this.plugins.add("follow",new C$(this,e,n)),this}wheel(e){return this.plugins.add("wheel",new L$(this,e)),this}animate(e){return this.plugins.add("animate",new p$(this,e)),this}clampZoom(e){return this.plugins.add("clamp-zoom",new w$(this,e)),this}mouseEdges(e){return this.plugins.add("mouse-edges",new A$(this,e)),this}get pause(){return!!this._pause}set pause(e){this._pause=e,this.lastViewport=null,this.moving=!1,this.zooming=!1,e&&this.input.pause()}ensureVisible(e,n,r,i,s){s&&(r>this.worldScreenWidth||i>this.worldScreenHeight)&&(this.fit(!0,r,i),this.emit("zoomed",{viewport:this,type:"ensureVisible"}));let o=!1;e<this.left?(this.left=e,o=!0):e+r>this.right&&(this.right=e+r,o=!0),n<this.top?(this.top=n,o=!0):n+i>this.bottom&&(this.bottom=n+i,o=!0),o&&this.emit("moved",{viewport:this,type:"ensureVisible"})}}const $$=hr.PixiComponent("Viewport",{create(t){const{app:e,children:n,viewportRef:r,...i}=t,s=new z$({events:e.renderer.events,passiveWheel:!1,...i});return s.sortableChildren=!0,r&&(r.current=s),s.drag().pinch({}).wheel().decelerate().clamp({direction:"all",underflow:"center"}).setZoom(-10).clampZoom({minScale:1.04*t.screenWidth/(t.worldWidth/2),maxScale:3}),s},applyProps(t,e,n){Object.keys(n).forEach(r=>{r!=="app"&&r!=="viewportRef"&&r!=="children"&&e[r]!==n[r]&&(t[r]=n[r])})}});async function H$(t,e){const n=t.watchQuery(Fs.aiTown.main.inputStatus,{inputId:e});let r=n.localQueryResult();if(r==null){let i;try{await new Promise((s,o)=>{i=n.onUpdate(()=>{try{r=n.localQueryResult()}catch(a){o(a);return}r!=null&&s()})})}finally{i&&i()}}if(!r)throw new Error(`Input ${e} was never processed.`);if(r.kind==="error")throw new Error(r.message);return r.value}function G$(t,e){const n=b_();return async r=>{const i=await n.mutation(Fs.world.sendWorldInput,{engineId:t,name:e,args:r});return await H$(n,i)}}async function W$(t){try{return await t}catch(e){throw Vt.error(e.message),e}}function j$({player:t,tileDim:e}){var i;const n=((i=t.pathfinding)==null?void 0:i.state.kind)=="moving"&&t.pathfinding.state.path,r=pe.useCallback(s=>{if(s.clear(),!n)return;let o=!0;for(const a of n){const{position:c}=E3(a),h=c.x*e+e/2,d=c.y*e+e/2;o?(s.moveTo(h,d),s.lineStyle(2,V$(t.id),.5),o=!1):s.lineTo(h,d)}},[n]);return n?Re.jsx(hr.Graphics,{draw:r}):null}function V$(t){return{h:0,s:50,l:90}}const w2=500,X$=.25;function q$(t){const{destination:e,tileDim:n}=t,r=i=>{i.clear();const s=Date.now();if(e.t+w2<=s)return;const o=(s-e.t)/w2,a=e.x*n,c=e.y*n;i.lineStyle(1.5,{h:0,s:50,l:90},.5),i.drawCircle(a,c,X$*o*n)};return Re.jsx(hr.Graphics,{draw:r})}const Y$=t=>{var C;const e=hr.useApp(),n=pe.useRef(),r=pe.useRef(null),i=ul(Fs.world.userStatus,{worldId:t.worldId})??null,s=(C=[...t.game.world.players.values()].find(_=>_.human===i))==null?void 0:C.id,o=G$(t.engineId,"moveTo"),a=pe.useRef(null),c=_=>{a.current={screenX:_.screenX,screenY:_.screenY}},[h,d]=pe.useState(null),m=async _=>{if(a.current){const{screenX:O,screenY:D}=a.current;a.current=null;const[V,G]=[O-_.screenX,D-_.screenY],F=Math.sqrt(V*V+G*G);if(F>10){console.log(`Skipping navigation on drag event (${F}px)`);return}}if(!s)return;const b=n.current;if(!b)return;const w=b.toWorld(_.screenX,_.screenY),I=t.game.worldMap.tileDim,P={x:w.x/I,y:w.y/I};d({t:Date.now(),...P});const N={x:Math.floor(P.x),y:Math.floor(P.y)};console.log(`Moving to ${JSON.stringify(N)}`),await W$(o({playerId:s,destination:N}))},{width:f,height:y,tileDim:v}=t.game.worldMap,S=[...t.game.world.players.values()];return pe.useEffect(()=>{if(!n.current||s===void 0)return;const _=t.game.world.players.get(s);n.current.animate({position:new Oe(_.position.x*v,_.position.y*v),scale:1.5})},[s]),pe.useEffect(()=>{const _=n.current;if(!_)return;const b={w:t.game.worldMap.width*v,h:t.game.worldMap.height*v},w={w:t.width,h:t.height},I={x:w.w/2,y:w.h/2},P=(q,W,H)=>Math.max(W,Math.min(H,q)),N=()=>{const q=[];for(const W of t.game.world.conversations.values()){const H=[...W.participants.keys()];if(H.length!==2)continue;const se=t.game.world.players.get(H[0]),ue=t.game.world.players.get(H[1]);if(!se||!ue)continue;const K=(se.position.x+ue.position.x)/2*v,$=(se.position.y+ue.position.y)/2*v,Q=P(K,I.x,b.w-I.x),L=P($,I.y,b.h-I.y);q.push(new Oe(Q,L))}return q},O=()=>{const q=Math.random()*b.w,W=Math.random()*b.h,H=P(q,I.x,b.w-I.x),se=P(W,I.y,b.h-I.y);return new Oe(H,se)};let D=0;const V=8e3,G=1500,F=()=>{const q=N(),W=q.length?q[D%q.length]:O();_.animate({position:W,scale:1.35,time:G}),D=(D+1)%Math.max(1,q.length),r.current=window.setTimeout(F,G+V)};return F(),()=>{r.current&&(window.clearTimeout(r.current),r.current=null)}},[n.current,t.game.world.conversations.size,t.game.worldMap.width,t.game.worldMap.height,v,t.width,t.height]),Re.jsxs($$,{app:e,screenWidth:t.width,screenHeight:t.height,worldWidth:f*v,worldHeight:y*v,viewportRef:n,children:[Re.jsx(u$,{map:t.game.worldMap,onpointerup:m,onpointerdown:c}),S.map(_=>(rR||_.id===s)&&Re.jsx(j$,{player:_,tileDim:v},`path-${_.id}`)),h&&Re.jsx(q$,{destination:h,tileDim:v}),S.map(_=>Re.jsx(K8,{game:t.game,player:_,isViewer:_.id===s,onClick:t.setSelectedElement,historicalTime:t.historicalTime,worldId:t.worldId},`player-${_.id}`))]})};globalThis&&globalThis.__awaiter;function Q$(){const[t,e]=pe.useState(null),[n,r]=pe.useState({width:0,height:0}),i=pe.useCallback(()=>{r({width:(t==null?void 0:t.offsetWidth)||0,height:(t==null?void 0:t.offsetHeight)||0})},[t==null?void 0:t.offsetHeight,t==null?void 0:t.offsetWidth]);return K$("resize",i),mk(()=>{i()},[t==null?void 0:t.offsetHeight,t==null?void 0:t.offsetWidth]),[e,n]}function K$(t,e,n,r){const i=pe.useRef(e);mk(()=>{i.current=e},[e]),pe.useEffect(()=>{var s;const o=(s=n==null?void 0:n.current)!==null&&s!==void 0?s:window;if(!(o&&o.addEventListener))return;const a=c=>i.current(c);return o.addEventListener(t,a,r),()=>{o.removeEventListener(t,a,r)}},[t,n,r])}globalThis&&globalThis.__awaiter;const mk=typeof window<"u"?pe.useLayoutEffect:pe.useEffect,Z$=12e4,_2=60*1e3,J$=60*1e3,eH=1e3,gk=1.3,tH=4,nH=15*1e3,rH=.75,S2=8,iH=15e3,sH=6e4,oH=.8,aH=6e4,b2=6e4,lH=10*6e4,uH=8,cH=2e3,hH=5*60*1e3,E2=16;function dH(){const t=ul(Fs.world.defaultWorldStatus),e=t==null?void 0:t.worldId,n=Y6(Fs.world.heartbeatWorld);pe.useEffect(()=>{const r=()=>{t&&(Date.now()-_2/2<t.lastViewed||n({worldId:t.worldId}))};r();const i=setInterval(r,_2);return()=>clearInterval(i)},[e,n])}function fH(t){const e=pe.useRef(new pH),n=pe.useRef(),[r,i]=pe.useState(void 0);t&&e.current.receive(t);const s=o=>{const a=Date.now();i(e.current.historicalServerTime(a)),n.current=requestAnimationFrame(s)};return pe.useEffect(()=>(n.current=requestAnimationFrame(s),()=>cancelAnimationFrame(n.current)),[]),{historicalTime:r,timeManager:e.current}}class pH{constructor(){this.intervals=[],this.totalDuration=0}receive(e){if(this.latestEngineStatus=e,!e.currentTime||!e.lastStepTs)return;const n=this.intervals[this.intervals.length-1];if(n){if(n.endTs===e.currentTime)return;if(n.endTs>e.currentTime)throw new Error("Received out-of-order engine status")}const r={startTs:e.lastStepTs,endTs:e.currentTime};this.intervals.push(r),this.totalDuration+=r.endTs-r.startTs}historicalServerTime(e){if(this.intervals.length==0)return;if(e===this.prevClientTs)return this.prevServerTs;const n=this.prevClientTs??e,r=this.prevServerTs??this.intervals[0].startTs,i=this.intervals[this.intervals.length-1].endTs,s=i-r;let o=1;s<yH?o=.8:s>gH&&(o=1.2);let a=Math.max(r+(e-n)*o,i-mH),c=null;for(let d=0;d<this.intervals.length;d++){const m=this.intervals[d];if(!(m.endTs<a)){if(a>=m.startTs){c=d;break}a<m.startTs&&(a=m.startTs,c=d)}}c===null&&(a=this.intervals.at(-1).endTs,c=this.intervals.length-1);const h=Math.max(c-1,0);if(h>0){for(const d of this.intervals.slice(0,h))this.totalDuration-=d.endTs-d.startTs;this.intervals=this.intervals.slice(h)}return this.prevClientTs=e,this.prevServerTs=a,a}bufferHealth(){if(!this.intervals.length)return 0;const e=this.prevServerTs??this.intervals[0].startTs;return this.intervals[this.intervals.length-1].endTs-e}clockSkew(){return!this.prevClientTs||!this.prevServerTs?0:this.prevClientTs-this.prevServerTs}}const mH=1500,gH=1250,yH=250,vH=!0,Wn="u-",xH="uplot",wH=Wn+"hz",_H=Wn+"vt",SH=Wn+"title",bH=Wn+"wrap",EH=Wn+"under",TH=Wn+"over",CH=Wn+"axis",jl=Wn+"off",IH=Wn+"select",AH=Wn+"cursor-x",PH=Wn+"cursor-y",kH=Wn+"cursor-pt",RH=Wn+"legend",MH=Wn+"live",OH=Wn+"inline",DH=Wn+"series",NH=Wn+"marker",T2=Wn+"label",LH=Wn+"value",od="width",ad="height",Vh="top",C2="bottom",Xu="left",zv="right",E_="#000",I2=E_+"0",A2="mousemove",P2="mousedown",$v="mouseup",k2="mouseenter",R2="mouseleave",M2="dblclick",FH="resize",BH="scroll",O2="change",Rg="dppxchange",T_="--",sh=typeof window<"u",Fx=sh?document:null,Rc=sh?window:null,UH=sh?navigator:null;let _t,lm;function Bx(){let t=devicePixelRatio;_t!=t&&(_t=t,lm&&zx(O2,lm,Bx),lm=matchMedia(`(min-resolution: ${_t-.001}dppx) and (max-resolution: ${_t+.001}dppx)`),iu(O2,lm,Bx),Rc.dispatchEvent(new CustomEvent(Rg)))}function _i(t,e){if(e!=null){let n=t.classList;!n.contains(e)&&n.add(e)}}function Ux(t,e){let n=t.classList;n.contains(e)&&n.remove(e)}function Xt(t,e,n){t.style[e]=n+"px"}function ys(t,e,n,r){let i=Fx.createElement(t);return e!=null&&_i(i,e),n!=null&&n.insertBefore(i,r),i}function Vi(t,e){return ys("div",t,e)}const D2=new WeakMap;function mo(t,e,n,r,i){let s="translate("+e+"px,"+n+"px)",o=D2.get(t);s!=o&&(t.style.transform=s,D2.set(t,s),e<0||n<0||e>r||n>i?_i(t,jl):Ux(t,jl))}const N2=new WeakMap;function L2(t,e,n){let r=e+n,i=N2.get(t);r!=i&&(N2.set(t,r),t.style.background=e,t.style.borderColor=n)}const F2=new WeakMap;function B2(t,e,n,r){let i=e+""+n,s=F2.get(t);i!=s&&(F2.set(t,i),t.style.height=n+"px",t.style.width=e+"px",t.style.marginLeft=r?-e/2+"px":0,t.style.marginTop=r?-n/2+"px":0)}const C_={passive:!0},zH={...C_,capture:!0};function iu(t,e,n,r){e.addEventListener(t,n,r?zH:C_)}function zx(t,e,n,r){e.removeEventListener(t,n,C_)}sh&&Bx();function Ss(t,e,n,r){let i;n=n||0,r=r||e.length-1;let s=r<=2147483647;for(;r-n>1;)i=s?n+r>>1:Pi((n+r)/2),e[i]<t?n=i:r=i;return t-e[n]<=e[r]-t?n:r}function Yc(t,e,n,r){for(let i=r==1?e:n;i>=e&&i<=n;i+=r)if(t[i]!=null)return i;return-1}function $H(t,e,n,r){let i=at,s=-at;if(r==1)i=t[e],s=t[n];else if(r==-1)i=t[n],s=t[e];else for(let o=e;o<=n;o++){let a=t[o];a!=null&&(a<i&&(i=a),a>s&&(s=a))}return[i,s]}function HH(t,e,n){let r=at,i=-at;for(let s=e;s<=n;s++){let o=t[s];o!=null&&o>0&&(o<r&&(r=o),o>i&&(i=o))}return[r,i]}function xy(t,e,n,r){let i=$2(t),s=$2(e);t==e&&(i==-1?(t*=n,e/=n):(t/=n,e*=n));let o=n==10?ta:yk,a=i==1?Pi:Yi,c=s==1?Yi:Pi,h=a(o(Hn(t))),d=c(o(Hn(e))),m=Qc(n,h),f=Qc(n,d);return n==10&&(h<0&&(m=Ft(m,-h)),d<0&&(f=Ft(f,-d))),r||n==2?(t=m*i,e=f*s):(t=wk(t,m),e=wy(e,f)),[t,e]}function I_(t,e,n,r){let i=xy(t,e,n,r);return t==0&&(i[0]=0),e==0&&(i[1]=0),i}const A_=.1,U2={mode:3,pad:A_},Id={pad:0,soft:null,mode:0},GH={min:Id,max:Id};function Mg(t,e,n,r){return _y(n)?z2(t,e,n):(Id.pad=n,Id.soft=r?0:null,Id.mode=r?3:0,z2(t,e,GH))}function wt(t,e){return t??e}function WH(t,e,n){for(e=wt(e,0),n=wt(n,t.length-1);e<=n;){if(t[e]!=null)return!0;e++}return!1}function z2(t,e,n){let r=n.min,i=n.max,s=wt(r.pad,0),o=wt(i.pad,0),a=wt(r.hard,-at),c=wt(i.hard,at),h=wt(r.soft,at),d=wt(i.soft,-at),m=wt(r.mode,0),f=wt(i.mode,0),y=e-t,v=ta(y),S=kr(Hn(t),Hn(e)),C=ta(S),_=Hn(C-v);(y<1e-24||_>10)&&(y=0,(t==0||e==0)&&(y=1e-24,m==2&&h!=at&&(s=0),f==2&&d!=-at&&(o=0)));let b=y||S||1e3,w=ta(b),I=Qc(10,Pi(w)),P=b*(y==0?t==0?.1:1:s),N=Ft(wk(t-P,I/10),24),O=t>=h&&(m==1||m==3&&N<=h||m==2&&N>=h)?h:at,D=kr(a,N<O&&t>=O?O:es(O,N)),V=b*(y==0?e==0?.1:1:o),G=Ft(wy(e+V,I/10),24),F=e<=d&&(f==1||f==3&&G>=d||f==2&&G<=d)?d:-at,q=es(c,G>F&&e<=F?F:kr(F,G));return D==q&&D==0&&(q=100),[D,q]}const jH=new Intl.NumberFormat(sh?UH.language:"en-US"),P_=t=>jH.format(t),Di=Math,Rm=Di.PI,Hn=Di.abs,Pi=Di.floor,zn=Di.round,Yi=Di.ceil,es=Di.min,kr=Di.max,Qc=Di.pow,$2=Di.sign,ta=Di.log10,yk=Di.log2,VH=(t,e=1)=>Di.sinh(t)*e,Hv=(t,e=1)=>Di.asinh(t/e),at=1/0;function H2(t){return(ta((t^t>>31)-(t>>31))|0)+1}function $x(t,e,n){return es(kr(t,e),n)}function it(t){return typeof t=="function"?t:()=>t}const XH=()=>{},vk=t=>t,xk=(t,e)=>e,qH=t=>null,G2=t=>!0,W2=(t,e)=>t==e,YH=/\.\d*?(?=9{6,}|0{6,})/gm,fu=t=>{if(Sk(t)||cl.has(t))return t;const e=`${t}`,n=e.match(YH);if(n==null)return t;let r=n[0].length-1;if(e.indexOf("e-")!=-1){let[i,s]=e.split("e");return+`${fu(i)}e${s}`}return Ft(t,r)};function Hl(t,e){return fu(Ft(fu(t/e))*e)}function wy(t,e){return fu(Yi(fu(t/e))*e)}function wk(t,e){return fu(Pi(fu(t/e))*e)}function Ft(t,e=0){if(Sk(t))return t;let n=10**e,r=t*n*(1+Number.EPSILON);return zn(r)/n}const cl=new Map;function _k(t){return((""+t).split(".")[1]||"").length}function af(t,e,n,r){let i=[],s=r.map(_k);for(let o=e;o<n;o++){let a=Hn(o),c=Ft(Qc(t,o),a);for(let h=0;h<r.length;h++){let d=t==10?+`${r[h]}e${o}`:r[h]*c,m=(o>=0?0:a)+(o>=s[h]?0:s[h]),f=t==10?d:Ft(d,m);i.push(f),cl.set(f,m)}}return i}const Ad={},k_=[],Kc=[null,null],Fa=Array.isArray,Sk=Number.isInteger,QH=t=>t===void 0;function j2(t){return typeof t=="string"}function _y(t){let e=!1;if(t!=null){let n=t.constructor;e=n==null||n==Object}return e}function KH(t){return t!=null&&typeof t=="object"}const ZH=Object.getPrototypeOf(Uint8Array),bk="__proto__";function Zc(t,e=_y){let n;if(Fa(t)){let r=t.find(i=>i!=null);if(Fa(r)||e(r)){n=Array(t.length);for(let i=0;i<t.length;i++)n[i]=Zc(t[i],e)}else n=t.slice()}else if(t instanceof ZH)n=t.slice();else if(e(t)){n={};for(let r in t)r!=bk&&(n[r]=Zc(t[r],e))}else n=t;return n}function In(t){let e=arguments;for(let n=1;n<e.length;n++){let r=e[n];for(let i in r)i!=bk&&(_y(t[i])?In(t[i],Zc(r[i])):t[i]=Zc(r[i]))}return t}const JH=0,eG=1,tG=2;function nG(t,e,n){for(let r=0,i,s=-1;r<e.length;r++){let o=e[r];if(o>s){for(i=o-1;i>=0&&t[i]==null;)t[i--]=null;for(i=o+1;i<n&&t[i]==null;)t[s=i++]=null}}}function rG(t,e){if(oG(t)){let o=t[0].slice();for(let a=1;a<t.length;a++)o.push(...t[a].slice(1));return aG(o[0])||(o=sG(o)),o}let n=new Set;for(let o=0;o<t.length;o++){let c=t[o][0],h=c.length;for(let d=0;d<h;d++)n.add(c[d])}let r=[Array.from(n).sort((o,a)=>o-a)],i=r[0].length,s=new Map;for(let o=0;o<i;o++)s.set(r[0][o],o);for(let o=0;o<t.length;o++){let a=t[o],c=a[0];for(let h=1;h<a.length;h++){let d=a[h],m=Array(i).fill(void 0),f=e?e[o][h]:eG,y=[];for(let v=0;v<d.length;v++){let S=d[v],C=s.get(c[v]);S===null?f!=JH&&(m[C]=S,f==tG&&y.push(C)):m[C]=S}nG(m,y,i),r.push(m)}}return r}const iG=typeof queueMicrotask>"u"?t=>Promise.resolve().then(t):queueMicrotask;function sG(t){let e=t[0],n=e.length,r=Array(n);for(let s=0;s<r.length;s++)r[s]=s;r.sort((s,o)=>e[s]-e[o]);let i=[];for(let s=0;s<t.length;s++){let o=t[s],a=Array(n);for(let c=0;c<n;c++)a[c]=o[r[c]];i.push(a)}return i}function oG(t){let e=t[0][0],n=e.length;for(let r=1;r<t.length;r++){let i=t[r][0];if(i.length!=n)return!1;if(i!=e){for(let s=0;s<n;s++)if(i[s]!=e[s])return!1}}return!0}function aG(t,e=100){const n=t.length;if(n<=1)return!0;let r=0,i=n-1;for(;r<=i&&t[r]==null;)r++;for(;i>=r&&t[i]==null;)i--;if(i<=r)return!0;const s=kr(1,Pi((i-r+1)/e));for(let o=t[r],a=r+s;a<=i;a+=s){const c=t[a];if(c!=null){if(c<=o)return!1;o=c}}return!0}const Ek=["January","February","March","April","May","June","July","August","September","October","November","December"],Tk=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function Ck(t){return t.slice(0,3)}const lG=Tk.map(Ck),uG=Ek.map(Ck),cG={MMMM:Ek,MMM:uG,WWWW:Tk,WWW:lG};function Xh(t){return(t<10?"0":"")+t}function hG(t){return(t<10?"00":t<100?"0":"")+t}const dG={YYYY:t=>t.getFullYear(),YY:t=>(t.getFullYear()+"").slice(2),MMMM:(t,e)=>e.MMMM[t.getMonth()],MMM:(t,e)=>e.MMM[t.getMonth()],MM:t=>Xh(t.getMonth()+1),M:t=>t.getMonth()+1,DD:t=>Xh(t.getDate()),D:t=>t.getDate(),WWWW:(t,e)=>e.WWWW[t.getDay()],WWW:(t,e)=>e.WWW[t.getDay()],HH:t=>Xh(t.getHours()),H:t=>t.getHours(),h:t=>{let e=t.getHours();return e==0?12:e>12?e-12:e},AA:t=>t.getHours()>=12?"PM":"AM",aa:t=>t.getHours()>=12?"pm":"am",a:t=>t.getHours()>=12?"p":"a",mm:t=>Xh(t.getMinutes()),m:t=>t.getMinutes(),ss:t=>Xh(t.getSeconds()),s:t=>t.getSeconds(),fff:t=>hG(t.getMilliseconds())};function R_(t,e){e=e||cG;let n=[],r=/\{([a-z]+)\}|[^{]+/gi,i;for(;i=r.exec(t);)n.push(i[0][0]=="{"?dG[i[1]]:i[0]);return s=>{let o="";for(let a=0;a<n.length;a++)o+=typeof n[a]=="string"?n[a]:n[a](s,e);return o}}const fG=new Intl.DateTimeFormat().resolvedOptions().timeZone;function pG(t,e){let n;return e=="UTC"||e=="Etc/UTC"?n=new Date(+t+t.getTimezoneOffset()*6e4):e==fG?n=t:(n=new Date(t.toLocaleString("en-US",{timeZone:e})),n.setMilliseconds(t.getMilliseconds())),n}const Ik=t=>t%1==0,Og=[1,2,2.5,5],mG=af(10,-32,0,Og),Ak=af(10,0,32,Og),gG=Ak.filter(Ik),Gl=mG.concat(Ak),M_=`
`,Pk="{YYYY}",V2=M_+Pk,kk="{M}/{D}",ld=M_+kk,um=ld+"/{YY}",Rk="{aa}",yG="{h}:{mm}",ec=yG+Rk,X2=M_+ec,q2=":{ss}",It=null;function Mk(t){let e=t*1e3,n=e*60,r=n*60,i=r*24,s=i*30,o=i*365,c=(t==1?af(10,0,3,Og).filter(Ik):af(10,-3,0,Og)).concat([e,e*5,e*10,e*15,e*30,n,n*5,n*10,n*15,n*30,r,r*2,r*3,r*4,r*6,r*8,r*12,i,i*2,i*3,i*4,i*5,i*6,i*7,i*8,i*9,i*10,i*15,s,s*2,s*3,s*4,s*6,o,o*2,o*5,o*10,o*25,o*50,o*100]);const h=[[o,Pk,It,It,It,It,It,It,1],[i*28,"{MMM}",V2,It,It,It,It,It,1],[i,kk,V2,It,It,It,It,It,1],[r,"{h}"+Rk,um,It,ld,It,It,It,1],[n,ec,um,It,ld,It,It,It,1],[e,q2,um+" "+ec,It,ld+" "+ec,It,X2,It,1],[t,q2+".{fff}",um+" "+ec,It,ld+" "+ec,It,X2,It,1]];function d(m){return(f,y,v,S,C,_)=>{let b=[],w=C>=o,I=C>=s&&C<o,P=m(v),N=Ft(P*t,3),O=Gv(P.getFullYear(),w?0:P.getMonth(),I||w?1:P.getDate()),D=Ft(O*t,3);if(I||w){let V=I?C/s:0,G=w?C/o:0,F=N==D?N:Ft(Gv(O.getFullYear()+G,O.getMonth()+V,1)*t,3),q=new Date(zn(F/t)),W=q.getFullYear(),H=q.getMonth();for(let se=0;F<=S;se++){let ue=Gv(W+G*se,H+V*se,1),K=ue-m(Ft(ue*t,3));F=Ft((+ue+K)*t,3),F<=S&&b.push(F)}}else{let V=C>=i?i:C,G=Pi(v)-Pi(N),F=D+G+wy(N-D,V);b.push(F);let q=m(F),W=q.getHours()+q.getMinutes()/n+q.getSeconds()/r,H=C/r,se=f.axes[y]._space,ue=_/se;for(;F=Ft(F+C,t==1?0:3),!(F>S);)if(H>1){let K=Pi(Ft(W+H,6))%24,L=m(F).getHours()-K;L>1&&(L=-1),F-=L*r,W=(W+H)%24;let te=b[b.length-1];Ft((F-te)/C,3)*ue>=.7&&b.push(F)}else b.push(F)}return b}}return[c,h,d]}const[vG,xG,wG]=Mk(1),[_G,SG,bG]=Mk(.001);af(2,-53,53,[1]);function Y2(t,e){return t.map(n=>n.map((r,i)=>i==0||i==8||r==null?r:e(i==1||n[8]==0?r:n[1]+r)))}function Q2(t,e){return(n,r,i,s,o)=>{let a=e.find(v=>o>=v[0])||e[e.length-1],c,h,d,m,f,y;return r.map(v=>{let S=t(v),C=S.getFullYear(),_=S.getMonth(),b=S.getDate(),w=S.getHours(),I=S.getMinutes(),P=S.getSeconds(),N=C!=c&&a[2]||_!=h&&a[3]||b!=d&&a[4]||w!=m&&a[5]||I!=f&&a[6]||P!=y&&a[7]||a[1];return c=C,h=_,d=b,m=w,f=I,y=P,N(S)})}}function EG(t,e){let n=R_(e);return(r,i,s,o,a)=>i.map(c=>n(t(c)))}function Gv(t,e,n){return new Date(t,e,n)}function K2(t,e){return e(t)}const TG="{YYYY}-{MM}-{DD} {h}:{mm}{aa}";function Z2(t,e){return(n,r,i,s)=>s==null?T_:e(t(r))}function CG(t,e){let n=t.series[e];return n.width?n.stroke(t,e):n.points.width?n.points.stroke(t,e):null}function IG(t,e){return t.series[e].fill(t,e)}const AG={show:!0,live:!0,isolate:!1,mount:XH,markers:{show:!0,width:2,stroke:CG,fill:IG,dash:"solid"},idx:null,idxs:null,values:[]};function PG(t,e){let n=t.cursor.points,r=Vi(),i=n.size(t,e);Xt(r,od,i),Xt(r,ad,i);let s=i/-2;Xt(r,"marginLeft",s),Xt(r,"marginTop",s);let o=n.width(t,e,i);return o&&Xt(r,"borderWidth",o),r}function kG(t,e){let n=t.series[e].points;return n._fill||n._stroke}function RG(t,e){let n=t.series[e].points;return n._stroke||n._fill}function MG(t,e){return t.series[e].points.size}const Wv=[0,0];function OG(t,e,n){return Wv[0]=e,Wv[1]=n,Wv}function cm(t,e,n,r=!0){return i=>{i.button==0&&(!r||i.target==e)&&n(i)}}function jv(t,e,n,r=!0){return i=>{(!r||i.target==e)&&n(i)}}const DG={show:!0,x:!0,y:!0,lock:!1,move:OG,points:{one:!1,show:PG,size:MG,width:0,stroke:RG,fill:kG},bind:{mousedown:cm,mouseup:cm,click:cm,dblclick:cm,mousemove:jv,mouseleave:jv,mouseenter:jv},drag:{setScale:!0,x:!0,y:!1,dist:0,uni:null,click:(t,e)=>{e.stopPropagation(),e.stopImmediatePropagation()},_x:!1,_y:!1},focus:{dist:(t,e,n,r,i)=>r-i,prox:-1,bias:0},hover:{skip:[void 0],prox:null,bias:0},left:-10,top:-10,idx:null,dataIdx:null,idxs:null,event:null},Ok={show:!0,stroke:"rgba(0,0,0,0.07)",width:2},O_=In({},Ok,{filter:xk}),Dk=In({},O_,{size:10}),Nk=In({},Ok,{show:!1}),D_='12px system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',Lk="bold "+D_,Fk=1.5,J2={show:!0,scale:"x",stroke:E_,space:50,gap:5,size:50,labelGap:0,labelSize:30,labelFont:Lk,side:2,grid:O_,ticks:Dk,border:Nk,font:D_,lineGap:Fk,rotate:0},NG="Value",LG="Time",eC={show:!0,scale:"x",auto:!1,sorted:1,min:at,max:-at,idxs:[]};function FG(t,e,n,r,i){return e.map(s=>s==null?"":P_(s))}function BG(t,e,n,r,i,s,o){let a=[],c=cl.get(i)||0;n=o?n:Ft(wy(n,i),c);for(let h=n;h<=r;h=Ft(h+i,c))a.push(Object.is(h,-0)?0:h);return a}function Hx(t,e,n,r,i,s,o){const a=[],c=t.scales[t.axes[e].scale].log,h=c==10?ta:yk,d=Pi(h(n));i=Qc(c,d),c==10&&(i=Gl[Ss(i,Gl)]);let m=n,f=i*c;c==10&&(f=Gl[Ss(f,Gl)]);do a.push(m),m=m+i,c==10&&!cl.has(m)&&(m=Ft(m,cl.get(i))),m>=f&&(i=m,f=i*c,c==10&&(f=Gl[Ss(f,Gl)]));while(m<=r);return a}function UG(t,e,n,r,i,s,o){let c=t.scales[t.axes[e].scale].asinh,h=r>c?Hx(t,e,kr(c,n),r,i):[c],d=r>=0&&n<=0?[0]:[];return(n<-c?Hx(t,e,kr(c,-r),-n,i):[c]).reverse().map(f=>-f).concat(d,h)}const Bk=/./,zG=/[12357]/,$G=/[125]/,tC=/1/,Gx=(t,e,n,r)=>t.map((i,s)=>e==4&&i==0||s%r==0&&n.test(i.toExponential()[i<0?1:0])?i:null);function HG(t,e,n,r,i){let s=t.axes[n],o=s.scale,a=t.scales[o],c=t.valToPos,h=s._space,d=c(10,o),m=c(9,o)-d>=h?Bk:c(7,o)-d>=h?zG:c(5,o)-d>=h?$G:tC;if(m==tC){let f=Hn(c(1,o)-d);if(f<h)return Gx(e.slice().reverse(),a.distr,m,Yi(h/f)).reverse()}return Gx(e,a.distr,m,1)}function GG(t,e,n,r,i){let s=t.axes[n],o=s.scale,a=s._space,c=t.valToPos,h=Hn(c(1,o)-c(2,o));return h<a?Gx(e.slice().reverse(),3,Bk,Yi(a/h)).reverse():e}function WG(t,e,n,r){return r==null?T_:e==null?"":P_(e)}const nC={show:!0,scale:"y",stroke:E_,space:30,gap:5,size:50,labelGap:0,labelSize:30,labelFont:Lk,side:3,grid:O_,ticks:Dk,border:Nk,font:D_,lineGap:Fk,rotate:0};function jG(t,e){let n=3+(t||1)*2;return Ft(n*e,3)}function VG(t,e){let{scale:n,idxs:r}=t.series[0],i=t._data[0],s=t.valToPos(i[r[0]],n,!0),o=t.valToPos(i[r[1]],n,!0),a=Hn(o-s),c=t.series[e],h=a/(c.points.space*_t);return r[1]-r[0]<=h}const rC={scale:null,auto:!0,sorted:0,min:at,max:-at},Uk=(t,e,n,r,i)=>i,iC={show:!0,auto:!0,sorted:0,gaps:Uk,alpha:1,facets:[In({},rC,{scale:"x"}),In({},rC,{scale:"y"})]},sC={scale:"y",auto:!0,sorted:0,show:!0,spanGaps:!1,gaps:Uk,alpha:1,points:{show:VG,filter:null},values:null,min:at,max:-at,idxs:[],path:null,clip:null};function XG(t,e,n,r,i){return n/10}const zk={time:vH,auto:!0,distr:1,log:10,asinh:1,min:null,max:null,dir:1,ori:0},qG=In({},zk,{time:!1,ori:1}),oC={};function $k(t,e){let n=oC[t];return n||(n={key:t,plots:[],sub(r){n.plots.push(r)},unsub(r){n.plots=n.plots.filter(i=>i!=r)},pub(r,i,s,o,a,c,h){for(let d=0;d<n.plots.length;d++)n.plots[d]!=i&&n.plots[d].pub(r,i,s,o,a,c,h)}},t!=null&&(oC[t]=n)),n}const Jc=1,Wx=2;function xu(t,e,n){const r=t.mode,i=t.series[e],s=r==2?t._data[e]:t._data,o=t.scales,a=t.bbox;let c=s[0],h=r==2?s[1]:s[e],d=r==2?o[i.facets[0].scale]:o[t.series[0].scale],m=r==2?o[i.facets[1].scale]:o[i.scale],f=a.left,y=a.top,v=a.width,S=a.height,C=t.valToPosH,_=t.valToPosV;return d.ori==0?n(i,c,h,d,m,C,_,f,y,v,S,by,oh,Ty,Gk,jk):n(i,c,h,d,m,_,C,y,f,S,v,Ey,ah,F_,Wk,Vk)}function N_(t,e){let n=0,r=0,i=wt(t.bands,k_);for(let s=0;s<i.length;s++){let o=i[s];o.series[0]==e?n=o.dir:o.series[1]==e&&(o.dir==1?r|=1:r|=2)}return[n,r==1?-1:r==2?1:r==3?2:0]}function YG(t,e,n,r,i){let s=t.mode,o=t.series[e],a=s==2?o.facets[1].scale:o.scale,c=t.scales[a];return i==-1?c.min:i==1?c.max:c.distr==3?c.dir==1?c.min:c.max:0}function na(t,e,n,r,i,s){return xu(t,e,(o,a,c,h,d,m,f,y,v,S,C)=>{let _=o.pxRound;const b=h.dir*(h.ori==0?1:-1),w=h.ori==0?oh:ah;let I,P;b==1?(I=n,P=r):(I=r,P=n);let N=_(m(a[I],h,S,y)),O=_(f(c[I],d,C,v)),D=_(m(a[P],h,S,y)),V=_(f(s==1?d.max:d.min,d,C,v)),G=new Path2D(i);return w(G,D,V),w(G,N,V),w(G,N,O),G})}function Sy(t,e,n,r,i,s){let o=null;if(t.length>0){o=new Path2D;const a=e==0?Ty:F_;let c=n;for(let m=0;m<t.length;m++){let f=t[m];if(f[1]>f[0]){let y=f[0]-c;y>0&&a(o,c,r,y,r+s),c=f[1]}}let h=n+i-c,d=10;h>0&&a(o,c,r-d/2,h,r+s+d)}return o}function QG(t,e,n){let r=t[t.length-1];r&&r[0]==e?r[1]=n:t.push([e,n])}function L_(t,e,n,r,i,s,o){let a=[],c=t.length;for(let h=i==1?n:r;h>=n&&h<=r;h+=i)if(e[h]===null){let m=h,f=h;if(i==1)for(;++h<=r&&e[h]===null;)f=h;else for(;--h>=n&&e[h]===null;)f=h;let y=s(t[m]),v=f==m?y:s(t[f]),S=m-i;y=o<=0&&S>=0&&S<c?s(t[S]):y;let _=f+i;v=o>=0&&_>=0&&_<c?s(t[_]):v,v>=y&&a.push([y,v])}return a}function aC(t){return t==0?vk:t==1?zn:e=>Hl(e,t)}function Hk(t){let e=t==0?by:Ey,n=t==0?(i,s,o,a,c,h)=>{i.arcTo(s,o,a,c,h)}:(i,s,o,a,c,h)=>{i.arcTo(o,s,c,a,h)},r=t==0?(i,s,o,a,c)=>{i.rect(s,o,a,c)}:(i,s,o,a,c)=>{i.rect(o,s,c,a)};return(i,s,o,a,c,h=0,d=0)=>{h==0&&d==0?r(i,s,o,a,c):(h=es(h,a/2,c/2),d=es(d,a/2,c/2),e(i,s+h,o),n(i,s+a,o,s+a,o+c,h),n(i,s+a,o+c,s,o+c,d),n(i,s,o+c,s,o,d),n(i,s,o,s+a,o,h),i.closePath())}}const by=(t,e,n)=>{t.moveTo(e,n)},Ey=(t,e,n)=>{t.moveTo(n,e)},oh=(t,e,n)=>{t.lineTo(e,n)},ah=(t,e,n)=>{t.lineTo(n,e)},Ty=Hk(0),F_=Hk(1),Gk=(t,e,n,r,i,s)=>{t.arc(e,n,r,i,s)},Wk=(t,e,n,r,i,s)=>{t.arc(n,e,r,i,s)},jk=(t,e,n,r,i,s,o)=>{t.bezierCurveTo(e,n,r,i,s,o)},Vk=(t,e,n,r,i,s,o)=>{t.bezierCurveTo(n,e,i,r,o,s)};function Xk(t){return(e,n,r,i,s)=>xu(e,n,(o,a,c,h,d,m,f,y,v,S,C)=>{let{pxRound:_,points:b}=o,w,I;h.ori==0?(w=by,I=Gk):(w=Ey,I=Wk);const P=Ft(b.width*_t,3);let N=(b.size-b.width)/2*_t,O=Ft(N*2,3),D=new Path2D,V=new Path2D,{left:G,top:F,width:q,height:W}=e.bbox;Ty(V,G-O,F-O,q+O*2,W+O*2);const H=se=>{if(c[se]!=null){let ue=_(m(a[se],h,S,y)),K=_(f(c[se],d,C,v));w(D,ue+N,K),I(D,ue,K,N,0,Rm*2)}};if(s)s.forEach(H);else for(let se=r;se<=i;se++)H(se);return{stroke:P>0?D:null,fill:D,clip:V,flags:Jc|Wx}})}function qk(t){return(e,n,r,i,s,o)=>{r!=i&&(s!=r&&o!=r&&t(e,n,r),s!=i&&o!=i&&t(e,n,i),t(e,n,o))}}const KG=qk(oh),ZG=qk(ah);function Yk(t){const e=wt(t==null?void 0:t.alignGaps,0);return(n,r,i,s)=>xu(n,r,(o,a,c,h,d,m,f,y,v,S,C)=>{let _=o.pxRound,b=Z=>_(m(Z,h,S,y)),w=Z=>_(f(Z,d,C,v)),I,P;h.ori==0?(I=oh,P=KG):(I=ah,P=ZG);const N=h.dir*(h.ori==0?1:-1),O={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:Jc},D=O.stroke;let V=at,G=-at,F,q,W,H=b(a[N==1?i:s]),se=Yc(c,i,s,1*N),ue=Yc(c,i,s,-1*N),K=b(a[se]),$=b(a[ue]),Q=!1;for(let Z=N==1?i:s;Z>=i&&Z<=s;Z+=N){let Ie=b(a[Z]),ge=c[Z];Ie==H?ge!=null?(q=w(ge),V==at&&(I(D,Ie,q),F=q),V=es(q,V),G=kr(q,G)):ge===null&&(Q=!0):(V!=at&&(P(D,H,V,G,F,q),W=H),ge!=null?(q=w(ge),I(D,Ie,q),V=G=F=q):(V=at,G=-at,ge===null&&(Q=!0)),H=Ie)}V!=at&&V!=G&&W!=H&&P(D,H,V,G,F,q);let[L,te]=N_(n,r);if(o.fill!=null||L!=0){let Z=O.fill=new Path2D(D),Ie=o.fillTo(n,r,o.min,o.max,L),ge=w(Ie);I(Z,$,ge),I(Z,K,ge)}if(!o.spanGaps){let Z=[];Q&&Z.push(...L_(a,c,i,s,N,b,e)),O.gaps=Z=o.gaps(n,r,i,s,Z),O.clip=Sy(Z,h.ori,y,v,S,C)}return te!=0&&(O.band=te==2?[na(n,r,i,s,D,-1),na(n,r,i,s,D,1)]:na(n,r,i,s,D,te)),O})}function JG(t){const e=wt(t.align,1),n=wt(t.ascDesc,!1),r=wt(t.alignGaps,0),i=wt(t.extend,!1);return(s,o,a,c)=>xu(s,o,(h,d,m,f,y,v,S,C,_,b,w)=>{let I=h.pxRound,{left:P,width:N}=s.bbox,O=L=>I(v(L,f,b,C)),D=L=>I(S(L,y,w,_)),V=f.ori==0?oh:ah;const G={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:Jc},F=G.stroke,q=f.dir*(f.ori==0?1:-1);a=Yc(m,a,c,1),c=Yc(m,a,c,-1);let W=D(m[q==1?a:c]),H=O(d[q==1?a:c]),se=H,ue=H;i&&e==-1&&(ue=P,V(F,ue,W)),V(F,H,W);for(let L=q==1?a:c;L>=a&&L<=c;L+=q){let te=m[L];if(te==null)continue;let Z=O(d[L]),Ie=D(te);e==1?V(F,Z,W):V(F,se,Ie),V(F,Z,Ie),W=Ie,se=Z}let K=se;i&&e==1&&(K=P+N,V(F,K,W));let[$,Q]=N_(s,o);if(h.fill!=null||$!=0){let L=G.fill=new Path2D(F),te=h.fillTo(s,o,h.min,h.max,$),Z=D(te);V(L,K,Z),V(L,ue,Z)}if(!h.spanGaps){let L=[];L.push(...L_(d,m,a,c,q,O,r));let te=h.width*_t/2,Z=n||e==1?te:-te,Ie=n||e==-1?-te:te;L.forEach(ge=>{ge[0]+=Z,ge[1]+=Ie}),G.gaps=L=h.gaps(s,o,a,c,L),G.clip=Sy(L,f.ori,C,_,b,w)}return Q!=0&&(G.band=Q==2?[na(s,o,a,c,F,-1),na(s,o,a,c,F,1)]:na(s,o,a,c,F,Q)),G})}function lC(t,e,n,r,i,s,o=at){if(t.length>1){let a=null;for(let c=0,h=1/0;c<t.length;c++)if(e[c]!==void 0){if(a!=null){let d=Hn(t[c]-t[a]);d<h&&(h=d,o=Hn(n(t[c],r,i,s)-n(t[a],r,i,s)))}a=c}}return o}function eW(t){t=t||Ad;const e=wt(t.size,[.6,at,1]),n=t.align||0,r=t.gap||0;let i=t.radius;i=i==null?[0,0]:typeof i=="number"?[i,0]:i;const s=it(i),o=1-e[0],a=wt(e[1],at),c=wt(e[2],1),h=wt(t.disp,Ad),d=wt(t.each,y=>{}),{fill:m,stroke:f}=h;return(y,v,S,C)=>xu(y,v,(_,b,w,I,P,N,O,D,V,G,F)=>{let q=_.pxRound,W=n,H=r*_t,se=a*_t,ue=c*_t,K,$;I.ori==0?[K,$]=s(y,v):[$,K]=s(y,v);const Q=I.dir*(I.ori==0?1:-1);let L=I.ori==0?Ty:F_,te=I.ori==0?d:(qe,rr,$s,Ro,Hs,vr,di)=>{d(qe,rr,$s,Hs,Ro,di,vr)},Z=wt(y.bands,k_).find(qe=>qe.series[0]==v),Ie=Z!=null?Z.dir:0,ge=_.fillTo(y,v,_.min,_.max,Ie),je=q(O(ge,P,F,V)),Ve,Be,pt,St=G,Qe=q(_.width*_t),Ne=!1,ct=null,tt=null,Sn=null,kn=null;m!=null&&(Qe==0||f!=null)&&(Ne=!0,ct=m.values(y,v,S,C),tt=new Map,new Set(ct).forEach(qe=>{qe!=null&&tt.set(qe,new Path2D)}),Qe>0&&(Sn=f.values(y,v,S,C),kn=new Map,new Set(Sn).forEach(qe=>{qe!=null&&kn.set(qe,new Path2D)})));let{x0:ci,size:hi}=h;if(ci!=null&&hi!=null){W=1,b=ci.values(y,v,S,C),ci.unit==2&&(b=b.map($s=>y.posToVal(D+$s*G,I.key,!0)));let qe=hi.values(y,v,S,C);hi.unit==2?Be=qe[0]*G:Be=N(qe[0],I,G,D)-N(0,I,G,D),St=lC(b,w,N,I,G,D,St),pt=St-Be+H}else St=lC(b,w,N,I,G,D,St),pt=St*o+H,Be=St-pt;pt<1&&(pt=0),Qe>=Be/2&&(Qe=0),pt<5&&(q=vk);let Rn=pt>0,wu=St-pt-(Rn?Qe:0);Be=q($x(wu,ue,se)),Ve=(W==0?Be/2:W==Q?0:Be)-W*Q*((W==0?H/2:0)+(Rn?Qe/2:0));const yr={stroke:null,fill:null,clip:null,band:null,gaps:null,flags:0},zs=Ne?null:new Path2D;let Xe=null;if(Z!=null)Xe=y.data[Z.series[1]];else{let{y0:qe,y1:rr}=h;qe!=null&&rr!=null&&(w=rr.values(y,v,S,C),Xe=qe.values(y,v,S,C))}let Ke=K*Be,dn=$*Be;for(let qe=Q==1?S:C;qe>=S&&qe<=C;qe+=Q){let rr=w[qe];if(rr==null)continue;if(Xe!=null){let Ni=Xe[qe]??0;if(rr-Ni==0)continue;je=O(Ni,P,F,V)}let $s=I.distr!=2||h!=null?b[qe]:qe,Ro=N($s,I,G,D),Hs=O(wt(rr,ge),P,F,V),vr=q(Ro-Ve),di=q(kr(Hs,je)),Lr=q(es(Hs,je)),Vr=di-Lr;if(rr!=null){let Ni=rr<0?dn:Ke,Gs=rr<0?Ke:dn;Ne?(Qe>0&&Sn[qe]!=null&&L(kn.get(Sn[qe]),vr,Lr+Pi(Qe/2),Be,kr(0,Vr-Qe),Ni,Gs),ct[qe]!=null&&L(tt.get(ct[qe]),vr,Lr+Pi(Qe/2),Be,kr(0,Vr-Qe),Ni,Gs)):L(zs,vr,Lr+Pi(Qe/2),Be,kr(0,Vr-Qe),Ni,Gs),te(y,v,qe,vr-Qe/2,Lr,Be+Qe,Vr)}}return Qe>0?yr.stroke=Ne?kn:zs:Ne||(yr._fill=_.width==0?_._fill:_._stroke??_._fill,yr.width=0),yr.fill=Ne?tt:zs,yr})}function tW(t,e){const n=wt(e==null?void 0:e.alignGaps,0);return(r,i,s,o)=>xu(r,i,(a,c,h,d,m,f,y,v,S,C,_)=>{let b=a.pxRound,w=K=>b(f(K,d,C,v)),I=K=>b(y(K,m,_,S)),P,N,O;d.ori==0?(P=by,O=oh,N=jk):(P=Ey,O=ah,N=Vk);const D=d.dir*(d.ori==0?1:-1);s=Yc(h,s,o,1),o=Yc(h,s,o,-1);let V=w(c[D==1?s:o]),G=V,F=[],q=[];for(let K=D==1?s:o;K>=s&&K<=o;K+=D)if(h[K]!=null){let Q=c[K],L=w(Q);F.push(G=L),q.push(I(h[K]))}const W={stroke:t(F,q,P,O,N,b),fill:null,clip:null,band:null,gaps:null,flags:Jc},H=W.stroke;let[se,ue]=N_(r,i);if(a.fill!=null||se!=0){let K=W.fill=new Path2D(H),$=a.fillTo(r,i,a.min,a.max,se),Q=I($);O(K,G,Q),O(K,V,Q)}if(!a.spanGaps){let K=[];K.push(...L_(c,h,s,o,D,w,n)),W.gaps=K=a.gaps(r,i,s,o,K),W.clip=Sy(K,d.ori,v,S,C,_)}return ue!=0&&(W.band=ue==2?[na(r,i,s,o,H,-1),na(r,i,s,o,H,1)]:na(r,i,s,o,H,ue)),W})}function nW(t){return tW(rW,t)}function rW(t,e,n,r,i,s){const o=t.length;if(o<2)return null;const a=new Path2D;if(n(a,t[0],e[0]),o==2)r(a,t[1],e[1]);else{let c=Array(o),h=Array(o-1),d=Array(o-1),m=Array(o-1);for(let f=0;f<o-1;f++)d[f]=e[f+1]-e[f],m[f]=t[f+1]-t[f],h[f]=d[f]/m[f];c[0]=h[0];for(let f=1;f<o-1;f++)h[f]===0||h[f-1]===0||h[f-1]>0!=h[f]>0?c[f]=0:(c[f]=3*(m[f-1]+m[f])/((2*m[f]+m[f-1])/h[f-1]+(m[f]+2*m[f-1])/h[f]),isFinite(c[f])||(c[f]=0));c[o-1]=h[o-2];for(let f=0;f<o-1;f++)i(a,t[f]+m[f]/3,e[f]+c[f]*m[f]/3,t[f+1]-m[f]/3,e[f+1]-c[f+1]*m[f]/3,t[f+1],e[f+1])}return a}const jx=new Set;function uC(){for(let t of jx)t.syncRect(!0)}sh&&(iu(FH,Rc,uC),iu(BH,Rc,uC,!0),iu(Rg,Rc,()=>{Mr.pxRatio=_t}));const iW=Yk(),sW=Xk();function cC(t,e,n,r){return(r?[t[0],t[1]].concat(t.slice(2)):[t[0]].concat(t.slice(1))).map((s,o)=>Vx(s,o,e,n))}function oW(t,e){return t.map((n,r)=>r==0?{}:In({},e,n))}function Vx(t,e,n,r){return In({},e==0?n:r,t)}function Qk(t,e,n){return e==null?Kc:[e,n]}const aW=Qk;function lW(t,e,n){return e==null?Kc:Mg(e,n,A_,!0)}function Kk(t,e,n,r){return e==null?Kc:xy(e,n,t.scales[r].log,!1)}const uW=Kk;function Zk(t,e,n,r){return e==null?Kc:I_(e,n,t.scales[r].log,!1)}const cW=Zk;function hW(t,e,n,r,i){let s=kr(H2(t),H2(e)),o=e-t,a=Ss(i/r*o,n);do{let c=n[a],h=r*c/o;if(h>=i&&s+(c<5?cl.get(c):0)<=17)return[c,h]}while(++a<n.length);return[0,0]}function hC(t){let e,n;return t=t.replace(/(\d+)px/,(r,i)=>(e=zn((n=+i)*_t))+"px"),[t,e,n]}function dW(t){t.show&&[t.font,t.labelFont].forEach(e=>{let n=Ft(e[2]*_t,1);e[0]=e[0].replace(/[0-9.]+px/,n+"px"),e[1]=n})}function Mr(t,e,n){const r={mode:wt(t.mode,1)},i=r.mode;function s(E,A){return((A.distr==3?ta(E>0?E:A.clamp(r,E,A.min,A.max,A.key)):A.distr==4?Hv(E,A.asinh):A.distr==100?A.fwd(E):E)-A._min)/(A._max-A._min)}function o(E,A,R,M){let B=s(E,A);return M+R*(A.dir==-1?1-B:B)}function a(E,A,R,M){let B=s(E,A);return M+R*(A.dir==-1?B:1-B)}function c(E,A,R,M){return A.ori==0?o(E,A,R,M):a(E,A,R,M)}r.valToPosH=o,r.valToPosV=a;let h=!1;r.status=0;const d=r.root=Vi(xH);if(t.id!=null&&(d.id=t.id),_i(d,t.class),t.title){let E=Vi(SH,d);E.textContent=t.title}const m=ys("canvas"),f=r.ctx=m.getContext("2d"),y=Vi(bH,d);iu("click",y,E=>{E.target===S&&(At!=sr||Dt!=jn)&&Yt.click(r,E)},!0);const v=r.under=Vi(EH,y);y.appendChild(m);const S=r.over=Vi(TH,y);t=Zc(t);const C=+wt(t.pxAlign,1),_=aC(C);(t.plugins||[]).forEach(E=>{E.opts&&(t=E.opts(r,t)||t)});const b=t.ms||.001,w=r.series=i==1?cC(t.series||[],eC,sC,!1):oW(t.series||[null],iC),I=r.axes=cC(t.axes||[],J2,nC,!0),P=r.scales={},N=r.bands=t.bands||[];N.forEach(E=>{E.fill=it(E.fill||null),E.dir=wt(E.dir,-1)});const O=i==2?w[1].facets[0].scale:w[0].scale,D={axes:kf,series:Af},V=(t.drawOrder||["axes","series"]).map(E=>D[E]);function G(E){let A=P[E];if(A==null){let R=(t.scales||Ad)[E]||Ad;if(R.from!=null)G(R.from),P[E]=In({},P[R.from],R,{key:E});else{A=P[E]=In({},E==O?zk:qG,R),A.key=E;let M=A.time,B=A.range,X=Fa(B);if((E!=O||i==2&&!M)&&(X&&(B[0]==null||B[1]==null)&&(B={min:B[0]==null?U2:{mode:1,hard:B[0],soft:B[0]},max:B[1]==null?U2:{mode:1,hard:B[1],soft:B[1]}},X=!1),!X&&_y(B))){let ne=B;B=(le,de,ve)=>de==null?Kc:Mg(de,ve,ne)}A.range=it(B||(M?aW:E==O?A.distr==3?uW:A.distr==4?cW:Qk:A.distr==3?Kk:A.distr==4?Zk:lW)),A.auto=it(X?!1:A.auto),A.clamp=it(A.clamp||XG),A._min=A._max=null}}}G("x"),G("y"),i==1&&w.forEach(E=>{G(E.scale)}),I.forEach(E=>{G(E.scale)});for(let E in t.scales)G(E);const F=P[O],q=F.distr;let W,H;F.ori==0?(_i(d,wH),W=o,H=a):(_i(d,_H),W=a,H=o);const se={};for(let E in P){let A=P[E];(A.min!=null||A.max!=null)&&(se[E]={min:A.min,max:A.max},A.min=A.max=null)}const ue=t.tzDate||(E=>new Date(zn(E/b))),K=t.fmtDate||R_,$=b==1?wG(ue):bG(ue),Q=Q2(ue,Y2(b==1?xG:SG,K)),L=Z2(ue,K2(TG,K)),te=[],Z=r.legend=In({},AG,t.legend),Ie=Z.show,ge=Z.markers;Z.idxs=te,ge.width=it(ge.width),ge.dash=it(ge.dash),ge.stroke=it(ge.stroke),ge.fill=it(ge.fill);let je,Ve,Be,pt=[],St=[],Qe,Ne=!1,ct={};if(Z.live){const E=w[1]?w[1].values:null;Ne=E!=null,Qe=Ne?E(r,1,0):{_:0};for(let A in Qe)ct[A]=T_}if(Ie)if(je=ys("table",RH,d),Be=ys("tbody",null,je),Z.mount(r,je),Ne){Ve=ys("thead",null,je,Be);let E=ys("tr",null,Ve);ys("th",null,E);for(var tt in Qe)ys("th",T2,E).textContent=tt}else _i(je,OH),Z.live&&_i(je,MH);const Sn={show:!0},kn={show:!1};function ci(E,A){if(A==0&&(Ne||!Z.live||i==2))return Kc;let R=[],M=ys("tr",DH,Be,Be.childNodes[A]);_i(M,E.class),E.show||_i(M,jl);let B=ys("th",null,M);if(ge.show){let le=Vi(NH,B);if(A>0){let de=ge.width(r,A);de&&(le.style.border=de+"px "+ge.dash(r,A)+" "+ge.stroke(r,A)),le.style.background=ge.fill(r,A)}}let X=Vi(T2,B);X.textContent=E.label,A>0&&(ge.show||(X.style.color=E.width>0?ge.stroke(r,A):ge.fill(r,A)),Rn("click",B,le=>{if(Le._lock)return;js(le);let de=w.indexOf(E);if((le.ctrlKey||le.metaKey)!=Z.isolate){let ve=w.some((we,_e)=>_e>0&&_e!=de&&we.show);w.forEach((we,_e)=>{_e>0&&Tn(_e,ve?_e==de?Sn:kn:Sn,!0,sn.setSeries)})}else Tn(de,{show:!E.show},!0,sn.setSeries)},!1),ha&&Rn(k2,B,le=>{Le._lock||(js(le),Tn(w.indexOf(E),Ui,!0,sn.setSeries))},!1));for(var ne in Qe){let le=ys("td",LH,M);le.textContent="--",R.push(le)}return[M,R]}const hi=new Map;function Rn(E,A,R,M=!0){const B=hi.get(A)||{},X=Le.bind[E](r,A,R,M);X&&(iu(E,A,B[E]=X),hi.set(A,B))}function wu(E,A,R){const M=hi.get(A)||{};for(let B in M)(E==null||B==E)&&(zx(B,A,M[B]),delete M[B]);E==null&&hi.delete(A)}let yr=0,zs=0,Xe=0,Ke=0,dn=0,qe=0,rr=dn,$s=qe,Ro=Xe,Hs=Ke,vr=0,di=0,Lr=0,Vr=0;r.bbox={};let Ni=!1,Gs=!1,ca=!1,Ws=!1,_u=!1,Xr=!1;function lh(E,A,R){(R||E!=r.width||A!=r.height)&&_f(E,A),Js(!1),ca=!0,Gs=!0,to()}function _f(E,A){r.width=yr=Xe=E,r.height=zs=Ke=A,dn=qe=0,bf(),ky();let R=r.bbox;vr=R.left=Hl(dn*_t,.5),di=R.top=Hl(qe*_t,.5),Lr=R.width=Hl(Xe*_t,.5),Vr=R.height=Hl(Ke*_t,.5)}const Ay=3;function Py(){let E=!1,A=0;for(;!E;){A++;let R=Dy(A),M=fh(A);E=A==Ay||R&&M,E||(_f(r.width,r.height),Gs=!0)}}function Sf({width:E,height:A}){lh(E,A)}r.setSize=Sf;function bf(){let E=!1,A=!1,R=!1,M=!1;I.forEach((B,X)=>{if(B.show&&B._show){let{side:ne,_size:le}=B,de=ne%2,ve=B.label!=null?B.labelSize:0,we=le+ve;we>0&&(de?(Xe-=we,ne==3?(dn+=we,M=!0):R=!0):(Ke-=we,ne==0?(qe+=we,E=!0):A=!0))}}),Mo[0]=E,Mo[1]=R,Mo[2]=A,Mo[3]=M,Xe-=qs[1]+qs[3],dn+=qs[3],Ke-=qs[2]+qs[0],qe+=qs[0]}function ky(){let E=dn+Xe,A=qe+Ke,R=dn,M=qe;function B(X,ne){switch(X){case 1:return E+=ne,E-ne;case 2:return A+=ne,A-ne;case 3:return R-=ne,R+ne;case 0:return M-=ne,M+ne}}I.forEach((X,ne)=>{if(X.show&&X._show){let le=X.side;X._pos=B(le,X._size),X.label!=null&&(X._lpos=B(le,X.labelSize))}})}const Le=r.cursor=In({},DG,{drag:{y:i==2}},t.cursor);if(Le.dataIdx==null){let E=Le.hover,A=E.skip=new Set(E.skip??[]);A.add(void 0);let R=E.prox=it(E.prox),M=E.bias??(E.bias=0);Le.dataIdx=(B,X,ne,le)=>{if(X==0)return ne;let de=ne,ve=R(B,X,ne,le)??at,we=ve>=0&&ve<at,_e=F.ori==0?Xe:Ke,$e=Le.left,mt=e[0],He=e[X];if(A.has(He[ne])){de=null;let Ze=null,ze=null,be;if(M==0||M==-1)for(be=ne;Ze==null&&be-- >0;)A.has(He[be])||(Ze=be);if(M==0||M==1)for(be=ne;ze==null&&be++<He.length;)A.has(He[be])||(ze=be);if(Ze!=null||ze!=null)if(we){let vt=Ze==null?-1/0:W(mt[Ze],F,_e,0),Ot=ze==null?1/0:W(mt[ze],F,_e,0),Gt=$e-vt,Pt=Ot-$e;Gt<=Pt?Gt<=ve&&(de=Ze):Pt<=ve&&(de=ze)}else de=ze==null?Ze:Ze==null?ze:ne-Ze<=ze-ne?Ze:ze}else we&&Hn($e-W(mt[ne],F,_e,0))>ve&&(de=null);return de}}const js=E=>{Le.event=E};Le.idxs=te,Le._lock=!1;let Mn=Le.points;Mn.show=it(Mn.show),Mn.size=it(Mn.size),Mn.stroke=it(Mn.stroke),Mn.width=it(Mn.width),Mn.fill=it(Mn.fill);const Vs=r.focus=In({},t.focus||{alpha:.3},Le.focus),ha=Vs.prox>=0,da=ha&&Mn.one;let Fr=[],Xs=[],fa=[];function Ef(E,A){let R=Mn.show(r,A);if(R)return _i(R,kH),_i(R,E.class),mo(R,-10,-10,Xe,Ke),S.insertBefore(R,Fr[A]),R}function gl(E,A){if(i==1||A>0){let R=i==1&&P[E.scale].time,M=E.value;E.value=R?j2(M)?Z2(ue,K2(M,K)):M||L:M||WG,E.label=E.label||(R?LG:NG)}if(da||A>0){E.width=E.width==null?1:E.width,E.paths=E.paths||iW||qH,E.fillTo=it(E.fillTo||YG),E.pxAlign=+wt(E.pxAlign,C),E.pxRound=aC(E.pxAlign),E.stroke=it(E.stroke||null),E.fill=it(E.fill||null),E._stroke=E._fill=E._paths=E._focus=null;let R=jG(kr(1,E.width),1),M=E.points=In({},{size:R,width:kr(1,R*.2),stroke:E.stroke,space:R*2,paths:sW,_stroke:null,_fill:null},E.points);M.show=it(M.show),M.filter=it(M.filter),M.fill=it(M.fill),M.stroke=it(M.stroke),M.paths=it(M.paths),M.pxAlign=E.pxAlign}if(Ie){let R=ci(E,A);pt.splice(A,0,R[0]),St.splice(A,0,R[1]),Z.values.push(null)}if(Le.show){te.splice(A,0,null);let R=null;da?A==0&&(R=Ef(E,A)):A>0&&(R=Ef(E,A)),Fr.splice(A,0,R),Xs.splice(A,0,0),fa.splice(A,0,0)}Nt("addSeries",A)}function Ry(E,A){A=A??w.length,E=i==1?Vx(E,A,eC,sC):Vx(E,A,{},iC),w.splice(A,0,E),gl(w[A],A)}r.addSeries=Ry;function My(E){if(w.splice(E,1),Ie){Z.values.splice(E,1),St.splice(E,1);let A=pt.splice(E,1)[0];wu(null,A.firstChild),A.remove()}Le.show&&(te.splice(E,1),Fr.splice(E,1)[0].remove(),Xs.splice(E,1),fa.splice(E,1)),Nt("delSeries",E)}r.delSeries=My;const Mo=[!1,!1,!1,!1];function Oy(E,A){if(E._show=E.show,E.show){let R=E.side%2,M=P[E.scale];M==null&&(E.scale=R?w[1].scale:O,M=P[E.scale]);let B=M.time;E.size=it(E.size),E.space=it(E.space),E.rotate=it(E.rotate),Fa(E.incrs)&&E.incrs.forEach(ne=>{!cl.has(ne)&&cl.set(ne,_k(ne))}),E.incrs=it(E.incrs||(M.distr==2?gG:B?b==1?vG:_G:Gl)),E.splits=it(E.splits||(B&&M.distr==1?$:M.distr==3?Hx:M.distr==4?UG:BG)),E.stroke=it(E.stroke),E.grid.stroke=it(E.grid.stroke),E.ticks.stroke=it(E.ticks.stroke),E.border.stroke=it(E.border.stroke);let X=E.values;E.values=Fa(X)&&!Fa(X[0])?it(X):B?Fa(X)?Q2(ue,Y2(X,K)):j2(X)?EG(ue,X):X||Q:X||FG,E.filter=it(E.filter||(M.distr>=3&&M.log==10?HG:M.distr==3&&M.log==2?GG:xk)),E.font=hC(E.font),E.labelFont=hC(E.labelFont),E._size=E.size(r,null,A,0),E._space=E._rotate=E._incrs=E._found=E._splits=E._values=null,E._size>0&&(Mo[A]=!0,E._el=Vi(CH,y))}}function yl(E,A,R,M){let[B,X,ne,le]=R,de=A%2,ve=0;return de==0&&(le||X)&&(ve=A==0&&!B||A==2&&!ne?zn(J2.size/3):0),de==1&&(B||ne)&&(ve=A==1&&!X||A==3&&!le?zn(nC.size/2):0),ve}const Tf=r.padding=(t.padding||[yl,yl,yl,yl]).map(E=>it(wt(E,yl))),qs=r._padding=Tf.map((E,A)=>E(r,A,Mo,0));let On,bn=null,En=null;const Su=i==1?w[0].idxs:null;let fi=null,vl=!1;function Cf(E,A){if(e=E??[],r.data=r._data=e,i==2){On=0;for(let R=1;R<w.length;R++)On+=e[R][0].length}else{e.length==0&&(r.data=r._data=e=[[]]),fi=e[0],On=fi.length;let R=e;if(q==2){R=e.slice();let M=R[0]=Array(On);for(let B=0;B<On;B++)M[B]=B}r._data=e=R}if(Js(!0),Nt("setData"),q==2&&(ca=!0),A!==!1){let R=F;R.auto(r,vl)?Oo():Ln(O,R.min,R.max),Ws=Ws||Le.left>=0,Xr=!0,to()}}r.setData=Cf;function Oo(){vl=!0;let E,A;i==1&&(On>0?(bn=Su[0]=0,En=Su[1]=On-1,E=e[0][bn],A=e[0][En],q==2?(E=bn,A=En):E==A&&(q==3?[E,A]=xy(E,E,F.log,!1):q==4?[E,A]=I_(E,E,F.log,!1):F.time?A=E+zn(86400/b):[E,A]=Mg(E,A,A_,!0))):(bn=Su[0]=E=null,En=Su[1]=A=null)),Ln(O,E,A)}let pa,Ys,uh,xl,Qs,Li,Mt,bt,Fi,Bt;function ir(E,A,R,M,B,X){E??(E=I2),R??(R=k_),M??(M="butt"),B??(B=I2),X??(X="round"),E!=pa&&(f.strokeStyle=pa=E),B!=Ys&&(f.fillStyle=Ys=B),A!=uh&&(f.lineWidth=uh=A),X!=Qs&&(f.lineJoin=Qs=X),M!=Li&&(f.lineCap=Li=M),R!=xl&&f.setLineDash(xl=R)}function Ks(E,A,R,M){A!=Ys&&(f.fillStyle=Ys=A),E!=Mt&&(f.font=Mt=E),R!=bt&&(f.textAlign=bt=R),M!=Fi&&(f.textBaseline=Fi=M)}function Zs(E,A,R,M,B=0){if(M.length>0&&E.auto(r,vl)&&(A==null||A.min==null)){let X=wt(bn,0),ne=wt(En,M.length-1),le=R.min==null?E.distr==3?HH(M,X,ne):$H(M,X,ne,B):[R.min,R.max];E.min=es(E.min,R.min=le[0]),E.max=kr(E.max,R.max=le[1])}}const xr={min:null,max:null};function ch(){for(let M in P){let B=P[M];se[M]==null&&(B.min==null||se[O]!=null&&B.auto(r,vl))&&(se[M]=xr)}for(let M in P){let B=P[M];se[M]==null&&B.from!=null&&se[B.from]!=null&&(se[M]=xr)}se[O]!=null&&Js(!0);let E={};for(let M in se){let B=se[M];if(B!=null){let X=E[M]=Zc(P[M],KH);if(B.min!=null)In(X,B);else if(M!=O||i==2)if(On==0&&X.from==null){let ne=X.range(r,null,null,M);X.min=ne[0],X.max=ne[1]}else X.min=at,X.max=-at}}if(On>0){w.forEach((M,B)=>{if(i==1){let X=M.scale,ne=se[X];if(ne==null)return;let le=E[X];if(B==0){let de=le.range(r,le.min,le.max,X);le.min=de[0],le.max=de[1],bn=Ss(le.min,e[0]),En=Ss(le.max,e[0]),En-bn>1&&(e[0][bn]<le.min&&bn++,e[0][En]>le.max&&En--),M.min=fi[bn],M.max=fi[En]}else M.show&&M.auto&&Zs(le,ne,M,e[B],M.sorted);M.idxs[0]=bn,M.idxs[1]=En}else if(B>0&&M.show&&M.auto){let[X,ne]=M.facets,le=X.scale,de=ne.scale,[ve,we]=e[B],_e=E[le],$e=E[de];_e!=null&&Zs(_e,se[le],X,ve,X.sorted),$e!=null&&Zs($e,se[de],ne,we,ne.sorted),M.min=ne.min,M.max=ne.max}});for(let M in E){let B=E[M],X=se[M];if(B.from==null&&(X==null||X.min==null)){let ne=B.range(r,B.min==at?null:B.min,B.max==-at?null:B.max,M);B.min=ne[0],B.max=ne[1]}}}for(let M in E){let B=E[M];if(B.from!=null){let X=E[B.from];if(X.min==null)B.min=B.max=null;else{let ne=B.range(r,X.min,X.max,M);B.min=ne[0],B.max=ne[1]}}}let A={},R=!1;for(let M in E){let B=E[M],X=P[M];if(X.min!=B.min||X.max!=B.max){X.min=B.min,X.max=B.max;let ne=X.distr;X._min=ne==3?ta(X.min):ne==4?Hv(X.min,X.asinh):ne==100?X.fwd(X.min):X.min,X._max=ne==3?ta(X.max):ne==4?Hv(X.max,X.asinh):ne==100?X.fwd(X.max):X.max,A[M]=R=!0}}if(R){w.forEach((M,B)=>{i==2?B>0&&A.y&&(M._paths=null):A[M.scale]&&(M._paths=null)});for(let M in A)ca=!0,Nt("setScale",M);Le.show&&Le.left>=0&&(Ws=Xr=!0)}for(let M in se)se[M]=null}function If(E){let A=$x(bn-1,0,On-1),R=$x(En+1,0,On-1);for(;E[A]==null&&A>0;)A--;for(;E[R]==null&&R<On-1;)R++;return[A,R]}function Af(){On>0&&(w.forEach((E,A)=>{if(A>0&&E.show&&(wl(A,!1),wl(A,!0),E._paths==null)){Bt!=E.alpha&&(f.globalAlpha=Bt=E.alpha);let R=i==2?[0,e[A][0].length-1]:If(e[A]);E._paths=E.paths(r,A,R[0],R[1]),Bt!=1&&(f.globalAlpha=Bt=1)}}),w.forEach((E,A)=>{if(A>0&&E.show){Bt!=E.alpha&&(f.globalAlpha=Bt=E.alpha),E._paths!=null&&hh(A,!1);{let R=E._paths!=null?E._paths.gaps:null,M=E.points.show(r,A,bn,En,R),B=E.points.filter(r,A,M,R);(M||B)&&(E.points._paths=E.points.paths(r,A,bn,En,B),hh(A,!0))}Bt!=1&&(f.globalAlpha=Bt=1),Nt("drawSeries",A)}}))}function wl(E,A){let R=A?w[E].points:w[E];R._stroke=R.stroke(r,E),R._fill=R.fill(r,E)}function hh(E,A){let R=A?w[E].points:w[E],{stroke:M,fill:B,clip:X,flags:ne,_stroke:le=R._stroke,_fill:de=R._fill,_width:ve=R.width}=R._paths;ve=Ft(ve*_t,3);let we=null,_e=ve%2/2;A&&de==null&&(de=ve>0?"#fff":le);let $e=R.pxAlign==1&&_e>0;if($e&&f.translate(_e,_e),!A){let mt=vr-ve/2,He=di-ve/2,Ze=Lr+ve,ze=Vr+ve;we=new Path2D,we.rect(mt,He,Ze,ze)}A?dh(le,ve,R.dash,R.cap,de,M,B,ne,X):pi(E,le,ve,R.dash,R.cap,de,M,B,ne,we,X),$e&&f.translate(-_e,-_e)}function pi(E,A,R,M,B,X,ne,le,de,ve,we){let _e=!1;de!=0&&N.forEach(($e,mt)=>{if($e.series[0]==E){let He=w[$e.series[1]],Ze=e[$e.series[1]],ze=(He._paths||Ad).band;Fa(ze)&&(ze=$e.dir==1?ze[0]:ze[1]);let be,vt=null;He.show&&ze&&WH(Ze,bn,En)?(vt=$e.fill(r,mt)||X,be=He._paths.clip):ze=null,dh(A,R,M,B,vt,ne,le,de,ve,we,be,ze),_e=!0}}),_e||dh(A,R,M,B,X,ne,le,de,ve,we)}const Pf=Jc|Wx;function dh(E,A,R,M,B,X,ne,le,de,ve,we,_e){ir(E,A,R,M,B),(de||ve||_e)&&(f.save(),de&&f.clip(de),ve&&f.clip(ve)),_e?(le&Pf)==Pf?(f.clip(_e),we&&f.clip(we),ga(B,ne),ma(E,X,A)):le&Wx?(ga(B,ne),f.clip(_e),ma(E,X,A)):le&Jc&&(f.save(),f.clip(_e),we&&f.clip(we),ga(B,ne),f.restore(),ma(E,X,A)):(ga(B,ne),ma(E,X,A)),(de||ve||_e)&&f.restore()}function ma(E,A,R){R>0&&(A instanceof Map?A.forEach((M,B)=>{f.strokeStyle=pa=B,f.stroke(M)}):A!=null&&E&&f.stroke(A))}function ga(E,A){A instanceof Map?A.forEach((R,M)=>{f.fillStyle=Ys=M,f.fill(R)}):A!=null&&E&&f.fill(A)}function _l(E,A,R,M){let B=I[E],X;if(M<=0)X=[0,0];else{let ne=B._space=B.space(r,E,A,R,M),le=B._incrs=B.incrs(r,E,A,R,M,ne);X=hW(A,R,le,M,ne)}return B._found=X}function ya(E,A,R,M,B,X,ne,le,de,ve){let we=ne%2/2;C==1&&f.translate(we,we),ir(le,ne,de,ve,le),f.beginPath();let _e,$e,mt,He,Ze=B+(M==0||M==3?-X:X);R==0?($e=B,He=Ze):(_e=B,mt=Ze);for(let ze=0;ze<E.length;ze++)A[ze]!=null&&(R==0?_e=mt=E[ze]:$e=He=E[ze],f.moveTo(_e,$e),f.lineTo(mt,He));f.stroke(),C==1&&f.translate(-we,-we)}function Dy(E){let A=!0;return I.forEach((R,M)=>{if(!R.show)return;let B=P[R.scale];if(B.min==null){R._show&&(A=!1,R._show=!1,Js(!1));return}else R._show||(A=!1,R._show=!0,Js(!1));let X=R.side,ne=X%2,{min:le,max:de}=B,[ve,we]=_l(M,le,de,ne==0?Xe:Ke);if(we==0)return;let _e=B.distr==2,$e=R._splits=R.splits(r,M,le,de,ve,we,_e),mt=B.distr==2?$e.map(be=>fi[be]):$e,He=B.distr==2?fi[$e[1]]-fi[$e[0]]:ve,Ze=R._values=R.values(r,R.filter(r,mt,M,we,He),M,we,He);R._rotate=X==2?R.rotate(r,Ze,M,we):0;let ze=R._size;R._size=Yi(R.size(r,Ze,M,E)),ze!=null&&R._size!=ze&&(A=!1)}),A}function fh(E){let A=!0;return Tf.forEach((R,M)=>{let B=R(r,M,Mo,E);B!=qs[M]&&(A=!1),qs[M]=B}),A}function kf(){for(let E=0;E<I.length;E++){let A=I[E];if(!A.show||!A._show)continue;let R=A.side,M=R%2,B,X,ne=A.stroke(r,E),le=R==0||R==3?-1:1;if(A.label){let ft=A.labelGap*le,Xn=zn((A._lpos+ft)*_t);Ks(A.labelFont[0],ne,"center",R==2?Vh:C2),f.save(),M==1?(B=X=0,f.translate(Xn,zn(di+Vr/2)),f.rotate((R==3?-Rm:Rm)/2)):(B=zn(vr+Lr/2),X=Xn),f.fillText(A.label,B,X),f.restore()}let[de,ve]=A._found;if(ve==0)continue;let we=P[A.scale],_e=M==0?Lr:Vr,$e=M==0?vr:di,mt=zn(A.gap*_t),He=A._splits,Ze=we.distr==2?He.map(ft=>fi[ft]):He,ze=we.distr==2?fi[He[1]]-fi[He[0]]:de,be=A.ticks,vt=A.border,Ot=be.show?zn(be.size*_t):0,Gt=A._rotate*-Rm/180,Pt=_(A._pos*_t),Je=(Ot+mt)*le,Fn=Pt+Je;X=M==0?Fn:0,B=M==1?Fn:0;let Vn=A.font[0],wr=A.align==1?Xu:A.align==2?zv:Gt>0?Xu:Gt<0?zv:M==0?"center":R==3?zv:Xu,_r=Gt||M==1?"middle":R==2?Vh:C2;Ks(Vn,ne,wr,_r);let Ur=A.font[1]*A.lineGap,on=He.map(ft=>_(c(ft,we,_e,$e))),ht=A._values;for(let ft=0;ft<ht.length;ft++){let Xn=ht[ft];if(Xn!=null){M==0?B=on[ft]:X=on[ft],Xn=""+Xn;let Hi=Xn.indexOf(`
`)==-1?[Xn]:Xn.split(/\n/gm);for(let Qr=0;Qr<Hi.length;Qr++){let Kr=Hi[Qr];Gt?(f.save(),f.translate(B,X+Qr*Ur),f.rotate(Gt),f.fillText(Kr,0,0),f.restore()):f.fillText(Kr,B,X+Qr*Ur)}}}be.show&&ya(on,be.filter(r,Ze,E,ve,ze),M,R,Pt,Ot,Ft(be.width*_t,3),be.stroke(r,E),be.dash,be.cap);let dt=A.grid;dt.show&&ya(on,dt.filter(r,Ze,E,ve,ze),M,M==0?2:1,M==0?di:vr,M==0?Vr:Lr,Ft(dt.width*_t,3),dt.stroke(r,E),dt.dash,dt.cap),vt.show&&ya([Pt],[1],M==0?1:0,M==0?1:2,M==1?di:vr,M==1?Vr:Lr,Ft(vt.width*_t,3),vt.stroke(r,E),vt.dash,vt.cap)}Nt("drawAxes")}function Js(E){w.forEach((A,R)=>{R>0&&(A._paths=null,E&&(i==1?(A.min=null,A.max=null):A.facets.forEach(M=>{M.min=null,M.max=null})))})}let eo=!1,Sl=!1,nt=[];function Rf(){Sl=!1;for(let E=0;E<nt.length;E++)Nt(...nt[E]);nt.length=0}function to(){eo||(iG(Of),eo=!0)}function Mf(E,A=!1){eo=!0,Sl=A,E(r),Of(),A&&nt.length>0&&queueMicrotask(Rf)}r.batch=Mf;function Of(){if(Ni&&(ch(),Ni=!1),ca&&(Py(),ca=!1),Gs){if(Xt(v,Xu,dn),Xt(v,Vh,qe),Xt(v,od,Xe),Xt(v,ad,Ke),Xt(S,Xu,dn),Xt(S,Vh,qe),Xt(S,od,Xe),Xt(S,ad,Ke),Xt(y,od,yr),Xt(y,ad,zs),m.width=zn(yr*_t),m.height=zn(zs*_t),I.forEach(({_el:E,_show:A,_size:R,_pos:M,side:B})=>{if(E!=null)if(A){let X=B===3||B===0?R:0,ne=B%2==1;Xt(E,ne?"left":"top",M-X),Xt(E,ne?"width":"height",R),Xt(E,ne?"top":"left",ne?qe:dn),Xt(E,ne?"height":"width",ne?Ke:Xe),Ux(E,jl)}else _i(E,jl)}),pa=Ys=uh=Qs=Li=Mt=bt=Fi=xl=null,Bt=1,Cl(!0),dn!=rr||qe!=$s||Xe!=Ro||Ke!=Hs){Js(!1);let E=Xe/Ro,A=Ke/Hs;if(Le.show&&!Ws&&Le.left>=0){Le.left*=E,Le.top*=A,va&&mo(va,zn(Le.left),0,Xe,Ke),Do&&mo(Do,0,zn(Le.top),Xe,Ke);for(let R=0;R<Fr.length;R++){let M=Fr[R];M!=null&&(Xs[R]*=E,fa[R]*=A,mo(M,Yi(Xs[R]),Yi(fa[R]),Xe,Ke))}}if(Et.show&&!_u&&Et.left>=0&&Et.width>0){Et.left*=E,Et.width*=E,Et.top*=A,Et.height*=A;for(let R in _a)Xt(Nn,R,Et[R])}rr=dn,$s=qe,Ro=Xe,Hs=Ke}Nt("setSize"),Gs=!1}yr>0&&zs>0&&(f.clearRect(0,0,m.width,m.height),Nt("drawClear"),V.forEach(E=>E()),Nt("draw")),Et.show&&_u&&(or(Et),_u=!1),Le.show&&Ws&&(Fo(null,!0,!1),Ws=!1),Z.show&&Z.live&&Xr&&(ro(),Xr=!1),h||(h=!0,r.status=1,Nt("ready")),vl=!1,eo=!1}r.redraw=(E,A)=>{ca=A||!1,E!==!1?Ln(O,F.min,F.max):to()};function ph(E,A){let R=P[E];if(R.from==null){if(On==0){let M=R.range(r,A.min,A.max,E);A.min=M[0],A.max=M[1]}if(A.min>A.max){let M=A.min;A.min=A.max,A.max=M}if(On>1&&A.min!=null&&A.max!=null&&A.max-A.min<1e-16)return;E==O&&R.distr==2&&On>0&&(A.min=Ss(A.min,e[0]),A.max=Ss(A.max,e[0]),A.min==A.max&&A.max++),se[E]=A,Ni=!0,to()}}r.setScale=ph;let fn,bl,va,Do,Df,El,sr,jn,Bi,Tl,At,Dt,Dn=!1;const Yt=Le.drag;let Ht=Yt.x,nn=Yt.y;Le.show&&(Le.x&&(fn=Vi(AH,S)),Le.y&&(bl=Vi(PH,S)),F.ori==0?(va=fn,Do=bl):(va=bl,Do=fn),At=Le.left,Dt=Le.top);const Et=r.select=In({show:!0,over:!0,left:0,width:0,top:0,height:0},t.select),Nn=Et.show?Vi(IH,Et.over?S:v):null;function or(E,A){if(Et.show){for(let R in E)Et[R]=E[R],R in _a&&Xt(Nn,R,E[R]);A!==!1&&Nt("setSelect")}}r.setSelect=or;function No(E,A){let R=w[E],M=Ie?pt[E]:null;if(R.show)M&&Ux(M,jl);else{M&&_i(M,jl);let B=da?Fr[0]:Fr[E];mo(B,-10,-10,Xe,Ke)}}function Ln(E,A,R){ph(E,{min:A,max:R})}function Tn(E,A,R,M){A.focus!=null&&mi(E),A.show!=null&&w.forEach((B,X)=>{X>0&&(E==X||E==null)&&(B.show=A.show,No(X,A.show),i==2?(Ln(B.facets[0].scale,null,null),Ln(B.facets[1].scale,null,null)):Ln(B.scale,null,null),to())}),R!==!1&&Nt("setSeries",E,A),M&&so("setSeries",r,E,A)}r.setSeries=Tn;function Lo(E,A){In(N[E],A)}function Nf(E,A){E.fill=it(E.fill||null),E.dir=wt(E.dir,-1),A=A??N.length,N.splice(A,0,E)}function mh(E){E==null?N.length=0:N.splice(E,1)}r.addBand=Nf,r.setBand=Lo,r.delBand=mh;function gh(E,A){w[E].alpha=A,Le.show&&Fr[E]&&(Fr[E].style.opacity=A),Ie&&pt[E]&&(pt[E].style.opacity=A)}let rn,yn,yt;const Ui={focus:!0};function mi(E){if(E!=yt){let A=E==null,R=Vs.alpha!=1;w.forEach((M,B)=>{if(i==1||B>0){let X=A||B==0||B==E;M._focus=A?null:X,R&&gh(B,X?1:Vs.alpha)}}),yt=E,R&&to()}}Ie&&ha&&Rn(R2,je,E=>{Le._lock||(js(E),yt!=null&&Tn(null,Ui,!0,sn.setSeries))});function gi(E,A,R){let M=P[A];R&&(E=E/_t-(M.ori==1?qe:dn));let B=Xe;M.ori==1&&(B=Ke,E=B-E),M.dir==-1&&(E=B-E);let X=M._min,ne=M._max,le=E/B,de=X+(ne-X)*le,ve=M.distr;return ve==3?Qc(10,de):ve==4?VH(de,M.asinh):ve==100?M.bwd(de):de}function Lf(E,A){let R=gi(E,O,A);return Ss(R,e[0],bn,En)}r.valToIdx=E=>Ss(E,e[0]),r.posToIdx=Lf,r.posToVal=gi,r.valToPos=(E,A,R)=>P[A].ori==0?o(E,P[A],R?Lr:Xe,R?vr:0):a(E,P[A],R?Vr:Ke,R?di:0),r.setCursor=(E,A,R)=>{At=E.left,Dt=E.top,Fo(null,A,R)};function bu(E,A){Xt(Nn,Xu,Et.left=E),Xt(Nn,od,Et.width=A)}function Eu(E,A){Xt(Nn,Vh,Et.top=E),Xt(Nn,ad,Et.height=A)}let xa=F.ori==0?bu:Eu,no=F.ori==1?bu:Eu;function Ff(){if(Ie&&Z.live)for(let E=i==2?1:0;E<w.length;E++){if(E==0&&Ne)continue;let A=Z.values[E],R=0;for(let M in A)St[E][R++].firstChild.nodeValue=A[M]}}function ro(E,A){if(E!=null&&(E.idxs?E.idxs.forEach((R,M)=>{te[M]=R}):QH(E.idx)||te.fill(E.idx),Z.idx=te[0]),Ie&&Z.live){for(let R=0;R<w.length;R++)(R>0||i==1&&!Ne)&&yh(R,te[R]);Ff()}Xr=!1,A!==!1&&Nt("setLegend")}r.setLegend=ro;function yh(E,A){let R=w[E],M=E==0&&q==2?fi:e[E],B;Ne?B=R.values(r,E,A)??ct:(B=R.value(r,A==null?null:M[A],E,A),B=B==null?ct:{_:B}),Z.values[E]=B}function Fo(E,A,R){Bi=At,Tl=Dt,[At,Dt]=Le.move(r,At,Dt),Le.left=At,Le.top=Dt,Le.show&&(va&&mo(va,zn(At),0,Xe,Ke),Do&&mo(Do,0,zn(Dt),Xe,Ke));let M,B=bn>En;rn=at,yn=null;let X=F.ori==0?Xe:Ke,ne=F.ori==1?Xe:Ke;if(At<0||On==0||B){M=Le.idx=null;for(let le=0;le<w.length;le++){let de=Fr[le];de!=null&&mo(de,-10,-10,Xe,Ke)}ha&&Tn(null,Ui,!0,E==null&&sn.setSeries),Z.live&&(te.fill(M),Xr=!0)}else{let le,de,ve;i==1&&(le=F.ori==0?At:Dt,de=gi(le,O),M=Le.idx=Ss(de,e[0],bn,En),ve=W(e[0][M],F,X,0));let we=-10,_e=-10,$e=0,mt=0,He=!0,Ze="",ze="";for(let be=i==2?1:0;be<w.length;be++){let vt=w[be],Ot=te[be],Gt=Ot==null?null:i==1?e[be][Ot]:e[be][1][Ot],Pt=Le.dataIdx(r,be,M,de),Je=Pt==null?null:i==1?e[be][Pt]:e[be][1][Pt];Xr=Xr||Je!=Gt||Pt!=Ot,te[be]=Pt;let Fn=Pt==M?ve:W(i==1?e[0][Pt]:e[be][0][Pt],F,X,0);if(be>0&&vt.show){let Vn=Je==null?-10:H(Je,i==1?P[vt.scale]:P[vt.facets[1].scale],ne,0);if(ha&&Je!=null){let wr=F.ori==1?At:Dt,_r=Hn(Vs.dist(r,be,Pt,Vn,wr));if(_r<rn){let Ur=Vs.bias;if(Ur!=0){let on=gi(wr,vt.scale),ht=Je>=0?1:-1,dt=on>=0?1:-1;dt==ht&&(dt==1?Ur==1?Je>=on:Je<=on:Ur==1?Je<=on:Je>=on)&&(rn=_r,yn=be)}else rn=_r,yn=be}}if(Xr||da){let wr,_r;F.ori==0?(wr=Fn,_r=Vn):(wr=Vn,_r=Fn);let Ur,on,ht,dt,ft,Xn,Hi=!0,Qr=Mn.bbox;if(Qr!=null){Hi=!1;let Kr=Qr(r,be);ht=Kr.left,dt=Kr.top,Ur=Kr.width,on=Kr.height}else ht=wr,dt=_r,Ur=on=Mn.size(r,be);if(Xn=Mn.fill(r,be),ft=Mn.stroke(r,be),da)be==yn&&rn<=Vs.prox&&(we=ht,_e=dt,$e=Ur,mt=on,He=Hi,Ze=Xn,ze=ft);else{let Kr=Fr[be];Kr!=null&&(Xs[be]=ht,fa[be]=dt,B2(Kr,Ur,on,Hi),L2(Kr,Xn,ft),mo(Kr,Yi(ht),Yi(dt),Xe,Ke))}}}}if(da){let be=Vs.prox,vt=yt==null?rn<=be:rn>be||yn!=yt;if(Xr||vt){let Ot=Fr[0];Xs[0]=we,fa[0]=_e,B2(Ot,$e,mt,He),L2(Ot,Ze,ze),mo(Ot,Yi(we),Yi(_e),Xe,Ke)}}}if(Et.show&&Dn)if(E!=null){let[le,de]=sn.scales,[ve,we]=sn.match,[_e,$e]=E.cursor.sync.scales,mt=E.cursor.drag;if(Ht=mt._x,nn=mt._y,Ht||nn){let{left:He,top:Ze,width:ze,height:be}=E.select,vt=E.scales[_e].ori,Ot=E.posToVal,Gt,Pt,Je,Fn,Vn,wr=le!=null&&ve(le,_e),_r=de!=null&&we(de,$e);wr&&Ht?(vt==0?(Gt=He,Pt=ze):(Gt=Ze,Pt=be),Je=P[le],Fn=W(Ot(Gt,_e),Je,X,0),Vn=W(Ot(Gt+Pt,_e),Je,X,0),xa(es(Fn,Vn),Hn(Vn-Fn))):xa(0,X),_r&&nn?(vt==1?(Gt=He,Pt=ze):(Gt=Ze,Pt=be),Je=P[de],Fn=H(Ot(Gt,$e),Je,ne,0),Vn=H(Ot(Gt+Pt,$e),Je,ne,0),no(es(Fn,Vn),Hn(Vn-Fn))):no(0,ne)}else us()}else{let le=Hn(Bi-Df),de=Hn(Tl-El);if(F.ori==1){let $e=le;le=de,de=$e}Ht=Yt.x&&le>=Yt.dist,nn=Yt.y&&de>=Yt.dist;let ve=Yt.uni;ve!=null?Ht&&nn&&(Ht=le>=ve,nn=de>=ve,!Ht&&!nn&&(de>le?nn=!0:Ht=!0)):Yt.x&&Yt.y&&(Ht||nn)&&(Ht=nn=!0);let we,_e;Ht&&(F.ori==0?(we=sr,_e=At):(we=jn,_e=Dt),xa(es(we,_e),Hn(_e-we)),nn||no(0,ne)),nn&&(F.ori==1?(we=sr,_e=At):(we=jn,_e=Dt),no(es(we,_e),Hn(_e-we)),Ht||xa(0,X)),!Ht&&!nn&&(xa(0,0),no(0,0))}if(Yt._x=Ht,Yt._y=nn,E==null){if(R){if(zi!=null){let[le,de]=sn.scales;sn.values[0]=le!=null?gi(F.ori==0?At:Dt,le):null,sn.values[1]=de!=null?gi(F.ori==1?At:Dt,de):null}so(A2,r,At,Dt,Xe,Ke,M)}if(ha){let le=R&&sn.setSeries,de=Vs.prox;yt==null?rn<=de&&Tn(yn,Ui,!0,le):rn>de?Tn(null,Ui,!0,le):yn!=yt&&Tn(yn,Ui,!0,le)}}Xr&&(Z.idx=M,ro()),A!==!1&&Nt("setCursor")}let yi=null;Object.defineProperty(r,"rect",{get(){return yi==null&&Cl(!1),yi}});function Cl(E=!1){E?yi=null:(yi=S.getBoundingClientRect(),Nt("syncRect",yi))}function qr(E,A,R,M,B,X,ne){Le._lock||Dn&&E!=null&&E.movementX==0&&E.movementY==0||(wa(E,A,R,M,B,X,ne,!1,E!=null),E!=null?Fo(null,!0,!0):Fo(A,!0,!1))}function wa(E,A,R,M,B,X,ne,le,de){if(yi==null&&Cl(!1),js(E),E!=null)R=E.clientX-yi.left,M=E.clientY-yi.top;else{if(R<0||M<0){At=-10,Dt=-10;return}let[ve,we]=sn.scales,_e=A.cursor.sync,[$e,mt]=_e.values,[He,Ze]=_e.scales,[ze,be]=sn.match,vt=A.axes[0].side%2==1,Ot=F.ori==0?Xe:Ke,Gt=F.ori==1?Xe:Ke,Pt=vt?X:B,Je=vt?B:X,Fn=vt?M:R,Vn=vt?R:M;if(He!=null?R=ze(ve,He)?c($e,P[ve],Ot,0):-10:R=Ot*(Fn/Pt),Ze!=null?M=be(we,Ze)?c(mt,P[we],Gt,0):-10:M=Gt*(Vn/Je),F.ori==1){let wr=R;R=M,M=wr}}de&&((R<=1||R>=Xe-1)&&(R=Hl(R,Xe)),(M<=1||M>=Ke-1)&&(M=Hl(M,Ke))),le?(Df=R,El=M,[sr,jn]=Le.move(r,R,M)):(At=R,Dt=M)}const _a={width:0,height:0,left:0,top:0};function us(){or(_a,!1)}let Tu,Cu,vh,Iu;function Au(E,A,R,M,B,X,ne){Dn=!0,Ht=nn=Yt._x=Yt._y=!1,wa(E,A,R,M,B,X,ne,!0,!1),E!=null&&(Rn($v,Fx,Bo,!1),so(P2,r,sr,jn,Xe,Ke,null));let{left:le,top:de,width:ve,height:we}=Et;Tu=le,Cu=de,vh=ve,Iu=we,us()}function Bo(E,A,R,M,B,X,ne){Dn=Yt._x=Yt._y=!1,wa(E,A,R,M,B,X,ne,!1,!0);let{left:le,top:de,width:ve,height:we}=Et,_e=ve>0||we>0,$e=Tu!=le||Cu!=de||vh!=ve||Iu!=we;if(_e&&$e&&or(Et),Yt.setScale&&_e&&$e){let mt=le,He=ve,Ze=de,ze=we;if(F.ori==1&&(mt=de,He=we,Ze=le,ze=ve),Ht&&Ln(O,gi(mt,O),gi(mt+He,O)),nn)for(let be in P){let vt=P[be];be!=O&&vt.from==null&&vt.min!=at&&Ln(be,gi(Ze+ze,be),gi(Ze,be))}us()}else Le.lock&&(Le._lock=!Le._lock,Fo(null,!0,!1));E!=null&&(wu($v,Fx),so($v,r,At,Dt,Xe,Ke,null))}function Yr(E,A,R,M,B,X,ne){if(Le._lock)return;js(E);let le=Dn;if(Dn){let de=!0,ve=!0,we=10,_e,$e;F.ori==0?(_e=Ht,$e=nn):(_e=nn,$e=Ht),_e&&$e&&(de=At<=we||At>=Xe-we,ve=Dt<=we||Dt>=Ke-we),_e&&de&&(At=At<sr?0:Xe),$e&&ve&&(Dt=Dt<jn?0:Ke),Fo(null,!0,!0),Dn=!1}At=-10,Dt=-10,Fo(null,!0,!0),le&&(Dn=le)}function io(E,A,R,M,B,X,ne){Le._lock||(js(E),Oo(),us(),E!=null&&so(M2,r,At,Dt,Xe,Ke,null))}function Pu(){I.forEach(dW),lh(r.width,r.height,!0)}iu(Rg,Rc,Pu);const Uo={};Uo.mousedown=Au,Uo.mousemove=qr,Uo.mouseup=Bo,Uo.dblclick=io,Uo.setSeries=(E,A,R,M)=>{let B=sn.match[2];R=B(r,A,R),R!=-1&&Tn(R,M,!0,!1)},Le.show&&(Rn(P2,S,Au),Rn(A2,S,qr),Rn(k2,S,E=>{js(E),Cl(!1)}),Rn(R2,S,Yr),Rn(M2,S,io),jx.add(r),r.syncRect=Cl);const Br=r.hooks=t.hooks||{};function Nt(E,A,R){Sl?nt.push([E,A,R]):E in Br&&Br[E].forEach(M=>{M.call(null,r,A,R)})}(t.plugins||[]).forEach(E=>{for(let A in E.hooks)Br[A]=(Br[A]||[]).concat(E.hooks[A])});const ku=(E,A,R)=>R,sn=In({key:null,setSeries:!1,filters:{pub:G2,sub:G2},scales:[O,w[1]?w[1].scale:null],match:[W2,W2,ku],values:[null,null]},Le.sync);sn.match.length==2&&sn.match.push(ku),Le.sync=sn;const zi=sn.key,$i=$k(zi);function so(E,A,R,M,B,X,ne){sn.filters.pub(E,A,R,M,B,X,ne)&&$i.pub(E,A,R,M,B,X,ne)}$i.sub(r);function Bf(E,A,R,M,B,X,ne){sn.filters.sub(E,A,R,M,B,X,ne)&&Uo[E](null,A,R,M,B,X,ne)}r.pub=Bf;function Ru(){$i.unsub(r),jx.delete(r),hi.clear(),zx(Rg,Rc,Pu),d.remove(),je==null||je.remove(),Nt("destroy")}r.destroy=Ru;function Mu(){Nt("init",t,e),Cf(e||t.data,!1),se[O]?ph(O,se[O]):Oo(),_u=Et.show&&(Et.width>0||Et.height>0),Ws=Xr=!0,lh(t.width,t.height)}return w.forEach(gl),I.forEach(Oy),n?n instanceof HTMLElement?(n.appendChild(d),Mu()):n(r,Mu):Mu(),r}Mr.assign=In;Mr.fmtNum=P_;Mr.rangeNum=Mg;Mr.rangeLog=xy;Mr.rangeAsinh=I_;Mr.orient=xu;Mr.pxRatio=_t;Mr.join=rG;Mr.fmtDate=R_,Mr.tzDate=pG;Mr.sync=$k;{Mr.addGap=QG,Mr.clipGaps=Sy;let t=Mr.paths={points:Xk};t.linear=Yk,t.stepped=JG,t.bars=eW,t.spline=nW}const Vv=1e4;function fW(t){var d;const[e,n]=pe.useState(null),[r,i]=pe.useState();pe.useLayoutEffect(()=>{if(!e)return;const m={width:t.width,height:t.height,series:[{},{stroke:"white",spanGaps:!0,pxAlign:0,points:{show:!1},label:"Buffer health"}],scales:{y:{distr:1}},axes:[{side:0,show:!1},{ticks:{size:0},side:1,stroke:"white"}],legend:{show:!1}},f=[[],[]],y=new Mr(m,f,e);i(y)},[e,t.width,t.height]);const s=t.timeManager,[o,a]=pe.useState([...s.intervals]);pe.useEffect(()=>{let m=0;const f={t:[],bufferHealth:[]},y=()=>{if(r){f.t.length>Vv&&(f.t=f.t.slice(-Vv),f.bufferHealth=f.bufferHealth.slice(-Vv));const v=Date.now()/1e3;f.t.push(v),f.bufferHealth.push(s.bufferHealth()),a([...s.intervals]),r.setData([f.t,f.bufferHealth],!0),r.setScale("x",{min:v-10,max:v})}m=requestAnimationFrame(y)};return y(),()=>cancelAnimationFrame(m)},[r,s]);let c=null;if(o.length>0){const m=o[0].startTs,f=Date.now()-m;c=Re.jsxs("div",{style:{fontSize:"12px"},children:[o.length," ",o.length>1?"intervals":"interval",":",Re.jsxs("div",{style:{fontSize:"9px",height:"48px"},children:[Re.jsxs("p",{children:["Base: ",qh(f),"s ago"]}),o.map(y=>{const v=s.prevServerTs&&y.startTs<s.prevServerTs&&s.prevServerTs<=y.endTs;let S=null;return v&&(S=` (server: ${qh((s.prevServerTs??m)-m)})`),Re.jsxs("div",{style:{paddingRight:"3px",fontWeight:v?"bold":""},children:[qh(y.startTs-m)," - ",qh(y.endTs-m),S]},y.startTs)})]})]})}let h=null;if(s.latestEngineStatus){const m=s.latestEngineStatus;let f=m.running?"Running":"Stopped";h=Re.jsxs("div",{style:{fontSize:"12px",paddingTop:"8px"},children:[Re.jsxs("p",{children:["Generation number: ",m.generationNumber]}),Re.jsxs("p",{children:["Input number: ",m.processedInputNumber]}),Re.jsxs("p",{children:["Status: ",f]}),Re.jsxs("p",{children:["Client skew: ",qh(s.clockSkew()),"s"]})]})}return(d=s.latestEngineStatus)==null||d.generationNumber,Re.jsxs("div",{style:{background:"rgb(53, 59, 89)",position:"fixed",top:"20px",left:"20px",padding:"10px",border:"1px solid rgb(23, 20, 33)",color:"white",zIndex:1},children:[Re.jsx("div",{style:{height:"20px",width:"100%",textAlign:"center"},children:"Engine stats"}),h,Re.jsx("div",{ref:n}),c]})}"4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab".match(/.{6}/g).map(t=>`#${t}`);const qh=t=>(t/1e3).toFixed(2),pW={agents:"a",conversations:"c",players:"p",operations:"o"};function Ut(t,e){const n=e[0],r=Object.entries(pW).find(([s,o])=>o===n);if(!r||r[0]!==t)throw new Error(`Invalid game ID type: ${n}`);const i=parseInt(e.slice(2),10);if(isNaN(i)||!Number.isInteger(i)||i<0)throw new Error(`Invalid game ID number: ${e}`);return e}const $a=z.string(),Jn=z.string(),B_=z.string();z.string();class mW{constructor(e){We(this,"agentId");We(this,"identity");We(this,"plan");const{agentId:n,identity:r,plan:i}=e;this.agentId=Ut("agents",n),this.identity=r,this.plan=i}serialize(){const{agentId:e,identity:n,plan:r}=this;return{agentId:e,identity:n,plan:r}}}z.string(),z.string();z.string(),z.string(),z.string();class Jk{constructor(e){We(this,"playerId");We(this,"name");We(this,"description");We(this,"character");const{playerId:n,name:r,description:i,character:s}=e;this.playerId=Ut("players",n),this.name=r,this.description=i,this.character=s}serialize(){const{playerId:e,name:n,description:r,character:i}=this;return{playerId:e,name:n,description:r,character:i}}}function gW(t){const e=[null];let n=1;return{peek:()=>e[1],length:()=>n-1,push:r=>{let i=n++,s;for(;(s=i>>1)>0;){const o=e[s];if(t(r,o))break;e[i]=o,i=s}e[i]=r},pop:()=>{if(n==1)return;n--;const r=e[1],i=e[n];let s=1,o;for(;(o=s<<1)<n;){o+1<=n&&t(e[o],e[o+1])&&o++;const a=e[o];if(t(a,i))break;e[s]=a,s=o}return e[s]=i,r}}}function Mc(t){delete t.pathfinding,t.speed=0}function Dg(t,e,n,r,i){if(Math.floor(r.x)!==r.x||Math.floor(r.y)!==r.y)throw new Error(`Non-integral destination: ${JSON.stringify(r)}`);const{position:s}=n;if(__(s,r))return;if([...t.world.conversations.values()].some(a=>{var c;return((c=a.participants.get(n.id))==null?void 0:c.status.kind)==="participating"})&&!i)throw new Error("Can't move when in a conversation. Leave the conversation first!");n.pathfinding={destination:r,started:e,state:{kind:"needsPath"}}}function yW(t,e,n,r){const i=[],s=v=>{var w,I;const{x:S,y:C}=v.position,_=[];S!==Math.floor(S)&&_.push({position:{x:Math.floor(S),y:C},facing:{dx:-1,dy:0}},{position:{x:Math.floor(S)+1,y:C},facing:{dx:1,dy:0}}),C!==Math.floor(C)&&_.push({position:{x:S,y:Math.floor(C)},facing:{dx:0,dy:-1}},{position:{x:S,y:Math.floor(C)+1},facing:{dx:0,dy:1}}),S==Math.floor(S)&&C==Math.floor(C)&&_.push({position:{x:S+1,y:C},facing:{dx:1,dy:0}},{position:{x:S-1,y:C},facing:{dx:-1,dy:0}},{position:{x:S,y:C+1},facing:{dx:0,dy:1}},{position:{x:S,y:C-1},facing:{dx:0,dy:-1}});const b=[];for(const{position:P,facing:N}of _){const O=Ji(v.position,P),D=v.length+O;if(lf(t,e,P,n.id))continue;const V=rm(P,r),G={position:P,facing:N,t:v.t+O/H5*1e3,length:D,cost:D+V,prev:v},F=(w=i[P.y])==null?void 0:w[P.x];F&&F.cost<=G.cost||(i[I=P.y]??(i[I]=[]),i[P.y][P.x]=G,b.push(G))}return b},o=n.position,a={x:o.x,y:o.y};let c={position:a,facing:n.facing,t:e,length:0,cost:rm(a,r),prev:void 0},h=c;const d=gW((v,S)=>v.cost>S.cost);for(;c&&!__(c.position,r);){rm(c.position,r)<rm(h.position,r)&&(h=c);for(const v of s(c))d.push(v);c=d.pop()}let m=null;if(!c){if(h.length===0)return null;c=h,m=c.position}const f=[];let y=c.facing;for(;c;)f.push({position:c.position,t:c.t,facing:y}),y=c.facing,c=c.prev;return f.reverse(),{path:O5(f),newDestination:m}}function lf(t,e,n,r){const i=[...t.world.players.values()].filter(s=>s.id!==r).map(s=>s.position);return vW(n,i,t.worldMap)}function vW(t,e,n){if(isNaN(t.x)||isNaN(t.y))throw new Error(`NaN position in ${JSON.stringify(t)}`);if(t.x<0||t.y<0||t.x>=n.width||t.y>=n.height)return"out of bounds";for(const r of n.objectTiles)if(r[Math.floor(t.x)][Math.floor(t.y)]!==-1)return"world blocked";for(const r of e)if(Ji(r,t)<rH)return"player";return null}const xW={playerId:Jn,invited:z.number(),status:z.union(z.object({kind:z.literal("invited")}),z.object({kind:z.literal("walkingOver")}),z.object({kind:z.literal("participating"),started:z.number()}))};class wW{constructor(e){We(this,"playerId");We(this,"invited");We(this,"status");const{playerId:n,invited:r,status:i}=e;this.playerId=Ut("players",n),this.invited=r,this.status=i}serialize(){const{playerId:e,invited:n,status:r}=this;return{playerId:e,invited:n,status:r}}}function Oc(t,e,n){const r=new Map;for(const i of t){const s=new e(i),o=n(s);if(r.has(o))throw new Error(`Duplicate ID ${o}`);r.set(o,s)}return r}function _W(t){return[...t.values()].map(e=>e.serialize())}class Cy{constructor(e){We(this,"id");We(this,"creator");We(this,"created");We(this,"isTyping");We(this,"lastMessage");We(this,"numMessages");We(this,"participants");const{id:n,creator:r,created:i,isTyping:s,lastMessage:o,numMessages:a,participants:c}=e;this.id=Ut("conversations",n),this.creator=Ut("players",r),this.created=i,this.isTyping=s&&{playerId:Ut("players",s.playerId),messageUuid:s.messageUuid,since:s.since},this.lastMessage=o&&{author:Ut("players",o.author),timestamp:o.timestamp},this.numMessages=a,this.participants=Oc(c,wW,h=>h.playerId)}tick(e,n){if(this.isTyping&&this.isTyping.since+nH<n&&delete this.isTyping,this.participants.size!==2){console.warn(`Conversation ${this.id} has ${this.participants.size} participants`);return}const[r,i]=[...this.participants.keys()],s=this.participants.get(r),o=this.participants.get(i),a=e.world.players.get(r),c=e.world.players.get(i),h=Ji(a==null?void 0:a.position,c==null?void 0:c.position);if(s.status.kind==="walkingOver"&&o.status.kind==="walkingOver"&&h<gk){console.log(`Starting conversation between ${a.id} and ${c.id}`),Mc(a),Mc(c),s.status={kind:"participating",started:n},o.status={kind:"participating",started:n};const d=y=>[{x:y.x+1,y:y.y},{x:y.x-1,y:y.y},{x:y.x,y:y.y+1},{x:y.x,y:y.y-1}],m={x:Math.floor(a.position.x),y:Math.floor(a.position.y)},f=d(m).filter(y=>!lf(e,n,y,a.id));if(f.sort((y,v)=>Ji(y,c.position)-Ji(v,c.position)),f.length>0){const y=f[0],v=d(y).filter(S=>!lf(e,n,S,c.id));if(v.sort((S,C)=>Ji(S,c.position)-Ji(C,c.position)),v.length>0){const S=v[0];Dg(e,n,a,y,!0),Dg(e,n,c,S,!0)}}}if(s.status.kind==="participating"&&o.status.kind==="participating"){const d=R5(k5(a.position,c.position));!a.pathfinding&&d&&(a.facing=d),!c.pathfinding&&d&&(c.facing.dx=-d.dx,c.facing.dy=-d.dy)}}static start(e,n,r,i){if(r.id===i.id)throw new Error("Can't invite yourself to a conversation");if([...e.world.conversations.values()].find(o=>o.participants.has(r.id))){const o=`Player ${r.id} is already in a conversation`;return console.log(o),{error:o}}if([...e.world.conversations.values()].find(o=>o.participants.has(i.id))){const o=`Player ${r.id} is already in a conversation`;return console.log(o),{error:o}}const s=e.allocId("conversations");return console.log(`Creating conversation ${s}`),e.world.conversations.set(s,new Cy({id:s,created:n,creator:r.id,numMessages:0,participants:[{playerId:r.id,invited:n,status:{kind:"walkingOver"}},{playerId:i.id,invited:n,status:{kind:"invited"}}]})),{conversationId:s}}setIsTyping(e,n,r){if(this.isTyping){if(this.isTyping.playerId!==n.id)throw new Error(`Player ${this.isTyping.playerId} is already typing in ${this.id}`);return}this.isTyping={playerId:n.id,messageUuid:r,since:e}}acceptInvite(e,n){const r=this.participants.get(n.id);if(!r)throw new Error(`Player ${n.id} not in conversation ${this.id}`);if(r.status.kind!=="invited")throw new Error(`Invalid membership status for ${n.id}:${this.id}: ${JSON.stringify(r)}`);r.status={kind:"walkingOver"}}rejectInvite(e,n,r){const i=this.participants.get(r.id);if(!i)throw new Error(`Player ${r.id} not in conversation ${this.id}`);if(i.status.kind!=="invited")throw new Error(`Rejecting invite in wrong membership state: ${this.id}:${r.id}: ${JSON.stringify(i)}`);this.stop(e,n)}stop(e,n){delete this.isTyping;for(const[r,i]of this.participants.entries()){const s=[...e.world.agents.values()].find(o=>o.playerId===r);s&&(s.lastConversation=n,s.toRemember=this.id)}e.world.conversations.delete(this.id)}leave(e,n,r){if(!this.participants.get(r.id))throw new Error(`Couldn't find membership for ${this.id}:${r.id}`);this.stop(e,n)}serialize(){const{id:e,creator:n,created:r,isTyping:i,lastMessage:s,numMessages:o}=this;return{id:e,creator:n,created:r,isTyping:i,lastMessage:s,numMessages:o,participants:_W(this.participants)}}}const SW={id:$a,creator:Jn,created:z.number(),isTyping:z.optional(z.object({playerId:Jn,messageUuid:z.string(),since:z.number()})),lastMessage:z.optional(z.object({author:Jn,timestamp:z.number()})),numMessages:z.number(),participants:z.array(z.object(xW))};z.string(),z.number();const bW=z.object({destination:w_,started:z.number(),state:z.union(z.object({kind:z.literal("needsPath")}),z.object({kind:z.literal("waiting"),until:z.number()}),z.object({kind:z.literal("moving"),path:P5}))}),EW=z.object({description:z.string(),emoji:z.optional(z.string()),until:z.number()}),Xx={id:Jn,human:z.optional(z.string()),pathfinding:z.optional(bW),activity:z.optional(EW),lastInput:z.number(),position:w_,facing:A5,speed:z.number()};class Iy{constructor(e){We(this,"id");We(this,"human");We(this,"pathfinding");We(this,"activity");We(this,"lastInput");We(this,"position");We(this,"facing");We(this,"speed");const{id:n,human:r,pathfinding:i,activity:s,lastInput:o,position:a,facing:c,speed:h}=e;this.id=Ut("players",n),this.human=r,this.pathfinding=i,this.activity=s,this.lastInput=o,this.position=a,this.facing=c,this.speed=h}tick(e,n){this.human&&this.lastInput<n-hH&&this.leave(e,n)}tickPathfinding(e,n){const{pathfinding:r,position:i}=this;if(r&&(r.state.kind==="moving"&&__(r.destination,i)&&Mc(this),r.started+J$<n&&(console.warn(`Timing out pathfinding for ${this.id}`),Mc(this)),r.state.kind==="waiting"&&r.state.until<n&&(r.state={kind:"needsPath"}),r.state.kind==="needsPath"&&e.numPathfinds<E2)){e.numPathfinds++,e.numPathfinds===E2&&console.warn("Reached max pathfinds for this step");const s=yW(e,n,this,r.destination);s===null?(console.log(`Failed to route to ${JSON.stringify(r.destination)}`),Mc(this)):(s.newDestination&&(console.warn(`Updating destination from ${JSON.stringify(r.destination)} to ${JSON.stringify(s.newDestination)}`),r.destination=s.newDestination),r.state={kind:"moving",path:s.path})}}tickPosition(e,n){if(!this.pathfinding||this.pathfinding.state.kind!=="moving"){this.speed=0;return}const r=T3(this.pathfinding.state.path,n);if(!r){console.warn(`Path out of range of ${n} for ${this.id}`);return}const{position:i,facing:s,velocity:o}=r,a=lf(e,n,i,this.id);if(a!==null){const c=Math.random()*eH;console.warn(`Stopping path for ${this.id}, waiting for ${c}ms: ${a}`),this.pathfinding.state={kind:"waiting",until:n+c};return}this.position=i,this.facing=s,this.speed=o}static join(e,n,r,i,s,o){if(o){let m=0;for(const f of e.world.players.values())if(f.human&&m++,f.human===o)throw new Error("You are already in this game!");if(m>=S2)throw new Error(`Only ${S2} human players allowed at once.`)}let a;for(let m=0;m<10;m++){const f={x:Math.floor(Math.random()*e.worldMap.width),y:Math.floor(Math.random()*e.worldMap.height)};if(!lf(e,n,f)){a=f;break}}if(!a)throw new Error("Failed to find a free position!");const c=[{dx:1,dy:0},{dx:-1,dy:0},{dx:0,dy:1},{dx:0,dy:-1}],h=c[Math.floor(Math.random()*c.length)];if(!I3.find(m=>m.name===i))throw new Error(`Invalid character: ${i}`);const d=e.allocId("players");return e.world.players.set(d,new Iy({id:d,human:o,lastInput:n,position:a,facing:h,speed:0})),e.playerDescriptions.set(d,new Jk({playerId:d,character:i,description:s,name:r})),e.descriptionsModified=!0,d}leave(e,n){const r=[...e.world.conversations.values()].find(i=>i.participants.has(this.id));r&&r.stop(e,n),e.world.players.delete(this.id)}serialize(){const{id:e,human:n,pathfinding:r,activity:i,lastInput:s,position:o,facing:a,speed:c}=this;return{id:e,human:n,pathfinding:r,activity:i,lastInput:s,position:o,facing:a,speed:c}}}z.string(),z.string(),z.string(),z.optional(z.string()),z.union(w_,z.null());const eR=N8,TW=O8,CW=z.object({engineId:z.id("engines"),number:z.number(),name:z.string(),args:z.any(),returnValue:z.optional(z.union(z.object({kind:z.literal("ok"),value:z.any()}),z.object({kind:z.literal("error"),message:z.string()}))),received:z.number()}),tR=z.object({currentTime:z.optional(z.number()),lastStepTs:z.optional(z.number()),processedInputNumber:z.optional(z.number()),running:z.boolean(),generationNumber:z.number()});kg(CW).index("byInputNumber",["engineId","number"]),kg(tR);const IW=z.object({inputId:z.id("inputs"),returnValue:z.union(z.object({kind:z.literal("ok"),value:z.any()}),z.object({kind:z.literal("error"),message:z.string()}))});z.object({engine:tR,expectedGenerationNumber:z.number(),completedInputs:z.array(IW)});async function AW(t,e,n,r){const i=Date.now(),s=await t.db.query("inputs").withIndex("byInputNumber",c=>c.eq("engineId",e)).order("desc").first(),o=s?s.number+1:0;return await t.db.insert("inputs",{engineId:e,number:o,name:n,args:r,received:i})}eR({args:{engineId:z.id("engines"),processedInputNumber:z.optional(z.number()),max:z.number()},handler:async(t,e)=>await t.db.query("inputs").withIndex("byInputNumber",n=>n.eq("engineId",e.engineId).gt("number",e.processedInputNumber??-1)).order("asc").take(e.max)});async function PW(t,e,n,r){const i=await t.db.query("worldStatus").withIndex("worldId",s=>s.eq("worldId",e)).unique();if(!i)throw new Error(`World for engine ${e} not found`);return await AW(t,i.engineId,n,r)}class kW{constructor(e){We(this,"id");We(this,"playerId");We(this,"toRemember");We(this,"lastConversation");We(this,"lastInviteAttempt");We(this,"inProgressOperation");const{id:n,lastConversation:r,lastInviteAttempt:i,inProgressOperation:s}=e,o=Ut("players",e.playerId);this.id=Ut("agents",n),this.playerId=o,this.toRemember=e.toRemember!==void 0?Ut("conversations",e.toRemember):void 0,this.lastConversation=r,this.lastInviteAttempt=i,this.inProgressOperation=s}tick(e,n){const r=e.world.players.get(this.playerId);if(!r)throw new Error(`Invalid player ID ${this.playerId}`);if(this.inProgressOperation){if(n<this.inProgressOperation.started+Z$)return;console.log(`Timing out ${JSON.stringify(this.inProgressOperation)}`),delete this.inProgressOperation}const i=e.world.playerConversation(r),s=i==null?void 0:i.participants.get(r.id),o=this.lastInviteAttempt&&n<this.lastInviteAttempt+iH,a=r.activity&&r.activity.until>n;if(a&&(i||r.pathfinding)&&(r.activity.until=n),!i&&!a&&(!r.pathfinding||!o)){this.startOperation(e,n,"agentDoSomething",{worldId:e.worldId,player:r.serialize(),otherFreePlayers:[...e.world.players.values()].filter(c=>c.id!==r.id).filter(c=>![...e.world.conversations.values()].find(h=>h.participants.has(c.id))).map(c=>c.serialize()),agent:this.serialize(),map:e.worldMap.serialize()});return}if(this.toRemember){console.log(`Agent ${this.id} remembering conversation ${this.toRemember}`),this.startOperation(e,n,"agentRememberConversation",{worldId:e.worldId,playerId:this.playerId,agentId:this.id,conversationId:this.toRemember}),delete this.toRemember;return}if(i&&s){const[c,h]=[...i.participants.entries()].find(([m])=>m!==r.id),d=e.world.players.get(c);if(s.status.kind==="invited"){d.human||Math.random()<oH?(console.log(`Agent ${r.id} accepting invite from ${d.id}`),i.acceptInvite(e,r),r.pathfinding&&delete r.pathfinding):(console.log(`Agent ${r.id} rejecting invite from ${d.id}`),i.rejectInvite(e,n,r));return}if(s.status.kind==="walkingOver"){if(s.invited+aH<n){console.log(`Giving up on invite to ${d.id}`),i.leave(e,n,r);return}const m=Ji(r.position,d.position);if(m<gk)return;if(!r.pathfinding){let f;m<tH?f={x:Math.floor(d.position.x),y:Math.floor(d.position.y)}:f={x:Math.floor((r.position.x+d.position.x)/2),y:Math.floor((r.position.y+d.position.y)/2)},console.log(`Agent ${r.id} walking towards ${d.id}...`,f),Dg(e,n,r,f)}return}if(s.status.kind==="participating"){const m=s.status.started;if(i.isTyping&&i.isTyping.playerId!==r.id)return;if(!i.lastMessage){const S=i.creator===r.id,C=m+b2;if(S||C<n){console.log(`${r.id} initiating conversation with ${d.id}.`);const _=crypto.randomUUID();i.setIsTyping(n,r,_),this.startOperation(e,n,"agentGenerateMessage",{worldId:e.worldId,playerId:r.id,agentId:this.id,conversationId:i.id,otherPlayerId:d.id,messageUuid:_,type:"start"});return}else return}if(m+lH<n||i.numMessages>uH){console.log(`${r.id} leaving conversation with ${d.id}.`);const S=crypto.randomUUID();i.setIsTyping(n,r,S),this.startOperation(e,n,"agentGenerateMessage",{worldId:e.worldId,playerId:r.id,agentId:this.id,conversationId:i.id,otherPlayerId:d.id,messageUuid:S,type:"leave"});return}if(i.lastMessage.author===r.id){const S=i.lastMessage.timestamp+b2;if(n<S)return}const y=i.lastMessage.timestamp+cH;if(n<y)return;console.log(`${r.id} continuing conversation with ${d.id}.`);const v=crypto.randomUUID();i.setIsTyping(n,r,v),this.startOperation(e,n,"agentGenerateMessage",{worldId:e.worldId,playerId:r.id,agentId:this.id,conversationId:i.id,otherPlayerId:d.id,messageUuid:v,type:"continue"});return}}}startOperation(e,n,r,i){if(this.inProgressOperation)throw new Error(`Agent ${this.id} already has an operation: ${JSON.stringify(this.inProgressOperation)}`);const s=e.allocId("operations");console.log(`Agent ${this.id} starting operation ${r} (${s})`),e.scheduleOperation(r,{operationId:s,...i}),this.inProgressOperation={name:r,operationId:s,started:n}}serialize(){return{id:this.id,playerId:this.playerId,toRemember:this.toRemember,lastConversation:this.lastConversation,lastInviteAttempt:this.lastInviteAttempt,inProgressOperation:this.inProgressOperation}}}const RW={id:B_,playerId:Jn,toRemember:z.optional($a),lastConversation:z.optional(z.number()),lastInviteAttempt:z.optional(z.number()),inProgressOperation:z.optional(z.object({name:z.string(),operationId:z.string(),started:z.number()}))};TW({args:{worldId:z.id("worlds"),conversationId:$a,agentId:B_,playerId:Jn,text:z.string(),messageUuid:z.string(),leaveConversation:z.boolean(),operationId:z.string()},handler:async(t,e)=>{await t.db.insert("messages",{conversationId:e.conversationId,author:e.playerId,text:e.text,messageUuid:e.messageUuid,worldId:e.worldId}),await PW(t,e.worldId,"agentFinishSendingMessage",{conversationId:e.conversationId,agentId:e.agentId,timestamp:Date.now(),leaveConversation:e.leaveConversation,operationId:e.operationId})}});eR({args:{now:z.number(),worldId:z.id("worlds"),player:z.object(Xx),otherFreePlayers:z.array(z.object(Xx))},handler:async(t,{now:e,worldId:n,player:r,otherFreePlayers:i})=>{var a;const{position:s}=r,o=[];for(const c of i){const h=await t.db.query("participatedTogether").withIndex("edge",d=>d.eq("worldId",n).eq("player1",r.id).eq("player2",c.id)).order("desc").first();h&&e<h.ended+sH||o.push({id:c.id,position:s})}return o.sort((c,h)=>Ji(c.position,s)-Ji(h.position,s)),(a=o[0])==null?void 0:a.id}});const MW=z.array(z.object({playerId:Jn,location:z.bytes()}));z.number(),z.array(z.object(SW)),z.array(z.object(Xx)),z.array(z.object(RW)),z.optional(MW);class OW{constructor(e){We(this,"nextId");We(this,"conversations");We(this,"players");We(this,"agents");We(this,"historicalLocations");const{nextId:n,historicalLocations:r}=e;if(this.nextId=n,this.conversations=Oc(e.conversations,Cy,i=>i.id),this.players=Oc(e.players,Iy,i=>i.id),this.agents=Oc(e.agents,kW,i=>i.id),r){this.historicalLocations=new Map;for(const{playerId:i,location:s}of r)this.historicalLocations.set(Ut("players",i),s)}}playerConversation(e){return[...this.conversations.values()].find(n=>n.participants.has(e.id))}serialize(){return{nextId:this.nextId,conversations:[...this.conversations.values()].map(e=>e.serialize()),players:[...this.players.values()].map(e=>e.serialize()),agents:[...this.agents.values()].map(e=>e.serialize()),historicalLocations:this.historicalLocations&&[...this.historicalLocations.entries()].map(([e,n])=>({playerId:e,location:n}))}}}const DW=z.array(z.array(z.number())),NW={x:z.number(),y:z.number(),w:z.number(),h:z.number(),layer:z.number(),sheet:z.string(),animation:z.string()};z.number(),z.number(),z.string(),z.number(),z.number(),z.number(),z.array(z.array(z.array(z.number()))),z.array(DW),z.array(z.object(NW));class LW{constructor(e){We(this,"width");We(this,"height");We(this,"tileSetUrl");We(this,"tileSetDimX");We(this,"tileSetDimY");We(this,"tileDim");We(this,"bgTiles");We(this,"objectTiles");We(this,"animatedSprites");this.width=e.width,this.height=e.height,this.tileSetUrl=e.tileSetUrl,this.tileSetDimX=e.tileSetDimX,this.tileSetDimY=e.tileSetDimY,this.tileDim=e.tileDim,this.bgTiles=e.bgTiles,this.objectTiles=e.objectTiles,this.animatedSprites=e.animatedSprites}serialize(){return{width:this.width,height:this.height,tileSetUrl:this.tileSetUrl,tileSetDimX:this.tileSetDimX,tileSetDimY:this.tileSetDimY,tileDim:this.tileDim,bgTiles:this.bgTiles,objectTiles:this.objectTiles,animatedSprites:this.animatedSprites}}}function FW(t){const e=ul(Fs.world.worldState,t?{worldId:t}:"skip"),n=ul(Fs.world.gameDescriptions,t?{worldId:t}:"skip");return pe.useMemo(()=>{if(!(!e||!n))return{world:new OW(e.world),agentDescriptions:Oc(n.agentDescriptions,mW,i=>i.agentId),playerDescriptions:Oc(n.playerDescriptions,Jk,i=>i.playerId),worldMap:new LW(n.worldMap)}},[e,n])}function nR(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=nR(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function BW(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=nR(t))&&(r&&(r+=" "),r+=e);return r}function UW({worldId:t,scrollViewRef:e}){const n=ul(Fs.messages.listRecentByWorld,{worldId:t,limit:300});if(!n)return null;const r=a=>{const c=["bubble-rose","bubble-sky","bubble-lemon","bubble-mint","bubble-lilac","bubble-clay"];let h=0;for(let d=0;d<a.length;d++)h+=a.charCodeAt(d);return c[h%c.length]},i={current:!0},s=e.current;if(s){const a=()=>{i.current=!!(s&&s.scrollHeight-s.scrollTop-50<=s.clientHeight)};s.addEventListener("scroll",a,{once:!0}),i.current&&s.scrollTo({top:s.scrollHeight,behavior:"smooth"})}const o=n.slice().sort((a,c)=>a._creationTime-c._creationTime).map(a=>Re.jsxs("div",{className:"leading-tight mb-3",children:[Re.jsxs("div",{className:"flex gap-2",children:[Re.jsx("span",{className:"uppercase flex-grow",children:a.authorName}),Re.jsx("time",{dateTime:a._creationTime.toString(),className:"text-xs text-gray-500",children:new Date(a._creationTime).toLocaleTimeString("zh-CN",{hour12:!1})})]}),Re.jsx("div",{className:BW("bubble",r(a.author)),children:Re.jsx("p",{className:"bubble-content -mx-3 -my-1",children:a.text})})]},`feed-${a._id}`));return Re.jsx("div",{className:"text-base sm:text-sm",children:o})}const rR=!!{}.VITE_SHOW_DEBUG_UI;function zW(){const t=b_(),[e,n]=pe.useState(),[r,{width:i,height:s}]=Q$(),o=ul(Fs.world.defaultWorldStatus),a=o==null?void 0:o.worldId,c=o==null?void 0:o.engineId,h=FW(a);dH();const d=ul(Fs.world.worldState,a?{worldId:a}:"skip"),{historicalTime:m,timeManager:f}=fH(d==null?void 0:d.engine),y=pe.useRef(null);return!a||!c||!h?null:Re.jsxs(Re.Fragment,{children:[rR&&Re.jsx(fW,{timeManager:f,width:200,height:100}),Re.jsxs("div",{className:"mx-auto w-full grid grid-rows-[240px_1fr] lg:grid-rows-[1fr] lg:grid-cols-[1fr_auto] lg:grow max-w-[1400px] min-h-[480px]",children:[Re.jsx("div",{className:"relative overflow-hidden",ref:r,children:Re.jsx("div",{className:"absolute inset-0",children:Re.jsx("div",{className:"container",children:Re.jsx(hr.Stage,{width:i,height:s,options:{backgroundAlpha:0},children:Re.jsx(L3,{client:t,children:Re.jsx(Y$,{game:h,worldId:a,engineId:c,width:i,height:s,historicalTime:m,setSelectedElement:n})})})})})}),Re.jsx("div",{className:"flex flex-col overflow-y-auto shrink-0 px-4 py-4 sm:px-4 lg:w-96 xl:pr-4",ref:y,children:a&&Re.jsx(UW,{worldId:a,scrollViewRef:y})})]})]})}function $W(){return Re.jsx("main",{className:"relative flex min-h-screen flex-col font-body",children:Re.jsx("div",{className:"w-full lg:h-screen min-h-screen overflow-hidden flex flex-col",children:Re.jsx(zW,{})})})}function HW(){return"https://grandiose-iguana-829.convex.cloud"}const GW=new q6(HW(),{unsavedChangesWarning:!1});function WW({children:t}){return Re.jsx(L3,{client:GW,children:t})}Xv.createRoot(document.getElementById("root")).render(Re.jsx(rt.StrictMode,{children:Re.jsx(WW,{children:Re.jsx($W,{})})}))});export default jW();
